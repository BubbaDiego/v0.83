"use strict";(self.webpackChunk_solflare_extension=self.webpackChunk_solflare_extension||[]).push([["libs_shared_dist_components_ConfirmationHelpers_ConfirmationCloseStake_js-libs_shared_dist_fe-904021"],{"../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationCloseStake.js":(t,e,s)=>{s.d(e,{Z:()=>x});var i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),a=s("../../libs/foundation-ui/dist/index.js"),o=s("../../libs/shared/dist/constants/mints.js"),r=s("../../libs/shared/dist/features/currencies/hooks/index.js"),l=s("../../libs/shared/dist/features/portfolio/hooks/index.js"),d=s("../../libs/shared/dist/utils/displayPrice.js"),u=s("../../libs/shared/dist/utils/extension.js"),c=s("../../libs/shared/dist/components/TokenAvatar/index.js"),m=s("../../libs/shared/dist/components/ConfirmationHelpers/assets/close_in.json"),h=s("../../libs/shared/dist/components/ConfirmationHelpers/assets/close_out.json"),j=s("../../libs/shared/dist/components/ConfirmationHelpers/LottieIllustration.js"),f=s("../../libs/shared/dist/components/ConfirmationHelpers/NetworkFeeListItem.js");const x=({validatorName:t,validatorImage:e,receiveSol:s,animation:x,onAnimationEnd:b})=>{const{t:p}=(0,n.$)(),{data:g}=(0,l.Dm)(),{value:k,prefix:_,price:S}=(0,r.yF)(s,g?.price?.price);return(0,i.jsx)(a.Confirmation,{isExtension:u.UJ,illustration:(0,i.jsx)(j.u,{play:!0,loop:!1,onComplete:b,animationData:"in"===x?m:h},x),listItemsTop:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.ListItemS,{left:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitle,{title:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitleTitle,{children:p("confirm_transaction_validator_label")})}),children:(0,i.jsx)(a.ListItemSRightAmountAndValue,{children:(0,i.jsxs)(a.ListItemSRightAmount,{children:[(0,i.jsx)(a.ValidatorAvatar,{src:e,size:"s"}),t]})})}),(0,i.jsx)(a.ListItemS,{left:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitle,{title:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitleTitle,{children:p("confirm_transaction_receive_sol")})}),children:(0,i.jsxs)(a.ListItemSRightAmountAndValue,{children:[(0,i.jsxs)(a.ListItemSRightAmount,{children:[(0,i.jsx)(c.y,{src:o.vx.logoURI,verified:!0,size:"s"}),(0,d.ED)({amount:s,displayType:"solana"})]}),(0,i.jsx)(a.ListItemSRightValue,{children:S?(0,d.ED)({amount:k,displayType:"value",prefix:_}):void 0})]})})]}),listItemsBottom:(0,i.jsx)(f.x,{})})}},"../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationInstantUnstaking.js":(t,e,s)=>{s.d(e,{Z:()=>b});var i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),a=s("../../libs/foundation-ui/dist/index.js"),o=s("../../libs/shared/dist/constants/mints.js"),r=s("../../libs/shared/dist/features/currencies/hooks/index.js"),l=s("../../libs/shared/dist/features/pfp/components/index.js"),d=s("../../libs/shared/dist/features/portfolio/hooks/index.js"),u=s("../../libs/shared/dist/utils/displayPrice.js"),c=s("../../libs/shared/dist/utils/extension.js"),m=s("../../libs/shared/dist/components/TokenAvatar/index.js"),h=s("../../libs/shared/dist/components/ConfirmationHelpers/assets/unstake_in.json"),j=s("../../libs/shared/dist/components/ConfirmationHelpers/assets/unstake_out.json"),f=s("../../libs/shared/dist/components/ConfirmationHelpers/LottieIllustration.js"),x=s("../../libs/shared/dist/components/ConfirmationHelpers/NetworkFeeListItem.js");const b=({amount:t,validatorName:e,validatorImage:s,walletName:b,walletPubkey:p,animation:g,onAnimationEnd:k})=>{const{t:_}=(0,n.$)(),{data:S}=(0,d.Dm)(),{value:v,prefix:y,price:I}=(0,r.yF)(t,S?.price?.price);return(0,i.jsx)(a.Confirmation,{isExtension:c.UJ,illustration:(0,i.jsx)(f.u,{play:!0,loop:!1,onComplete:k,animationData:"in"===g?h:j},g),listItemsTop:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.ListItemS,{left:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitle,{title:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitleTitle,{children:_("confirm_transaction_token_label")})}),children:(0,i.jsxs)(a.ListItemSRightAmountAndValue,{children:[(0,i.jsxs)(a.ListItemSRightAmount,{children:[(0,i.jsx)(m.y,{src:o.vx.logoURI,verified:!0,size:"s"}),(0,u.ED)({amount:t,displayType:"solana",suffix:" SOL"})]}),(0,i.jsx)(a.ListItemSRightValue,{children:I?(0,u.ED)({amount:v,displayType:"value",prefix:y}):void 0})]})}),(0,i.jsx)(a.ListItemS,{left:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitle,{title:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitleTitle,{children:_("confirm_transaction_validator_label")})}),children:(0,i.jsx)(a.ListItemSRightAmountAndValue,{children:(0,i.jsxs)(a.ListItemSRightAmount,{children:[(0,i.jsx)(a.ValidatorAvatar,{src:s,size:"s"}),e]})})}),(0,i.jsx)(a.ListItemS,{left:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitle,{title:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitleTitle,{children:_("staking_unstake_time_label")})}),children:(0,i.jsx)(a.ListItemSRightAmountAndValue,{children:(0,i.jsx)(a.ListItemSRightAmount,{children:_("staking_instant_unstake_time_instant")})})}),(0,i.jsx)(a.ListItemS,{left:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitle,{title:(0,i.jsx)(a.ListItemSLeftTitleAndSubtitleTitle,{children:_("confirm_transaction_to_label")})}),children:(0,i.jsxs)(a.ListItemSRightAmount,{children:[(0,i.jsx)(l.y,{publicKey:p,size:"s"}),b]})})]}),listItemsBottom:(0,i.jsx)(x.x,{})})}},"../../libs/shared/dist/features/staking/shared/InstantUnstakeSpeedupBanner.js":(t,e,s)=>{s.d(e,{v:()=>S});var i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),a=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),o=s("../../../node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js"),r=s("../../../node_modules/bignumber.js/bignumber.js"),l=s.n(r),d=s("../../libs/foundation-ui/dist/index.js"),u=s("../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationInstantUnstaking.js"),c=s("../../libs/shared/dist/hooks/useSolanaBalance/index.js"),m=s("../../libs/shared/dist/utils/lamportToSol.js"),h=s("../../libs/shared/dist/utils/truncateMiddle.js"),j=s("../../libs/shared/dist/features/currencies/hooks/index.js"),f=s("../../libs/shared/dist/features/featureFlags/index.js"),x=s("../../libs/shared/dist/features/globalConfig/hooks/index.js"),b=s("../../libs/shared/dist/features/portfolio/queries/index.js"),p=s("../../libs/shared/dist/features/stakingCore/api/transactions.js"),g=s("../../libs/shared/dist/features/stakingCore/hooks/useInstantUnstakeQuote.js"),k=s("../../libs/shared/dist/features/transactionFlow/context/index.js"),_=s("../../libs/shared/dist/features/walletData/hooks/index.js");const S=({stakeAccount:t,onConfirm:e,close:s})=>{const{t:r}=(0,a.$)(),[S,v]=(0,n.useState)(!1),y=(0,o.NL)(),{transactionInit:I}=(0,k.p)(),{publicKey:L,accountName:A}=(0,_.rT)(),{lamports:T}=(0,c.h)(),{computeUnitPrice:w}=(0,b.NT)(),C=new(l())(2e5).times(w).div(Math.pow(10,6)).plus(5e3).toNumber(),P=(0,j.Af)(),R=(0,x.LN)(),{data:E,isFetching:N,isSuccess:F}=(0,g.J)({stakeAccountPubkey:t.publicKey,network:R.cluster,currency:P.ticker,enabled:!S});return(0,i.jsx)(d.InstantUnstakeBanner,{title:r("staking_instant_unstake_banner_title"),subtitle:r("staking_instant_unstake_banner_subtitle",{fee:new(l())(E?.fee?.percentage??0).times(100).toString()}),buttonTitle:r("staking_instant_unstake_banner_cta"),isLoading:S||N||!F||T<C,onClick:async()=>{if(!E)return;const n=(0,m.s)(E.outAmount??0),a=(0,m.s)(E.inAmount??0);v(!0),await I({title:r("confirm_transaction_title_instant_unstake"),commitment:"confirmed",txBuilder:p.l,builderParams:{stakeAccount:t.publicKey,outAmount:E.outAmount,route:E.routeName,network:R.cluster},ffLogFunction:f.Ic,ffParams:{validatorName:t.validator?.name??"",validatorNodePubKey:t.validator?.nodePublicKey??"",validatorVotePubKey:t.validator?.votePublicKey??"",source:"stakeAccountDeactivating",market:E.routeName,amountInSol:a.toString(),amountInUsd:a.times(E.solPrice.usd).toString(),feeTotalPercentage:E.fee.percentage,solflareFeeAmountInSol:(0,m.s)(E.ourFee?.amount??0).toString(),solflareFeeAmountInUsd:(0,m.s)(E.ourFee?.amount??0).times(E.solPrice.usd).toString()},confirmDialog:({animation:e,onAnimationEnd:s})=>(0,i.jsx)(u.Z,{amount:n.toString(),validatorName:t.validator?.name??(0,h.r)(t.validator?.votePublicKey),validatorImage:t.validator?.image??void 0,walletName:A,walletPubkey:L,animation:e,onAnimationEnd:s}),onBroadcast:({status:t})=>{"success"===t&&s?.()},onConfirm:({status:t})=>{"success"===t&&(e?.(),y.invalidateQueries({queryKey:["staking-accounts"]}))},onEnd:()=>{v(!1)}})}})}},"../../libs/shared/dist/features/staking/shared/RewardsList.js":(t,e,s)=>{s.d(e,{O:()=>h});var i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),a=s("../../libs/foundation-ui/dist/index.js"),o=s("../../libs/shared/dist/assets/EmptyStates/staking-empty.png"),r=s("../../libs/shared/dist/utils/displayPrice.js"),l=s("../../libs/shared/dist/utils/humanDate.js"),d=s("../../libs/shared/dist/utils/lamportToSol.js"),u=s("../../libs/shared/dist/features/currencies/components/index.js"),c=s("../../libs/shared/dist/features/portfolio/hooks/index.js"),m=s("../../libs/shared/dist/features/stakingCore/index.js");const h=({stakingAccount:{publicKey:t,activationEpoch:e}})=>{const{t:s}=(0,n.$)(),{data:h,isFetching:j}=(0,m.tb)(t,e),f=h?.rewards??[],{data:x}=(0,c.Dm)();return j?(0,i.jsx)(a.RewardListSkeleton,{}):f?.length?(0,i.jsx)(a.DetailsList,{fullWidthNegativeMarginSeparator:!0,extractKey:t=>String(t.epoch),data:f,renderItem:t=>(0,i.jsx)(a.ListItemRewards,{date:(0,l.rN)(1e3*t.rewardTime,!0,!1,!0),amount:(0,r.ED)({amount:(0,d.s)(t.amount),displayType:"amount",suffix:" SOL"}),value:(0,i.jsx)(u.sp,{value:(0,d.s)(t.amount).multipliedBy(x?.price?.price??0).toString()})})}):(0,i.jsx)(a.Section,{children:(0,i.jsx)(a.EmptyState,{title:(0,i.jsx)(a.Title,{children:s("staking_no_staking_rewards_yet_title")}),illustration:(0,i.jsx)(a.Illustration,{aspectRatio:"ar4-3",children:(0,i.jsx)("img",{style:{maxWidth:"200px",paddingTop:"24px"},src:o,alt:"No rewards"})}),children:(0,i.jsx)(a.Paragraph,{textAlign:"center",children:s("staking_no_staking_rewards_yet_subtitle")})})})}},"../../libs/shared/dist/features/stakingCore/api/transactions.js":(t,e,s)=>{s.d(e,{B:()=>l,l:()=>d});var i=s("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),n=s("../../../node_modules/base64-js/index.js"),a=s("../../libs/shared/dist/api/index.js"),o=s("../../../node_modules/console-browserify/index.js");const r="https://wallet-api.solflare.com",l=async(t,e,s)=>{const{body:i}=await(0,a.v_)(`${r}/v2/unstake/quote`,{stakeAccount:t,network:e,currency:s});return i},d=async t=>{try{const{body:e}=await(0,a.v_)(`${r}/v2/unstake/tx`,t);if(e?.error)throw new Error(e.error);if(!e?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:i.VersionedTransaction.deserialize(n.toByteArray(e.txs[0])),fees:e.fees||[]}}catch(t){throw o.dir(t),new Error(t?.response?.data?.error||t?.message)}}},"../../libs/shared/dist/features/stakingCore/hooks/useInstantUnstakeQuote.js":(t,e,s)=>{s.d(e,{J:()=>a});var i=s("../../../node_modules/@tanstack/react-query/build/modern/useQuery.js"),n=s("../../libs/shared/dist/features/stakingCore/api/transactions.js");const a=({stakeAccountPubkey:t,network:e,currency:s,enabled:a=!0})=>(0,i.a)({queryKey:["unstakeTx",t],queryFn:()=>(0,n.B)(t,e,s),enabled:a,refetchInterval:2e4,gcTime:0,retry:!1})},"../../libs/shared/dist/features/stakingModal/hooks/useUnstakeForm.js":(t,e,s)=>{s.d(e,{K:()=>N});var i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),a=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),o=s("../../../node_modules/react-router/dist/index.js"),r=s("../../../node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js"),l=s("../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationInstantUnstaking.js"),d=s("../../libs/foundation-ui/dist/index.js"),u=s("../../libs/shared/dist/constants/mints.js"),c=s("../../libs/shared/dist/features/currencies/hooks/index.js"),m=s("../../libs/shared/dist/features/portfolio/hooks/index.js"),h=s("../../libs/shared/dist/utils/displayPrice.js"),j=s("../../libs/shared/dist/utils/extension.js"),f=s("../../libs/shared/dist/components/TokenAvatar/index.js"),x=s("../../libs/shared/dist/components/ConfirmationHelpers/assets/unstake_in.json"),b=s("../../libs/shared/dist/components/ConfirmationHelpers/assets/unstake_out.json"),p=s("../../libs/shared/dist/components/ConfirmationHelpers/LottieIllustration.js"),g=s("../../libs/shared/dist/components/ConfirmationHelpers/NetworkFeeListItem.js");const k=({amount:t,validatorName:e,validatorImage:s,unstakeTime:n,animation:o,onAnimationEnd:r})=>{const{t:l}=(0,a.$)(),{data:k}=(0,m.Dm)(),{value:_,prefix:S,price:v}=(0,c.yF)(t,k?.price?.price);return(0,i.jsx)(d.Confirmation,{isExtension:j.UJ,illustration:(0,i.jsx)(p.u,{play:!0,loop:!1,onComplete:r,animationData:"in"===o?x:b},o),listItemsTop:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.ListItemS,{left:(0,i.jsx)(d.ListItemSLeftTitleAndSubtitle,{title:(0,i.jsx)(d.ListItemSLeftTitleAndSubtitleTitle,{children:l("confirm_transaction_token_label")})}),children:(0,i.jsxs)(d.ListItemSRightAmountAndValue,{children:[(0,i.jsxs)(d.ListItemSRightAmount,{children:[(0,i.jsx)(f.y,{src:u.vx.logoURI,verified:!0,size:"s"}),(0,h.ED)({amount:t,displayType:"solana",suffix:" SOL"})]}),(0,i.jsx)(d.ListItemSRightValue,{children:v?(0,h.ED)({amount:_,displayType:"value",prefix:S}):void 0})]})}),(0,i.jsx)(d.ListItemS,{left:(0,i.jsx)(d.ListItemSLeftTitleAndSubtitle,{title:(0,i.jsx)(d.ListItemSLeftTitleAndSubtitleTitle,{children:l("confirm_transaction_validator_label")})}),children:(0,i.jsx)(d.ListItemSRightAmountAndValue,{children:(0,i.jsxs)(d.ListItemSRightAmount,{children:[(0,i.jsx)(d.ValidatorAvatar,{src:s,size:"s"}),e]})})}),(0,i.jsx)(d.ListItemS,{left:(0,i.jsx)(d.ListItemSLeftTitleAndSubtitle,{title:(0,i.jsx)(d.ListItemSLeftTitleAndSubtitleTitle,{children:l("staking_unstake_time_label")})}),children:(0,i.jsx)(d.ListItemSRightAmountAndValue,{children:(0,i.jsx)(d.ListItemSRightAmount,{children:n})})})]}),listItemsBottom:(0,i.jsx)(g.x,{})})};var _=s("../../libs/shared/dist/constants/routes.js"),S=s("../../libs/shared/dist/hooks/useSolanaBalance/index.js"),v=s("../../libs/shared/dist/utils/lamportToSol.js"),y=s("../../libs/shared/dist/utils/timeRemaining.js"),I=s("../../libs/shared/dist/utils/truncateMiddle.js"),L=s("../../libs/shared/dist/features/featureFlags/index.js"),A=s("../../libs/shared/dist/features/globalConfig/hooks/index.js"),T=s("../../libs/shared/dist/features/staking/api/staking.js"),w=s("../../libs/shared/dist/features/stakingCore/index.js"),C=s("../../libs/shared/dist/features/stakingCore/api/transactions.js"),P=s("../../libs/shared/dist/features/stakingCore/hooks/useInstantUnstakeQuote.js"),R=s("../../libs/shared/dist/features/transactionFlow/context/index.js"),E=s("../../libs/shared/dist/features/walletData/hooks/index.js");const N=({stakeAccount:t,close:e})=>{const{t:s}=(0,a.$)(),d=(0,o.s0)(),{usdPrice:u}=(0,S.h)(),[m,h]=(0,n.useState)(!1),[f,x]=(0,n.useState)(!1),{transactionInit:b}=(0,R.p)(),{publicKey:p,accountName:g}=(0,E.rT)(),N=(0,r.NL)(),F=(0,c.Af)(),K=(0,A.LN)(),{data:U}=(0,w.ku)(),D=(0,y.X)(U?.header.epochEndSeconds??0),{data:B,isFetching:V,isSuccess:$,isError:H}=(0,P.J)({stakeAccountPubkey:t.publicKey,network:K.cluster,currency:F.ticker,enabled:m&&!f});(0,n.useEffect)((()=>{m&&!V&&H&&h(!1)}),[m,H,V]);const M=async()=>{const n=(0,v.s)(t.amount??0);x(!0),await b({title:s("confirm_transaction_title_unstake_stake_account"),commitment:"confirmed",txBuilder:T.vg,builderParams:{address:p,stakeAccount:t.publicKey,setComputeBudget:!0,network:K.cluster},ffLogFunction:L.Iz,ffParams:{validatorName:t.validator?.name??"",validatorNodePubKey:t.validator?.nodePublicKey??"",validatorVotePubKey:t.validator?.votePublicKey??"",amountInSol:n.toString(),amountInUsd:n.times(u).toString()},confirmDialog:({animation:e,onAnimationEnd:s})=>(0,i.jsx)(k,{amount:n.toString(),validatorName:t.validator?.name??(0,I.r)(t.validator?.votePublicKey),validatorImage:t.validator?.image??void 0,unstakeTime:D,animation:e,onAnimationEnd:s}),onBroadcast:({status:t})=>{"success"===t&&e?.()},onConfirm:({status:t})=>{"success"===t&&N.invalidateQueries({queryKey:["staking-accounts"]})},onEnd:()=>{x(!1)}})};return{instantChecked:m,setInstantChecked:h,unstake:async()=>m?(async()=>{if(!B)return;const n=(0,v.s)(B.outAmount??0),a=(0,v.s)(B.inAmount??0);x(!0),await b({title:s("confirm_transaction_title_instant_unstake"),commitment:"confirmed",txBuilder:C.l,builderParams:{stakeAccount:t.publicKey,outAmount:B.outAmount,route:B.routeName,network:K.cluster},ffLogFunction:L.Ic,ffParams:{validatorName:t.validator?.name??"",validatorNodePubKey:t.validator?.nodePublicKey??"",validatorVotePubKey:t.validator?.votePublicKey??"",source:"stakeAccountActive",market:B.routeName,amountInSol:a.toString(),amountInUsd:a.times(B.solPrice.usd).toString(),feeTotalPercentage:B.fee.percentage,solflareFeeAmountInSol:(0,v.s)(B.ourFee?.amount??0).toString(),solflareFeeAmountInUsd:(0,v.s)(B.ourFee?.amount??0).times(B.solPrice.usd).toString()},confirmDialog:({animation:e,onAnimationEnd:s})=>(0,i.jsx)(l.Z,{amount:n.toString(),validatorName:t.validator?.name??(0,I.r)(t.validator?.votePublicKey),validatorImage:t.validator?.image??void 0,walletName:g,walletPubkey:p,animation:e,onAnimationEnd:s}),onBroadcast:({status:t})=>{"success"===t&&(e?.(),j.UJ&&d(_.xm))},onConfirm:({status:t})=>{"success"===t&&N.invalidateQueries({queryKey:["staking-accounts"]})},onEnd:()=>{x(!1)}})})():M(),stakeAccountsData:U,standardUnstake:M,unstakeTx:B,isFetching:V,isSuccess:$,isLoading:f,epochEnding:D}}},"../../libs/shared/dist/features/stakingModal/shared/UnstakeModal.js":(t,e,s)=>{s.d(e,{K:()=>p});var i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),a=s("../../../node_modules/bignumber.js/bignumber.js"),o=s.n(a),r=s("../../libs/foundation-ui/dist/index.js"),l=s("../../libs/shared/dist/modals/index.js"),d=s("../../libs/shared/dist/utils/displayPrice.js"),u=s("../../libs/shared/dist/utils/lamportToSol.js"),c=s("../../libs/shared/dist/features/currencies/components/index.js"),m=s("../../libs/shared/dist/features/portfolio/hooks/index.js"),h=s("../../libs/shared/dist/features/stakingModal/hooks/useUnstakeForm.js"),j=s("../../../node_modules/react/index.js"),f=s("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),x=s("../../libs/shared/dist/hooks/useSolanaBalance/index.js"),b=s("../../libs/shared/dist/features/portfolio/queries/index.js");const p=({stakeAccount:t,close:e,onBack:s})=>{const{t:a}=(0,n.$)(),{data:p}=(0,m.Dm)(),{instantChecked:g,setInstantChecked:k,unstake:_,stakeAccountsData:S,unstakeTx:v,isFetching:y,isSuccess:I,isLoading:L,epochEnding:A}=(0,h.K)({stakeAccount:t,close:()=>{g?e():s?.()}}),{isLoading:T,alertProps:w}=(()=>{const{t}=(0,n.$)(),{isPending:e,lamports:s}=(0,x.h)(),{computeUnitPrice:i}=(0,b.NT)(),a=(0,j.useMemo)((()=>{if(e)return;const n=new(o())(2e5).times(i).div(Math.pow(10,6)).plus(5e3);return s<n.toNumber()?{variant:"error",title:t("insufficient_ticker",{ticker:"SOL"}),message:t("swap_alert_ensure_minimum",{amountWithSuffix:`${n.div(f.LAMPORTS_PER_SOL)} SOL`})}:void 0}),[i,e,s,t]);return{isLoading:e,alertProps:a}})(),C=(0,u.s)(t.amount??0);return S?(0,i.jsx)(l.V$,{title:a("staking_unstake_title"),backAction:(0,i.jsx)(r.IconWithAction,{icon:"arrow_back",onClick:s,size:"m"}),footer:(0,i.jsxs)(i.Fragment,{children:[w&&(0,i.jsx)(r.InfoBox,{...w}),(0,i.jsx)(r.ButtonGroup,{children:(0,i.jsx)(r.Button,{disabled:g&&(y||!I)||L||T||!!w,onClick:()=>{_()},children:a("action_review")})})]}),children:(0,i.jsx)(r.Section,{children:(0,i.jsxs)(r.InstantUnstakeContent,{children:[(0,i.jsx)(r.ValidatorContainer,{title:a("staking_native_validator"),name:t.validator?.name??"",image:t.validator?.image??void 0,amount:(0,d.ED)({amount:C.toString(),displayType:"amount",pricePerCoin:p?.solPrice?.price,suffix:" SOL"}),value:(0,i.jsx)(c.sp,{value:C.multipliedBy(p?.price?.price??0).toNumber()})}),(0,i.jsx)(r.UnstakingContainer,{title:a("staking_instant_unstake_toggle_title"),subtitle:a("staking_instant_unstake_toggle_subtitle"),toggle:(0,i.jsx)(r.Toggle,{checked:g,onCheckedChange:k}),children:(0,i.jsxs)(r.List,{gapSize:"gapS",children:[(0,i.jsx)(r.InfoRow,{left:(0,i.jsxs)(r.InfoRowLeft,{children:[a("staking_unstake_time_label"),(0,i.jsx)(r.InfoWithTooltip,{tooltip:a("staking_instant_unstake_time_tooltip")})]}),right:(0,i.jsx)(r.InfoRowRight,{children:g?a("staking_instant_unstake_time_instant"):A})}),g&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.InfoRow,{left:(0,i.jsxs)(r.InfoRowLeft,{children:[a("staking_instant_unstake_fee"),(0,i.jsx)(r.InfoWithTooltip,{tooltip:a("staking_instant_unstake_fee_tooltip")})]}),right:(0,i.jsxs)(r.InfoRowRight,{isLoading:y||!I,children:[new(o())(v?.fee?.percentage??0).times(100).toString(),"%"]})}),(0,i.jsx)(r.InfoRow,{left:(0,i.jsxs)(r.InfoRowLeft,{children:[a("staking_unstake_total_received"),(0,i.jsx)(r.InfoWithTooltip,{tooltip:a("staking_unstake_tike_tooltip")})]}),right:(0,i.jsx)(r.InfoRowRight,{isLoading:y||!I,children:(0,d.ED)({amount:(0,u.s)(v?.outAmount??0),displayType:"solana",suffix:" SOL"})})})]})]})})]})})}):null}},"../../libs/shared/dist/features/stakingModal/utils/splitStakeErrors.js":(t,e,s)=>{s.d(e,{M:()=>n});var i=s("../../libs/shared/dist/features/stakingCore/constants.js");const n=(t,e,s,n)=>{if(void 0!==t)return t.isLessThan(e)?{title:n("staking_validation_amount_below_minimum_title"),message:n("staking_validation_split_amount_below_minimum_description",{amount:`${i.T} SOL`})}:t.isGreaterThan(s)?{title:n("action_insufficient_balance"),message:n("staking_validation_insufficient_balance_description")}:void 0}},"../../libs/shared/dist/utils/timeRemaining.js":(t,e,s)=>{s.d(e,{X:()=>a});var i=s("../../../node_modules/dayjs/dayjs.min.js"),n=s.n(i);const a=(t,e=3)=>{const s=n().duration(t>=0?t:0,"seconds"),i=[];return s.years()>0&&i.push(`${s.years()}yr`),s.months()>0&&i.push(`${s.months()}mo`),s.days()>0&&i.push(`${s.days()}d`),s.hours()>0&&i.push(`${s.hours()}h`),s.minutes()>0&&i.push(`${s.minutes()}m`),s.seconds()>0&&i.push(`${s.seconds()}s`),0===i.length&&i.push("0s"),i.slice(0,e).join(" ")}},"../../libs/shared/dist/assets/EmptyStates/staking-empty.png":(t,e,s)=>{t.exports=s.p+"static/assets/staking-empty.56030331..png"}}]);