"use strict";(self.webpackChunk_solflare_extension=self.webpackChunk_solflare_extension||[]).push([["NftRouter"],{"./src/pages/NFT/index.tsx":(e,s,t)=>{t.r(s),t.d(s,{default:()=>E});var i=t("../../../node_modules/react/jsx-runtime.js"),n=t("../../../node_modules/react/index.js"),r=t("../../../node_modules/react-router/dist/index.js"),o=t("../../libs/shared/dist/features/nfts/context/index.js"),a=t("../../../node_modules/react-i18next/dist/es/useTranslation.js"),l=t("../../libs/foundation-ui/dist/index.js"),c=t("../../libs/shared/dist/constants/routes.js"),d=t("../../libs/shared/dist/features/currencies/components/index.js"),u=t("../../libs/shared/dist/features/nfts/api/nfts.js"),x=t("../../libs/shared/dist/features/nfts/components/index.js"),h=t("../../libs/shared/dist/features/nfts/hooks/index.js"),j=t("../../libs/shared/dist/features/nfts/modals/index.js"),f=t("../../libs/shared/dist/features/receive/modals/index.js"),g=t("../../libs/shared/dist/features/recipientInput/context/index.js"),p=t("../../libs/shared/dist/hooks/index.js"),m=t("./src/features/nfts/components/index.ts"),b=t("./src/features/nfts/modals/index.ts");const _=()=>{const{t:e}=(0,a.$)(),s=(0,r.s0)(),{id:t}=(0,p.nc)(["id"]),[_,T,v]=(0,l.useDisclosure)(),S="suspicious"===t,F="scam"===t,{isGridView:C,isTransferInProgress:y,isSendTransfer:k,receiveModalOpen:w,setReceiveModalOpen:N}=(0,o.$T)(),{data:A,isPending:P,isError:I}=(0,h.cw)(),{filterFn:U}=(0,h.A1)(),D=P||I,B=(0,n.useMemo)((()=>{if(!A)return null;const e=(0,u.Lu)(A,t);return e?{nfts:U(e.nfts||[]),heroUi:e.heroUi,heroUiSol:e.heroUiSol}:null}),[A,U,t]);return D||0!==A?.nfts.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.PageTitle,{center:(0,i.jsx)(i.Fragment,{children:B?.heroUi.name}),left:(0,i.jsx)(l.IconWithAction,{disabled:D,onClick:()=>s(c.yT.MAIN,{replace:!0}),icon:"arrow_back",size:"m"}),right:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.IconWithAction,{disabled:D,icon:"page_info",fill:!1,onClick:T}),(0,i.jsx)(m.vb,{nfts:B?.nfts??[]})]})}),(0,i.jsxs)(l.PageContent,{overflow:!0,children:["scam"!==t&&(0,i.jsx)(l.HeroSmall,{subtitle:e("portfolio_tabs_collectibles_total_value"),value:(0,i.jsx)(d.DR,{configKey:"portfolioHero",fiat:(0,i.jsx)(d.sp,{value:B?.heroUi?.price||"0"}),token:(0,i.jsx)(d.EI,{value:B?.heroUiSol.price||"0"})}),tag:(0,i.jsx)(i.Fragment,{children:B?.heroUi.amountChange&&B?.heroUiSol.amountChange&&(0,i.jsx)(d.DR,{configKey:"portfolioHero",fiat:(0,i.jsx)(l.BalanceChangeTag,{state:"secondary",variant:+B.heroUi.amountChange<0?"negative":"positive",children:(0,i.jsx)(d.Tf,{value:B.heroUi.percentageChange||"0",showSign:!0})}),token:(0,i.jsx)(l.BalanceChangeTag,{state:"secondary",variant:+B.heroUiSol.amountChange<0?"negative":"positive",children:(0,i.jsx)(d.Tf,{value:B.heroUiSol.percentageChange||"0",showSign:!0})})})}),loading:D}),C?(0,i.jsx)(l.Section,{children:(0,i.jsx)(m.VK,{nfts:B?.nfts,isLoading:D})}):(0,i.jsx)(l.Section,{variant:"s",children:(0,i.jsx)(m.tr,{nfts:B?.nfts,isLoading:D})})]}),_&&(0,i.jsx)(b.l,{isSortingAllowed:!F&&!S,onClose:v}),(0,i.jsx)(m.I4,{}),y&&(k?(0,i.jsx)(g.j,{children:(0,i.jsx)(j.e,{})}):(0,i.jsx)(x.Jf,{})),w&&(0,i.jsx)(f.Z,{onClose:()=>N(!1),tRoute:"/receiveCollectibleRoute",tSource:"collectionThreeDot"})]}):(0,i.jsx)(r.Fg,{to:c.yT.MAIN,replace:!0})};var T=t("../../libs/shared/dist/context/scrollContentTo/index.js"),v=t("../../libs/shared/dist/features/nfts/queries/nftData.js"),S=t("../../libs/shared/dist/features/nfts/utils/index.js"),F=t("../../libs/shared/dist/utils/displayPrice.js"),C=t("../../libs/shared/dist/utils/lamportToSol.js"),y=t("../../libs/shared/dist/features/nfts/constants.js"),k=t("../../libs/shared/dist/features/nfts/utils/prepareData.js"),w=t("../../libs/shared/dist/utils/extension.js");const N=({src:e})=>(0,i.jsx)("img",{width:"100%",src:e}),A=({src:e,t:s})=>(0,i.jsxs)("video",{width:"100%",height:"100%",controls:!0,loop:!0,autoPlay:!0,children:[(0,i.jsx)("source",{src:e,type:"video/mp4"}),s("nft_preview_video_not_supported")]}),P=({src:e,t:s})=>(0,i.jsx)("audio",{controls:!0,src:e,children:s("nft_preview_audio_not_supported")}),I=({src:e,poster:s})=>{const[r,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(async()=>{await t.e("GoogleModelViewer").then(t.bind(t,"../../libs/shared/node_modules/@google/model-viewer/dist/model-viewer.min.js")),o(!0)})()}),[]),r?(0,i.jsx)("model-viewer",{"auto-rotate":!0,"auto-rotate-delay":0,"camera-controls":!0,src:e,poster:s,style:{height:"100%",width:"100%",minHeight:300,"--poster-color":"transparent"}}):null},U=({src:e,category:s,posterSrc:t="",fallbackSrc:n})=>{const{t:r}=(0,a.$)(),o=w.p1&&!w.Cy;switch(s){case"image":return o?(0,i.jsx)(l.NFTCardImage,{src:e,fallbackSrc:y.mr,resizerOptions:{width:800}}):(0,i.jsx)(l.ImageResolver,{style:{width:"100%",height:"100%"},src:e,fallbackImage:n,errorFallback:y.mr});case"vr":case"model":return(0,i.jsx)(I,{src:e,poster:t});case"audio":return(0,i.jsx)(P,{t:r,src:e,poster:t});case"video":return(0,i.jsx)(A,{t:r,src:e});default:return(0,i.jsx)(N,{src:e})}},D=()=>{const{t:e}=(0,a.$)(),{nft:s}=(0,h.ix)(),{src:t,originalSrc:n,category:r}=(0,k.gw)(s,y.A7);return(0,i.jsxs)(l.NFTImage,{image:(0,i.jsx)(U,{src:t||y.A7,fallbackSrc:n,category:r||y.YF,posterSrc:s.image}),children:[s.listed&&(0,i.jsx)(l.NFTPill,{position:"top",children:e("nft_listed_for_label",{amount:(0,F.ED)({amount:(0,C.s)(s.listedPrice).toString(),suffix:" SOL",displayType:"solana"})})}),(0,S.$h)(s)&&(0,i.jsx)(l.NFTPill,{position:"bottom",children:(0,F.ED)({amount:s.tokenData?.uiAmount,displayType:"long"})})]})},B=()=>{const{t:e}=(0,a.$)(),{nft:s,isMarkedAsSpam:t,burn:n,send:r}=(0,h.ix)(),{data:{marketData:o}={}}=(0,v.c)(s.id,{enabled:(0,S.Kl)(s)}),{delist:c}=(0,h.vg)();return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.NFTSingleHero,{heroElement:(0,i.jsx)(D,{}),actions:(0,i.jsx)(l.NFTActions,{children:(0,i.jsx)(l.ButtonGroup,{children:t?(0,i.jsx)(l.Button,{onClick:n,variant:"primary","data-id":"burn-action",children:e("action_burn")}):s.listed?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.Button,{onClick:()=>c(s,o),variant:"secondary","data-id":"delist-action",children:e("action_delist")})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.Button,{onClick:r,variant:"secondary","data-id":"send-action",children:e("action_send")})})})}),children:t&&(0,i.jsx)(l.InfoBox,{variant:"warning",title:e("nft_single_spam_alert_title"),message:e("nft_single_spam_alert_description")})})})};var M=t("../../libs/shared/dist/assets/error.svg");const $=()=>{const{t:e}=(0,a.$)(),{burn:s}=(0,h.ix)();return(0,i.jsx)(l.NFTSingleHero,{heroElement:(0,i.jsx)(l.NFTImageBlocked,{icon:M,title:e("nft_single_scam_alert_title"),description:e("nft_single_scam_alert_description")}),actions:(0,i.jsx)(l.NFTActions,{children:(0,i.jsx)(l.ButtonGroup,{children:(0,i.jsx)(l.Button,{onClick:s,variant:"primary",children:e("action_burn")})})})})},R=()=>{const{mint:e}=(0,p.nc)(["mint"]),s=(0,r.s0)(),{t}=(0,a.$)(),{isTransferInProgress:d,isSendTransfer:u}=(0,o.$T)(),{data:f,isPending:m}=(0,h.cw)(),{useScrollToTop:b}=(0,T.GR)(),_=(0,n.useMemo)((()=>f?.nfts?.find((s=>s.id===e))),[f,e]);return b(),m?(0,i.jsx)(l.NFTSingleSkeleton,{}):_?(0,i.jsx)(o.V1,{nft:_,children:(0,i.jsxs)(l.PagePortal,{size:"fullPageNoHeader",children:[(0,i.jsx)(l.PageTitle,{center:_.name||"",left:(0,i.jsx)(l.IconWithAction,{disabled:m,onClick:()=>s(_.group?c.yT.GROUP(_.group):c.yT.MAIN,{replace:!0}),icon:"arrow_back",size:"m"}),right:(0,i.jsx)(x.aD,{})}),(0,i.jsx)(l.PageContent,{children:(0,i.jsx)(l.Section,{children:(0,i.jsx)(l.NFTSingleBase,{children:(0,S.gO)(_)?(0,i.jsx)($,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B,{}),(0,S.Kl)(_)&&(0,i.jsx)(x.i0,{NFTStatsComponent:l.NFTStats,NFTStatComponent:l.NFTStat}),0!==_.attributes?.length&&(0,i.jsx)(x.j2,{NFTAttributesComponent:l.NFTAttributes,NFTAttributeComponent:l.Attribute}),_.description&&(0,i.jsx)(l.NFTDescription,{title:t("nft_details_description"),text:_.description})]})})})}),d&&(u?(0,i.jsx)(g.j,{children:(0,i.jsx)(j.e,{})}):(0,i.jsx)(x.Jf,{}))]})}):(0,i.jsx)(r.Fg,{to:c.yT.MAIN,replace:!0})},E=()=>(0,r.V$)([{path:"",element:(0,i.jsx)(o.PP,{children:(0,i.jsx)(r.j3,{})}),children:[{path:"group/:id",element:(0,i.jsx)(_,{})},{path:"single/:mint",element:(0,i.jsx)(o.G7,{children:(0,i.jsx)(R,{})})}]}])}}]);