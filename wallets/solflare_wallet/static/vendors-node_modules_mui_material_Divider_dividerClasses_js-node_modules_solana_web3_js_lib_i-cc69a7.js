/*! For license information please see vendors-node_modules_mui_material_Divider_dividerClasses_js-node_modules_solana_web3_js_lib_i-cc69a7.js.LICENSE.txt */
(self.webpackChunk_solflare_extension=self.webpackChunk_solflare_extension||[]).push([["vendors-node_modules_mui_material_Divider_dividerClasses_js-node_modules_solana_web3_js_lib_i-cc69a7"],{"../../../node_modules/@mui/material/Divider/dividerClasses.js":(t,e,i)=>{"use strict";i.d(e,{V:()=>r});var s=i("../../../node_modules/@mui/utils/generateUtilityClass/generateUtilityClass.js");function r(t){return(0,s.ZP)("MuiDivider",t)}(0,i("../../../node_modules/@mui/utils/generateUtilityClasses/generateUtilityClasses.js").Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},"../../../node_modules/@solana/web3.js/lib/index.browser.esm.js":(t,e,i)=>{"use strict";i.r(e),i.d(e,{Account:()=>D,AddressLookupTableAccount:()=>Ut,AddressLookupTableInstruction:()=>qi,AddressLookupTableProgram:()=>Ui,Authorized:()=>rs,BLOCKHASH_CACHE_TIMEOUT_MS:()=>Qt,BPF_LOADER_DEPRECATED_PROGRAM_ID:()=>F,BPF_LOADER_PROGRAM_ID:()=>Ft,BpfLoader:()=>Lt,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:()=>Zi,ComputeBudgetInstruction:()=>Ki,ComputeBudgetProgram:()=>Yi,Connection:()=>Gi,Ed25519Program:()=>Xi,Enum:()=>I,EpochSchedule:()=>jt,FeeCalculatorLayout:()=>Et,Keypair:()=>ji,LAMPORTS_PER_SOL:()=>Ps,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:()=>$i,Loader:()=>Dt,Lockup:()=>ns,MAX_SEED_LENGTH:()=>M,Message:()=>et,MessageAccountKeys:()=>G,MessageV0:()=>it,NONCE_ACCOUNT_LENGTH:()=>It,NonceAccount:()=>Tt,PACKET_DATA_SIZE:()=>L,PUBLIC_KEY_LENGTH:()=>R,PublicKey:()=>z,SIGNATURE_LENGTH_IN_BYTES:()=>O,SOLANA_SCHEMA:()=>T,STAKE_CONFIG_ID:()=>ss,STAKE_INSTRUCTION_LAYOUTS:()=>as,SYSTEM_INSTRUCTION_LAYOUTS:()=>Rt,SYSVAR_CLOCK_PUBKEY:()=>ct,SYSVAR_EPOCH_SCHEDULE_PUBKEY:()=>ut,SYSVAR_INSTRUCTIONS_PUBKEY:()=>pt,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:()=>dt,SYSVAR_RENT_PUBKEY:()=>ft,SYSVAR_REWARDS_PUBKEY:()=>mt,SYSVAR_SLOT_HASHES_PUBKEY:()=>gt,SYSVAR_SLOT_HISTORY_PUBKEY:()=>yt,SYSVAR_STAKE_HISTORY_PUBKEY:()=>vt,Secp256k1Program:()=>es,SendTransactionError:()=>bt,SolanaJSONRPCError:()=>xt,SolanaJSONRPCErrorCode:()=>St,StakeAuthorizationLayout:()=>hs,StakeInstruction:()=>os,StakeProgram:()=>ls,Struct:()=>P,SystemInstruction:()=>Mt,SystemProgram:()=>Bt,Transaction:()=>at,TransactionExpiredBlockheightExceededError:()=>N,TransactionExpiredNonceInvalidError:()=>H,TransactionExpiredTimeoutError:()=>W,TransactionInstruction:()=>ot,TransactionMessage:()=>ht,TransactionStatus:()=>rt,VALIDATOR_INFO_KEY:()=>ms,VERSION_PREFIX_MASK:()=>V,VOTE_PROGRAM_ID:()=>vs,ValidatorInfo:()=>ys,VersionedMessage:()=>st,VersionedTransaction:()=>lt,VoteAccount:()=>Ss,VoteAuthorizationLayout:()=>ds,VoteInit:()=>cs,VoteInstruction:()=>us,VoteProgram:()=>fs,clusterApiUrl:()=>Cs,sendAndConfirmRawTransaction:()=>Es,sendAndConfirmTransaction:()=>wt});var s=i("../../../node_modules/buffer/index.js"),r=i("../../../node_modules/@noble/curves/esm/ed25519.js"),n=i("../../../node_modules/bn.js/lib/bn.js"),o=i.n(n),a=i("../../../node_modules/bs58/index.js"),h=i.n(a),l=i("../../../node_modules/@noble/hashes/esm/sha256.js"),c=i("../../../node_modules/borsh/lib/index.js"),u=i("../../../node_modules/@solana/buffer-layout/lib/Layout.js"),p=i("../../../node_modules/bigint-buffer/dist/browser.js"),d=i("../../../node_modules/superstruct/dist/index.mjs"),f=i("../../../node_modules/jayson/lib/client/browser/index.js"),m=i.n(f),g=i("../../../node_modules/rpc-websockets/dist/index.browser.mjs"),y=i("../../../node_modules/@noble/hashes/esm/sha3.js"),v=i("../../../node_modules/@noble/curves/esm/secp256k1.js"),b=i("../../../node_modules/console-browserify/index.js");const S=r.UN.utils.randomPrivateKey,x=()=>{const t=r.UN.utils.randomPrivateKey(),e=w(t),i=new Uint8Array(64);return i.set(t),i.set(e,32),{publicKey:e,secretKey:i}},w=r.UN.getPublicKey;function k(t){try{return r.UN.ExtendedPoint.fromHex(t),!0}catch{return!1}}const _=(t,e)=>r.UN.sign(t,e.slice(0,32)),C=r.UN.verify,E=t=>s.Buffer.isBuffer(t)?t:t instanceof Uint8Array?s.Buffer.from(t.buffer,t.byteOffset,t.byteLength):s.Buffer.from(t);class P{constructor(t){Object.assign(this,t)}encode(){return s.Buffer.from((0,c.serialize)(T,this))}static decode(t){return(0,c.deserialize)(T,this,t)}static decodeUnchecked(t){return(0,c.deserializeUnchecked)(T,this,t)}}class I extends P{constructor(t){if(super(t),this.enum="",1!==Object.keys(t).length)throw new Error("Enum can only take single value");Object.keys(t).map((t=>{this.enum=t}))}}const T=new Map;var A;const M=32,R=32;let B=1;class z extends P{constructor(t){if(super({}),this._bn=void 0,function(t){return void 0!==t._bn}(t))this._bn=t._bn;else{if("string"==typeof t){const e=h().decode(t);if(e.length!=R)throw new Error("Invalid public key input");this._bn=new(o())(e)}else this._bn=new(o())(t);if(this._bn.byteLength()>R)throw new Error("Invalid public key input")}}static unique(){const t=new z(B);return B+=1,new z(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return h().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(s.Buffer);if(t.length===R)return t;const e=s.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,i){const r=s.Buffer.concat([t.toBuffer(),s.Buffer.from(e),i.toBuffer()]),n=(0,l.JQ)(r);return new z(n)}static createProgramAddressSync(t,e){let i=s.Buffer.alloc(0);t.forEach((function(t){if(t.length>M)throw new TypeError("Max seed length exceeded");i=s.Buffer.concat([i,E(t)])})),i=s.Buffer.concat([i,e.toBuffer(),s.Buffer.from("ProgramDerivedAddress")]);const r=(0,l.JQ)(i);if(k(r))throw new Error("Invalid seeds, address must fall off the curve");return new z(r)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let i,r=255;for(;0!=r;){try{const n=t.concat(s.Buffer.from([r]));i=this.createProgramAddressSync(n,e)}catch(t){if(t instanceof TypeError)throw t;r--;continue}return[i,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){return k(new z(t).toBytes())}}A=z,z.default=new A("11111111111111111111111111111111"),T.set(z,{kind:"struct",fields:[["_bn","u256"]]});class D{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=E(t);if(64!==t.length)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=E(S()),this._publicKey=E(w(this._secretKey))}get publicKey(){return new z(this._publicKey)}get secretKey(){return s.Buffer.concat([this._secretKey,this._publicKey],64)}}const F=new z("BPFLoader1111111111111111111111111111111111"),L=1232,V=127,O=64;class N extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(N.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class W extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(W.prototype,"name",{value:"TransactionExpiredTimeoutError"});class H extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(H.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class G{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const e=new Map;this.keySegments().flat().forEach(((t,i)=>{e.set(t.toBase58(),i)}));const i=t=>{const i=e.get(t.toBase58());if(void 0===i)throw new Error("Encountered an unknown instruction account key during compilation");return i};return t.map((t=>({programIdIndex:i(t.programId),accountKeyIndexes:t.keys.map((t=>i(t.pubkey))),data:t.data})))}}const j=(t="publicKey")=>u.Ik(32,t),$=(t="signature")=>u.Ik(64,t),q=(t="string")=>{const e=u.n_([u.Jq("length"),u.Jq("lengthPadding"),u.Ik(u.cv(u.Jq(),-8),"chars")],t),i=e.decode.bind(e),r=e.encode.bind(e),n=e;return n.decode=(t,e)=>i(t,e).chars.toString(),n.encode=(t,e,i)=>{const n={chars:s.Buffer.from(t,"utf8")};return r(n,e,i)},n.alloc=t=>u.Jq().span+u.Jq().span+s.Buffer.from(t,"utf8").length,n};function U(t,e){const i=t=>{if(t.span>=0)return t.span;if("function"==typeof t.alloc)return t.alloc(e[t.property]);if("count"in t&&"elementLayout"in t){const s=e[t.property];if(Array.isArray(s))return s.length*i(t.elementLayout)}else if("fields"in t)return U({layout:t},e[t.property]);return 0};let s=0;return t.layout.fields.forEach((t=>{s+=i(t)})),s}function K(t){let e=0,i=0;for(;;){let s=t.shift();if(e|=(127&s)<<7*i,i+=1,!(128&s))break}return e}function Z(t,e){let i=e;for(;;){let e=127&i;if(i>>=7,0==i){t.push(e);break}e|=128,t.push(e)}}function Y(t,e){if(!t)throw new Error(e||"Assertion failed")}class J{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const i=new Map,s=t=>{const e=t.toBase58();let s=i.get(e);return void 0===s&&(s={isSigner:!1,isWritable:!1,isInvoked:!1},i.set(e,s)),s},r=s(e);r.isSigner=!0,r.isWritable=!0;for(const e of t){s(e.programId).isInvoked=!0;for(const t of e.keys){const e=s(t.pubkey);e.isSigner||=t.isSigner,e.isWritable||=t.isWritable}}return new J(e,i)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Y(t.length<=256,"Max static account keys length exceeded");const e=t.filter((([,t])=>t.isSigner&&t.isWritable)),i=t.filter((([,t])=>t.isSigner&&!t.isWritable)),s=t.filter((([,t])=>!t.isSigner&&t.isWritable)),r=t.filter((([,t])=>!t.isSigner&&!t.isWritable)),n={numRequiredSignatures:e.length+i.length,numReadonlySignedAccounts:i.length,numReadonlyUnsignedAccounts:r.length};{Y(e.length>0,"Expected at least one writable signer key");const[t]=e[0];Y(t===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[n,[...e.map((([t])=>new z(t))),...i.map((([t])=>new z(t))),...s.map((([t])=>new z(t))),...r.map((([t])=>new z(t)))]]}extractTableLookup(t){const[e,i]=this.drainKeysFoundInLookupTable(t.state.addresses,(t=>!t.isSigner&&!t.isInvoked&&t.isWritable)),[s,r]=this.drainKeysFoundInLookupTable(t.state.addresses,(t=>!t.isSigner&&!t.isInvoked&&!t.isWritable));if(0!==e.length||0!==s.length)return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:i,readonly:r}]}drainKeysFoundInLookupTable(t,e){const i=new Array,s=new Array;for(const[r,n]of this.keyMetaMap.entries())if(e(n)){const e=new z(r),n=t.findIndex((t=>t.equals(e)));n>=0&&(Y(n<256,"Max lookup table index exceeded"),i.push(n),s.push(e),this.keyMetaMap.delete(r))}return[i,s]}}const X="Reached end of buffer unexpectedly";function Q(t){if(0===t.length)throw new Error(X);return t.shift()}function tt(t,...e){const[i]=e;if(2===e.length?i+(e[1]??0)>t.length:i>=t.length)throw new Error(X);return t.splice(...e)}class et{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map((t=>new z(t))),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:h().decode(t.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new G(this.staticAccountKeys)}static compile(t){const e=J.compile(t.instructions,t.payerKey),[i,s]=e.getMessageComponents(),r=new G(s).compileInstructions(t.instructions).map((t=>({programIdIndex:t.programIdIndex,accounts:t.accountKeyIndexes,data:h().encode(t.data)})));return new et({header:i,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:r})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;return t>=this.header.numRequiredSignatures?t-e<this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts:t<e-this.header.numReadonlySignedAccounts}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((t,e)=>!this.isProgramId(e)))}serialize(){const t=this.accountKeys.length;let e=[];Z(e,t);const i=this.instructions.map((t=>{const{accounts:e,programIdIndex:i}=t,r=Array.from(h().decode(t.data));let n=[];Z(n,e.length);let o=[];return Z(o,r.length),{programIdIndex:i,keyIndicesCount:s.Buffer.from(n),keyIndices:e,dataLength:s.Buffer.from(o),data:r}}));let r=[];Z(r,i.length);let n=s.Buffer.alloc(L);s.Buffer.from(r).copy(n);let o=r.length;i.forEach((t=>{const e=u.n_([u.u8("programIdIndex"),u.Ik(t.keyIndicesCount.length,"keyIndicesCount"),u.A9(u.u8("keyIndex"),t.keyIndices.length,"keyIndices"),u.Ik(t.dataLength.length,"dataLength"),u.A9(u.u8("userdatum"),t.data.length,"data")]).encode(t,n,o);o+=e})),n=n.slice(0,o);const a=u.n_([u.Ik(1,"numRequiredSignatures"),u.Ik(1,"numReadonlySignedAccounts"),u.Ik(1,"numReadonlyUnsignedAccounts"),u.Ik(e.length,"keyCount"),u.A9(j("key"),t,"keys"),j("recentBlockhash")]),l={numRequiredSignatures:s.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:s.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:s.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:s.Buffer.from(e),keys:this.accountKeys.map((t=>E(t.toBytes()))),recentBlockhash:h().decode(this.recentBlockhash)};let c=s.Buffer.alloc(2048);const p=a.encode(l,c);return n.copy(c,p),c.slice(0,p+n.length)}static from(t){let e=[...t];const i=Q(e);if(i!==(i&V))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const r=Q(e),n=Q(e),o=K(e);let a=[];for(let t=0;t<o;t++){const t=tt(e,0,R);a.push(new z(s.Buffer.from(t)))}const l=tt(e,0,R),c=K(e);let u=[];for(let t=0;t<c;t++){const t=Q(e),i=tt(e,0,K(e)),r=tt(e,0,K(e)),n=h().encode(s.Buffer.from(r));u.push({programIdIndex:t,accounts:i,data:n})}const p={header:{numRequiredSignatures:i,numReadonlySignedAccounts:r,numReadonlyUnsignedAccounts:n},recentBlockhash:h().encode(s.Buffer.from(l)),accountKeys:a,instructions:u};return new et(p)}}class it{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new G(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,i=this.staticAccountKeys.length;return t>=i?t-i<this.addressTableLookups.reduce(((t,e)=>t+e.writableIndexes.length),0):t>=this.header.numRequiredSignatures?t-e<i-e-this.header.numReadonlyUnsignedAccounts:t<e-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const i of this.addressTableLookups){const s=t.find((t=>t.key.equals(i.accountKey)));if(!s)throw new Error(`Failed to find address lookup table account for table key ${i.accountKey.toBase58()}`);for(const t of i.writableIndexes){if(!(t<s.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${i.accountKey.toBase58()}`);e.writable.push(s.state.addresses[t])}for(const t of i.readonlyIndexes){if(!(t<s.state.addresses.length))throw new Error(`Failed to find address for index ${t} in address lookup table ${i.accountKey.toBase58()}`);e.readonly.push(s.state.addresses[t])}}return e}static compile(t){const e=J.compile(t.instructions,t.payerKey),i=new Array,s={writable:new Array,readonly:new Array},r=t.addressLookupTableAccounts||[];for(const t of r){const r=e.extractTableLookup(t);if(void 0!==r){const[t,{writable:e,readonly:n}]=r;i.push(t),s.writable.push(...e),s.readonly.push(...n)}}const[n,o]=e.getMessageComponents(),a=new G(o,s).compileInstructions(t.instructions);return new it({header:n,staticAccountKeys:o,recentBlockhash:t.recentBlockhash,compiledInstructions:a,addressTableLookups:i})}serialize(){const t=Array();Z(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),i=Array();Z(i,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),r=Array();Z(r,this.addressTableLookups.length);const n=u.n_([u.u8("prefix"),u.n_([u.u8("numRequiredSignatures"),u.u8("numReadonlySignedAccounts"),u.u8("numReadonlyUnsignedAccounts")],"header"),u.Ik(t.length,"staticAccountKeysLength"),u.A9(j(),this.staticAccountKeys.length,"staticAccountKeys"),j("recentBlockhash"),u.Ik(i.length,"instructionsLength"),u.Ik(e.length,"serializedInstructions"),u.Ik(r.length,"addressTableLookupsLength"),u.Ik(s.length,"serializedAddressTableLookups")]),o=new Uint8Array(L),a=n.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map((t=>t.toBytes())),recentBlockhash:h().decode(this.recentBlockhash),instructionsLength:new Uint8Array(i),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(r),serializedAddressTableLookups:s},o);return o.slice(0,a)}serializeInstructions(){let t=0;const e=new Uint8Array(L);for(const i of this.compiledInstructions){const s=Array();Z(s,i.accountKeyIndexes.length);const r=Array();Z(r,i.data.length),t+=u.n_([u.u8("programIdIndex"),u.Ik(s.length,"encodedAccountKeyIndexesLength"),u.A9(u.u8(),i.accountKeyIndexes.length,"accountKeyIndexes"),u.Ik(r.length,"encodedDataLength"),u.Ik(i.data.length,"data")]).encode({programIdIndex:i.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:i.accountKeyIndexes,encodedDataLength:new Uint8Array(r),data:i.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(L);for(const i of this.addressTableLookups){const s=Array();Z(s,i.writableIndexes.length);const r=Array();Z(r,i.readonlyIndexes.length),t+=u.n_([j("accountKey"),u.Ik(s.length,"encodedWritableIndexesLength"),u.A9(u.u8(),i.writableIndexes.length,"writableIndexes"),u.Ik(r.length,"encodedReadonlyIndexesLength"),u.A9(u.u8(),i.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:i.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:i.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(r),readonlyIndexes:i.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const i=Q(e),s=i&V;Y(i!==s,"Expected versioned message but received legacy message"),Y(0===s,`Expected versioned message with version 0 but found version ${s}`);const r={numRequiredSignatures:Q(e),numReadonlySignedAccounts:Q(e),numReadonlyUnsignedAccounts:Q(e)},n=[],o=K(e);for(let t=0;t<o;t++)n.push(new z(tt(e,0,R)));const a=h().encode(tt(e,0,R)),l=K(e),c=[];for(let t=0;t<l;t++){const t=Q(e),i=tt(e,0,K(e)),s=K(e),r=new Uint8Array(tt(e,0,s));c.push({programIdIndex:t,accountKeyIndexes:i,data:r})}const u=K(e),p=[];for(let t=0;t<u;t++){const t=new z(tt(e,0,R)),i=tt(e,0,K(e)),s=tt(e,0,K(e));p.push({accountKey:t,writableIndexes:i,readonlyIndexes:s})}return new it({header:r,staticAccountKeys:n,recentBlockhash:a,compiledInstructions:c,addressTableLookups:p})}}const st={deserializeMessageVersion(t){const e=t[0],i=e&V;return i===e?"legacy":i},deserialize:t=>{const e=st.deserializeMessageVersion(t);if("legacy"===e)return et.from(t);if(0===e)return it.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let rt=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const nt=s.Buffer.alloc(O).fill(0);class ot{constructor(t){this.keys=void 0,this.programId=void 0,this.data=s.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map((({pubkey:t,isSigner:e,isWritable:i})=>({pubkey:t.toJSON(),isSigner:e,isWritable:i}))),programId:this.programId.toJSON(),data:[...this.data]}}}class at{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:i}=t;this.minNonceContextSlot=e,this.nonceInfo=i}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:i}=t;this.recentBlockhash=e,this.lastValidBlockHeight=i}else{const{recentBlockhash:e,nonceInfo:i}=t;i&&(this.nonceInfo=i),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((t=>t.toJSON())),signers:this.signatures.map((({publicKey:t})=>t.toJSON()))}}add(...t){if(0===t.length)throw new Error("No instructions");return t.forEach((t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new ot(t))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e,i;if(this.nonceInfo?(t=this.nonceInfo.nonce,e=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");if(e.length<1&&b.warn("No instructions provided"),this.feePayer)i=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");i=this.signatures[0].publicKey}for(let t=0;t<e.length;t++)if(void 0===e[t].programId)throw new Error(`Transaction instruction index ${t} has undefined program id`);const s=[],r=[];e.forEach((t=>{t.keys.forEach((t=>{r.push({...t})}));const e=t.programId.toString();s.includes(e)||s.push(e)})),s.forEach((t=>{r.push({pubkey:new z(t),isSigner:!1,isWritable:!1})}));const n=[];r.forEach((t=>{const e=t.pubkey.toString(),i=n.findIndex((t=>t.pubkey.toString()===e));i>-1?(n[i].isWritable=n[i].isWritable||t.isWritable,n[i].isSigner=n[i].isSigner||t.isSigner):n.push(t)})),n.sort((function(t,e){return t.isSigner!==e.isSigner?t.isSigner?-1:1:t.isWritable!==e.isWritable?t.isWritable?-1:1:t.pubkey.toBase58().localeCompare(e.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));const o=n.findIndex((t=>t.pubkey.equals(i)));if(o>-1){const[t]=n.splice(o,1);t.isSigner=!0,t.isWritable=!0,n.unshift(t)}else n.unshift({pubkey:i,isSigner:!0,isWritable:!0});for(const t of this.signatures){const e=n.findIndex((e=>e.pubkey.equals(t.publicKey)));if(!(e>-1))throw new Error(`unknown signer: ${t.publicKey.toString()}`);n[e].isSigner||(n[e].isSigner=!0,b.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,l=0,c=0;const u=[],p=[];n.forEach((({pubkey:t,isSigner:e,isWritable:i})=>{e?(u.push(t.toString()),a+=1,i||(l+=1)):(p.push(t.toString()),i||(c+=1))}));const d=u.concat(p),f=e.map((t=>{const{data:e,programId:i}=t;return{programIdIndex:d.indexOf(i.toString()),accounts:t.keys.map((t=>d.indexOf(t.pubkey.toString()))),data:h().encode(e)}}));return f.forEach((t=>{Y(t.programIdIndex>=0),t.accounts.forEach((t=>Y(t>=0)))})),new et({header:{numRequiredSignatures:a,numReadonlySignedAccounts:l,numReadonlyUnsignedAccounts:c},accountKeys:d,recentBlockhash:t,instructions:f})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every(((t,i)=>e[i].equals(t.publicKey)))||(this.signatures=e.map((t=>({signature:null,publicKey:t})))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(0===t.length)throw new Error("No signers");const e=new Set;this.signatures=t.filter((t=>{const i=t.toString();return!e.has(i)&&(e.add(i),!0)})).map((t=>({signature:null,publicKey:t})))}sign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,i=[];for(const s of t){const t=s.publicKey.toString();e.has(t)||(e.add(t),i.push(s))}this.signatures=i.map((t=>({signature:null,publicKey:t.publicKey})));const s=this._compile();this._partialSign(s,...i)}partialSign(...t){if(0===t.length)throw new Error("No signers");const e=new Set,i=[];for(const s of t){const t=s.publicKey.toString();e.has(t)||(e.add(t),i.push(s))}const s=this._compile();this._partialSign(s,...i)}_partialSign(t,...e){const i=t.serialize();e.forEach((t=>{const e=_(i,t.secretKey);this._addSignature(t.publicKey,E(e))}))}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Y(64===e.length);const i=this.signatures.findIndex((e=>t.equals(e.publicKey)));if(i<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[i].signature=s.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const i={};for(const{signature:s,publicKey:r}of this.signatures)null===s?e&&(i.missing||=[]).push(r):C(s,t,r.toBytes())||(i.invalid||=[]).push(r);return i.invalid||i.missing?i:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:i}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(i){const t=this._getMessageSignednessErrors(s,e);if(t){let e="Signature verification failed.";throw t.invalid&&(e+=`\nInvalid signature for public key${1===t.invalid.length?"":"(s)"} [\`${t.invalid.map((t=>t.toBase58())).join("`, `")}\`].`),t.missing&&(e+=`\nMissing signature for public key${1===t.missing.length?"":"(s)"} [\`${t.missing.map((t=>t.toBase58())).join("`, `")}\`].`),new Error(e)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,i=[];Z(i,e.length);const r=i.length+64*e.length+t.length,n=s.Buffer.alloc(r);return Y(e.length<256),s.Buffer.from(i).copy(n,0),e.forEach((({signature:t},e)=>{null!==t&&(Y(64===t.length,"signature has invalid length"),s.Buffer.from(t).copy(n,i.length+64*e))})),t.copy(n,i.length+64*e.length),Y(n.length<=L,`Transaction too large: ${n.length} > ${L}`),n}get keys(){return Y(1===this.instructions.length),this.instructions[0].keys.map((t=>t.pubkey))}get programId(){return Y(1===this.instructions.length),this.instructions[0].programId}get data(){return Y(1===this.instructions.length),this.instructions[0].data}static from(t){let e=[...t];const i=K(e);let r=[];for(let t=0;t<i;t++){const t=tt(e,0,O);r.push(h().encode(s.Buffer.from(t)))}return at.populate(et.from(e),r)}static populate(t,e=[]){const i=new at;return i.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(i.feePayer=t.accountKeys[0]),e.forEach(((e,s)=>{const r={signature:e==h().encode(nt)?null:h().decode(e),publicKey:t.accountKeys[s]};i.signatures.push(r)})),t.instructions.forEach((e=>{const s=e.accounts.map((e=>{const s=t.accountKeys[e];return{pubkey:s,isSigner:i.signatures.some((t=>t.publicKey.toString()===s.toString()))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));i.instructions.push(new ot({keys:s,programId:t.accountKeys[e.programIdIndex],data:h().decode(e.data)}))})),i._message=t,i._json=i.toJSON(),i}}class ht{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:i,compiledInstructions:s,recentBlockhash:r}=t,{numRequiredSignatures:n,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:a}=i,h=n-o;Y(h>0,"Message header is invalid");const l=t.staticAccountKeys.length-n-a;Y(l>=0,"Message header is invalid");const c=t.getAccountKeys(e),u=c.get(0);if(void 0===u)throw new Error("Failed to decompile message because no account keys were found");const p=[];for(const t of s){const e=[];for(const s of t.accountKeyIndexes){const t=c.get(s);if(void 0===t)throw new Error(`Failed to find key for account key index ${s}`);let r;r=s<n?s<h:s<c.staticAccountKeys.length?s-n<l:s-c.staticAccountKeys.length<c.accountKeysFromLookups.writable.length,e.push({pubkey:t,isSigner:s<i.numRequiredSignatures,isWritable:r})}const s=c.get(t.programIdIndex);if(void 0===s)throw new Error(`Failed to find program id for program id index ${t.programIdIndex}`);p.push(new ot({programId:s,data:E(t.data),keys:e}))}return new ht({payerKey:u,instructions:p,recentBlockhash:r})}compileToLegacyMessage(){return et.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return it.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class lt{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,void 0!==e)Y(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const e=[];for(let i=0;i<t.header.numRequiredSignatures;i++)e.push(new Uint8Array(O));this.signatures=e}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Z(e,this.signatures.length);const i=u.n_([u.Ik(e.length,"encodedSignaturesLength"),u.A9($(),this.signatures.length,"signatures"),u.Ik(t.length,"serializedMessage")]),s=new Uint8Array(2048),r=i.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,r)}static deserialize(t){let e=[...t];const i=[],s=K(e);for(let t=0;t<s;t++)i.push(new Uint8Array(tt(e,0,O)));const r=st.deserialize(new Uint8Array(e));return new lt(r,i)}sign(t){const e=this.message.serialize(),i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const t=i.findIndex((t=>t.equals(s.publicKey)));Y(t>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[t]=_(e,s.secretKey)}}addSignature(t,e){Y(64===e.byteLength,"Signature must be 64 bytes long");const i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((e=>e.equals(t)));Y(i>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[i]=e}}const ct=new z("SysvarC1ock11111111111111111111111111111111"),ut=new z("SysvarEpochSchedu1e111111111111111111111111"),pt=new z("Sysvar1nstructions1111111111111111111111111"),dt=new z("SysvarRecentB1ockHashes11111111111111111111"),ft=new z("SysvarRent111111111111111111111111111111111"),mt=new z("SysvarRewards111111111111111111111111111111"),gt=new z("SysvarS1otHashes111111111111111111111111111"),yt=new z("SysvarS1otHistory11111111111111111111111111"),vt=new z("SysvarStakeHistory1111111111111111111111111");class bt extends Error{constructor({action:t,signature:e,transactionMessage:i,logs:s}){const r=s?`Logs: \n${JSON.stringify(s.slice(-10),null,2)}. `:"",n="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let o;switch(t){case"send":o=`Transaction ${e} resulted in an error. \n${i}. `+r+n;break;case"simulate":o=`Simulation failed. \nMessage: ${i}. \n`+r+n;break;default:o=`Unknown action '${t}'`}super(o),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=i,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(null==t||"object"!=typeof t||!("then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(((e,i)=>{t.getTransaction(this.signature).then((t=>{if(t&&t.meta&&t.meta.logMessages){const i=t.meta.logMessages;this.transactionLogs=i,e(i)}else i(new Error("Log messages not found"))})).catch(i)}))),await this.transactionLogs}}const St={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class xt extends Error{constructor({code:t,message:e,data:i},s){super(null!=s?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=i,this.name="SolanaJSONRPCError"}}async function wt(t,e,i,s){const r=s&&{skipPreflight:s.skipPreflight,preflightCommitment:s.preflightCommitment||s.commitment,maxRetries:s.maxRetries,minContextSlot:s.minContextSlot},n=await t.sendTransaction(e,i,r);let o;if(null!=e.recentBlockhash&&null!=e.lastValidBlockHeight)o=(await t.confirmTransaction({abortSignal:s?.abortSignal,signature:n,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},s&&s.commitment)).value;else if(null!=e.minNonceContextSlot&&null!=e.nonceInfo){const{nonceInstruction:i}=e.nonceInfo,r=i.keys[0].pubkey;o=(await t.confirmTransaction({abortSignal:s?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:r,nonceValue:e.nonceInfo.nonce,signature:n},s&&s.commitment)).value}else null!=s?.abortSignal&&b.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await t.confirmTransaction(n,s&&s.commitment)).value;if(o.err){if(null!=n)throw new bt({action:"send",signature:n,transactionMessage:`Status: (${JSON.stringify(o)})`});throw new Error(`Transaction ${n} failed (${JSON.stringify(o)})`)}return n}function kt(t){return new Promise((e=>setTimeout(e,t)))}function _t(t,e){const i=t.layout.span>=0?t.layout.span:U(t,e),r=s.Buffer.alloc(i),n=Object.assign({instruction:t.index},e);return t.layout.encode(n,r),r}function Ct(t,e){let i;try{i=t.layout.decode(e)}catch(t){throw new Error("invalid instruction; "+t)}if(i.instruction!==t.index)throw new Error(`invalid instruction; instruction index mismatch ${i.instruction} != ${t.index}`);return i}const Et=u._O("lamportsPerSignature"),Pt=u.n_([u.Jq("version"),u.Jq("state"),j("authorizedPubkey"),j("nonce"),u.n_([Et],"feeCalculator")]),It=Pt.span;class Tt{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Pt.decode(E(t),0);return new Tt({authorizedPubkey:new z(e.authorizedPubkey),nonce:new z(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const At=(8,t=>{const e=(0,u.Ik)(8,t),{encode:i,decode:r}=(t=>({decode:t.decode.bind(t),encode:t.encode.bind(t)}))(e),n=e;return n.decode=(t,e)=>{const i=r(t,e);return(0,p.oU)(s.Buffer.from(i))},n.encode=(t,e,s)=>{const r=(0,p.k$)(t,8);return i(r,e,s)},n});class Mt{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=u.Jq("instruction").decode(t.data);let i;for(const[t,s]of Object.entries(Rt))if(s.index==e){i=t;break}if(!i)throw new Error("Instruction type incorrect; not a SystemInstruction");return i}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:i,programId:s}=Ct(Rt.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:i,programId:new z(s)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=Ct(Rt.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:i,programId:s}=Ct(Rt.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:i,programId:new z(s)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=Ct(Rt.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:i,space:s,programId:r}=Ct(Rt.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new z(e),seed:i,space:s,programId:new z(r)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=Ct(Rt.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new z(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:i,programId:s}=Ct(Rt.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new z(e),seed:i,programId:new z(s)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:i,lamports:s,space:r,programId:n}=Ct(Rt.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new z(e),seed:i,lamports:s,space:r,programId:new z(n)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=Ct(Rt.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new z(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Ct(Rt.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Ct(Rt.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=Ct(Rt.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new z(e)}}static checkProgramId(t){if(!t.equals(Bt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Rt=Object.freeze({Create:{index:0,layout:u.n_([u.Jq("instruction"),u.gM("lamports"),u.gM("space"),j("programId")])},Assign:{index:1,layout:u.n_([u.Jq("instruction"),j("programId")])},Transfer:{index:2,layout:u.n_([u.Jq("instruction"),At("lamports")])},CreateWithSeed:{index:3,layout:u.n_([u.Jq("instruction"),j("base"),q("seed"),u.gM("lamports"),u.gM("space"),j("programId")])},AdvanceNonceAccount:{index:4,layout:u.n_([u.Jq("instruction")])},WithdrawNonceAccount:{index:5,layout:u.n_([u.Jq("instruction"),u.gM("lamports")])},InitializeNonceAccount:{index:6,layout:u.n_([u.Jq("instruction"),j("authorized")])},AuthorizeNonceAccount:{index:7,layout:u.n_([u.Jq("instruction"),j("authorized")])},Allocate:{index:8,layout:u.n_([u.Jq("instruction"),u.gM("space")])},AllocateWithSeed:{index:9,layout:u.n_([u.Jq("instruction"),j("base"),q("seed"),u.gM("space"),j("programId")])},AssignWithSeed:{index:10,layout:u.n_([u.Jq("instruction"),j("base"),q("seed"),j("programId")])},TransferWithSeed:{index:11,layout:u.n_([u.Jq("instruction"),At("lamports"),q("seed"),j("programId")])},UpgradeNonceAccount:{index:12,layout:u.n_([u.Jq("instruction")])}});class Bt{constructor(){}static createAccount(t){const e=_t(Rt.Create,{lamports:t.lamports,space:t.space,programId:E(t.programId.toBuffer())});return new ot({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:e})}static transfer(t){let e,i;return"basePubkey"in t?(e=_t(Rt.TransferWithSeed,{lamports:BigInt(t.lamports),seed:t.seed,programId:E(t.programId.toBuffer())}),i=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]):(e=_t(Rt.Transfer,{lamports:BigInt(t.lamports)}),i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]),new ot({keys:i,programId:this.programId,data:e})}static assign(t){let e,i;return"basePubkey"in t?(e=_t(Rt.AssignWithSeed,{base:E(t.basePubkey.toBuffer()),seed:t.seed,programId:E(t.programId.toBuffer())}),i=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]):(e=_t(Rt.Assign,{programId:E(t.programId.toBuffer())}),i=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]),new ot({keys:i,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=_t(Rt.CreateWithSeed,{base:E(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:E(t.programId.toBuffer())});let i=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||i.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new ot({keys:i,programId:this.programId,data:e})}static createNonceAccount(t){const e=new at;"basePubkey"in t&&"seed"in t?e.add(Bt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:It,programId:this.programId})):e.add(Bt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:It,programId:this.programId}));const i={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(i)),e}static nonceInitialize(t){const e=_t(Rt.InitializeNonceAccount,{authorized:E(t.authorizedPubkey.toBuffer())}),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dt,isSigner:!1,isWritable:!1},{pubkey:ft,isSigner:!1,isWritable:!1}],programId:this.programId,data:e};return new ot(i)}static nonceAdvance(t){const e=_t(Rt.AdvanceNonceAccount),i={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:dt,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e};return new ot(i)}static nonceWithdraw(t){const e=_t(Rt.WithdrawNonceAccount,{lamports:t.lamports});return new ot({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:dt,isSigner:!1,isWritable:!1},{pubkey:ft,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static nonceAuthorize(t){const e=_t(Rt.AuthorizeNonceAccount,{authorized:E(t.newAuthorizedPubkey.toBuffer())});return new ot({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:e})}static allocate(t){let e,i;return"basePubkey"in t?(e=_t(Rt.AllocateWithSeed,{base:E(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:E(t.programId.toBuffer())}),i=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]):(e=_t(Rt.Allocate,{space:t.space}),i=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]),new ot({keys:i,programId:this.programId,data:e})}}Bt.programId=new z("11111111111111111111111111111111");const zt=L-300;class Dt{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/Dt.chunkSize)+1+1)}static async load(t,e,i,r,n){{const s=await t.getMinimumBalanceForRentExemption(n.length),o=await t.getAccountInfo(i.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return b.error("Program load failed, account is already executable"),!1;o.data.length!==n.length&&(a=a||new at,a.add(Bt.allocate({accountPubkey:i.publicKey,space:n.length}))),o.owner.equals(r)||(a=a||new at,a.add(Bt.assign({accountPubkey:i.publicKey,programId:r}))),o.lamports<s&&(a=a||new at,a.add(Bt.transfer({fromPubkey:e.publicKey,toPubkey:i.publicKey,lamports:s-o.lamports})))}else a=(new at).add(Bt.createAccount({fromPubkey:e.publicKey,newAccountPubkey:i.publicKey,lamports:s>0?s:1,space:n.length,programId:r}));null!==a&&await wt(t,a,[e,i],{commitment:"confirmed"})}const o=u.n_([u.Jq("instruction"),u.Jq("offset"),u.Jq("bytesLength"),u.Jq("bytesLengthPadding"),u.A9(u.u8("byte"),u.cv(u.Jq(),-8),"bytes")]),a=Dt.chunkSize;let h=0,l=n,c=[];for(;l.length>0;){const n=l.slice(0,a),u=s.Buffer.alloc(a+16);o.encode({instruction:0,offset:h,bytes:n,bytesLength:0,bytesLengthPadding:0},u);const p=(new at).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0}],programId:r,data:u});if(c.push(wt(t,p,[e,i],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")){const t=4;await kt(1e3/t)}h+=a,l=l.slice(a)}await Promise.all(c);{const n=u.n_([u.Jq("instruction")]),o=s.Buffer.alloc(n.span);n.encode({instruction:1},o);const a=(new at).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:ft,isSigner:!1,isWritable:!1}],programId:r,data:o}),h="processed",l=await t.sendTransaction(a,[e,i],{preflightCommitment:h}),{context:c,value:p}=await t.confirmTransaction({signature:l,lastValidBlockHeight:a.lastValidBlockHeight,blockhash:a.recentBlockhash},h);if(p.err)throw new Error(`Transaction ${l} failed (${JSON.stringify(p)})`);for(;;){try{if(await t.getSlot({commitment:h})>c.slot)break}catch{}await new Promise((t=>setTimeout(t,Math.round(200))))}}return!0}}Dt.chunkSize=zt;const Ft=new z("BPFLoader2111111111111111111111111111111111");class Lt{static getMinNumSignatures(t){return Dt.getMinNumSignatures(t)}static load(t,e,i,s,r){return Dt.load(t,e,i,r,s)}}function Vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ot,Nt;function Wt(){if(Nt)return Ot;Nt=1;var t=Object.prototype.toString,e=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};function i(s,r){var n,o,a,h,l,c,u;if(!0===s)return"true";if(!1===s)return"false";switch(typeof s){case"object":if(null===s)return null;if(s.toJSON&&"function"==typeof s.toJSON)return i(s.toJSON(),r);if("[object Array]"===(u=t.call(s))){for(a="[",o=s.length-1,n=0;n<o;n++)a+=i(s[n],!0)+",";return o>-1&&(a+=i(s[n],!0)),a+"]"}if("[object Object]"===u){for(o=(h=e(s).sort()).length,a="",n=0;n<o;)void 0!==(c=i(s[l=h[n]],!1))&&(a&&(a+=","),a+=JSON.stringify(l)+":"+c),n++;return"{"+a+"}"}return JSON.stringify(s);case"function":case"undefined":return r?null:void 0;case"string":return JSON.stringify(s);default:return isFinite(s)?s:null}}return Ot=function(t){var e=i(t,!1);if(void 0!==e)return""+e}}var Ht=Vt(Wt());function Gt(t){let e=0;for(;t>1;)t/=2,e++;return e}class jt{constructor(t,e,i,s,r){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=i,this.firstNormalEpoch=s,this.firstNormalSlot=r}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const i=Gt(0===(e=t+32+1)?1:(e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,1+(e|=e>>32)))-Gt(32)-1;return[i,t-(this.getSlotsInEpoch(i)-32)]}{const e=t-this.firstNormalSlot,i=Math.floor(e/this.slotsPerEpoch);return[this.firstNormalEpoch+i,e%this.slotsPerEpoch]}var e}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?32*(Math.pow(2,t)-1):(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Gt(32)):this.slotsPerEpoch}}var $t=globalThis.fetch;class qt extends g.Ey{constructor(t,e,i){super((t=>{const i=(0,g.XY)(t,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return this.underlyingSocket="socket"in i?i.socket:i,i}),t,e,i),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return 1===e?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}class Ut{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=function(t,e){let i;try{i=t.layout.decode(e)}catch(t){throw new Error("invalid instruction; "+t)}if(i.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${i.typeIndex} != ${t.index}`);return i}(Kt,t),i=t.length-56;Y(i>=0,"lookup table is invalid"),Y(i%32==0,"lookup table is invalid");const s=i/32,{addresses:r}=u.n_([u.A9(j(),s,"addresses")]).decode(t.slice(56));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:0!==e.authority.length?new z(e.authority[0]):void 0,addresses:r.map((t=>new z(t)))}}}const Kt={index:1,layout:u.n_([u.Jq("typeIndex"),At("deactivationSlot"),u._O("lastExtendedSlot"),u.u8("lastExtendedStartIndex"),u.u8(),u.A9(j(),u.cv(u.u8(),-1),"authority")])},Zt=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,Yt=(0,d.oQ)((0,d.eE)(z),(0,d.Z_)(),(t=>new z(t))),Jt=(0,d.bc)([(0,d.Z_)(),(0,d.i0)("base64")]),Xt=(0,d.oQ)((0,d.eE)(s.Buffer),Jt,(t=>s.Buffer.from(t[0],"base64"))),Qt=3e4;function te(t){let e,i;if("string"==typeof t)e=t;else if(t){const{commitment:s,...r}=t;e=s,i=r}return{commitment:e,config:i}}function ee(t){return t.map((t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t))}function ie(t){return(0,d.G0)([(0,d.dt)({jsonrpc:(0,d.i0)("2.0"),id:(0,d.Z_)(),result:t}),(0,d.dt)({jsonrpc:(0,d.i0)("2.0"),id:(0,d.Z_)(),error:(0,d.dt)({code:(0,d._4)(),message:(0,d.Z_)(),data:(0,d.jt)((0,d.Yj)())})})])}const se=ie((0,d._4)());function re(t){return(0,d.oQ)(ie(t),se,(e=>"error"in e?e:{...e,result:(0,d.Ue)(e.result,t)}))}function ne(t){return re((0,d.dt)({context:(0,d.dt)({slot:(0,d.Rx)()}),value:t}))}function oe(t){return(0,d.dt)({context:(0,d.dt)({slot:(0,d.Rx)()}),value:t})}function ae(t,e){return 0===t?new it({header:e.header,staticAccountKeys:e.accountKeys.map((t=>new z(t))),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map((t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:h().decode(t.data)}))),addressTableLookups:e.addressTableLookups}):new et(e)}const he=(0,d.dt)({foundation:(0,d.Rx)(),foundationTerm:(0,d.Rx)(),initial:(0,d.Rx)(),taper:(0,d.Rx)(),terminal:(0,d.Rx)()}),le=re((0,d.IX)((0,d.AG)((0,d.dt)({epoch:(0,d.Rx)(),effectiveSlot:(0,d.Rx)(),amount:(0,d.Rx)(),postBalance:(0,d.Rx)(),commission:(0,d.jt)((0,d.AG)((0,d.Rx)()))})))),ce=(0,d.IX)((0,d.dt)({slot:(0,d.Rx)(),prioritizationFee:(0,d.Rx)()})),ue=(0,d.dt)({total:(0,d.Rx)(),validator:(0,d.Rx)(),foundation:(0,d.Rx)(),epoch:(0,d.Rx)()}),pe=(0,d.dt)({epoch:(0,d.Rx)(),slotIndex:(0,d.Rx)(),slotsInEpoch:(0,d.Rx)(),absoluteSlot:(0,d.Rx)(),blockHeight:(0,d.jt)((0,d.Rx)()),transactionCount:(0,d.jt)((0,d.Rx)())}),de=(0,d.dt)({slotsPerEpoch:(0,d.Rx)(),leaderScheduleSlotOffset:(0,d.Rx)(),warmup:(0,d.O7)(),firstNormalEpoch:(0,d.Rx)(),firstNormalSlot:(0,d.Rx)()}),fe=(0,d.IM)((0,d.Z_)(),(0,d.IX)((0,d.Rx)())),me=(0,d.AG)((0,d.G0)([(0,d.dt)({}),(0,d.Z_)()])),ge=(0,d.dt)({err:me}),ye=(0,d.i0)("receivedSignature"),ve=(0,d.dt)({"solana-core":(0,d.Z_)(),"feature-set":(0,d.jt)((0,d.Rx)())}),be=(0,d.dt)({program:(0,d.Z_)(),programId:Yt,parsed:(0,d._4)()}),Se=(0,d.dt)({programId:Yt,accounts:(0,d.IX)(Yt),data:(0,d.Z_)()}),xe=ne((0,d.dt)({err:(0,d.AG)((0,d.G0)([(0,d.dt)({}),(0,d.Z_)()])),logs:(0,d.AG)((0,d.IX)((0,d.Z_)())),accounts:(0,d.jt)((0,d.AG)((0,d.IX)((0,d.AG)((0,d.dt)({executable:(0,d.O7)(),owner:(0,d.Z_)(),lamports:(0,d.Rx)(),data:(0,d.IX)((0,d.Z_)()),rentEpoch:(0,d.jt)((0,d.Rx)())}))))),unitsConsumed:(0,d.jt)((0,d.Rx)()),returnData:(0,d.jt)((0,d.AG)((0,d.dt)({programId:(0,d.Z_)(),data:(0,d.bc)([(0,d.Z_)(),(0,d.i0)("base64")])}))),innerInstructions:(0,d.jt)((0,d.AG)((0,d.IX)((0,d.dt)({index:(0,d.Rx)(),instructions:(0,d.IX)((0,d.G0)([be,Se]))}))))})),we=ne((0,d.dt)({byIdentity:(0,d.IM)((0,d.Z_)(),(0,d.IX)((0,d.Rx)())),range:(0,d.dt)({firstSlot:(0,d.Rx)(),lastSlot:(0,d.Rx)()})})),ke=re(he),_e=re(ue),Ce=re(ce),Ee=re(pe),Pe=re(de),Ie=re(fe),Te=re((0,d.Rx)()),Ae=ne((0,d.dt)({total:(0,d.Rx)(),circulating:(0,d.Rx)(),nonCirculating:(0,d.Rx)(),nonCirculatingAccounts:(0,d.IX)(Yt)})),Me=(0,d.dt)({amount:(0,d.Z_)(),uiAmount:(0,d.AG)((0,d.Rx)()),decimals:(0,d.Rx)(),uiAmountString:(0,d.jt)((0,d.Z_)())}),Re=ne((0,d.IX)((0,d.dt)({address:Yt,amount:(0,d.Z_)(),uiAmount:(0,d.AG)((0,d.Rx)()),decimals:(0,d.Rx)(),uiAmountString:(0,d.jt)((0,d.Z_)())}))),Be=ne((0,d.IX)((0,d.dt)({pubkey:Yt,account:(0,d.dt)({executable:(0,d.O7)(),owner:Yt,lamports:(0,d.Rx)(),data:Xt,rentEpoch:(0,d.Rx)()})}))),ze=(0,d.dt)({program:(0,d.Z_)(),parsed:(0,d._4)(),space:(0,d.Rx)()}),De=ne((0,d.IX)((0,d.dt)({pubkey:Yt,account:(0,d.dt)({executable:(0,d.O7)(),owner:Yt,lamports:(0,d.Rx)(),data:ze,rentEpoch:(0,d.Rx)()})}))),Fe=ne((0,d.IX)((0,d.dt)({lamports:(0,d.Rx)(),address:Yt}))),Le=(0,d.dt)({executable:(0,d.O7)(),owner:Yt,lamports:(0,d.Rx)(),data:Xt,rentEpoch:(0,d.Rx)()}),Ve=(0,d.dt)({pubkey:Yt,account:Le}),Oe=(0,d.oQ)((0,d.G0)([(0,d.eE)(s.Buffer),ze]),(0,d.G0)([Jt,ze]),(t=>Array.isArray(t)?(0,d.Ue)(t,Xt):t)),Ne=(0,d.dt)({executable:(0,d.O7)(),owner:Yt,lamports:(0,d.Rx)(),data:Oe,rentEpoch:(0,d.Rx)()}),We=(0,d.dt)({pubkey:Yt,account:Ne}),He=(0,d.dt)({state:(0,d.G0)([(0,d.i0)("active"),(0,d.i0)("inactive"),(0,d.i0)("activating"),(0,d.i0)("deactivating")]),active:(0,d.Rx)(),inactive:(0,d.Rx)()}),Ge=re((0,d.IX)((0,d.dt)({signature:(0,d.Z_)(),slot:(0,d.Rx)(),err:me,memo:(0,d.AG)((0,d.Z_)()),blockTime:(0,d.jt)((0,d.AG)((0,d.Rx)()))}))),je=re((0,d.IX)((0,d.dt)({signature:(0,d.Z_)(),slot:(0,d.Rx)(),err:me,memo:(0,d.AG)((0,d.Z_)()),blockTime:(0,d.jt)((0,d.AG)((0,d.Rx)()))}))),$e=(0,d.dt)({subscription:(0,d.Rx)(),result:oe(Le)}),qe=(0,d.dt)({pubkey:Yt,account:Le}),Ue=(0,d.dt)({subscription:(0,d.Rx)(),result:oe(qe)}),Ke=(0,d.dt)({parent:(0,d.Rx)(),slot:(0,d.Rx)(),root:(0,d.Rx)()}),Ze=(0,d.dt)({subscription:(0,d.Rx)(),result:Ke}),Ye=(0,d.G0)([(0,d.dt)({type:(0,d.G0)([(0,d.i0)("firstShredReceived"),(0,d.i0)("completed"),(0,d.i0)("optimisticConfirmation"),(0,d.i0)("root")]),slot:(0,d.Rx)(),timestamp:(0,d.Rx)()}),(0,d.dt)({type:(0,d.i0)("createdBank"),parent:(0,d.Rx)(),slot:(0,d.Rx)(),timestamp:(0,d.Rx)()}),(0,d.dt)({type:(0,d.i0)("frozen"),slot:(0,d.Rx)(),timestamp:(0,d.Rx)(),stats:(0,d.dt)({numTransactionEntries:(0,d.Rx)(),numSuccessfulTransactions:(0,d.Rx)(),numFailedTransactions:(0,d.Rx)(),maxTransactionsPerEntry:(0,d.Rx)()})}),(0,d.dt)({type:(0,d.i0)("dead"),slot:(0,d.Rx)(),timestamp:(0,d.Rx)(),err:(0,d.Z_)()})]),Je=(0,d.dt)({subscription:(0,d.Rx)(),result:Ye}),Xe=(0,d.dt)({subscription:(0,d.Rx)(),result:oe((0,d.G0)([ge,ye]))}),Qe=(0,d.dt)({subscription:(0,d.Rx)(),result:(0,d.Rx)()}),ti=(0,d.dt)({pubkey:(0,d.Z_)(),gossip:(0,d.AG)((0,d.Z_)()),tpu:(0,d.AG)((0,d.Z_)()),rpc:(0,d.AG)((0,d.Z_)()),version:(0,d.AG)((0,d.Z_)())}),ei=(0,d.dt)({votePubkey:(0,d.Z_)(),nodePubkey:(0,d.Z_)(),activatedStake:(0,d.Rx)(),epochVoteAccount:(0,d.O7)(),epochCredits:(0,d.IX)((0,d.bc)([(0,d.Rx)(),(0,d.Rx)(),(0,d.Rx)()])),commission:(0,d.Rx)(),lastVote:(0,d.Rx)(),rootSlot:(0,d.AG)((0,d.Rx)())}),ii=re((0,d.dt)({current:(0,d.IX)(ei),delinquent:(0,d.IX)(ei)})),si=(0,d.G0)([(0,d.i0)("processed"),(0,d.i0)("confirmed"),(0,d.i0)("finalized")]),ri=(0,d.dt)({slot:(0,d.Rx)(),confirmations:(0,d.AG)((0,d.Rx)()),err:me,confirmationStatus:(0,d.jt)(si)}),ni=ne((0,d.IX)((0,d.AG)(ri))),oi=re((0,d.Rx)()),ai=(0,d.dt)({accountKey:Yt,writableIndexes:(0,d.IX)((0,d.Rx)()),readonlyIndexes:(0,d.IX)((0,d.Rx)())}),hi=(0,d.dt)({signatures:(0,d.IX)((0,d.Z_)()),message:(0,d.dt)({accountKeys:(0,d.IX)((0,d.Z_)()),header:(0,d.dt)({numRequiredSignatures:(0,d.Rx)(),numReadonlySignedAccounts:(0,d.Rx)(),numReadonlyUnsignedAccounts:(0,d.Rx)()}),instructions:(0,d.IX)((0,d.dt)({accounts:(0,d.IX)((0,d.Rx)()),data:(0,d.Z_)(),programIdIndex:(0,d.Rx)()})),recentBlockhash:(0,d.Z_)(),addressTableLookups:(0,d.jt)((0,d.IX)(ai))})}),li=(0,d.dt)({pubkey:Yt,signer:(0,d.O7)(),writable:(0,d.O7)(),source:(0,d.jt)((0,d.G0)([(0,d.i0)("transaction"),(0,d.i0)("lookupTable")]))}),ci=(0,d.dt)({accountKeys:(0,d.IX)(li),signatures:(0,d.IX)((0,d.Z_)())}),ui=(0,d.dt)({parsed:(0,d._4)(),program:(0,d.Z_)(),programId:Yt}),pi=(0,d.dt)({accounts:(0,d.IX)(Yt),data:(0,d.Z_)(),programId:Yt}),di=(0,d.G0)([pi,ui]),fi=(0,d.G0)([(0,d.dt)({parsed:(0,d._4)(),program:(0,d.Z_)(),programId:(0,d.Z_)()}),(0,d.dt)({accounts:(0,d.IX)((0,d.Z_)()),data:(0,d.Z_)(),programId:(0,d.Z_)()})]),mi=(0,d.oQ)(di,fi,(t=>"accounts"in t?(0,d.Ue)(t,pi):(0,d.Ue)(t,ui))),gi=(0,d.dt)({signatures:(0,d.IX)((0,d.Z_)()),message:(0,d.dt)({accountKeys:(0,d.IX)(li),instructions:(0,d.IX)(mi),recentBlockhash:(0,d.Z_)(),addressTableLookups:(0,d.jt)((0,d.AG)((0,d.IX)(ai)))})}),yi=(0,d.dt)({accountIndex:(0,d.Rx)(),mint:(0,d.Z_)(),owner:(0,d.jt)((0,d.Z_)()),programId:(0,d.jt)((0,d.Z_)()),uiTokenAmount:Me}),vi=(0,d.dt)({writable:(0,d.IX)(Yt),readonly:(0,d.IX)(Yt)}),bi=(0,d.dt)({err:me,fee:(0,d.Rx)(),innerInstructions:(0,d.jt)((0,d.AG)((0,d.IX)((0,d.dt)({index:(0,d.Rx)(),instructions:(0,d.IX)((0,d.dt)({accounts:(0,d.IX)((0,d.Rx)()),data:(0,d.Z_)(),programIdIndex:(0,d.Rx)()}))})))),preBalances:(0,d.IX)((0,d.Rx)()),postBalances:(0,d.IX)((0,d.Rx)()),logMessages:(0,d.jt)((0,d.AG)((0,d.IX)((0,d.Z_)()))),preTokenBalances:(0,d.jt)((0,d.AG)((0,d.IX)(yi))),postTokenBalances:(0,d.jt)((0,d.AG)((0,d.IX)(yi))),loadedAddresses:(0,d.jt)(vi),computeUnitsConsumed:(0,d.jt)((0,d.Rx)())}),Si=(0,d.dt)({err:me,fee:(0,d.Rx)(),innerInstructions:(0,d.jt)((0,d.AG)((0,d.IX)((0,d.dt)({index:(0,d.Rx)(),instructions:(0,d.IX)(mi)})))),preBalances:(0,d.IX)((0,d.Rx)()),postBalances:(0,d.IX)((0,d.Rx)()),logMessages:(0,d.jt)((0,d.AG)((0,d.IX)((0,d.Z_)()))),preTokenBalances:(0,d.jt)((0,d.AG)((0,d.IX)(yi))),postTokenBalances:(0,d.jt)((0,d.AG)((0,d.IX)(yi))),loadedAddresses:(0,d.jt)(vi),computeUnitsConsumed:(0,d.jt)((0,d.Rx)())}),xi=(0,d.G0)([(0,d.i0)(0),(0,d.i0)("legacy")]),wi=(0,d.dt)({pubkey:(0,d.Z_)(),lamports:(0,d.Rx)(),postBalance:(0,d.AG)((0,d.Rx)()),rewardType:(0,d.AG)((0,d.Z_)()),commission:(0,d.jt)((0,d.AG)((0,d.Rx)()))}),ki=re((0,d.AG)((0,d.dt)({blockhash:(0,d.Z_)(),previousBlockhash:(0,d.Z_)(),parentSlot:(0,d.Rx)(),transactions:(0,d.IX)((0,d.dt)({transaction:hi,meta:(0,d.AG)(bi),version:(0,d.jt)(xi)})),rewards:(0,d.jt)((0,d.IX)(wi)),blockTime:(0,d.AG)((0,d.Rx)()),blockHeight:(0,d.AG)((0,d.Rx)())}))),_i=re((0,d.AG)((0,d.dt)({blockhash:(0,d.Z_)(),previousBlockhash:(0,d.Z_)(),parentSlot:(0,d.Rx)(),rewards:(0,d.jt)((0,d.IX)(wi)),blockTime:(0,d.AG)((0,d.Rx)()),blockHeight:(0,d.AG)((0,d.Rx)())}))),Ci=re((0,d.AG)((0,d.dt)({blockhash:(0,d.Z_)(),previousBlockhash:(0,d.Z_)(),parentSlot:(0,d.Rx)(),transactions:(0,d.IX)((0,d.dt)({transaction:ci,meta:(0,d.AG)(bi),version:(0,d.jt)(xi)})),rewards:(0,d.jt)((0,d.IX)(wi)),blockTime:(0,d.AG)((0,d.Rx)()),blockHeight:(0,d.AG)((0,d.Rx)())}))),Ei=re((0,d.AG)((0,d.dt)({blockhash:(0,d.Z_)(),previousBlockhash:(0,d.Z_)(),parentSlot:(0,d.Rx)(),transactions:(0,d.IX)((0,d.dt)({transaction:gi,meta:(0,d.AG)(Si),version:(0,d.jt)(xi)})),rewards:(0,d.jt)((0,d.IX)(wi)),blockTime:(0,d.AG)((0,d.Rx)()),blockHeight:(0,d.AG)((0,d.Rx)())}))),Pi=re((0,d.AG)((0,d.dt)({blockhash:(0,d.Z_)(),previousBlockhash:(0,d.Z_)(),parentSlot:(0,d.Rx)(),transactions:(0,d.IX)((0,d.dt)({transaction:ci,meta:(0,d.AG)(Si),version:(0,d.jt)(xi)})),rewards:(0,d.jt)((0,d.IX)(wi)),blockTime:(0,d.AG)((0,d.Rx)()),blockHeight:(0,d.AG)((0,d.Rx)())}))),Ii=re((0,d.AG)((0,d.dt)({blockhash:(0,d.Z_)(),previousBlockhash:(0,d.Z_)(),parentSlot:(0,d.Rx)(),rewards:(0,d.jt)((0,d.IX)(wi)),blockTime:(0,d.AG)((0,d.Rx)()),blockHeight:(0,d.AG)((0,d.Rx)())}))),Ti=re((0,d.AG)((0,d.dt)({blockhash:(0,d.Z_)(),previousBlockhash:(0,d.Z_)(),parentSlot:(0,d.Rx)(),transactions:(0,d.IX)((0,d.dt)({transaction:hi,meta:(0,d.AG)(bi)})),rewards:(0,d.jt)((0,d.IX)(wi)),blockTime:(0,d.AG)((0,d.Rx)())}))),Ai=re((0,d.AG)((0,d.dt)({blockhash:(0,d.Z_)(),previousBlockhash:(0,d.Z_)(),parentSlot:(0,d.Rx)(),signatures:(0,d.IX)((0,d.Z_)()),blockTime:(0,d.AG)((0,d.Rx)())}))),Mi=re((0,d.AG)((0,d.dt)({slot:(0,d.Rx)(),meta:(0,d.AG)(bi),blockTime:(0,d.jt)((0,d.AG)((0,d.Rx)())),transaction:hi,version:(0,d.jt)(xi)}))),Ri=re((0,d.AG)((0,d.dt)({slot:(0,d.Rx)(),transaction:gi,meta:(0,d.AG)(Si),blockTime:(0,d.jt)((0,d.AG)((0,d.Rx)())),version:(0,d.jt)(xi)}))),Bi=ne((0,d.dt)({blockhash:(0,d.Z_)(),lastValidBlockHeight:(0,d.Rx)()})),zi=ne((0,d.O7)()),Di=(0,d.dt)({slot:(0,d.Rx)(),numTransactions:(0,d.Rx)(),numSlots:(0,d.Rx)(),samplePeriodSecs:(0,d.Rx)()}),Fi=re((0,d.IX)(Di)),Li=ne((0,d.AG)((0,d.dt)({feeCalculator:(0,d.dt)({lamportsPerSignature:(0,d.Rx)()})}))),Vi=re((0,d.Z_)()),Oi=re((0,d.Z_)()),Ni=(0,d.dt)({err:me,logs:(0,d.IX)((0,d.Z_)()),signature:(0,d.Z_)()}),Wi=(0,d.dt)({result:oe(Ni),subscription:(0,d.Rx)()}),Hi={"solana-client":"js/1.0.0-maintenance"};class Gi{constructor(t,e){let i,s,r,n,o,a;var h;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const t={};return async e=>{const{commitment:i,config:s}=te(e),r=this._buildArgs([],i,void 0,s),n=Ht(r);return t[n]=t[n]??(async()=>{try{const t=await this._rpcRequest("getBlockHeight",r),e=(0,d.Ue)(t,re((0,d.Rx)()));if("error"in e)throw new xt(e.error,"failed to get block height information");return e.result}finally{delete t[n]}})(),await t[n]}})(),e&&"string"==typeof e?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,i=e.wsEndpoint,s=e.httpHeaders,r=e.fetch,n=e.fetchMiddleware,o=e.disableRetryOnRateLimit,a=e.httpAgent),this._rpcEndpoint=function(t){if(!1===/^https?:/.test(t))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}(t),this._rpcWsEndpoint=i||function(t){const e=t.match(Zt);if(null==e)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[i,s,r,n]=e,o=t.startsWith("https:")?"wss:":"ws:",a=null==r?null:parseInt(r.slice(1),10);return`${o}//${s}${null==a?"":`:${a+1}`}${n}`}(t),this._rpcClient=function(t,e,i,s,r,n){const o=i||$t;let a;return null!=n&&b.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),s&&(a=async(t,e)=>{const i=await new Promise(((i,r)=>{try{s(t,e,((t,e)=>i([t,e])))}catch(t){r(t)}}));return await o(...i)}),new(m())((async(i,s)=>{const n={method:"POST",body:i,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},e||{},Hi)};try{let e,i=5,h=500;for(;e=a?await a(t,n):await o(t,n),429===e.status&&!0!==r&&(i-=1,0!==i);)b.error(`Server responded with ${e.status} ${e.statusText}.  Retrying after ${h}ms delay...`),await kt(h),h*=2;const l=await e.text();e.ok?s(null,l):s(new Error(`${e.status} ${e.statusText}: ${l}`))}catch(t){t instanceof Error&&s(t)}}),{})}(t,s,r,n,o,a),this._rpcRequest=(h=this._rpcClient,(t,e)=>new Promise(((i,s)=>{h.request(t,e,((t,e)=>{t?s(t):i(e)}))}))),this._rpcBatchRequest=function(t){return e=>new Promise(((i,s)=>{0===e.length&&i([]);const r=e.map((e=>t.request(e.methodName,e.args)));t.request(r,((t,e)=>{t?s(t):i(e)}))}))}(this._rpcClient),this._rpcWebSocket=new qt(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:i,config:s}=te(e),r=this._buildArgs([t.toBase58()],i,void 0,s),n=await this._rpcRequest("getBalance",r),o=(0,d.Ue)(n,ne((0,d.Rx)()));if("error"in o)throw new xt(o.error,`failed to get balance for ${t.toBase58()}`);return o.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then((t=>t.value)).catch((e=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}))}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),i=(0,d.Ue)(e,re((0,d.AG)((0,d.Rx)())));if("error"in i)throw new xt(i.error,`failed to get block time for slot ${t}`);return i.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=(0,d.Ue)(t,re((0,d.Rx)()));if("error"in e)throw new xt(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=(0,d.Ue)(t,Te);if("error"in e)throw new xt(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};e="string"==typeof t?{commitment:t}:t?{...t,commitment:t&&t.commitment||this.commitment}:{commitment:this.commitment};const i=await this._rpcRequest("getSupply",[e]),s=(0,d.Ue)(i,Ae);if("error"in s)throw new xt(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const i=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",i),r=(0,d.Ue)(s,ne(Me));if("error"in r)throw new xt(r.error,"failed to get token supply");return r.result}async getTokenAccountBalance(t,e){const i=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",i),r=(0,d.Ue)(s,ne(Me));if("error"in r)throw new xt(r.error,"failed to get token account balance");return r.result}async getTokenAccountsByOwner(t,e,i){const{commitment:s,config:r}=te(i);let n=[t.toBase58()];"mint"in e?n.push({mint:e.mint.toBase58()}):n.push({programId:e.programId.toBase58()});const o=this._buildArgs(n,s,"base64",r),a=await this._rpcRequest("getTokenAccountsByOwner",o),h=(0,d.Ue)(a,Be);if("error"in h)throw new xt(h.error,`failed to get token accounts owned by account ${t.toBase58()}`);return h.result}async getParsedTokenAccountsByOwner(t,e,i){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const r=this._buildArgs(s,i,"jsonParsed"),n=await this._rpcRequest("getTokenAccountsByOwner",r),o=(0,d.Ue)(n,De);if("error"in o)throw new xt(o.error,`failed to get token accounts owned by account ${t.toBase58()}`);return o.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},i=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",i),r=(0,d.Ue)(s,Fe);if("error"in r)throw new xt(r.error,"failed to get largest accounts");return r.result}async getTokenLargestAccounts(t,e){const i=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",i),r=(0,d.Ue)(s,Re);if("error"in r)throw new xt(r.error,"failed to get token largest accounts");return r.result}async getAccountInfoAndContext(t,e){const{commitment:i,config:s}=te(e),r=this._buildArgs([t.toBase58()],i,"base64",s),n=await this._rpcRequest("getAccountInfo",r),o=(0,d.Ue)(n,ne((0,d.AG)(Le)));if("error"in o)throw new xt(o.error,`failed to get info about account ${t.toBase58()}`);return o.result}async getParsedAccountInfo(t,e){const{commitment:i,config:s}=te(e),r=this._buildArgs([t.toBase58()],i,"jsonParsed",s),n=await this._rpcRequest("getAccountInfo",r),o=(0,d.Ue)(n,ne((0,d.AG)(Ne)));if("error"in o)throw new xt(o.error,`failed to get info about account ${t.toBase58()}`);return o.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(e){throw new Error("failed to get info about account "+t.toBase58()+": "+e)}}async getMultipleParsedAccounts(t,e){const{commitment:i,config:s}=te(e),r=t.map((t=>t.toBase58())),n=this._buildArgs([r],i,"jsonParsed",s),o=await this._rpcRequest("getMultipleAccounts",n),a=(0,d.Ue)(o,ne((0,d.IX)((0,d.AG)(Ne))));if("error"in a)throw new xt(a.error,`failed to get info for accounts ${r}`);return a.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:i,config:s}=te(e),r=t.map((t=>t.toBase58())),n=this._buildArgs([r],i,"base64",s),o=await this._rpcRequest("getMultipleAccounts",n),a=(0,d.Ue)(o,ne((0,d.IX)((0,d.AG)(Le))));if("error"in a)throw new xt(a.error,`failed to get info for accounts ${r}`);return a.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,i){const{commitment:s,config:r}=te(e),n=this._buildArgs([t.toBase58()],s,void 0,{...r,epoch:null!=i?i:r?.epoch}),o=await this._rpcRequest("getStakeActivation",n),a=(0,d.Ue)(o,re(He));if("error"in a)throw new xt(a.error,`failed to get Stake Activation ${t.toBase58()}`);return a.result}async getProgramAccounts(t,e){const{commitment:i,config:s}=te(e),{encoding:r,...n}=s||{},o=this._buildArgs([t.toBase58()],i,r||"base64",{...n,...n.filters?{filters:ee(n.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",o),h=(0,d.IX)(Ve),l=!0===n.withContext?(0,d.Ue)(a,ne(h)):(0,d.Ue)(a,re(h));if("error"in l)throw new xt(l.error,`failed to get accounts owned by program ${t.toBase58()}`);return l.result}async getParsedProgramAccounts(t,e){const{commitment:i,config:s}=te(e),r=this._buildArgs([t.toBase58()],i,"jsonParsed",s),n=await this._rpcRequest("getProgramAccounts",r),o=(0,d.Ue)(n,re((0,d.IX)(We)));if("error"in o)throw new xt(o.error,`failed to get accounts owned by program ${t.toBase58()}`);return o.result}async confirmTransaction(t,e){let i,s;if("string"==typeof t)i=t;else{const e=t;if(e.abortSignal?.aborted)return Promise.reject(e.abortSignal.reason);i=e.signature}try{s=h().decode(i)}catch(t){throw new Error("signature must be base58 encoded: "+i)}return Y(64===s.length,"signature has invalid length"),"string"==typeof t?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:i}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise(((e,i)=>{null!=t&&(t.aborted?i(t.reason):t.addEventListener("abort",(()=>{i(t.reason)})))}))}getTransactionConfirmationPromise({commitment:t,signature:e}){let i,s,r=!1;return{abortConfirmation:()=>{s&&(s(),s=void 0),null!=i&&(this.removeSignatureListener(i),i=void 0)},confirmationPromise:new Promise(((n,o)=>{try{i=this.onSignature(e,((t,e)=>{i=void 0;const s={context:e,value:t};n({__type:rt.PROCESSED,response:s})}),t);const a=new Promise((t=>{null==i?t():s=this._onSubscriptionStateChange(i,(e=>{"subscribed"===e&&t()}))}));(async()=>{if(await a,r)return;const i=await this.getSignatureStatus(e);if(r)return;if(null==i)return;const{context:s,value:h}=i;if(null!=h)if(h?.err)o(h.err);else{switch(t){case"confirmed":case"single":case"singleGossip":if("processed"===h.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===h.confirmationStatus||"confirmed"===h.confirmationStatus)return}r=!0,n({__type:rt.PROCESSED,response:{context:s,value:h}})}})()}catch(t){o(t)}}))}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:i,signature:s}}){let r=!1;const n=new Promise((e=>{const s=async()=>{try{return await this.getBlockHeight(t)}catch(t){return-1}};(async()=>{let t=await s();if(!r){for(;t<=i;){if(await kt(1e3),r)return;if(t=await s(),r)return}e({__type:rt.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),h=this.getCancellationPromise(e);let l;try{const t=await Promise.race([h,a,n]);if(t.__type!==rt.PROCESSED)throw new N(s);l=t.response}finally{r=!0,o()}return l}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:i,nonceAccountPubkey:s,nonceValue:r,signature:n}}){let o=!1;const a=new Promise((e=>{let n=r,a=null;const h=async()=>{try{const{context:e,value:r}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:i});return a=e.slot,r?.nonce}catch(t){return n}};(async()=>{if(n=await h(),!o)for(;;){if(r!==n)return void e({__type:rt.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await kt(2e3),o)return;if(n=await h(),o)return}})()})),{abortConfirmation:h,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:t,signature:n}),c=this.getCancellationPromise(e);let u;try{const e=await Promise.race([c,l,a]);if(e.__type===rt.PROCESSED)u=e.response;else{let s;for(;;){const t=await this.getSignatureStatus(n);if(null==t)break;if(!(t.context.slot<(e.slotInWhichNonceDidAdvance??i))){s=t;break}await kt(400)}if(!s?.value)throw new H(n);{const e=t||"finalized",{confirmationStatus:i}=s.value;switch(e){case"processed":case"recent":if("processed"!==i&&"confirmed"!==i&&"finalized"!==i)throw new H(n);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==i&&"finalized"!==i)throw new H(n);break;case"finalized":case"max":case"root":if("finalized"!==i)throw new H(n)}u={context:s.context,value:{err:s.value.err}}}}}finally{o=!0,h()}return u}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let i;const s=new Promise((e=>{let s=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":s=this._confirmTransactionInitialTimeout||3e4}i=setTimeout((()=>e({__type:rt.TIMED_OUT,timeoutMs:s})),s)})),{abortConfirmation:r,confirmationPromise:n}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let o;try{const t=await Promise.race([n,s]);if(t.__type!==rt.PROCESSED)throw new W(e,t.timeoutMs/1e3);o=t.response}finally{clearTimeout(i),r()}return o}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=(0,d.Ue)(t,re((0,d.IX)(ti)));if("error"in e)throw new xt(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),i=await this._rpcRequest("getVoteAccounts",e),s=(0,d.Ue)(i,ii);if("error"in s)throw new xt(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:i}=te(t),s=this._buildArgs([],e,void 0,i),r=await this._rpcRequest("getSlot",s),n=(0,d.Ue)(r,re((0,d.Rx)()));if("error"in n)throw new xt(n.error,"failed to get slot");return n.result}async getSlotLeader(t){const{commitment:e,config:i}=te(t),s=this._buildArgs([],e,void 0,i),r=await this._rpcRequest("getSlotLeader",s),n=(0,d.Ue)(r,re((0,d.Z_)()));if("error"in n)throw new xt(n.error,"failed to get slot leader");return n.result}async getSlotLeaders(t,e){const i=[t,e],s=await this._rpcRequest("getSlotLeaders",i),r=(0,d.Ue)(s,re((0,d.IX)(Yt)));if("error"in r)throw new xt(r.error,"failed to get slot leaders");return r.result}async getSignatureStatus(t,e){const{context:i,value:s}=await this.getSignatureStatuses([t],e);return Y(1===s.length),{context:i,value:s[0]}}async getSignatureStatuses(t,e){const i=[t];e&&i.push(e);const s=await this._rpcRequest("getSignatureStatuses",i),r=(0,d.Ue)(s,ni);if("error"in r)throw new xt(r.error,"failed to get signature status");return r.result}async getTransactionCount(t){const{commitment:e,config:i}=te(t),s=this._buildArgs([],e,void 0,i),r=await this._rpcRequest("getTransactionCount",s),n=(0,d.Ue)(r,re((0,d.Rx)()));if("error"in n)throw new xt(n.error,"failed to get transaction count");return n.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),i=await this._rpcRequest("getInflationGovernor",e),s=(0,d.Ue)(i,ke);if("error"in s)throw new xt(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,i){const{commitment:s,config:r}=te(i),n=this._buildArgs([t.map((t=>t.toBase58()))],s,void 0,{...r,epoch:null!=e?e:r?.epoch}),o=await this._rpcRequest("getInflationReward",n),a=(0,d.Ue)(o,le);if("error"in a)throw new xt(a.error,"failed to get inflation reward");return a.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=(0,d.Ue)(t,_e);if("error"in e)throw new xt(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:i}=te(t),s=this._buildArgs([],e,void 0,i),r=await this._rpcRequest("getEpochInfo",s),n=(0,d.Ue)(r,Ee);if("error"in n)throw new xt(n.error,"failed to get epoch info");return n.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=(0,d.Ue)(t,Pe);if("error"in e)throw new xt(e.error,"failed to get epoch schedule");const i=e.result;return new jt(i.slotsPerEpoch,i.leaderScheduleSlotOffset,i.warmup,i.firstNormalEpoch,i.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=(0,d.Ue)(t,Ie);if("error"in e)throw new xt(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const i=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",i),r=(0,d.Ue)(s,oi);return"error"in r?(b.warn("Unable to fetch minimum balance for rent exemption"),0):r.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:i}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:i,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),i=(0,d.Ue)(e,Fi);if("error"in i)throw new xt(i.error,"failed to get recent performance samples");return i.result}async getFeeCalculatorForBlockhash(t,e){const i=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",i),r=(0,d.Ue)(s,Li);if("error"in r)throw new xt(r.error,"failed to get fee calculator");const{context:n,value:o}=r.result;return{context:n,value:null!==o?o.feeCalculator:null}}async getFeeForMessage(t,e){const i=E(t.serialize()).toString("base64"),s=this._buildArgs([i],e),r=await this._rpcRequest("getFeeForMessage",s),n=(0,d.Ue)(r,ne((0,d.AG)((0,d.Rx)())));if("error"in n)throw new xt(n.error,"failed to get fee for message");if(null===n.result)throw new Error("invalid blockhash");return n.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map((t=>t.toBase58())),i=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",i),r=(0,d.Ue)(s,Ce);if("error"in r)throw new xt(r.error,"failed to get recent prioritization fees");return r.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:i}=te(t),s=this._buildArgs([],e,void 0,i),r=await this._rpcRequest("getLatestBlockhash",s),n=(0,d.Ue)(r,Bi);if("error"in n)throw new xt(n.error,"failed to get latest blockhash");return n.result}async isBlockhashValid(t,e){const{commitment:i,config:s}=te(e),r=this._buildArgs([t],i,void 0,s),n=await this._rpcRequest("isBlockhashValid",r),o=(0,d.Ue)(n,zi);if("error"in o)throw new xt(o.error,"failed to determine if the blockhash `"+t+"`is valid");return o.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=(0,d.Ue)(t,re(ve));if("error"in e)throw new xt(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=(0,d.Ue)(t,re((0,d.Z_)()));if("error"in e)throw new xt(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:i,config:s}=te(e),r=this._buildArgsAtLeastConfirmed([t],i,void 0,s),n=await this._rpcRequest("getBlock",r);try{switch(s?.transactionDetails){case"accounts":{const t=(0,d.Ue)(n,Ci);if("error"in t)throw t.error;return t.result}case"none":{const t=(0,d.Ue)(n,_i);if("error"in t)throw t.error;return t.result}default:{const t=(0,d.Ue)(n,ki);if("error"in t)throw t.error;const{result:e}=t;return e?{...e,transactions:e.transactions.map((({transaction:t,meta:e,version:i})=>({meta:e,transaction:{...t,message:ae(i,t.message)},version:i})))}:null}}}catch(t){throw new xt(t,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:i,config:s}=te(e),r=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",s),n=await this._rpcRequest("getBlock",r);try{switch(s?.transactionDetails){case"accounts":{const t=(0,d.Ue)(n,Pi);if("error"in t)throw t.error;return t.result}case"none":{const t=(0,d.Ue)(n,Ii);if("error"in t)throw t.error;return t.result}default:{const t=(0,d.Ue)(n,Ei);if("error"in t)throw t.error;return t.result}}}catch(t){throw new xt(t,"failed to get block")}}async getBlockProduction(t){let e,i;if("string"==typeof t)i=t;else if(t){const{commitment:s,...r}=t;i=s,e=r}const s=this._buildArgs([],i,"base64",e),r=await this._rpcRequest("getBlockProduction",s),n=(0,d.Ue)(r,we);if("error"in n)throw new xt(n.error,"failed to get block production information");return n.result}async getTransaction(t,e){const{commitment:i,config:s}=te(e),r=this._buildArgsAtLeastConfirmed([t],i,void 0,s),n=await this._rpcRequest("getTransaction",r),o=(0,d.Ue)(n,Mi);if("error"in o)throw new xt(o.error,"failed to get transaction");const a=o.result;return a?{...a,transaction:{...a.transaction,message:ae(a.version,a.transaction.message)}}:a}async getParsedTransaction(t,e){const{commitment:i,config:s}=te(e),r=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",s),n=await this._rpcRequest("getTransaction",r),o=(0,d.Ue)(n,Ri);if("error"in o)throw new xt(o.error,"failed to get transaction");return o.result}async getParsedTransactions(t,e){const{commitment:i,config:s}=te(e),r=t.map((t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",s)})));return(await this._rpcBatchRequest(r)).map((t=>{const e=(0,d.Ue)(t,Ri);if("error"in e)throw new xt(e.error,"failed to get transactions");return e.result}))}async getTransactions(t,e){const{commitment:i,config:s}=te(e),r=t.map((t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],i,void 0,s)})));return(await this._rpcBatchRequest(r)).map((t=>{const e=(0,d.Ue)(t,Mi);if("error"in e)throw new xt(e.error,"failed to get transactions");const i=e.result;return i?{...i,transaction:{...i.transaction,message:ae(i.version,i.transaction.message)}}:i}))}async getConfirmedBlock(t,e){const i=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",i),r=(0,d.Ue)(s,Ti);if("error"in r)throw new xt(r.error,"failed to get confirmed block");const n=r.result;if(!n)throw new Error("Confirmed block "+t+" not found");const o={...n,transactions:n.transactions.map((({transaction:t,meta:e})=>{const i=new et(t.message);return{meta:e,transaction:{...t,message:i}}}))};return{...o,transactions:o.transactions.map((({transaction:t,meta:e})=>({meta:e,transaction:at.populate(t.message,t.signatures)})))}}async getBlocks(t,e,i){const s=this._buildArgsAtLeastConfirmed(void 0!==e?[t,e]:[t],i),r=await this._rpcRequest("getBlocks",s),n=(0,d.Ue)(r,re((0,d.IX)((0,d.Rx)())));if("error"in n)throw new xt(n.error,"failed to get blocks");return n.result}async getBlockSignatures(t,e){const i=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",i),r=(0,d.Ue)(s,Ai);if("error"in r)throw new xt(r.error,"failed to get block");const n=r.result;if(!n)throw new Error("Block "+t+" not found");return n}async getConfirmedBlockSignatures(t,e){const i=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",i),r=(0,d.Ue)(s,Ai);if("error"in r)throw new xt(r.error,"failed to get confirmed block");const n=r.result;if(!n)throw new Error("Confirmed block "+t+" not found");return n}async getConfirmedTransaction(t,e){const i=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",i),r=(0,d.Ue)(s,Mi);if("error"in r)throw new xt(r.error,"failed to get transaction");const n=r.result;if(!n)return n;const o=new et(n.transaction.message),a=n.transaction.signatures;return{...n,transaction:at.populate(o,a)}}async getParsedConfirmedTransaction(t,e){const i=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",i),r=(0,d.Ue)(s,Ri);if("error"in r)throw new xt(r.error,"failed to get confirmed transaction");return r.result}async getParsedConfirmedTransactions(t,e){const i=t.map((t=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([t],e,"jsonParsed")})));return(await this._rpcBatchRequest(i)).map((t=>{const e=(0,d.Ue)(t,Ri);if("error"in e)throw new xt(e.error,"failed to get confirmed transactions");return e.result}))}async getConfirmedSignaturesForAddress(t,e,i){let s={},r=await this.getFirstAvailableBlock();for(;!("until"in s)&&!(--e<=0||e<r);)try{const t=await this.getConfirmedBlockSignatures(e,"finalized");t.signatures.length>0&&(s.until=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}let n=await this.getSlot("finalized");for(;!("before"in s||++i>n);)try{const t=await this.getConfirmedBlockSignatures(i);t.signatures.length>0&&(s.before=t.signatures[t.signatures.length-1].toString())}catch(t){if(t instanceof Error&&t.message.includes("skipped"))continue;throw t}return(await this.getConfirmedSignaturesForAddress2(t,s)).map((t=>t.signature))}async getConfirmedSignaturesForAddress2(t,e,i){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],i,void 0,e),r=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),n=(0,d.Ue)(r,Ge);if("error"in n)throw new xt(n.error,"failed to get confirmed signatures for address");return n.result}async getSignaturesForAddress(t,e,i){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],i,void 0,e),r=await this._rpcRequest("getSignaturesForAddress",s),n=(0,d.Ue)(r,je);if("error"in n)throw new xt(n.error,"failed to get signatures for address");return n.result}async getAddressLookupTable(t,e){const{context:i,value:s}=await this.getAccountInfoAndContext(t,e);let r=null;return null!==s&&(r=new Ut({key:t,state:Ut.deserialize(s.data)})),{context:i,value:r}}async getNonceAndContext(t,e){const{context:i,value:s}=await this.getAccountInfoAndContext(t,e);let r=null;return null!==s&&(r=Tt.fromAccountData(s.data)),{context:i,value:r}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then((t=>t.value)).catch((e=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}))}async requestAirdrop(t,e){const i=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=(0,d.Ue)(i,Vi);if("error"in s)throw new xt(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await kt(100);const t=Date.now()-this._blockhashInfo.lastFetch>=Qt;if(null!==this._blockhashInfo.latestBlockhash&&!t)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,i=e?e.blockhash:null;for(let t=0;t<50;t++){const t=await this.getLatestBlockhash("finalized");if(i!==t.blockhash)return this._blockhashInfo={latestBlockhash:t,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},t;await kt(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:i}=te(t),s=this._buildArgs([],e,"base64",i),r=await this._rpcRequest("getStakeMinimumDelegation",s),n=(0,d.Ue)(r,ne((0,d.Rx)()));if("error"in n)throw new xt(n.error,"failed to get stake minimum delegation");return n.result}async simulateTransaction(t,e,i){if("message"in t){const r=t.serialize(),n=s.Buffer.from(r).toString("base64");if(Array.isArray(e)||void 0!==i)throw new Error("Invalid arguments");const o=e||{};o.encoding="base64","commitment"in o||(o.commitment=this.commitment),e&&"object"==typeof e&&"innerInstructions"in e&&(o.innerInstructions=e.innerInstructions);const a=[n,o],h=await this._rpcRequest("simulateTransaction",a),l=(0,d.Ue)(h,xe);if("error"in l)throw new Error("failed to simulate transaction: "+l.error.message);return l.result}let r;if(t instanceof at){let e=t;r=new at,r.feePayer=e.feePayer,r.instructions=t.instructions,r.nonceInfo=e.nonceInfo,r.signatures=e.signatures}else r=at.populate(t),r._message=r._json=void 0;if(void 0!==e&&!Array.isArray(e))throw new Error("Invalid arguments");const n=e;if(r.nonceInfo&&n)r.sign(...n);else{let t=this._disableBlockhashCaching;for(;;){const e=await this._blockhashWithExpiryBlockHeight(t);if(r.lastValidBlockHeight=e.lastValidBlockHeight,r.recentBlockhash=e.blockhash,!n)break;if(r.sign(...n),!r.signature)throw new Error("!signature");const i=r.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(i)&&!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.simulatedSignatures.push(i);break}t=!0}}const o=r._compile(),a=o.serialize(),h=r._serialize(a).toString("base64"),l={encoding:"base64",commitment:this.commitment};if(i){const t=(Array.isArray(i)?i:o.nonProgramIds()).map((t=>t.toBase58()));l.accounts={encoding:"base64",addresses:t}}n&&(l.sigVerify=!0),e&&"object"==typeof e&&"innerInstructions"in e&&(l.innerInstructions=e.innerInstructions);const c=[h,l],u=await this._rpcRequest("simulateTransaction",c),p=(0,d.Ue)(u,xe);if("error"in p){let t;if("data"in p.error&&(t=p.error.data.logs,t&&Array.isArray(t))){const e="\n    ",i=e+t.join(e);b.error(p.error.message,i)}throw new bt({action:"simulate",signature:"",transactionMessage:p.error.message,logs:t})}return p.result}async sendTransaction(t,e,i){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const i=t.serialize();return await this.sendRawTransaction(i,e)}if(void 0===e||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let e=this._disableBlockhashCaching;for(;;){const i=await this._blockhashWithExpiryBlockHeight(e);if(t.lastValidBlockHeight=i.lastValidBlockHeight,t.recentBlockhash=i.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const r=t.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.transactionSignatures.push(r);break}e=!0}}const r=t.serialize();return await this.sendRawTransaction(r,i)}async sendRawTransaction(t,e){const i=E(t).toString("base64");return await this.sendEncodedTransaction(i,e)}async sendEncodedTransaction(t,e){const i={encoding:"base64"},s=e&&e.skipPreflight,r=!0===s?"processed":e&&e.preflightCommitment||this.commitment;e&&null!=e.maxRetries&&(i.maxRetries=e.maxRetries),e&&null!=e.minContextSlot&&(i.minContextSlot=e.minContextSlot),s&&(i.skipPreflight=s),r&&(i.preflightCommitment=r);const n=[t,i],o=await this._rpcRequest("sendTransaction",n),a=(0,d.Ue)(o,Oi);if("error"in a){let t;throw"data"in a.error&&(t=a.error.data.logs),new bt({action:s?"send":"simulate",signature:"",transactionMessage:a.error.message,logs:t})}return a.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,b.error("ws error:",t.message)}_wsOnClose(t){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==t?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((([t,e])=>{this._setSubscription(t,{...e,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(t,e){const i=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,i!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach((t=>{try{t(e.state)}catch{}}))}}_onSubscriptionStateChange(t,e){const i=this._subscriptionHashByClientSubscriptionId[t];if(null==i)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[i]||=new Set;return s.add(e),()=>{s.delete(e),0===s.size&&delete this._subscriptionStateChangeCallbacksByHash[i]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(t){t instanceof Error&&b.log(`Error when closing socket connection: ${t.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async t=>{const i=this._subscriptionsByHash[t];if(void 0!==i)switch(i.state){case"pending":case"unsubscribed":if(0===i.callbacks.size)return delete this._subscriptionsByHash[t],"unsubscribed"===i.state&&delete this._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:s,method:r}=i;try{this._setSubscription(t,{...i,state:"subscribing"});const e=await this._rpcWebSocket.call(r,s);this._setSubscription(t,{...i,serverSubscriptionId:e,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[e]=i.callbacks,await this._updateSubscriptions()}catch(n){if(b.error(`Received ${n instanceof Error?"":"JSON-RPC "}error calling \`${r}\``,{args:s,error:n}),!e())return;this._setSubscription(t,{...i,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===i.callbacks.size&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:r}=i;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(t,{...i,state:"unsubscribing"}),this._setSubscription(t,{...i,state:"unsubscribing"});try{await this._rpcWebSocket.call(r,[s])}catch(s){if(s instanceof Error&&b.error(`${r} error:`,s.message),!e())return;return this._setSubscription(t,{...i,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(t,{...i,state:"unsubscribed"}),await this._updateSubscriptions()})()}})))}_handleServerNotification(t,e){const i=this._subscriptionCallbacksByServerSubscriptionId[t];void 0!==i&&i.forEach((t=>{try{t(...e)}catch(t){b.error(t)}}))}_wsOnAccountNotification(t){const{result:e,subscription:i}=(0,d.Ue)(t,$e);this._handleServerNotification(i,[e.value,e.context])}_makeSubscription(t,e){const i=this._nextClientSubscriptionId++,s=Ht([t.method,e]),r=this._subscriptionsByHash[s];return void 0===r?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:r.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[i]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[i]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[i],delete this._subscriptionHashByClientSubscriptionId[i];const e=this._subscriptionsByHash[s];Y(void 0!==e,`Could not find a \`Subscription\` when tearing down client subscription #${i}`),e.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),i}onAccountChange(t,e,i){const{commitment:s,config:r}=te(i),n=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",r);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},n)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:i}=(0,d.Ue)(t,Ue);this._handleServerNotification(i,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,i,s){const{commitment:r,config:n}=te(i),o=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",n||(s?{filters:ee(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,i){const s=this._buildArgs(["object"==typeof t?{mentions:[t.toString()]}:t],i||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:i}=(0,d.Ue)(t,Wi);this._handleServerNotification(i,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:i}=(0,d.Ue)(t,Ze);this._handleServerNotification(i,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:i}=(0,d.Ue)(t,Je);this._handleServerNotification(i,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const i=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];i?await i():b.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,i,s){const r=e||this._commitment;if(r||i||s){let e={};i&&(e.encoding=i),r&&(e.commitment=r),s&&(e=Object.assign(e,s)),t.push(e)}return t}_buildArgsAtLeastConfirmed(t,e,i,s){const r=e||this._commitment;if(r&&!["confirmed","finalized"].includes(r))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,i,s)}_wsOnSignatureNotification(t){const{result:e,subscription:i}=(0,d.Ue)(t,Xe);"receivedSignature"!==e.value&&this._subscriptionsAutoDisposedByRpc.add(i),this._handleServerNotification(i,"receivedSignature"===e.value?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,i){const s=this._buildArgs([t],i||this._commitment||"finalized"),r=this._makeSubscription({callback:(t,i)=>{if("status"===t.type){e(t.result,i);try{this.removeSignatureListener(r)}catch(t){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return r}onSignatureWithOptions(t,e,i){const{commitment:s,...r}={...i,commitment:i&&i.commitment||this._commitment||"finalized"},n=this._buildArgs([t],s,void 0,r),o=this._makeSubscription({callback:(t,i)=>{e(t,i);try{this.removeSignatureListener(o)}catch(t){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return o}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:i}=(0,d.Ue)(t,Qe);this._handleServerNotification(i,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class ji{constructor(t){this._keypair=void 0,this._keypair=t??x()}static generate(){return new ji(x())}static fromSecretKey(t,e){if(64!==t.byteLength)throw new Error("bad secret key size");const i=t.slice(32,64);if(!e||!e.skipValidation){const e=t.slice(0,32),s=w(e);for(let t=0;t<32;t++)if(i[t]!==s[t])throw new Error("provided secretKey is invalid")}return new ji({publicKey:i,secretKey:t})}static fromSeed(t){const e=w(t),i=new Uint8Array(64);return i.set(t),i.set(e,32),new ji({publicKey:e,secretKey:i})}get publicKey(){return new z(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const $i=Object.freeze({CreateLookupTable:{index:0,layout:u.n_([u.Jq("instruction"),At("recentSlot"),u.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:u.n_([u.Jq("instruction")])},ExtendLookupTable:{index:2,layout:u.n_([u.Jq("instruction"),At(),u.A9(j(),u.cv(u.Jq(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:u.n_([u.Jq("instruction")])},CloseLookupTable:{index:4,layout:u.n_([u.Jq("instruction")])}});class qi{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=u.Jq("instruction").decode(t.data);let i;for(const[t,s]of Object.entries($i))if(s.index==e){i=t;break}if(!i)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return i}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=Ct($i.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=Ct($i.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map((t=>new z(t)))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Ui.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class Ui{constructor(){}static createLookupTable(t){const[e,i]=z.findProgramAddressSync([t.authority.toBuffer(),(0,p.k$)(BigInt(t.recentSlot),8)],this.programId),s=_t($i.CreateLookupTable,{recentSlot:BigInt(t.recentSlot),bumpSeed:i}),r=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Bt.programId,isSigner:!1,isWritable:!1}];return[new ot({programId:this.programId,keys:r,data:s}),e]}static freezeLookupTable(t){const e=_t($i.FreezeLookupTable),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new ot({programId:this.programId,keys:i,data:e})}static extendLookupTable(t){const e=_t($i.ExtendLookupTable,{addresses:t.addresses.map((t=>t.toBytes()))}),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&i.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:Bt.programId,isSigner:!1,isWritable:!1}),new ot({programId:this.programId,keys:i,data:e})}static deactivateLookupTable(t){const e=_t($i.DeactivateLookupTable),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new ot({programId:this.programId,keys:i,data:e})}static closeLookupTable(t){const e=_t($i.CloseLookupTable),i=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new ot({programId:this.programId,keys:i,data:e})}}Ui.programId=new z("AddressLookupTab1e1111111111111111111111111");class Ki{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=u.u8("instruction").decode(t.data);let i;for(const[t,s]of Object.entries(Zi))if(s.index==e){i=t;break}if(!i)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return i}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:i}=Ct(Zi.RequestUnits,t.data);return{units:e,additionalFee:i}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=Ct(Zi.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=Ct(Zi.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=Ct(Zi.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(Yi.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const Zi=Object.freeze({RequestUnits:{index:0,layout:u.n_([u.u8("instruction"),u.Jq("units"),u.Jq("additionalFee")])},RequestHeapFrame:{index:1,layout:u.n_([u.u8("instruction"),u.Jq("bytes")])},SetComputeUnitLimit:{index:2,layout:u.n_([u.u8("instruction"),u.Jq("units")])},SetComputeUnitPrice:{index:3,layout:u.n_([u.u8("instruction"),At("microLamports")])}});class Yi{constructor(){}static requestUnits(t){const e=_t(Zi.RequestUnits,t);return new ot({keys:[],programId:this.programId,data:e})}static requestHeapFrame(t){const e=_t(Zi.RequestHeapFrame,t);return new ot({keys:[],programId:this.programId,data:e})}static setComputeUnitLimit(t){const e=_t(Zi.SetComputeUnitLimit,t);return new ot({keys:[],programId:this.programId,data:e})}static setComputeUnitPrice(t){const e=_t(Zi.SetComputeUnitPrice,{microLamports:BigInt(t.microLamports)});return new ot({keys:[],programId:this.programId,data:e})}}Yi.programId=new z("ComputeBudget111111111111111111111111111111");const Ji=u.n_([u.u8("numSignatures"),u.u8("padding"),u.KB("signatureOffset"),u.KB("signatureInstructionIndex"),u.KB("publicKeyOffset"),u.KB("publicKeyInstructionIndex"),u.KB("messageDataOffset"),u.KB("messageDataSize"),u.KB("messageInstructionIndex")]);class Xi{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:i,signature:r,instructionIndex:n}=t;Y(32===e.length,`Public Key must be 32 bytes but received ${e.length} bytes`),Y(64===r.length,`Signature must be 64 bytes but received ${r.length} bytes`);const o=Ji.span,a=o+e.length,h=a+r.length,l=s.Buffer.alloc(h+i.length),c=null==n?65535:n;return Ji.encode({numSignatures:1,padding:0,signatureOffset:a,signatureInstructionIndex:c,publicKeyOffset:o,publicKeyInstructionIndex:c,messageDataOffset:h,messageDataSize:i.length,messageInstructionIndex:c},l),l.fill(e,o),l.fill(r,a),l.fill(i,h),new ot({keys:[],programId:Xi.programId,data:l})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:i,instructionIndex:s}=t;Y(64===e.length,`Private key must be 64 bytes but received ${e.length} bytes`);try{const t=ji.fromSecretKey(e),r=t.publicKey.toBytes(),n=_(i,t.secretKey);return this.createInstructionWithPublicKey({publicKey:r,message:i,signature:n,instructionIndex:s})}catch(t){throw new Error(`Error creating instruction; ${t}`)}}}Xi.programId=new z("Ed25519SigVerify111111111111111111111111111"),v.kA.utils.isValidPrivateKey;const Qi=v.kA.getPublicKey,ts=u.n_([u.u8("numSignatures"),u.KB("signatureOffset"),u.u8("signatureInstructionIndex"),u.KB("ethAddressOffset"),u.u8("ethAddressInstructionIndex"),u.KB("messageDataOffset"),u.KB("messageDataSize"),u.u8("messageInstructionIndex"),u.Ik(20,"ethAddress"),u.Ik(64,"signature"),u.u8("recoveryId")]);class es{constructor(){}static publicKeyToEthAddress(t){Y(64===t.length,`Public key must be 64 bytes but received ${t.length} bytes`);try{return s.Buffer.from((0,y.fr)(E(t))).slice(-20)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:i,signature:s,recoveryId:r,instructionIndex:n}=t;return es.createInstructionWithEthAddress({ethAddress:es.publicKeyToEthAddress(e),message:i,signature:s,recoveryId:r,instructionIndex:n})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:i,signature:r,recoveryId:n,instructionIndex:o=0}=t;let a;a="string"==typeof e?e.startsWith("0x")?s.Buffer.from(e.substr(2),"hex"):s.Buffer.from(e,"hex"):e,Y(20===a.length,`Address must be 20 bytes but received ${a.length} bytes`);const h=12+a.length,l=h+r.length+1,c=s.Buffer.alloc(ts.span+i.length);return ts.encode({numSignatures:1,signatureOffset:h,signatureInstructionIndex:o,ethAddressOffset:12,ethAddressInstructionIndex:o,messageDataOffset:l,messageDataSize:i.length,messageInstructionIndex:o,signature:E(r),ethAddress:E(a),recoveryId:n},c),c.fill(E(i),ts.span),new ot({keys:[],programId:es.programId,data:c})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:i,instructionIndex:r}=t;Y(32===e.length,`Private key must be 32 bytes but received ${e.length} bytes`);try{const t=E(e),n=Qi(t,!1).slice(1),o=s.Buffer.from((0,y.fr)(E(i))),[a,h]=((t,e)=>{const i=v.kA.sign(t,e);return[i.toCompactRawBytes(),i.recovery]})(o,t);return this.createInstructionWithPublicKey({publicKey:n,message:i,signature:a,recoveryId:h,instructionIndex:r})}catch(t){throw new Error(`Error creating instruction; ${t}`)}}}var is;es.programId=new z("KeccakSecp256k11111111111111111111111111111");const ss=new z("StakeConfig11111111111111111111111111111111");class rs{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class ns{constructor(t,e,i){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=i}}is=ns,ns.default=new is(0,0,z.default);class os{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=u.Jq("instruction").decode(t.data);let i;for(const[t,s]of Object.entries(as))if(s.index==e){i=t;break}if(!i)throw new Error("Instruction type incorrect; not a StakeInstruction");return i}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:i}=Ct(as.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new rs(new z(e.staker),new z(e.withdrawer)),lockup:new ns(i.unixTimestamp,i.epoch,new z(i.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Ct(as.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:i}=Ct(as.Authorize,t.data),s={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new z(e),stakeAuthorizationType:{index:i}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:i,authoritySeed:s,authorityOwner:r}=Ct(as.AuthorizeWithSeed,t.data),n={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:s,authorityOwner:new z(r),newAuthorizedPubkey:new z(e),stakeAuthorizationType:{index:i}};return t.keys.length>3&&(n.custodianPubkey=t.keys[3].pubkey),n}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Ct(as.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Ct(as.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Ct(as.Withdraw,t.data),i={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(i.custodianPubkey=t.keys[5].pubkey),i}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Ct(as.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(ls.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const as=Object.freeze({Initialize:{index:0,layout:u.n_([u.Jq("instruction"),((t="authorized")=>u.n_([j("staker"),j("withdrawer")],t))(),((t="lockup")=>u.n_([u.gM("unixTimestamp"),u.gM("epoch"),j("custodian")],t))()])},Authorize:{index:1,layout:u.n_([u.Jq("instruction"),j("newAuthorized"),u.Jq("stakeAuthorizationType")])},Delegate:{index:2,layout:u.n_([u.Jq("instruction")])},Split:{index:3,layout:u.n_([u.Jq("instruction"),u.gM("lamports")])},Withdraw:{index:4,layout:u.n_([u.Jq("instruction"),u.gM("lamports")])},Deactivate:{index:5,layout:u.n_([u.Jq("instruction")])},Merge:{index:7,layout:u.n_([u.Jq("instruction")])},AuthorizeWithSeed:{index:8,layout:u.n_([u.Jq("instruction"),j("newAuthorized"),u.Jq("stakeAuthorizationType"),q("authoritySeed"),j("authorityOwner")])}}),hs=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ls{constructor(){}static initialize(t){const{stakePubkey:e,authorized:i,lockup:s}=t,r=s||ns.default,n=_t(as.Initialize,{authorized:{staker:E(i.staker.toBuffer()),withdrawer:E(i.withdrawer.toBuffer())},lockup:{unixTimestamp:r.unixTimestamp,epoch:r.epoch,custodian:E(r.custodian.toBuffer())}}),o={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ft,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new ot(o)}static createAccountWithSeed(t){const e=new at;e.add(Bt.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:i,authorized:s,lockup:r}=t;return e.add(this.initialize({stakePubkey:i,authorized:s,lockup:r}))}static createAccount(t){const e=new at;e.add(Bt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:i,authorized:s,lockup:r}=t;return e.add(this.initialize({stakePubkey:i,authorized:s,lockup:r}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:i,votePubkey:s}=t,r=_t(as.Delegate);return(new at).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:ss,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static authorize(t){const{stakePubkey:e,authorizedPubkey:i,newAuthorizedPubkey:s,stakeAuthorizationType:r,custodianPubkey:n}=t,o=_t(as.Authorize,{newAuthorized:E(s.toBuffer()),stakeAuthorizationType:r.index}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1}];return n&&a.push({pubkey:n,isSigner:!0,isWritable:!1}),(new at).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:i,authoritySeed:s,authorityOwner:r,newAuthorizedPubkey:n,stakeAuthorizationType:o,custodianPubkey:a}=t,h=_t(as.AuthorizeWithSeed,{newAuthorized:E(n.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:s,authorityOwner:E(r.toBuffer())}),l=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1},{pubkey:ct,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),(new at).add({keys:l,programId:this.programId,data:h})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:i,splitStakePubkey:s,lamports:r}=t,n=_t(as.Split,{lamports:r});return new ot({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static split(t,e){const i=new at;return i.add(Bt.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),i.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:i,authorizedPubkey:s,splitStakePubkey:r,basePubkey:n,seed:o,lamports:a}=t,h=new at;return h.add(Bt.allocate({accountPubkey:r,basePubkey:n,seed:o,space:this.space,programId:this.programId})),e&&e>0&&h.add(Bt.transfer({fromPubkey:t.authorizedPubkey,toPubkey:r,lamports:e})),h.add(this.splitInstruction({stakePubkey:i,authorizedPubkey:s,splitStakePubkey:r,lamports:a}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:i,authorizedPubkey:s}=t,r=_t(as.Merge);return(new at).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:i,toPubkey:s,lamports:r,custodianPubkey:n}=t,o=_t(as.Withdraw,{lamports:r}),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:vt,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}];return n&&a.push({pubkey:n,isSigner:!0,isWritable:!1}),(new at).add({keys:a,programId:this.programId,data:o})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:i}=t,s=_t(as.Deactivate);return(new at).add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}}ls.programId=new z("Stake11111111111111111111111111111111111111"),ls.space=200;class cs{constructor(t,e,i,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=i,this.commission=s}}class us{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const e=u.Jq("instruction").decode(t.data);let i;for(const[t,s]of Object.entries(ps))if(s.index==e){i=t;break}if(!i)throw new Error("Instruction type incorrect; not a VoteInstruction");return i}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=Ct(ps.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new cs(new z(e.nodePubkey),new z(e.authorizedVoter),new z(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:i}=Ct(ps.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new z(e),voteAuthorizationType:{index:i}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:i,newAuthorized:s,voteAuthorizationType:r}}=Ct(ps.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new z(e),currentAuthorityDerivedKeySeed:i,newAuthorizedPubkey:new z(s),voteAuthorizationType:{index:r},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Ct(ps.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(fs.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const ps=Object.freeze({InitializeAccount:{index:0,layout:u.n_([u.Jq("instruction"),((t="voteInit")=>u.n_([j("nodePubkey"),j("authorizedVoter"),j("authorizedWithdrawer"),u.u8("commission")],t))()])},Authorize:{index:1,layout:u.n_([u.Jq("instruction"),j("newAuthorized"),u.Jq("voteAuthorizationType")])},Withdraw:{index:3,layout:u.n_([u.Jq("instruction"),u.gM("lamports")])},UpdateValidatorIdentity:{index:4,layout:u.n_([u.Jq("instruction")])},AuthorizeWithSeed:{index:10,layout:u.n_([u.Jq("instruction"),((t="voteAuthorizeWithSeedArgs")=>u.n_([u.Jq("voteAuthorizationType"),j("currentAuthorityDerivedKeyOwnerPubkey"),q("currentAuthorityDerivedKeySeed"),j("newAuthorized")],t))()])}}),ds=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class fs{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:i,voteInit:s}=t,r=_t(ps.InitializeAccount,{voteInit:{nodePubkey:E(s.nodePubkey.toBuffer()),authorizedVoter:E(s.authorizedVoter.toBuffer()),authorizedWithdrawer:E(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),n={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ft,isSigner:!1,isWritable:!1},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new ot(n)}static createAccount(t){const e=new at;return e.add(Bt.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:i,newAuthorizedPubkey:s,voteAuthorizationType:r}=t,n=_t(ps.Authorize,{newAuthorized:E(s.toBuffer()),voteAuthorizationType:r.index}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}];return(new at).add({keys:o,programId:this.programId,data:n})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:i,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:r,voteAuthorizationType:n,votePubkey:o}=t,a=_t(ps.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:E(i.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:E(r.toBuffer()),voteAuthorizationType:n.index}}),h=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:ct,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return(new at).add({keys:h,programId:this.programId,data:a})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:i,lamports:s,toPubkey:r}=t,n=_t(ps.Withdraw,{lamports:s}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!0,isWritable:!1}];return(new at).add({keys:o,programId:this.programId,data:n})}static safeWithdraw(t,e,i){if(t.lamports>e-i)throw new Error("Withdraw will leave vote account with insufficient funds.");return fs.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:i,nodePubkey:s}=t,r=_t(ps.UpdateValidatorIdentity),n=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:i,isSigner:!0,isWritable:!1}];return(new at).add({keys:n,programId:this.programId,data:r})}}fs.programId=new z("Vote111111111111111111111111111111111111111"),fs.space=3762;const ms=new z("Va1idator1nfo111111111111111111111111111111"),gs=(0,d.dt)({name:(0,d.Z_)(),website:(0,d.jt)((0,d.Z_)()),details:(0,d.jt)((0,d.Z_)()),iconUrl:(0,d.jt)((0,d.Z_)()),keybaseUsername:(0,d.jt)((0,d.Z_)())});class ys{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(2!==K(e))return null;const i=[];for(let t=0;t<2;t++){const t=new z(tt(e,0,R)),s=1===Q(e);i.push({publicKey:t,isSigner:s})}if(i[0].publicKey.equals(ms)&&i[1].isSigner){const t=q().decode(s.Buffer.from(e)),r=JSON.parse(t);return(0,d.hu)(r,gs),new ys(i[1].publicKey,r)}return null}}const vs=new z("Vote111111111111111111111111111111111111111"),bs=u.n_([j("nodePubkey"),j("authorizedWithdrawer"),u.u8("commission"),u._O(),u.A9(u.n_([u._O("slot"),u.Jq("confirmationCount")]),u.cv(u.Jq(),-8),"votes"),u.u8("rootSlotValid"),u._O("rootSlot"),u._O(),u.A9(u.n_([u._O("epoch"),j("authorizedVoter")]),u.cv(u.Jq(),-8),"authorizedVoters"),u.n_([u.A9(u.n_([j("authorizedPubkey"),u._O("epochOfLastAuthorizedSwitch"),u._O("targetEpoch")]),32,"buf"),u._O("idx"),u.u8("isEmpty")],"priorVoters"),u._O(),u.A9(u.n_([u._O("epoch"),u._O("credits"),u._O("prevCredits")]),u.cv(u.Jq(),-8),"epochCredits"),u.n_([u._O("slot"),u._O("timestamp")],"lastTimestamp")]);class Ss{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const e=bs.decode(E(t),4);let i=e.rootSlot;return e.rootSlotValid||(i=null),new Ss({nodePubkey:new z(e.nodePubkey),authorizedWithdrawer:new z(e.authorizedWithdrawer),commission:e.commission,votes:e.votes,rootSlot:i,authorizedVoters:e.authorizedVoters.map(xs),priorVoters:ks(e.priorVoters),epochCredits:e.epochCredits,lastTimestamp:e.lastTimestamp})}}function xs({authorizedVoter:t,epoch:e}){return{epoch:e,authorizedVoter:new z(t)}}function ws({authorizedPubkey:t,epochOfLastAuthorizedSwitch:e,targetEpoch:i}){return{authorizedPubkey:new z(t),epochOfLastAuthorizedSwitch:e,targetEpoch:i}}function ks({buf:t,idx:e,isEmpty:i}){return i?[]:[...t.slice(e+1).map(ws),...t.slice(0,e).map(ws)]}const _s={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Cs(t,e){const i=!1===e?"http":"https";if(!t)return _s[i].devnet;const s=_s[i][t];if(!s)throw new Error(`Unknown ${i} cluster: ${t}`);return s}async function Es(t,e,i,s){let r,n;i&&Object.prototype.hasOwnProperty.call(i,"lastValidBlockHeight")||i&&Object.prototype.hasOwnProperty.call(i,"nonceValue")?(r=i,n=s):n=i;const o=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,minContextSlot:n.minContextSlot},a=await t.sendRawTransaction(e,o),h=n&&n.commitment,l=r?t.confirmTransaction(r,h):t.confirmTransaction(a,h),c=(await l).value;if(c.err){if(null!=a)throw new bt({action:o?.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(c)})`});throw new Error(`Raw transaction ${a} failed (${JSON.stringify(c)})`)}return a}const Ps=1e9},"../../../node_modules/dayjs/plugin/advancedFormat.js":function(t){t.exports=function(){"use strict";return function(t,e,i){var s=e.prototype,r=s.format;i.en.ordinal=function(t){var e=["th","st","nd","rd"],i=t%100;return"["+t+(e[(i-20)%10]||e[i]||e[0])+"]"},s.format=function(t){var e=this,i=this.$locale();if(!this.isValid())return r.bind(this)(t);var s=this.$utils(),n=(t||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(t){switch(t){case"Q":return Math.ceil((e.$M+1)/3);case"Do":return i.ordinal(e.$D);case"gggg":return e.weekYear();case"GGGG":return e.isoWeekYear();case"wo":return i.ordinal(e.week(),"W");case"w":case"ww":return s.s(e.week(),"w"===t?1:2,"0");case"W":case"WW":return s.s(e.isoWeek(),"W"===t?1:2,"0");case"k":case"kk":return s.s(String(0===e.$H?24:e.$H),"k"===t?1:2,"0");case"X":return Math.floor(e.$d.getTime()/1e3);case"x":return e.$d.getTime();case"z":return"["+e.offsetName()+"]";case"zzz":return"["+e.offsetName("long")+"]";default:return t}}));return r.bind(this)(n)}}}()},"../../../node_modules/lottie-web/build/player/lottie.js":function(module,exports,__webpack_require__){var console=__webpack_require__("../../../node_modules/console-browserify/index.js"),factory;"undefined"!=typeof navigator&&(factory=function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(t){_useWebWorker=!!t},getWebWorker=function(){return _useWebWorker},setLocationHref=function(t){locationHref=t},getLocationHref=function(){return locationHref};function createTag(t){return document.createElement(t)}function extendPrototype(t,e){var i,s,r=t.length;for(i=0;i<r;i+=1)for(var n in s=t[i].prototype)Object.prototype.hasOwnProperty.call(s,n)&&(e.prototype[n]=s[n])}function getDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)}function createProxyFunction(t){function e(){}return e.prototype=t,e}var audioControllerFactory=function(){function t(t){this.audios=[],this.audioFactory=t,this._volume=1,this._isMuted=!1}return t.prototype={addAudio:function(t){this.audios.push(t)},pause:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].pause()},resume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].resume()},setRate:function(t){var e,i=this.audios.length;for(e=0;e<i;e+=1)this.audios[e].setRate(t)},createAudio:function(t){return this.audioFactory?this.audioFactory(t):window.Howl?new window.Howl({src:[t]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(t){this.audioFactory=t},setVolume:function(t){this._volume=t,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var t,e=this.audios.length;for(t=0;t<e;t+=1)this.audios[t].volume(this._volume*(this._isMuted?0:1))}},function(){return new t}}(),createTypedArray=function(){function t(t,e){var i,s=0,r=[];switch(t){case"int16":case"uint8c":i=1;break;default:i=1.1}for(s=0;s<e;s+=1)r.push(i);return r}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(e,i){return"float32"===e?new Float32Array(i):"int16"===e?new Int16Array(i):"uint8c"===e?new Uint8ClampedArray(i):t(e,i)}:t}();function createSizedArray(t){return Array.apply(null,{length:t})}function _typeof$6(t){return _typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$6(t)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}!function(){var t,e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],i=e.length;for(t=0;t<i;t+=1)BMMath[e[t]]=Math[e[t]]}(),BMMath.random=Math.random,BMMath.abs=function(t){if("object"===_typeof$6(t)&&t.length){var e,i=createSizedArray(t.length),s=t.length;for(e=0;e<s;e+=1)i[e]=Math.abs(t[e]);return i}return Math.abs(t)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(t){_shouldRoundValues=!!t}function bmRnd(t){return _shouldRoundValues?Math.round(t):t}function styleDiv(t){t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.display="block",t.style.transformOrigin="0 0",t.style.webkitTransformOrigin="0 0",t.style.backfaceVisibility="visible",t.style.webkitBackfaceVisibility="visible",t.style.transformStyle="preserve-3d",t.style.webkitTransformStyle="preserve-3d",t.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(t,e,i,s){this.type=t,this.currentTime=e,this.totalTime=i,this.direction=s<0?-1:1}function BMCompleteEvent(t,e){this.type=t,this.direction=e<0?-1:1}function BMCompleteLoopEvent(t,e,i,s){this.type=t,this.currentLoop=i,this.totalLoops=e,this.direction=s<0?-1:1}function BMSegmentStartEvent(t,e,i){this.type=t,this.firstFrame=e,this.totalFrames=i}function BMDestroyEvent(t,e){this.type=t,this.target=e}function BMRenderFrameErrorEvent(t,e){this.type="renderFrameError",this.nativeError=t,this.currentTime=e}function BMConfigErrorEvent(t){this.type="configError",this.nativeError=t}function BMAnimationConfigErrorEvent(t,e){this.type=t,this.nativeError=e}var createElementID=(_count=0,function(){return idPrefix$1+"__lottie_element_"+(_count+=1)}),_count;function HSVtoRGB(t,e,i){var s,r,n,o,a,h,l,c;switch(h=i*(1-e),l=i*(1-(a=6*t-(o=Math.floor(6*t)))*e),c=i*(1-(1-a)*e),o%6){case 0:s=i,r=c,n=h;break;case 1:s=l,r=i,n=h;break;case 2:s=h,r=i,n=c;break;case 3:s=h,r=l,n=i;break;case 4:s=c,r=h,n=i;break;case 5:s=i,r=h,n=l}return[s,r,n]}function RGBtoHSV(t,e,i){var s,r=Math.max(t,e,i),n=Math.min(t,e,i),o=r-n,a=0===r?0:o/r,h=r/255;switch(r){case n:s=0;break;case t:s=e-i+o*(e<i?6:0),s/=6*o;break;case e:s=i-t+2*o,s/=6*o;break;case i:s=t-e+4*o,s/=6*o}return[s,a,h]}function addSaturationToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[1]+=e,i[1]>1?i[1]=1:i[1]<=0&&(i[1]=0),HSVtoRGB(i[0],i[1],i[2])}function addBrightnessToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[2]+=e,i[2]>1?i[2]=1:i[2]<0&&(i[2]=0),HSVtoRGB(i[0],i[1],i[2])}function addHueToRGB(t,e){var i=RGBtoHSV(255*t[0],255*t[1],255*t[2]);return i[0]+=e/360,i[0]>1?i[0]-=1:i[0]<0&&(i[0]+=1),HSVtoRGB(i[0],i[1],i[2])}var rgbToHex=function(){var t,e,i=[];for(t=0;t<256;t+=1)e=t.toString(16),i[t]=1===e.length?"0"+e:e;return function(t,e,s){return t<0&&(t=0),e<0&&(e=0),s<0&&(s=0),"#"+i[t]+i[e]+i[s]}}(),setSubframeEnabled=function(t){subframeEnabled=!!t},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(t){expressionsPlugin=t},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(t){expressionsInterfaces=t},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(t){defaultCurveSegments=t},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(t){idPrefix$1=t},getIdPrefix=function(){return idPrefix$1};function createNS(t){return document.createElementNS(svgNS,t)}function _typeof$5(t){return _typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$5(t)}var dataManager=function(){var t,e,i=1,s=[],r={onmessage:function(){},postMessage:function(e){t({data:e})}},n={postMessage:function(t){r.onmessage({data:t})}};function o(){e||(e=function(e){if(window.Worker&&window.Blob&&getWebWorker()){var i=new Blob(["var _workerSelf = self; self.onmessage = ",e.toString()],{type:"text/javascript"}),s=URL.createObjectURL(i);return new Worker(s)}return t=e,r}((function(t){if(n.dataManager||(n.dataManager=function(){function t(r,n){var o,a,h,l,c,u,p,d=r.length;for(a=0;a<d;a+=1)if("ks"in(o=r[a])&&!o.completed){if(o.completed=!0,o.hasMask){var f=o.masksProperties;for(l=f.length,h=0;h<l;h+=1)if(f[h].pt.k.i)s(f[h].pt.k);else for(u=f[h].pt.k.length,c=0;c<u;c+=1)f[h].pt.k[c].s&&s(f[h].pt.k[c].s[0]),f[h].pt.k[c].e&&s(f[h].pt.k[c].e[0])}0===o.ty?(o.layers=e(o.refId,n),t(o.layers,n)):4===o.ty?i(o.shapes):5===o.ty&&(0===(p=o).t.a.length&&p.t.p)}}function e(t,e){var i=function(t,e){for(var i=0,s=e.length;i<s;){if(e[i].id===t)return e[i];i+=1}return null}(t,e);return i?i.layers.__used?JSON.parse(JSON.stringify(i.layers)):(i.layers.__used=!0,i.layers):null}function i(t){var e,r,n;for(e=t.length-1;e>=0;e-=1)if("sh"===t[e].ty)if(t[e].ks.k.i)s(t[e].ks.k);else for(n=t[e].ks.k.length,r=0;r<n;r+=1)t[e].ks.k[r].s&&s(t[e].ks.k[r].s[0]),t[e].ks.k[r].e&&s(t[e].ks.k[r].e[0]);else"gr"===t[e].ty&&i(t[e].it)}function s(t){var e,i=t.i.length;for(e=0;e<i;e+=1)t.i[e][0]+=t.v[e][0],t.i[e][1]+=t.v[e][1],t.o[e][0]+=t.v[e][0],t.o[e][1]+=t.v[e][1]}function r(t,e){var i=e?e.split("."):[100,100,100];return t[0]>i[0]||!(i[0]>t[0])&&(t[1]>i[1]||!(i[1]>t[1])&&(t[2]>i[2]||!(i[2]>t[2])&&null))}var n,o=function(){var t=[4,4,14];function e(t){var e,i,s,r=t.length;for(e=0;e<r;e+=1)5===t[e].ty&&(void 0,s=(i=t[e]).t.d,i.t.d={k:[{s,t:0}]})}return function(i){if(r(t,i.v)&&(e(i.layers),i.assets)){var s,n=i.assets.length;for(s=0;s<n;s+=1)i.assets[s].layers&&e(i.assets[s].layers)}}}(),a=(n=[4,7,99],function(t){if(t.chars&&!r(n,t.v)){var e,s=t.chars.length;for(e=0;e<s;e+=1){var o=t.chars[e];o.data&&o.data.shapes&&(i(o.data.shapes),o.data.ip=0,o.data.op=99999,o.data.st=0,o.data.sr=1,o.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},t.chars[e].t||(o.data.shapes.push({ty:"no"}),o.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}),h=function(){var t=[5,7,15];function e(t){var e,i,s=t.length;for(e=0;e<s;e+=1)5===t[e].ty&&(i=void 0,"number"==typeof(i=t[e].t.p).a&&(i.a={a:0,k:i.a}),"number"==typeof i.p&&(i.p={a:0,k:i.p}),"number"==typeof i.r&&(i.r={a:0,k:i.r}))}return function(i){if(r(t,i.v)&&(e(i.layers),i.assets)){var s,n=i.assets.length;for(s=0;s<n;s+=1)i.assets[s].layers&&e(i.assets[s].layers)}}}(),l=function(){var t=[4,1,9];function e(t){var i,s,r,n=t.length;for(i=0;i<n;i+=1)if("gr"===t[i].ty)e(t[i].it);else if("fl"===t[i].ty||"st"===t[i].ty)if(t[i].c.k&&t[i].c.k[0].i)for(r=t[i].c.k.length,s=0;s<r;s+=1)t[i].c.k[s].s&&(t[i].c.k[s].s[0]/=255,t[i].c.k[s].s[1]/=255,t[i].c.k[s].s[2]/=255,t[i].c.k[s].s[3]/=255),t[i].c.k[s].e&&(t[i].c.k[s].e[0]/=255,t[i].c.k[s].e[1]/=255,t[i].c.k[s].e[2]/=255,t[i].c.k[s].e[3]/=255);else t[i].c.k[0]/=255,t[i].c.k[1]/=255,t[i].c.k[2]/=255,t[i].c.k[3]/=255}function i(t){var i,s=t.length;for(i=0;i<s;i+=1)4===t[i].ty&&e(t[i].shapes)}return function(e){if(r(t,e.v)&&(i(e.layers),e.assets)){var s,n=e.assets.length;for(s=0;s<n;s+=1)e.assets[s].layers&&i(e.assets[s].layers)}}}(),c=function(){var t=[4,4,18];function e(t){var i,s,r;for(i=t.length-1;i>=0;i-=1)if("sh"===t[i].ty)if(t[i].ks.k.i)t[i].ks.k.c=t[i].closed;else for(r=t[i].ks.k.length,s=0;s<r;s+=1)t[i].ks.k[s].s&&(t[i].ks.k[s].s[0].c=t[i].closed),t[i].ks.k[s].e&&(t[i].ks.k[s].e[0].c=t[i].closed);else"gr"===t[i].ty&&e(t[i].it)}function i(t){var i,s,r,n,o,a,h=t.length;for(s=0;s<h;s+=1){if((i=t[s]).hasMask){var l=i.masksProperties;for(n=l.length,r=0;r<n;r+=1)if(l[r].pt.k.i)l[r].pt.k.c=l[r].cl;else for(a=l[r].pt.k.length,o=0;o<a;o+=1)l[r].pt.k[o].s&&(l[r].pt.k[o].s[0].c=l[r].cl),l[r].pt.k[o].e&&(l[r].pt.k[o].e[0].c=l[r].cl)}4===i.ty&&e(i.shapes)}}return function(e){if(r(t,e.v)&&(i(e.layers),e.assets)){var s,n=e.assets.length;for(s=0;s<n;s+=1)e.assets[s].layers&&i(e.assets[s].layers)}}}();var u={completeData:function(i){i.__complete||(l(i),o(i),a(i),h(i),c(i),t(i.layers,i.assets),function(i,s){if(i){var r=0,n=i.length;for(r=0;r<n;r+=1)1===i[r].t&&(i[r].data.layers=e(i[r].data.refId,s),t(i[r].data.layers,s))}}(i.chars,i.assets),i.__complete=!0)}};return u.checkColors=l,u.checkChars=a,u.checkPathProperties=h,u.checkShapes=c,u.completeLayers=t,u}()),n.assetLoader||(n.assetLoader=function(){function t(t){var e=t.getResponseHeader("content-type");return e&&"json"===t.responseType&&-1!==e.indexOf("json")||t.response&&"object"===_typeof$5(t.response)?t.response:t.response&&"string"==typeof t.response?JSON.parse(t.response):t.responseText?JSON.parse(t.responseText):null}return{load:function(e,i,s,r){var n,o=new XMLHttpRequest;try{o.responseType="json"}catch(t){}o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status)n=t(o),s(n);else try{n=t(o),s(n)}catch(t){r&&r(t)}};try{o.open(["G","E","T"].join(""),e,!0)}catch(t){o.open(["G","E","T"].join(""),i+"/"+e,!0)}o.send()}}}()),"loadAnimation"===t.data.type)n.assetLoader.load(t.data.path,t.data.fullPath,(function(e){n.dataManager.completeData(e),n.postMessage({id:t.data.id,payload:e,status:"success"})}),(function(){n.postMessage({id:t.data.id,status:"error"})}));else if("complete"===t.data.type){var e=t.data.animation;n.dataManager.completeData(e),n.postMessage({id:t.data.id,payload:e,status:"success"})}else"loadData"===t.data.type&&n.assetLoader.load(t.data.path,t.data.fullPath,(function(e){n.postMessage({id:t.data.id,payload:e,status:"success"})}),(function(){n.postMessage({id:t.data.id,status:"error"})}))})),e.onmessage=function(t){var e=t.data,i=e.id,r=s[i];s[i]=null,"success"===e.status?r.onComplete(e.payload):r.onError&&r.onError()})}function a(t,e){var r="processId_"+(i+=1);return s[r]={onComplete:t,onError:e},r}return{loadAnimation:function(t,i,s){o();var r=a(i,s);e.postMessage({type:"loadAnimation",path:t,fullPath:window.location.origin+window.location.pathname,id:r})},loadData:function(t,i,s){o();var r=a(i,s);e.postMessage({type:"loadData",path:t,fullPath:window.location.origin+window.location.pathname,id:r})},completeAnimation:function(t,i,s){o();var r=a(i,s);e.postMessage({type:"complete",animation:t,id:r})}}}(),ImagePreloader=function(){var t=function(){var t=createTag("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),t}();function e(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function s(t,e,i){var s="";if(t.e)s=t.p;else if(e){var r=t.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]),s=e+r}else s=i,s+=t.u?t.u:"",s+=t.p;return s}function r(t){var e=0,i=setInterval(function(){(t.getBBox().width||e>500)&&(this._imageLoaded(),clearInterval(i)),e+=1}.bind(this),50)}function n(t){var e={assetData:t},i=s(t,this.assetsPath,this.path);return dataManager.loadData(i,function(t){e.img=t,this._footageLoaded()}.bind(this),function(){e.img={},this._footageLoaded()}.bind(this)),e}function o(){this._imageLoaded=e.bind(this),this._footageLoaded=i.bind(this),this.testImageLoaded=r.bind(this),this.createFootageData=n.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return o.prototype={loadAssets:function(t,e){var i;this.imagesLoadedCb=e;var s=t.length;for(i=0;i<s;i+=1)t[i].layers||(t[i].t&&"seq"!==t[i].t?3===t[i].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(t[i]))):(this.totalImages+=1,this.images.push(this._createImageData(t[i]))))},setAssetsPath:function(t){this.assetsPath=t||""},setPath:function(t){this.path=t||""},loadedImages:function(){return this.totalImages===this.loadedAssets},loadedFootages:function(){return this.totalFootages===this.loadedFootagesCount},destroy:function(){this.imagesLoadedCb=null,this.images.length=0},getAsset:function(t){for(var e=0,i=this.images.length;e<i;){if(this.images[e].assetData===t)return this.images[e].img;e+=1}return null},createImgData:function(e){var i=s(e,this.assetsPath,this.path),r=createTag("img");r.crossOrigin="anonymous",r.addEventListener("load",this._imageLoaded,!1),r.addEventListener("error",function(){n.img=t,this._imageLoaded()}.bind(this),!1),r.src=i;var n={img:r,assetData:e};return n},createImageData:function(e){var i=s(e,this.assetsPath,this.path),r=createNS("image");isSafari?this.testImageLoaded(r):r.addEventListener("load",this._imageLoaded,!1),r.addEventListener("error",function(){n.img=t,this._imageLoaded()}.bind(this),!1),r.setAttributeNS("http://www.w3.org/1999/xlink","href",i),this._elementHelper.append?this._elementHelper.append(r):this._elementHelper.appendChild(r);var n={img:r,assetData:e};return n},imageLoaded:e,footageLoaded:i,setCacheType:function(t,e){"svg"===t?(this._elementHelper=e,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}},o}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(t,e){if(this._cbs[t])for(var i=this._cbs[t],s=0;s<i.length;s+=1)i[s](e)},addEventListener:function(t,e){return this._cbs[t]||(this._cbs[t]=[]),this._cbs[t].push(e),function(){this.removeEventListener(t,e)}.bind(this)},removeEventListener:function(t,e){if(e){if(this._cbs[t]){for(var i=0,s=this._cbs[t].length;i<s;)this._cbs[t][i]===e&&(this._cbs[t].splice(i,1),i-=1,s-=1),i+=1;this._cbs[t].length||(this._cbs[t]=null)}}else this._cbs[t]=null}};var markerParser=function(){function t(t){for(var e,i=t.split("\r\n"),s={},r=0,n=0;n<i.length;n+=1)2===(e=i[n].split(":")).length&&(s[e[0]]=e[1].trim(),r+=1);if(0===r)throw new Error;return s}return function(e){for(var i=[],s=0;s<e.length;s+=1){var r=e[s],n={time:r.tm,duration:r.dr};try{n.payload=JSON.parse(e[s].cm)}catch(i){try{n.payload=t(e[s].cm)}catch(t){n.payload={name:e[s].cm}}}i.push(n)}return i}}(),ProjectInterface=function(){function t(t){this.compositions.push(t)}return function(){function e(t){for(var e=0,i=this.compositions.length;e<i;){if(this.compositions[e].data&&this.compositions[e].data.nm===t)return this.compositions[e].prepareFrame&&this.compositions[e].data.xt&&this.compositions[e].prepareFrame(this.currentFrame),this.compositions[e].compInterface;e+=1}return null}return e.compositions=[],e.currentFrame=0,e.registerComposition=t,e}}(),renderers={},registerRenderer=function(t,e){renderers[t]=e};function getRenderer(t){return renderers[t]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var t in renderers)if(renderers[t])return t;return""}function _typeof$4(t){return _typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$4(t)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(t){(t.wrapper||t.container)&&(this.wrapper=t.wrapper||t.container);var e="svg";t.animType?e=t.animType:t.renderer&&(e=t.renderer);var i=getRenderer(e);this.renderer=new i(this,t.rendererSettings),this.imagePreloader.setCacheType(e,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=e,""===t.loop||null===t.loop||void 0===t.loop||!0===t.loop?this.loop=!0:!1===t.loop?this.loop=!1:this.loop=parseInt(t.loop,10),this.autoplay=!("autoplay"in t)||t.autoplay,this.name=t.name?t.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(t,"autoloadSegments")||t.autoloadSegments,this.assetsPath=t.assetsPath,this.initialSegment=t.initialSegment,t.audioFactory&&this.audioController.setAudioFactory(t.audioFactory),t.animationData?this.setupAnimation(t.animationData):t.path&&(-1!==t.path.lastIndexOf("\\")?this.path=t.path.substr(0,t.path.lastIndexOf("\\")+1):this.path=t.path.substr(0,t.path.lastIndexOf("/")+1),this.fileName=t.path.substr(t.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(t.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(t){dataManager.completeAnimation(t,this.configAnimation)},AnimationItem.prototype.setData=function(t,e){e&&"object"!==_typeof$4(e)&&(e=JSON.parse(e));var i={wrapper:t,animationData:e},s=t.attributes;i.path=s.getNamedItem("data-animation-path")?s.getNamedItem("data-animation-path").value:s.getNamedItem("data-bm-path")?s.getNamedItem("data-bm-path").value:s.getNamedItem("bm-path")?s.getNamedItem("bm-path").value:"",i.animType=s.getNamedItem("data-anim-type")?s.getNamedItem("data-anim-type").value:s.getNamedItem("data-bm-type")?s.getNamedItem("data-bm-type").value:s.getNamedItem("bm-type")?s.getNamedItem("bm-type").value:s.getNamedItem("data-bm-renderer")?s.getNamedItem("data-bm-renderer").value:s.getNamedItem("bm-renderer")?s.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var r=s.getNamedItem("data-anim-loop")?s.getNamedItem("data-anim-loop").value:s.getNamedItem("data-bm-loop")?s.getNamedItem("data-bm-loop").value:s.getNamedItem("bm-loop")?s.getNamedItem("bm-loop").value:"";"false"===r?i.loop=!1:"true"===r?i.loop=!0:""!==r&&(i.loop=parseInt(r,10));var n=s.getNamedItem("data-anim-autoplay")?s.getNamedItem("data-anim-autoplay").value:s.getNamedItem("data-bm-autoplay")?s.getNamedItem("data-bm-autoplay").value:!s.getNamedItem("bm-autoplay")||s.getNamedItem("bm-autoplay").value;i.autoplay="false"!==n,i.name=s.getNamedItem("data-name")?s.getNamedItem("data-name").value:s.getNamedItem("data-bm-name")?s.getNamedItem("data-bm-name").value:s.getNamedItem("bm-name")?s.getNamedItem("bm-name").value:"","false"===(s.getNamedItem("data-anim-prerender")?s.getNamedItem("data-anim-prerender").value:s.getNamedItem("data-bm-prerender")?s.getNamedItem("data-bm-prerender").value:s.getNamedItem("bm-prerender")?s.getNamedItem("bm-prerender").value:"")&&(i.prerender=!1),i.path?this.setParams(i):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(t){t.op>this.animationData.op&&(this.animationData.op=t.op,this.totalFrames=Math.floor(t.op-this.animationData.ip));var e,i,s=this.animationData.layers,r=s.length,n=t.layers,o=n.length;for(i=0;i<o;i+=1)for(e=0;e<r;){if(s[e].id===n[i].id){s[e]=n[i];break}e+=1}if((t.chars||t.fonts)&&(this.renderer.globalData.fontManager.addChars(t.chars),this.renderer.globalData.fontManager.addFonts(t.fonts,this.renderer.globalData.defs)),t.assets)for(r=t.assets.length,e=0;e<r;e+=1)this.animationData.assets.push(t.assets[e]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(t){this.animationData=t;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var t=this.animationData.segments;if(!t||0===t.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var e=t.shift();this.timeCompleted=e.time*this.frameRate;var i=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(i,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(t){if(this.renderer)try{this.animationData=t,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(t),t.assets||(t.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(t.assets),this.markers=markerParser(t.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(t){this.triggerConfigError(t)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(t,e){var i="number"==typeof t?t:void 0,s="number"==typeof e?e:void 0;this.renderer.updateContainerSize(i,s)},AnimationItem.prototype.setSubframe=function(t){this.isSubframeEnabled=!!t},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(t){this.triggerRenderFrameError(t)}},AnimationItem.prototype.play=function(t){t&&this.name!==t||!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(t){t&&this.name!==t||!1===this.isPaused&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(t){t&&this.name!==t||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(t){t&&this.name!==t||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(t){for(var e,i=0;i<this.markers.length;i+=1)if((e=this.markers[i]).payload&&e.payload.name===t)return e;return null},AnimationItem.prototype.goToAndStop=function(t,e,i){if(!i||this.name===i){var s=Number(t);if(isNaN(s)){var r=this.getMarkerData(t);r&&this.goToAndStop(r.time,!0)}else e?this.setCurrentRawFrameValue(t):this.setCurrentRawFrameValue(t*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(t,e,i){if(!i||this.name===i){var s=Number(t);if(isNaN(s)){var r=this.getMarkerData(t);r&&(r.duration?this.playSegments([r.time,r.time+r.duration],!0):this.goToAndStop(r.time,!0))}else this.goToAndStop(s,e,i);this.play()}},AnimationItem.prototype.advanceTime=function(t){if(!0!==this.isPaused&&!1!==this.isLoaded){var e=this.currentRawFrame+t*this.frameModifier,i=!1;e>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?e>=this.totalFrames?(this.playCount+=1,this.checkSegments(e%this.totalFrames)||(this.setCurrentRawFrameValue(e%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(e):this.checkSegments(e>this.totalFrames?e%this.totalFrames:0)||(i=!0,e=this.totalFrames-1):e<0?this.checkSegments(e%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(i=!0,e=0):(this.setCurrentRawFrameValue(this.totalFrames+e%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(e),i&&(this.setCurrentRawFrameValue(e),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(t,e){this.playCount=0,t[1]<t[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=t[0]-t[1],this.timeCompleted=this.totalFrames,this.firstFrame=t[1],this.setCurrentRawFrameValue(this.totalFrames-.001-e)):t[1]>t[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=t[1]-t[0],this.timeCompleted=this.totalFrames,this.firstFrame=t[0],this.setCurrentRawFrameValue(.001+e)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(t,e){var i=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<t?i=t:this.currentRawFrame+this.firstFrame>e&&(i=e-t)),this.firstFrame=t,this.totalFrames=e-t,this.timeCompleted=this.totalFrames,-1!==i&&this.goToAndStop(i,!0)},AnimationItem.prototype.playSegments=function(t,e){if(e&&(this.segments.length=0),"object"===_typeof$4(t[0])){var i,s=t.length;for(i=0;i<s;i+=1)this.segments.push(t[i])}else this.segments.push(t);this.segments.length&&e&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(t){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),t&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(t){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),t),!0)},AnimationItem.prototype.destroy=function(t){t&&this.name!==t||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(t){this.currentRawFrame=t,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(t){this.playSpeed=t,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(t){this.playDirection=t<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(t){this.loop=t},AnimationItem.prototype.setVolume=function(t,e){e&&this.name!==e||this.audioController.setVolume(t)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(t){t&&this.name!==t||this.audioController.mute()},AnimationItem.prototype.unmute=function(t){t&&this.name!==t||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(t){var e="";if(t.e)e=t.p;else if(this.assetsPath){var i=t.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),e=this.assetsPath+i}else e=this.path,e+=t.u?t.u:"",e+=t.p;return e},AnimationItem.prototype.getAssetData=function(t){for(var e=0,i=this.assets.length;e<i;){if(t===this.assets[e].id)return this.assets[e];e+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(t){return t?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(t,e,i){try{this.renderer.getElementByPath(t).updateDocumentData(e,i)}catch(t){}},AnimationItem.prototype.trigger=function(t){if(this._cbs&&this._cbs[t])switch(t){case"enterFrame":this.triggerEvent(t,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(t,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(t,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(t,new BMCompleteEvent(t,this.frameMult));break;case"segmentStart":this.triggerEvent(t,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(t,new BMDestroyEvent(t,this));break;default:this.triggerEvent(t)}"enterFrame"===t&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(t,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===t&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(t,this.loop,this.playCount,this.frameMult)),"complete"===t&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(t,this.frameMult)),"segmentStart"===t&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(t,this.firstFrame,this.totalFrames)),"destroy"===t&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(t,this))},AnimationItem.prototype.triggerRenderFrameError=function(t){var e=new BMRenderFrameErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)},AnimationItem.prototype.triggerConfigError=function(t){var e=new BMConfigErrorEvent(t,this.currentFrame);this.triggerEvent("error",e),this.onError&&this.onError.call(this,e)};var animationManager=function(){var t={},e=[],i=0,s=0,r=0,n=!0,o=!1;function a(t){for(var i=0,r=t.target;i<s;)e[i].animation===r&&(e.splice(i,1),i-=1,s-=1,r.isPaused||c()),i+=1}function h(t,i){if(!t)return null;for(var r=0;r<s;){if(e[r].elem===t&&null!==e[r].elem)return e[r].animation;r+=1}var n=new AnimationItem;return u(n,t),n.setData(t,i),n}function l(){r+=1,f()}function c(){r-=1}function u(t,i){t.addEventListener("destroy",a),t.addEventListener("_active",l),t.addEventListener("_idle",c),e.push({elem:i,animation:t}),s+=1}function p(t){var a,h=t-i;for(a=0;a<s;a+=1)e[a].animation.advanceTime(h);i=t,r&&!o?window.requestAnimationFrame(p):n=!0}function d(t){i=t,window.requestAnimationFrame(p)}function f(){!o&&r&&n&&(window.requestAnimationFrame(d),n=!1)}return t.registerAnimation=h,t.loadAnimation=function(t){var e=new AnimationItem;return u(e,null),e.setParams(t),e},t.setSpeed=function(t,i){var r;for(r=0;r<s;r+=1)e[r].animation.setSpeed(t,i)},t.setDirection=function(t,i){var r;for(r=0;r<s;r+=1)e[r].animation.setDirection(t,i)},t.play=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.play(t)},t.pause=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.pause(t)},t.stop=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.stop(t)},t.togglePause=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.togglePause(t)},t.searchAnimations=function(t,e,i){var s,r=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),n=r.length;for(s=0;s<n;s+=1)i&&r[s].setAttribute("data-bm-type",i),h(r[s],t);if(e&&0===n){i||(i="svg");var o=document.getElementsByTagName("body")[0];o.innerText="";var a=createTag("div");a.style.width="100%",a.style.height="100%",a.setAttribute("data-bm-type",i),o.appendChild(a),h(a,t)}},t.resize=function(){var t;for(t=0;t<s;t+=1)e[t].animation.resize()},t.goToAndStop=function(t,i,r){var n;for(n=0;n<s;n+=1)e[n].animation.goToAndStop(t,i,r)},t.destroy=function(t){var i;for(i=s-1;i>=0;i-=1)e[i].animation.destroy(t)},t.freeze=function(){o=!0},t.unfreeze=function(){o=!1,f()},t.setVolume=function(t,i){var r;for(r=0;r<s;r+=1)e[r].animation.setVolume(t,i)},t.mute=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.mute(t)},t.unmute=function(t){var i;for(i=0;i<s;i+=1)e[i].animation.unmute(t)},t.getRegisteredAnimations=function(){var t,i=e.length,s=[];for(t=0;t<i;t+=1)s.push(e[t].animation);return s},t}(),BezierFactory=function(){var t={getBezierEasing:function(t,i,s,r,n){var o=n||("bez_"+t+"_"+i+"_"+s+"_"+r).replace(/\./g,"p");if(e[o])return e[o];var a=new c([t,i,s,r]);return e[o]=a,a}},e={},i=11,s=1/(i-1),r="function"==typeof Float32Array;function n(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function a(t){return 3*t}function h(t,e,i){return((n(e,i)*t+o(e,i))*t+a(e))*t}function l(t,e,i){return 3*n(e,i)*t*t+2*o(e,i)*t+a(e)}function c(t){this._p=t,this._mSampleValues=r?new Float32Array(i):new Array(i),this._precomputed=!1,this.get=this.get.bind(this)}return c.prototype={get:function(t){var e=this._p[0],i=this._p[1],s=this._p[2],r=this._p[3];return this._precomputed||this._precompute(),e===i&&s===r?t:0===t?0:1===t?1:h(this._getTForX(t),i,r)},_precompute:function(){var t=this._p[0],e=this._p[1],i=this._p[2],s=this._p[3];this._precomputed=!0,t===e&&i===s||this._calcSampleValues()},_calcSampleValues:function(){for(var t=this._p[0],e=this._p[2],r=0;r<i;++r)this._mSampleValues[r]=h(r*s,t,e)},_getTForX:function(t){for(var e=this._p[0],r=this._p[2],n=this._mSampleValues,o=0,a=1,c=i-1;a!==c&&n[a]<=t;++a)o+=s;var u=o+(t-n[--a])/(n[a+1]-n[a])*s,p=l(u,e,r);return p>=.001?function(t,e,i,s){for(var r=0;r<4;++r){var n=l(e,i,s);if(0===n)return e;e-=(h(e,i,s)-t)/n}return e}(t,u,e,r):0===p?u:function(t,e,i,s,r){var n,o,a=0;do{(n=h(o=e+(i-e)/2,s,r)-t)>0?i=o:e=o}while(Math.abs(n)>1e-7&&++a<10);return o}(t,o,o+s,e,r)}},t}(),pooling={double:function(t){return t.concat(createSizedArray(t.length))}},poolFactory=function(t,e,i){var s=0,r=t,n=createSizedArray(r);return{newElement:function(){return s?n[s-=1]:e()},release:function(t){s===r&&(n=pooling.double(n),r*=2),i&&i(t),n[s]=t,s+=1}}},bezierLengthPool=poolFactory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}})),segmentsLengthPool=poolFactory(8,(function(){return{lengths:[],totalLength:0}}),(function(t){var e,i=t.lengths.length;for(e=0;e<i;e+=1)bezierLengthPool.release(t.lengths[e]);t.lengths.length=0}));function bezFunction(){var t=Math;function e(t,e,i,s,r,n){var o=t*s+e*r+i*n-r*s-n*t-i*e;return o>-.001&&o<.001}var i=function(t,e,i,s){var r,n,o,a,h,l,c=getDefaultCurveSegments(),u=0,p=[],d=[],f=bezierLengthPool.newElement();for(o=i.length,r=0;r<c;r+=1){for(h=r/(c-1),l=0,n=0;n<o;n+=1)a=bmPow(1-h,3)*t[n]+3*bmPow(1-h,2)*h*i[n]+3*(1-h)*bmPow(h,2)*s[n]+bmPow(h,3)*e[n],p[n]=a,null!==d[n]&&(l+=bmPow(p[n]-d[n],2)),d[n]=p[n];l&&(u+=l=bmSqrt(l)),f.percents[r]=h,f.lengths[r]=u}return f.addedLength=u,f};function s(t){this.segmentLength=0,this.points=new Array(t)}function r(t,e){this.partialLength=t,this.point=e}var n,o=(n={},function(t,i,o,a){var h=(t[0]+"_"+t[1]+"_"+i[0]+"_"+i[1]+"_"+o[0]+"_"+o[1]+"_"+a[0]+"_"+a[1]).replace(/\./g,"p");if(!n[h]){var l,c,u,p,d,f,m,g=getDefaultCurveSegments(),y=0,v=null;2===t.length&&(t[0]!==i[0]||t[1]!==i[1])&&e(t[0],t[1],i[0],i[1],t[0]+o[0],t[1]+o[1])&&e(t[0],t[1],i[0],i[1],i[0]+a[0],i[1]+a[1])&&(g=2);var b=new s(g);for(u=o.length,l=0;l<g;l+=1){for(m=createSizedArray(u),d=l/(g-1),f=0,c=0;c<u;c+=1)p=bmPow(1-d,3)*t[c]+3*bmPow(1-d,2)*d*(t[c]+o[c])+3*(1-d)*bmPow(d,2)*(i[c]+a[c])+bmPow(d,3)*i[c],m[c]=p,null!==v&&(f+=bmPow(m[c]-v[c],2));y+=f=bmSqrt(f),b.points[l]=new r(f,m),v=m}b.segmentLength=y,n[h]=b}return n[h]});function a(t,e){var i=e.percents,s=e.lengths,r=i.length,n=bmFloor((r-1)*t),o=t*e.addedLength,a=0;if(n===r-1||0===n||o===s[n])return i[n];for(var h=s[n]>o?-1:1,l=!0;l;)if(s[n]<=o&&s[n+1]>o?(a=(o-s[n])/(s[n+1]-s[n]),l=!1):n+=h,n<0||n>=r-1){if(n===r-1)return i[n];l=!1}return i[n]+(i[n+1]-i[n])*a}var h=createTypedArray("float32",8);return{getSegmentsLength:function(t){var e,s=segmentsLengthPool.newElement(),r=t.c,n=t.v,o=t.o,a=t.i,h=t._length,l=s.lengths,c=0;for(e=0;e<h-1;e+=1)l[e]=i(n[e],n[e+1],o[e],a[e+1]),c+=l[e].addedLength;return r&&h&&(l[e]=i(n[e],n[0],o[e],a[0]),c+=l[e].addedLength),s.totalLength=c,s},getNewSegment:function(e,i,s,r,n,o,l){n<0?n=0:n>1&&(n=1);var c,u=a(n,l),p=a(o=o>1?1:o,l),d=e.length,f=1-u,m=1-p,g=f*f*f,y=u*f*f*3,v=u*u*f*3,b=u*u*u,S=f*f*m,x=u*f*m+f*u*m+f*f*p,w=u*u*m+f*u*p+u*f*p,k=u*u*p,_=f*m*m,C=u*m*m+f*p*m+f*m*p,E=u*p*m+f*p*p+u*m*p,P=u*p*p,I=m*m*m,T=p*m*m+m*p*m+m*m*p,A=p*p*m+m*p*p+p*m*p,M=p*p*p;for(c=0;c<d;c+=1)h[4*c]=t.round(1e3*(g*e[c]+y*s[c]+v*r[c]+b*i[c]))/1e3,h[4*c+1]=t.round(1e3*(S*e[c]+x*s[c]+w*r[c]+k*i[c]))/1e3,h[4*c+2]=t.round(1e3*(_*e[c]+C*s[c]+E*r[c]+P*i[c]))/1e3,h[4*c+3]=t.round(1e3*(I*e[c]+T*s[c]+A*r[c]+M*i[c]))/1e3;return h},getPointInSegment:function(e,i,s,r,n,o){var h=a(n,o),l=1-h;return[t.round(1e3*(l*l*l*e[0]+(h*l*l+l*h*l+l*l*h)*s[0]+(h*h*l+l*h*h+h*l*h)*r[0]+h*h*h*i[0]))/1e3,t.round(1e3*(l*l*l*e[1]+(h*l*l+l*h*l+l*l*h)*s[1]+(h*h*l+l*h*h+h*l*h)*r[1]+h*h*h*i[1]))/1e3]},buildBezierData:o,pointOnLine2D:e,pointOnLine3D:function(i,s,r,n,o,a,h,l,c){if(0===r&&0===a&&0===c)return e(i,s,n,o,h,l);var u,p=t.sqrt(t.pow(n-i,2)+t.pow(o-s,2)+t.pow(a-r,2)),d=t.sqrt(t.pow(h-i,2)+t.pow(l-s,2)+t.pow(c-r,2)),f=t.sqrt(t.pow(h-n,2)+t.pow(l-o,2)+t.pow(c-a,2));return(u=p>d?p>f?p-d-f:f-d-p:f>d?f-d-p:d-p-f)>-1e-4&&u<1e-4}}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(t,e){var i,s=this.offsetTime;"multidimensional"===this.propType&&(i=createTypedArray("float32",this.pv.length));for(var r,n,o,a,h,l,c,u,p,d=e.lastIndex,f=d,m=this.keyframes.length-1,g=!0;g;){if(r=this.keyframes[f],n=this.keyframes[f+1],f===m-1&&t>=n.t-s){r.h&&(r=n),d=0;break}if(n.t-s>t){d=f;break}f<m-1?f+=1:(d=0,g=!1)}o=this.keyframesMetadata[f]||{};var y,v=n.t-s,b=r.t-s;if(r.to){o.bezierData||(o.bezierData=bez.buildBezierData(r.s,n.s||r.e,r.to,r.ti));var S=o.bezierData;if(t>=v||t<b){var x=t>=v?S.points.length-1:0;for(h=S.points[x].point.length,a=0;a<h;a+=1)i[a]=S.points[x].point[a]}else{o.__fnct?p=o.__fnct:(p=BezierFactory.getBezierEasing(r.o.x,r.o.y,r.i.x,r.i.y,r.n).get,o.__fnct=p),l=p((t-b)/(v-b));var w,k=S.segmentLength*l,_=e.lastFrame<t&&e._lastKeyframeIndex===f?e._lastAddedLength:0;for(u=e.lastFrame<t&&e._lastKeyframeIndex===f?e._lastPoint:0,g=!0,c=S.points.length;g;){if(_+=S.points[u].partialLength,0===k||0===l||u===S.points.length-1){for(h=S.points[u].point.length,a=0;a<h;a+=1)i[a]=S.points[u].point[a];break}if(k>=_&&k<_+S.points[u+1].partialLength){for(w=(k-_)/S.points[u+1].partialLength,h=S.points[u].point.length,a=0;a<h;a+=1)i[a]=S.points[u].point[a]+(S.points[u+1].point[a]-S.points[u].point[a])*w;break}u<c-1?u+=1:g=!1}e._lastPoint=u,e._lastAddedLength=_-S.points[u].partialLength,e._lastKeyframeIndex=f}}else{var C,E,P,I,T;if(m=r.s.length,y=n.s||r.e,this.sh&&1!==r.h)t>=v?(i[0]=y[0],i[1]=y[1],i[2]=y[2]):t<=b?(i[0]=r.s[0],i[1]=r.s[1],i[2]=r.s[2]):quaternionToEuler(i,slerp(createQuaternion(r.s),createQuaternion(y),(t-b)/(v-b)));else for(f=0;f<m;f+=1)1!==r.h&&(t>=v?l=1:t<b?l=0:(r.o.x.constructor===Array?(o.__fnct||(o.__fnct=[]),o.__fnct[f]?p=o.__fnct[f]:(C=void 0===r.o.x[f]?r.o.x[0]:r.o.x[f],E=void 0===r.o.y[f]?r.o.y[0]:r.o.y[f],P=void 0===r.i.x[f]?r.i.x[0]:r.i.x[f],I=void 0===r.i.y[f]?r.i.y[0]:r.i.y[f],p=BezierFactory.getBezierEasing(C,E,P,I).get,o.__fnct[f]=p)):o.__fnct?p=o.__fnct:(C=r.o.x,E=r.o.y,P=r.i.x,I=r.i.y,p=BezierFactory.getBezierEasing(C,E,P,I).get,r.keyframeMetadata=p),l=p((t-b)/(v-b)))),y=n.s||r.e,T=1===r.h?r.s[f]:r.s[f]+(y[f]-r.s[f])*l,"multidimensional"===this.propType?i[f]=T:i=T}return e.lastIndex=d,i}function slerp(t,e,i){var s,r,n,o,a,h=[],l=t[0],c=t[1],u=t[2],p=t[3],d=e[0],f=e[1],m=e[2],g=e[3];return(r=l*d+c*f+u*m+p*g)<0&&(r=-r,d=-d,f=-f,m=-m,g=-g),1-r>1e-6?(s=Math.acos(r),n=Math.sin(s),o=Math.sin((1-i)*s)/n,a=Math.sin(i*s)/n):(o=1-i,a=i),h[0]=o*l+a*d,h[1]=o*c+a*f,h[2]=o*u+a*m,h[3]=o*p+a*g,h}function quaternionToEuler(t,e){var i=e[0],s=e[1],r=e[2],n=e[3],o=Math.atan2(2*s*n-2*i*r,1-2*s*s-2*r*r),a=Math.asin(2*i*s+2*r*n),h=Math.atan2(2*i*n-2*s*r,1-2*i*i-2*r*r);t[0]=o/degToRads,t[1]=a/degToRads,t[2]=h/degToRads}function createQuaternion(t){var e=t[0]*degToRads,i=t[1]*degToRads,s=t[2]*degToRads,r=Math.cos(e/2),n=Math.cos(i/2),o=Math.cos(s/2),a=Math.sin(e/2),h=Math.sin(i/2),l=Math.sin(s/2);return[a*h*o+r*n*l,a*n*o+r*h*l,r*h*o-a*n*l,r*n*o-a*h*l]}function getValueAtCurrentTime(){var t=this.comp.renderedFrame-this.offsetTime,e=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=i&&t>=i||this._caching.lastFrame<e&&t<e))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var s=this.interpolateValue(t,this._caching);this.pv=s}return this._caching.lastFrame=t,this.pv}function setVValue(t){var e;if("unidimensional"===this.propType)e=t*this.mult,mathAbs(this.v-e)>1e-5&&(this.v=e,this._mdf=!0);else for(var i=0,s=this.v.length;i<s;)e=t[i]*this.mult,mathAbs(this.v[i]-e)>1e-5&&(this.v[i]=e,this._mdf=!0),i+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t;this.lock=!0,this._mdf=this._isFirstFrame;var e=this.effectsSequence.length,i=this.kf?this.pv:this.data.k;for(t=0;t<e;t+=1)i=this.effectsSequence[t](i);this.setVValue(i),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function ValueProperty(t,e,i,s){this.propType="unidimensional",this.mult=i||1,this.data=e,this.v=i?e.k*i:e.k,this.pv=e.k,this._mdf=!1,this.elem=t,this.container=s,this.comp=t.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(t,e,i,s){var r;this.propType="multidimensional",this.mult=i||1,this.data=e,this._mdf=!1,this.elem=t,this.container=s,this.comp=t.comp,this.k=!1,this.kf=!1,this.frameId=-1;var n=e.k.length;for(this.v=createTypedArray("float32",n),this.pv=createTypedArray("float32",n),this.vel=createTypedArray("float32",n),r=0;r<n;r+=1)this.v[r]=e.k[r]*this.mult,this.pv[r]=e.k[r];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(t,e,i,s){this.propType="unidimensional",this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=e,this.mult=i||1,this.elem=t,this.container=s,this.comp=t.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(t,e,i,s){var r;this.propType="multidimensional";var n,o,a,h,l=e.k.length;for(r=0;r<l-1;r+=1)e.k[r].to&&e.k[r].s&&e.k[r+1]&&e.k[r+1].s&&(n=e.k[r].s,o=e.k[r+1].s,a=e.k[r].to,h=e.k[r].ti,(2===n.length&&(n[0]!==o[0]||n[1]!==o[1])&&bez.pointOnLine2D(n[0],n[1],o[0],o[1],n[0]+a[0],n[1]+a[1])&&bez.pointOnLine2D(n[0],n[1],o[0],o[1],o[0]+h[0],o[1]+h[1])||3===n.length&&(n[0]!==o[0]||n[1]!==o[1]||n[2]!==o[2])&&bez.pointOnLine3D(n[0],n[1],n[2],o[0],o[1],o[2],n[0]+a[0],n[1]+a[1],n[2]+a[2])&&bez.pointOnLine3D(n[0],n[1],n[2],o[0],o[1],o[2],o[0]+h[0],o[1]+h[1],o[2]+h[2]))&&(e.k[r].to=null,e.k[r].ti=null),n[0]===o[0]&&n[1]===o[1]&&0===a[0]&&0===a[1]&&0===h[0]&&0===h[1]&&(2===n.length||n[2]===o[2]&&0===a[2]&&0===h[2])&&(e.k[r].to=null,e.k[r].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=e,this.keyframes=e.k,this.keyframesMetadata=[],this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=i||1,this.elem=t,this.container=s,this.comp=t.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var c=e.k[0].s.length;for(this.v=createTypedArray("float32",c),this.pv=createTypedArray("float32",c),r=0;r<c;r+=1)this.v[r]=initFrame,this.pv[r]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",c)},this.addEffect=addEffect}var PropertyFactory={getProp:function(t,e,i,s,r){var n;if(e.sid&&(e=t.globalData.slotManager.getProp(e)),e.k.length)if("number"==typeof e.k[0])n=new MultiDimensionalProperty(t,e,s,r);else switch(i){case 0:n=new KeyframedValueProperty(t,e,s,r);break;case 1:n=new KeyframedMultidimensionalProperty(t,e,s,r)}else n=new ValueProperty(t,e,s,r);return n.effectsSequence.length&&r.addDynamicProperty(n),n}};function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&(this.dynamicProperties.push(t),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){var t;this._mdf=!1;var e=this.dynamicProperties.length;for(t=0;t<e;t+=1)this.dynamicProperties[t].getValue(),this.dynamicProperties[t]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(t){this.container=t,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=poolFactory(8,(function(){return createTypedArray("float32",2)}));function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(t,e){this.c=t,this.setLength(e);for(var i=0;i<e;)this.v[i]=pointPool.newElement(),this.o[i]=pointPool.newElement(),this.i[i]=pointPool.newElement(),i+=1},ShapePath.prototype.setLength=function(t){for(;this._maxLength<t;)this.doubleArrayLength();this._length=t},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(t,e,i,s,r){var n;switch(this._length=Math.max(this._length,s+1),this._length>=this._maxLength&&this.doubleArrayLength(),i){case"v":n=this.v;break;case"i":n=this.i;break;case"o":n=this.o;break;default:n=[]}(!n[s]||n[s]&&!r)&&(n[s]=pointPool.newElement()),n[s][0]=t,n[s][1]=e},ShapePath.prototype.setTripleAt=function(t,e,i,s,r,n,o,a){this.setXYAt(t,e,"v",o,a),this.setXYAt(i,s,"o",o,a),this.setXYAt(r,n,"i",o,a)},ShapePath.prototype.reverse=function(){var t=new ShapePath;t.setPathData(this.c,this._length);var e=this.v,i=this.o,s=this.i,r=0;this.c&&(t.setTripleAt(e[0][0],e[0][1],s[0][0],s[0][1],i[0][0],i[0][1],0,!1),r=1);var n,o=this._length-1,a=this._length;for(n=r;n<a;n+=1)t.setTripleAt(e[o][0],e[o][1],s[o][0],s[o][1],i[o][0],i[o][1],n,!1),o-=1;return t},ShapePath.prototype.length=function(){return this._length};var shapePool=(factory=poolFactory(4,(function(){return new ShapePath}),(function(t){var e,i=t._length;for(e=0;e<i;e+=1)pointPool.release(t.v[e]),pointPool.release(t.i[e]),pointPool.release(t.o[e]),t.v[e]=null,t.i[e]=null,t.o[e]=null;t._length=0,t.c=!1})),factory.clone=function(t){var e,i=factory.newElement(),s=void 0===t._length?t.v.length:t._length;for(i.setLength(s),i.c=t.c,e=0;e<s;e+=1)i.setTripleAt(t.v[e][0],t.v[e][1],t.o[e][0],t.o[e][1],t.i[e][0],t.i[e][1],e);return i},factory),factory;function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(t){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=t,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var t;for(t=0;t<this._length;t+=1)shapePool.release(this.shapes[t]);this._length=0};var shapeCollectionPool=(ob={newShapeCollection:function(){return _length?pool[_length-=1]:new ShapeCollection},release:function(t){var e,i=t._length;for(e=0;e<i;e+=1)shapePool.release(t.shapes[e]);t._length=0,_length===_maxLength&&(pool=pooling.double(pool),_maxLength*=2),pool[_length]=t,_length+=1}},_length=0,_maxLength=4,pool=createSizedArray(_maxLength),ob),ob,_length,_maxLength,pool,ShapePropertyFactory=function(){var t=-999999;function e(t,e,i){var s,r,n,o,a,h,l,c,u,p=i.lastIndex,d=this.keyframes;if(t<d[0].t-this.offsetTime)s=d[0].s[0],n=!0,p=0;else if(t>=d[d.length-1].t-this.offsetTime)s=d[d.length-1].s?d[d.length-1].s[0]:d[d.length-2].e[0],n=!0;else{for(var f,m,g,y=p,v=d.length-1,b=!0;b&&(f=d[y],!((m=d[y+1]).t-this.offsetTime>t));)y<v-1?y+=1:b=!1;if(g=this.keyframesMetadata[y]||{},p=y,!(n=1===f.h)){if(t>=m.t-this.offsetTime)c=1;else if(t<f.t-this.offsetTime)c=0;else{var S;g.__fnct?S=g.__fnct:(S=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y).get,g.__fnct=S),c=S((t-(f.t-this.offsetTime))/(m.t-this.offsetTime-(f.t-this.offsetTime)))}r=m.s?m.s[0]:f.e[0]}s=f.s[0]}for(h=e._length,l=s.i[0].length,i.lastIndex=p,o=0;o<h;o+=1)for(a=0;a<l;a+=1)u=n?s.i[o][a]:s.i[o][a]+(r.i[o][a]-s.i[o][a])*c,e.i[o][a]=u,u=n?s.o[o][a]:s.o[o][a]+(r.o[o][a]-s.o[o][a])*c,e.o[o][a]=u,u=n?s.v[o][a]:s.v[o][a]+(r.v[o][a]-s.v[o][a])*c,e.v[o][a]=u}function i(){var e=this.comp.renderedFrame-this.offsetTime,i=this.keyframes[0].t-this.offsetTime,s=this.keyframes[this.keyframes.length-1].t-this.offsetTime,r=this._caching.lastFrame;return r!==t&&(r<i&&e<i||r>s&&e>s)||(this._caching.lastIndex=r<e?this._caching.lastIndex:0,this.interpolateShape(e,this.pv,this._caching)),this._caching.lastFrame=e,this.pv}function s(){this.paths=this.localShapeCollection}function r(t){(function(t,e){if(t._length!==e._length||t.c!==e.c)return!1;var i,s=t._length;for(i=0;i<s;i+=1)if(t.v[i][0]!==e.v[i][0]||t.v[i][1]!==e.v[i][1]||t.o[i][0]!==e.o[i][0]||t.o[i][1]!==e.o[i][1]||t.i[i][0]!==e.i[i][0]||t.i[i][1]!==e.i[i][1])return!1;return!0})(this.v,t)||(this.v=shapePool.clone(t),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function n(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{var t,e;this.lock=!0,this._mdf=!1,t=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var i=this.effectsSequence.length;for(e=0;e<i;e+=1)t=this.effectsSequence[e](t);this.setVValue(t),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function o(t,e,i){this.propType="shape",this.comp=t.comp,this.container=t,this.elem=t,this.data=e,this.k=!1,this.kf=!1,this._mdf=!1;var r=3===i?e.pt.k:e.ks.k;this.v=shapePool.clone(r),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=s,this.effectsSequence=[]}function a(t){this.effectsSequence.push(t),this.container.addDynamicProperty(this)}function h(e,r,n){this.propType="shape",this.comp=e.comp,this.elem=e,this.container=e,this.offsetTime=e.data.st,this.keyframes=3===n?r.pt.k:r.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var o=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,o),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=t,this.reset=s,this._caching={lastFrame:t,lastIndex:0},this.effectsSequence=[i.bind(this)]}o.prototype.interpolateShape=e,o.prototype.getValue=n,o.prototype.setVValue=r,o.prototype.addEffect=a,h.prototype.getValue=n,h.prototype.interpolateShape=e,h.prototype.setVValue=r,h.prototype.addEffect=a;var l=function(){var t=roundCorner;function e(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=e.d,this.elem=t,this.comp=t.comp,this.frameId=-1,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return e.prototype={reset:s,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var e=this.p.v[0],i=this.p.v[1],s=this.s.v[0]/2,r=this.s.v[1]/2,n=3!==this.d,o=this.v;o.v[0][0]=e,o.v[0][1]=i-r,o.v[1][0]=n?e+s:e-s,o.v[1][1]=i,o.v[2][0]=e,o.v[2][1]=i+r,o.v[3][0]=n?e-s:e+s,o.v[3][1]=i,o.i[0][0]=n?e-s*t:e+s*t,o.i[0][1]=i-r,o.i[1][0]=n?e+s:e-s,o.i[1][1]=i-r*t,o.i[2][0]=n?e+s*t:e-s*t,o.i[2][1]=i+r,o.i[3][0]=n?e-s:e+s,o.i[3][1]=i+r*t,o.o[0][0]=n?e+s*t:e-s*t,o.o[0][1]=i-r,o.o[1][0]=n?e+s:e-s,o.o[1][1]=i+r*t,o.o[2][0]=n?e-s*t:e+s*t,o.o[2][1]=i+r,o.o[3][0]=n?e-s:e+s,o.o[3][1]=i-r*t}},extendPrototype([DynamicPropertyContainer],e),e}(),c=function(){function t(t,e){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=t,this.comp=t.comp,this.data=e,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),1===e.sy?(this.ir=PropertyFactory.getProp(t,e.ir,0,0,this),this.is=PropertyFactory.getProp(t,e.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(t,e.pt,0,0,this),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,degToRads,this),this.or=PropertyFactory.getProp(t,e.or,0,0,this),this.os=PropertyFactory.getProp(t,e.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return t.prototype={reset:s,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var t,e,i,s,r=2*Math.floor(this.pt.v),n=2*Math.PI/r,o=!0,a=this.or.v,h=this.ir.v,l=this.os.v,c=this.is.v,u=2*Math.PI*a/(2*r),p=2*Math.PI*h/(2*r),d=-Math.PI/2;d+=this.r.v;var f=3===this.data.d?-1:1;for(this.v._length=0,t=0;t<r;t+=1){i=o?l:c,s=o?u:p;var m=(e=o?a:h)*Math.cos(d),g=e*Math.sin(d),y=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),v=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);m+=+this.p.v[0],g+=+this.p.v[1],this.v.setTripleAt(m,g,m-y*s*i*f,g-v*s*i*f,m+y*s*i*f,g+v*s*i*f,t,!0),o=!o,d+=n*f}},convertPolygonToPath:function(){var t,e=Math.floor(this.pt.v),i=2*Math.PI/e,s=this.or.v,r=this.os.v,n=2*Math.PI*s/(4*e),o=.5*-Math.PI,a=3===this.data.d?-1:1;for(o+=this.r.v,this.v._length=0,t=0;t<e;t+=1){var h=s*Math.cos(o),l=s*Math.sin(o),c=0===h&&0===l?0:l/Math.sqrt(h*h+l*l),u=0===h&&0===l?0:-h/Math.sqrt(h*h+l*l);h+=+this.p.v[0],l+=+this.p.v[1],this.v.setTripleAt(h,l,h-c*n*r*a,l-u*n*r*a,h+c*n*r*a,l+u*n*r*a,t,!0),o+=i*a}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],t),t}(),u=function(){function t(t,e){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=t,this.comp=t.comp,this.frameId=-1,this.d=e.d,this.initDynamicPropertyContainer(t),this.p=PropertyFactory.getProp(t,e.p,1,0,this),this.s=PropertyFactory.getProp(t,e.s,1,0,this),this.r=PropertyFactory.getProp(t,e.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return t.prototype={convertRectToPath:function(){var t=this.p.v[0],e=this.p.v[1],i=this.s.v[0]/2,s=this.s.v[1]/2,r=bmMin(i,s,this.r.v),n=r*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(t+i,e-s+r,t+i,e-s+r,t+i,e-s+n,0,!0),this.v.setTripleAt(t+i,e+s-r,t+i,e+s-n,t+i,e+s-r,1,!0),0!==r?(this.v.setTripleAt(t+i-r,e+s,t+i-r,e+s,t+i-n,e+s,2,!0),this.v.setTripleAt(t-i+r,e+s,t-i+n,e+s,t-i+r,e+s,3,!0),this.v.setTripleAt(t-i,e+s-r,t-i,e+s-r,t-i,e+s-n,4,!0),this.v.setTripleAt(t-i,e-s+r,t-i,e-s+n,t-i,e-s+r,5,!0),this.v.setTripleAt(t-i+r,e-s,t-i+r,e-s,t-i+n,e-s,6,!0),this.v.setTripleAt(t+i-r,e-s,t+i-n,e-s,t+i-r,e-s,7,!0)):(this.v.setTripleAt(t-i,e+s,t-i+n,e+s,t-i,e+s,2),this.v.setTripleAt(t-i,e-s,t-i,e-s+n,t-i,e-s,3))):(this.v.setTripleAt(t+i,e-s+r,t+i,e-s+n,t+i,e-s+r,0,!0),0!==r?(this.v.setTripleAt(t+i-r,e-s,t+i-r,e-s,t+i-n,e-s,1,!0),this.v.setTripleAt(t-i+r,e-s,t-i+n,e-s,t-i+r,e-s,2,!0),this.v.setTripleAt(t-i,e-s+r,t-i,e-s+r,t-i,e-s+n,3,!0),this.v.setTripleAt(t-i,e+s-r,t-i,e+s-n,t-i,e+s-r,4,!0),this.v.setTripleAt(t-i+r,e+s,t-i+r,e+s,t-i+n,e+s,5,!0),this.v.setTripleAt(t+i-r,e+s,t+i-n,e+s,t+i-r,e+s,6,!0),this.v.setTripleAt(t+i,e+s-r,t+i,e+s-r,t+i,e+s-n,7,!0)):(this.v.setTripleAt(t-i,e-s,t-i+n,e-s,t-i,e-s,1,!0),this.v.setTripleAt(t-i,e+s,t-i,e+s-n,t-i,e+s,2,!0),this.v.setTripleAt(t+i,e+s,t+i-n,e+s,t+i,e+s,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:s},extendPrototype([DynamicPropertyContainer],t),t}();return{getShapeProp:function(t,e,i){var s;return 3===i||4===i?s=(3===i?e.pt:e.ks).k.length?new h(t,e,i):new o(t,e,i):5===i?s=new u(t,e):6===i?s=new l(t,e):7===i&&(s=new c(t,e)),s.k&&t.addDynamicProperty(s),s},getConstructorFunction:function(){return o},getKeyframedConstructorFunction:function(){return h}}}(),Matrix=function(){var t=Math.cos,e=Math.sin,i=Math.tan,s=Math.round;function r(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function n(i){if(0===i)return this;var s=t(i),r=e(i);return this._t(s,-r,0,0,r,s,0,0,0,0,1,0,0,0,0,1)}function o(i){if(0===i)return this;var s=t(i),r=e(i);return this._t(1,0,0,0,0,s,-r,0,0,r,s,0,0,0,0,1)}function a(i){if(0===i)return this;var s=t(i),r=e(i);return this._t(s,0,r,0,0,1,0,0,-r,0,s,0,0,0,0,1)}function h(i){if(0===i)return this;var s=t(i),r=e(i);return this._t(s,-r,0,0,r,s,0,0,0,0,1,0,0,0,0,1)}function l(t,e){return this._t(1,e,t,1,0,0)}function c(t,e){return this.shear(i(t),i(e))}function u(s,r){var n=t(r),o=e(r);return this._t(n,o,0,0,-o,n,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,i(s),1,0,0,0,0,1,0,0,0,0,1)._t(n,-o,0,0,o,n,0,0,0,0,1,0,0,0,0,1)}function p(t,e,i){return i||0===i||(i=1),1===t&&1===e&&1===i?this:this._t(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1)}function d(t,e,i,s,r,n,o,a,h,l,c,u,p,d,f,m){return this.props[0]=t,this.props[1]=e,this.props[2]=i,this.props[3]=s,this.props[4]=r,this.props[5]=n,this.props[6]=o,this.props[7]=a,this.props[8]=h,this.props[9]=l,this.props[10]=c,this.props[11]=u,this.props[12]=p,this.props[13]=d,this.props[14]=f,this.props[15]=m,this}function f(t,e,i){return i=i||0,0!==t||0!==e||0!==i?this._t(1,0,0,0,0,1,0,0,0,0,1,0,t,e,i,1):this}function m(t,e,i,s,r,n,o,a,h,l,c,u,p,d,f,m){var g=this.props;if(1===t&&0===e&&0===i&&0===s&&0===r&&1===n&&0===o&&0===a&&0===h&&0===l&&1===c&&0===u)return g[12]=g[12]*t+g[15]*p,g[13]=g[13]*n+g[15]*d,g[14]=g[14]*c+g[15]*f,g[15]*=m,this._identityCalculated=!1,this;var y=g[0],v=g[1],b=g[2],S=g[3],x=g[4],w=g[5],k=g[6],_=g[7],C=g[8],E=g[9],P=g[10],I=g[11],T=g[12],A=g[13],M=g[14],R=g[15];return g[0]=y*t+v*r+b*h+S*p,g[1]=y*e+v*n+b*l+S*d,g[2]=y*i+v*o+b*c+S*f,g[3]=y*s+v*a+b*u+S*m,g[4]=x*t+w*r+k*h+_*p,g[5]=x*e+w*n+k*l+_*d,g[6]=x*i+w*o+k*c+_*f,g[7]=x*s+w*a+k*u+_*m,g[8]=C*t+E*r+P*h+I*p,g[9]=C*e+E*n+P*l+I*d,g[10]=C*i+E*o+P*c+I*f,g[11]=C*s+E*a+P*u+I*m,g[12]=T*t+A*r+M*h+R*p,g[13]=T*e+A*n+M*l+R*d,g[14]=T*i+A*o+M*c+R*f,g[15]=T*s+A*a+M*u+R*m,this._identityCalculated=!1,this}function g(t){var e=t.props;return this.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function y(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function v(t){for(var e=0;e<16;){if(t.props[e]!==this.props[e])return!1;e+=1}return!0}function b(t){var e;for(e=0;e<16;e+=1)t.props[e]=this.props[e];return t}function S(t){var e;for(e=0;e<16;e+=1)this.props[e]=t[e]}function x(t,e,i){return{x:t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],y:t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],z:t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}}function w(t,e,i){return t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12]}function k(t,e,i){return t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13]}function _(t,e,i){return t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]}function C(){var t=this.props[0]*this.props[5]-this.props[1]*this.props[4],e=this.props[5]/t,i=-this.props[1]/t,s=-this.props[4]/t,r=this.props[0]/t,n=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/t,o=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/t,a=new Matrix;return a.props[0]=e,a.props[1]=i,a.props[4]=s,a.props[5]=r,a.props[12]=n,a.props[13]=o,a}function E(t){return this.getInverseMatrix().applyToPointArray(t[0],t[1],t[2]||0)}function P(t){var e,i=t.length,s=[];for(e=0;e<i;e+=1)s[e]=E(t[e]);return s}function I(t,e,i){var s=createTypedArray("float32",6);if(this.isIdentity())s[0]=t[0],s[1]=t[1],s[2]=e[0],s[3]=e[1],s[4]=i[0],s[5]=i[1];else{var r=this.props[0],n=this.props[1],o=this.props[4],a=this.props[5],h=this.props[12],l=this.props[13];s[0]=t[0]*r+t[1]*o+h,s[1]=t[0]*n+t[1]*a+l,s[2]=e[0]*r+e[1]*o+h,s[3]=e[0]*n+e[1]*a+l,s[4]=i[0]*r+i[1]*o+h,s[5]=i[0]*n+i[1]*a+l}return s}function T(t,e,i){return this.isIdentity()?[t,e,i]:[t*this.props[0]+e*this.props[4]+i*this.props[8]+this.props[12],t*this.props[1]+e*this.props[5]+i*this.props[9]+this.props[13],t*this.props[2]+e*this.props[6]+i*this.props[10]+this.props[14]]}function A(t,e){if(this.isIdentity())return t+","+e;var i=this.props;return Math.round(100*(t*i[0]+e*i[4]+i[12]))/100+","+Math.round(100*(t*i[1]+e*i[5]+i[13]))/100}function M(){for(var t=0,e=this.props,i="matrix3d(";t<16;)i+=s(1e4*e[t])/1e4,i+=15===t?")":",",t+=1;return i}function R(t){return t<1e-6&&t>0||t>-1e-6&&t<0?s(1e4*t)/1e4:t}function B(){var t=this.props;return"matrix("+R(t[0])+","+R(t[1])+","+R(t[4])+","+R(t[5])+","+R(t[12])+","+R(t[13])+")"}return function(){this.reset=r,this.rotate=n,this.rotateX=o,this.rotateY=a,this.rotateZ=h,this.skew=c,this.skewFromAxis=u,this.shear=l,this.scale=p,this.setTransform=d,this.translate=f,this.transform=m,this.multiply=g,this.applyToPoint=x,this.applyToX=w,this.applyToY=k,this.applyToZ=_,this.applyToPointArray=T,this.applyToTriplePoints=I,this.applyToPointStringified=A,this.toCSS=M,this.to2dCSS=B,this.clone=b,this.cloneFromProps=S,this.equals=v,this.inversePoints=P,this.inversePoint=E,this.getInverseMatrix=C,this._t=this.transform,this.isIdentity=y,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(t){return _typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$3(t)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(t){setLocationHref(t)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(t){setSubframeEnabled(t)}function setPrefix(t){setIdPrefix(t)}function loadAnimation(t){return!0===standalone&&(t.animationData=JSON.parse(animationData)),animationManager.loadAnimation(t)}function setQuality(t){if("string"==typeof t)switch(t){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(t)&&t>1&&setDefaultCurveSegments(t);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(t,e){"expressions"===t&&setExpressionsPlugin(e)}function getFactory(t){switch(t){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(t){for(var e=queryString.split("&"),i=0;i<e.length;i+=1){var s=e[i].split("=");if(decodeURIComponent(s[0])==t)return decodeURIComponent(s[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{"object"!==_typeof$3(exports)&&__webpack_require__.amdO}catch(t){}var ShapeModifiers=function(){var t={},e={};return t.registerModifier=function(t,i){e[t]||(e[t]=i)},t.getModifier=function(t,i,s){return new e[t](i,s)},t}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(t){if(!this.closed){t.sh.container.addDynamicProperty(t.sh);var e={shape:t.sh,data:t,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(e),this.addShapeToModifier(e),this._isAnimated&&t.setAsAnimated()}},ShapeModifier.prototype.init=function(t,e){this.shapes=[],this.elem=t,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(t,e){this.s=PropertyFactory.getProp(t,e.s,0,.01,this),this.e=PropertyFactory.getProp(t,e.e,0,.01,this),this.o=PropertyFactory.getProp(t,e.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=e.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(t){t.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(t,e,i,s,r){var n=[];e<=1?n.push({s:t,e}):t>=1?n.push({s:t-1,e:e-1}):(n.push({s:t,e:1}),n.push({s:0,e:e-1}));var o,a,h=[],l=n.length;for(o=0;o<l;o+=1){var c,u;(a=n[o]).e*r<s||a.s*r>s+i||(c=a.s*r<=s?0:(a.s*r-s)/i,u=a.e*r>=s+i?1:(a.e*r-s)/i,h.push([c,u]))}return h.length||h.push([0,0]),h},TrimModifier.prototype.releasePathsData=function(t){var e,i=t.length;for(e=0;e<i;e+=1)segmentsLengthPool.release(t[e]);return t.length=0,t},TrimModifier.prototype.processShapes=function(t){var e,i,s,r;if(this._mdf||t){var n=this.o.v%360/360;if(n<0&&(n+=1),(e=this.s.v>1?1+n:this.s.v<0?0+n:this.s.v+n)>(i=this.e.v>1?1+n:this.e.v<0?0+n:this.e.v+n)){var o=e;e=i,i=o}e=1e-4*Math.round(1e4*e),i=1e-4*Math.round(1e4*i),this.sValue=e,this.eValue=i}else e=this.sValue,i=this.eValue;var a,h,l,c,u,p=this.shapes.length,d=0;if(i===e)for(r=0;r<p;r+=1)this.shapes[r].localShapeCollection.releaseShapes(),this.shapes[r].shape._mdf=!0,this.shapes[r].shape.paths=this.shapes[r].localShapeCollection,this._mdf&&(this.shapes[r].pathsData.length=0);else if(1===i&&0===e||0===i&&1===e){if(this._mdf)for(r=0;r<p;r+=1)this.shapes[r].pathsData.length=0,this.shapes[r].shape._mdf=!0}else{var f,m,g=[];for(r=0;r<p;r+=1)if((f=this.shapes[r]).shape._mdf||this._mdf||t||2===this.m){if(h=(s=f.shape.paths)._length,u=0,!f.shape._mdf&&f.pathsData.length)u=f.totalShapeLength;else{for(l=this.releasePathsData(f.pathsData),a=0;a<h;a+=1)c=bez.getSegmentsLength(s.shapes[a]),l.push(c),u+=c.totalLength;f.totalShapeLength=u,f.pathsData=l}d+=u,f.shape._mdf=!0}else f.shape.paths=f.localShapeCollection;var y,v=e,b=i,S=0;for(r=p-1;r>=0;r-=1)if((f=this.shapes[r]).shape._mdf){for((m=f.localShapeCollection).releaseShapes(),2===this.m&&p>1?(y=this.calculateShapeEdges(e,i,f.totalShapeLength,S,d),S+=f.totalShapeLength):y=[[v,b]],h=y.length,a=0;a<h;a+=1){v=y[a][0],b=y[a][1],g.length=0,b<=1?g.push({s:f.totalShapeLength*v,e:f.totalShapeLength*b}):v>=1?g.push({s:f.totalShapeLength*(v-1),e:f.totalShapeLength*(b-1)}):(g.push({s:f.totalShapeLength*v,e:f.totalShapeLength}),g.push({s:0,e:f.totalShapeLength*(b-1)}));var x=this.addShapes(f,g[0]);if(g[0].s!==g[0].e){if(g.length>1)if(f.shape.paths.shapes[f.shape.paths._length-1].c){var w=x.pop();this.addPaths(x,m),x=this.addShapes(f,g[1],w)}else this.addPaths(x,m),x=this.addShapes(f,g[1]);this.addPaths(x,m)}}f.shape.paths=m}}},TrimModifier.prototype.addPaths=function(t,e){var i,s=t.length;for(i=0;i<s;i+=1)e.addShape(t[i])},TrimModifier.prototype.addSegment=function(t,e,i,s,r,n,o){r.setXYAt(e[0],e[1],"o",n),r.setXYAt(i[0],i[1],"i",n+1),o&&r.setXYAt(t[0],t[1],"v",n),r.setXYAt(s[0],s[1],"v",n+1)},TrimModifier.prototype.addSegmentFromArray=function(t,e,i,s){e.setXYAt(t[1],t[5],"o",i),e.setXYAt(t[2],t[6],"i",i+1),s&&e.setXYAt(t[0],t[4],"v",i),e.setXYAt(t[3],t[7],"v",i+1)},TrimModifier.prototype.addShapes=function(t,e,i){var s,r,n,o,a,h,l,c,u=t.pathsData,p=t.shape.paths.shapes,d=t.shape.paths._length,f=0,m=[],g=!0;for(i?(a=i._length,c=i._length):(i=shapePool.newElement(),a=0,c=0),m.push(i),s=0;s<d;s+=1){for(h=u[s].lengths,i.c=p[s].c,n=p[s].c?h.length:h.length+1,r=1;r<n;r+=1)if(f+(o=h[r-1]).addedLength<e.s)f+=o.addedLength,i.c=!1;else{if(f>e.e){i.c=!1;break}e.s<=f&&e.e>=f+o.addedLength?(this.addSegment(p[s].v[r-1],p[s].o[r-1],p[s].i[r],p[s].v[r],i,a,g),g=!1):(l=bez.getNewSegment(p[s].v[r-1],p[s].v[r],p[s].o[r-1],p[s].i[r],(e.s-f)/o.addedLength,(e.e-f)/o.addedLength,h[r-1]),this.addSegmentFromArray(l,i,a,g),g=!1,i.c=!1),f+=o.addedLength,a+=1}if(p[s].c&&h.length){if(o=h[r-1],f<=e.e){var y=h[r-1].addedLength;e.s<=f&&e.e>=f+y?(this.addSegment(p[s].v[r-1],p[s].o[r-1],p[s].i[0],p[s].v[0],i,a,g),g=!1):(l=bez.getNewSegment(p[s].v[r-1],p[s].v[0],p[s].o[r-1],p[s].i[0],(e.s-f)/y,(e.e-f)/y,h[r-1]),this.addSegmentFromArray(l,i,a,g),g=!1,i.c=!1)}else i.c=!1;f+=o.addedLength,a+=1}if(i._length&&(i.setXYAt(i.v[c][0],i.v[c][1],"i",c),i.setXYAt(i.v[i._length-1][0],i.v[i._length-1][1],"o",i._length-1)),f>e.e)break;s<d-1&&(i=shapePool.newElement(),g=!0,m.push(i),a=0)}return m},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(t,e){var i=e/100,s=[0,0],r=t._length,n=0;for(n=0;n<r;n+=1)s[0]+=t.v[n][0],s[1]+=t.v[n][1];s[0]/=r,s[1]/=r;var o,a,h,l,c,u,p=shapePool.newElement();for(p.c=t.c,n=0;n<r;n+=1)o=t.v[n][0]+(s[0]-t.v[n][0])*i,a=t.v[n][1]+(s[1]-t.v[n][1])*i,h=t.o[n][0]+(s[0]-t.o[n][0])*-i,l=t.o[n][1]+(s[1]-t.o[n][1])*-i,c=t.i[n][0]+(s[0]-t.i[n][0])*-i,u=t.i[n][1]+(s[1]-t.i[n][1])*-i,p.setTripleAt(o,a,h,l,c,u,n);return p},PuckerAndBloatModifier.prototype.processShapes=function(t){var e,i,s,r,n,o,a=this.shapes.length,h=this.amount.v;if(0!==h)for(i=0;i<a;i+=1){if(o=(n=this.shapes[i]).localShapeCollection,n.shape._mdf||this._mdf||t)for(o.releaseShapes(),n.shape._mdf=!0,e=n.shape.paths.shapes,r=n.shape.paths._length,s=0;s<r;s+=1)o.addShape(this.processPath(e[s],h));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var t=[0,0];function e(t,e,i){if(this.elem=t,this.frameId=-1,this.propType="transform",this.data=e,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(i||t),e.p&&e.p.s?(this.px=PropertyFactory.getProp(t,e.p.x,0,0,this),this.py=PropertyFactory.getProp(t,e.p.y,0,0,this),e.p.z&&(this.pz=PropertyFactory.getProp(t,e.p.z,0,0,this))):this.p=PropertyFactory.getProp(t,e.p||{k:[0,0,0]},1,0,this),e.rx){if(this.rx=PropertyFactory.getProp(t,e.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(t,e.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(t,e.rz,0,degToRads,this),e.or.k[0].ti){var s,r=e.or.k.length;for(s=0;s<r;s+=1)e.or.k[s].to=null,e.or.k[s].ti=null}this.or=PropertyFactory.getProp(t,e.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(t,e.r||{k:0},0,degToRads,this);e.sk&&(this.sk=PropertyFactory.getProp(t,e.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(t,e.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(t,e.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(t,e.s||{k:[100,100,100]},1,.01,this),e.o?this.o=PropertyFactory.getProp(t,e.o,0,.01,t):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return e.prototype={applyToMatrix:function(t){var e=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||e,this.a&&t.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&t.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&t.skewFromAxis(-this.sk.v,this.sa.v),this.r?t.rotate(-this.r.v):t.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?t.translate(this.px.v,this.py.v,-this.pz.v):t.translate(this.px.v,this.py.v,0):t.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(e){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||e){var i;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var s,r;if(i=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(s=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/i,0),r=this.p.getValueAtTime(this.p.keyframes[0].t/i,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(s=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/i,0),r=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/i,0)):(s=this.p.pv,r=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/i,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){s=[],r=[];var n=this.px,o=this.py;n._caching.lastFrame+n.offsetTime<=n.keyframes[0].t?(s[0]=n.getValueAtTime((n.keyframes[0].t+.01)/i,0),s[1]=o.getValueAtTime((o.keyframes[0].t+.01)/i,0),r[0]=n.getValueAtTime(n.keyframes[0].t/i,0),r[1]=o.getValueAtTime(o.keyframes[0].t/i,0)):n._caching.lastFrame+n.offsetTime>=n.keyframes[n.keyframes.length-1].t?(s[0]=n.getValueAtTime(n.keyframes[n.keyframes.length-1].t/i,0),s[1]=o.getValueAtTime(o.keyframes[o.keyframes.length-1].t/i,0),r[0]=n.getValueAtTime((n.keyframes[n.keyframes.length-1].t-.01)/i,0),r[1]=o.getValueAtTime((o.keyframes[o.keyframes.length-1].t-.01)/i,0)):(s=[n.pv,o.pv],r[0]=n.getValueAtTime((n._caching.lastFrame+n.offsetTime-.01)/i,n.offsetTime),r[1]=o.getValueAtTime((o._caching.lastFrame+o.offsetTime-.01)/i,o.offsetTime))}else s=r=t;this.v.rotate(-Math.atan2(s[1]-r[1],s[0]-r[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],e),e.prototype.addDynamicProperty=function(t){this._addDynamicProperty(t),this.elem.addDynamicProperty(t),this._isDirty=!0},e.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(t,i,s){return new e(t,i,s)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(t,e){return 1e5*Math.abs(t-e)<=Math.min(Math.abs(t),Math.abs(e))}function floatZero(t){return Math.abs(t)<=1e-5}function lerp(t,e,i){return t*(1-i)+e*i}function lerpPoint(t,e,i){return[lerp(t[0],e[0],i),lerp(t[1],e[1],i)]}function quadRoots(t,e,i){if(0===t)return[];var s=e*e-4*t*i;if(s<0)return[];var r=-e/(2*t);if(0===s)return[r];var n=Math.sqrt(s)/(2*t);return[r-n,r+n]}function polynomialCoefficients(t,e,i,s){return[3*e-t-3*i+s,3*t-6*e+3*i,-3*t+3*e,t]}function singlePoint(t){return new PolynomialBezier(t,t,t,t,!1)}function PolynomialBezier(t,e,i,s,r){r&&pointEqual(t,e)&&(e=lerpPoint(t,s,1/3)),r&&pointEqual(i,s)&&(i=lerpPoint(t,s,2/3));var n=polynomialCoefficients(t[0],e[0],i[0],s[0]),o=polynomialCoefficients(t[1],e[1],i[1],s[1]);this.a=[n[0],o[0]],this.b=[n[1],o[1]],this.c=[n[2],o[2]],this.d=[n[3],o[3]],this.points=[t,e,i,s]}function extrema(t,e){var i=t.points[0][e],s=t.points[t.points.length-1][e];if(i>s){var r=s;s=i,i=r}for(var n=quadRoots(3*t.a[e],2*t.b[e],t.c[e]),o=0;o<n.length;o+=1)if(n[o]>0&&n[o]<1){var a=t.point(n[o])[e];a<i?i=a:a>s&&(s=a)}return{min:i,max:s}}function intersectData(t,e,i){var s=t.boundingBox();return{cx:s.cx,cy:s.cy,width:s.width,height:s.height,bez:t,t:(e+i)/2,t1:e,t2:i}}function splitData(t){var e=t.bez.split(.5);return[intersectData(e[0],t.t1,t.t),intersectData(e[1],t.t,t.t2)]}function boxIntersect(t,e){return 2*Math.abs(t.cx-e.cx)<t.width+e.width&&2*Math.abs(t.cy-e.cy)<t.height+e.height}function intersectsImpl(t,e,i,s,r,n){if(boxIntersect(t,e))if(i>=n||t.width<=s&&t.height<=s&&e.width<=s&&e.height<=s)r.push([t.t,e.t]);else{var o=splitData(t),a=splitData(e);intersectsImpl(o[0],a[0],i+1,s,r,n),intersectsImpl(o[0],a[1],i+1,s,r,n),intersectsImpl(o[1],a[0],i+1,s,r,n),intersectsImpl(o[1],a[1],i+1,s,r,n)}}function crossProduct(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function lineIntersection(t,e,i,s){var r=[t[0],t[1],1],n=[e[0],e[1],1],o=[i[0],i[1],1],a=[s[0],s[1],1],h=crossProduct(crossProduct(r,n),crossProduct(o,a));return floatZero(h[2])?null:[h[0]/h[2],h[1]/h[2]]}function polarOffset(t,e,i){return[t[0]+Math.cos(e)*i,t[1]-Math.sin(e)*i]}function pointDistance(t,e){return Math.hypot(t[0]-e[0],t[1]-e[1])}function pointEqual(t,e){return floatEqual(t[0],e[0])&&floatEqual(t[1],e[1])}function ZigZagModifier(){}function setPoint(t,e,i,s,r,n,o){var a=i-Math.PI/2,h=i+Math.PI/2,l=e[0]+Math.cos(i)*s*r,c=e[1]-Math.sin(i)*s*r;t.setTripleAt(l,c,l+Math.cos(a)*n,c-Math.sin(a)*n,l+Math.cos(h)*o,c-Math.sin(h)*o,t.length())}function getPerpendicularVector(t,e){var i=[e[0]-t[0],e[1]-t[1]],s=.5*-Math.PI;return[Math.cos(s)*i[0]-Math.sin(s)*i[1],Math.sin(s)*i[0]+Math.cos(s)*i[1]]}function getProjectingAngle(t,e){var i=0===e?t.length()-1:e-1,s=(e+1)%t.length(),r=getPerpendicularVector(t.v[i],t.v[s]);return Math.atan2(0,1)-Math.atan2(r[1],r[0])}function zigZagCorner(t,e,i,s,r,n,o){var a=getProjectingAngle(e,i),h=e.v[i%e._length],l=e.v[0===i?e._length-1:i-1],c=e.v[(i+1)%e._length],u=2===n?Math.sqrt(Math.pow(h[0]-l[0],2)+Math.pow(h[1]-l[1],2)):0,p=2===n?Math.sqrt(Math.pow(h[0]-c[0],2)+Math.pow(h[1]-c[1],2)):0;setPoint(t,e.v[i%e._length],a,o,s,p/(2*(r+1)),u/(2*(r+1)),n)}function zigZagSegment(t,e,i,s,r,n){for(var o=0;o<s;o+=1){var a=(o+1)/(s+1),h=2===r?Math.sqrt(Math.pow(e.points[3][0]-e.points[0][0],2)+Math.pow(e.points[3][1]-e.points[0][1],2)):0,l=e.normalAngle(a);setPoint(t,e.point(a),l,n,i,h/(2*(s+1)),h/(2*(s+1)),r),n=-n}return n}function linearOffset(t,e,i){var s=Math.atan2(e[0]-t[0],e[1]-t[1]);return[polarOffset(t,s,i),polarOffset(e,s,i)]}function offsetSegment(t,e){var i,s,r,n,o,a,h;i=(h=linearOffset(t.points[0],t.points[1],e))[0],s=h[1],r=(h=linearOffset(t.points[1],t.points[2],e))[0],n=h[1],o=(h=linearOffset(t.points[2],t.points[3],e))[0],a=h[1];var l=lineIntersection(i,s,r,n);null===l&&(l=s);var c=lineIntersection(o,a,r,n);return null===c&&(c=o),new PolynomialBezier(i,l,c,a)}function joinLines(t,e,i,s,r){var n=e.points[3],o=i.points[0];if(3===s)return n;if(pointEqual(n,o))return n;if(2===s){var a=-e.tangentAngle(1),h=-i.tangentAngle(0)+Math.PI,l=lineIntersection(n,polarOffset(n,a+Math.PI/2,100),o,polarOffset(o,a+Math.PI/2,100)),c=l?pointDistance(l,n):pointDistance(n,o)/2,u=polarOffset(n,a,2*c*roundCorner);return t.setXYAt(u[0],u[1],"o",t.length()-1),u=polarOffset(o,h,2*c*roundCorner),t.setTripleAt(o[0],o[1],o[0],o[1],u[0],u[1],t.length()),o}var p=lineIntersection(pointEqual(n,e.points[2])?e.points[0]:e.points[2],n,o,pointEqual(o,i.points[1])?i.points[3]:i.points[1]);return p&&pointDistance(p,n)<r?(t.setTripleAt(p[0],p[1],p[0],p[1],p[0],p[1],t.length()),p):n}function getIntersection(t,e){var i=t.intersections(e);return i.length&&floatEqual(i[0][0],1)&&i.shift(),i.length?i[0]:null}function pruneSegmentIntersection(t,e){var i=t.slice(),s=e.slice(),r=getIntersection(t[t.length-1],e[0]);return r&&(i[t.length-1]=t[t.length-1].split(r[0])[0],s[0]=e[0].split(r[1])[1]),t.length>1&&e.length>1&&(r=getIntersection(t[0],e[e.length-1]))?[[t[0].split(r[0])[0]],[e[e.length-1].split(r[1])[1]]]:[i,s]}function pruneIntersections(t){for(var e,i=1;i<t.length;i+=1)e=pruneSegmentIntersection(t[i-1],t[i]),t[i-1]=e[0],t[i]=e[1];return t.length>1&&(e=pruneSegmentIntersection(t[t.length-1],t[0]),t[t.length-1]=e[0],t[0]=e[1]),t}function offsetSegmentSplit(t,e){var i,s,r,n,o=t.inflectionPoints();if(0===o.length)return[offsetSegment(t,e)];if(1===o.length||floatEqual(o[1],1))return i=(r=t.split(o[0]))[0],s=r[1],[offsetSegment(i,e),offsetSegment(s,e)];i=(r=t.split(o[0]))[0];var a=(o[1]-o[0])/(1-o[0]);return n=(r=r[1].split(a))[0],s=r[1],[offsetSegment(i,e),offsetSegment(n,e),offsetSegment(s,e)]}function OffsetPathModifier(){}function getFontProperties(t){for(var e=t.fStyle?t.fStyle.split(" "):[],i="normal",s="normal",r=e.length,n=0;n<r;n+=1)switch(e[n].toLowerCase()){case"italic":s="italic";break;case"bold":i="700";break;case"black":i="900";break;case"medium":i="500";break;case"regular":case"normal":i="400";break;case"light":case"thin":i="200"}return{style:s,weight:t.fWeight||i}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(t,e.c,0,null,this),this.o=PropertyFactory.getProp(t,e.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(t,e.tr,this),this.so=PropertyFactory.getProp(t,e.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(t,e.tr.eo,0,.01,this),this.data=e,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(t,e,i,s,r,n){var o=n?-1:1,a=s.s.v[0]+(1-s.s.v[0])*(1-r),h=s.s.v[1]+(1-s.s.v[1])*(1-r);t.translate(s.p.v[0]*o*r,s.p.v[1]*o*r,s.p.v[2]),e.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]),e.rotate(-s.r.v*o*r),e.translate(s.a.v[0],s.a.v[1],s.a.v[2]),i.translate(-s.a.v[0],-s.a.v[1],s.a.v[2]),i.scale(n?1/a:a,n?1/h:h),i.translate(s.a.v[0],s.a.v[1],s.a.v[2])},RepeaterModifier.prototype.init=function(t,e,i,s){for(this.elem=t,this.arr=e,this.pos=i,this.elemsData=s,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(t),this.initModifierProperties(t,e[i]);i>0;)i-=1,this._elements.unshift(e[i]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e]._processed=!1,"gr"===t[e].ty&&this.resetElements(t[e].it)},RepeaterModifier.prototype.cloneElements=function(t){var e=JSON.parse(JSON.stringify(t));return this.resetElements(e),e},RepeaterModifier.prototype.changeGroupRender=function(t,e){var i,s=t.length;for(i=0;i<s;i+=1)t[i]._render=e,"gr"===t[i].ty&&this.changeGroupRender(t[i].it,e)},RepeaterModifier.prototype.processShapes=function(t){var e,i,s,r,n,o=!1;if(this._mdf||t){var a,h=Math.ceil(this.c.v);if(this._groups.length<h){for(;this._groups.length<h;){var l={it:this.cloneElements(this._elements),ty:"gr"};l.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,l),this._groups.splice(0,0,l),this._currentCopies+=1}this.elem.reloadShapes(),o=!0}for(n=0,s=0;s<=this._groups.length-1;s+=1){if(a=n<h,this._groups[s]._render=a,this.changeGroupRender(this._groups[s].it,a),!a){var c=this.elemsData[s].it,u=c[c.length-1];0!==u.transform.op.v?(u.transform.op._mdf=!0,u.transform.op.v=0):u.transform.op._mdf=!1}n+=1}this._currentCopies=h;var p=this.o.v,d=p%1,f=p>0?Math.floor(p):Math.ceil(p),m=this.pMatrix.props,g=this.rMatrix.props,y=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var v,b,S=0;if(p>0){for(;S<f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),S+=1;d&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,d,!1),S+=d)}else if(p<0){for(;S>f;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),S-=1;d&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-d,!0),S-=d)}for(s=1===this.data.m?0:this._currentCopies-1,r=1===this.data.m?1:-1,n=this._currentCopies;n;){if(b=(i=(e=this.elemsData[s].it)[e.length-1].transform.mProps.v.props).length,e[e.length-1].transform.mProps._mdf=!0,e[e.length-1].transform.op._mdf=!0,e[e.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(s/(this._currentCopies-1)),0!==S){for((0!==s&&1===r||s!==this._currentCopies-1&&-1===r)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],g[9],g[10],g[11],g[12],g[13],g[14],g[15]),this.matrix.transform(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15]),this.matrix.transform(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],m[9],m[10],m[11],m[12],m[13],m[14],m[15]),v=0;v<b;v+=1)i[v]=this.matrix.props[v];this.matrix.reset()}else for(this.matrix.reset(),v=0;v<b;v+=1)i[v]=this.matrix.props[v];S+=1,n-=1,s+=r}}else for(n=this._currentCopies,s=0,r=1;n;)i=(e=this.elemsData[s].it)[e.length-1].transform.mProps.v.props,e[e.length-1].transform.mProps._mdf=!1,e[e.length-1].transform.op._mdf=!1,n-=1,s+=r;return o},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(t,e.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(t,e){var i,s=shapePool.newElement();s.c=t.c;var r,n,o,a,h,l,c,u,p,d,f,m,g=t._length,y=0;for(i=0;i<g;i+=1)r=t.v[i],o=t.o[i],n=t.i[i],r[0]===o[0]&&r[1]===o[1]&&r[0]===n[0]&&r[1]===n[1]?0!==i&&i!==g-1||t.c?(a=0===i?t.v[g-1]:t.v[i-1],l=(h=Math.sqrt(Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2)))?Math.min(h/2,e)/h:0,c=f=r[0]+(a[0]-r[0])*l,u=m=r[1]-(r[1]-a[1])*l,p=c-(c-r[0])*roundCorner,d=u-(u-r[1])*roundCorner,s.setTripleAt(c,u,p,d,f,m,y),y+=1,a=i===g-1?t.v[0]:t.v[i+1],l=(h=Math.sqrt(Math.pow(r[0]-a[0],2)+Math.pow(r[1]-a[1],2)))?Math.min(h/2,e)/h:0,c=p=r[0]+(a[0]-r[0])*l,u=d=r[1]+(a[1]-r[1])*l,f=c-(c-r[0])*roundCorner,m=u-(u-r[1])*roundCorner,s.setTripleAt(c,u,p,d,f,m,y),y+=1):(s.setTripleAt(r[0],r[1],o[0],o[1],n[0],n[1],y),y+=1):(s.setTripleAt(t.v[i][0],t.v[i][1],t.o[i][0],t.o[i][1],t.i[i][0],t.i[i][1],y),y+=1);return s},RoundCornersModifier.prototype.processShapes=function(t){var e,i,s,r,n,o,a=this.shapes.length,h=this.rd.v;if(0!==h)for(i=0;i<a;i+=1){if(o=(n=this.shapes[i]).localShapeCollection,n.shape._mdf||this._mdf||t)for(o.releaseShapes(),n.shape._mdf=!0,e=n.shape.paths.shapes,r=n.shape.paths._length,s=0;s<r;s+=1)o.addShape(this.processPath(e[s],h));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(t){return[((this.a[0]*t+this.b[0])*t+this.c[0])*t+this.d[0],((this.a[1]*t+this.b[1])*t+this.c[1])*t+this.d[1]]},PolynomialBezier.prototype.derivative=function(t){return[(3*t*this.a[0]+2*this.b[0])*t+this.c[0],(3*t*this.a[1]+2*this.b[1])*t+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(t){var e=this.derivative(t);return Math.atan2(e[1],e[0])},PolynomialBezier.prototype.normalAngle=function(t){var e=this.derivative(t);return Math.atan2(e[0],e[1])},PolynomialBezier.prototype.inflectionPoints=function(){var t=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(t))return[];var e=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/t,i=e*e-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/t;if(i<0)return[];var s=Math.sqrt(i);return floatZero(s)?s>0&&s<1?[e]:[]:[e-s,e+s].filter((function(t){return t>0&&t<1}))},PolynomialBezier.prototype.split=function(t){if(t<=0)return[singlePoint(this.points[0]),this];if(t>=1)return[this,singlePoint(this.points[this.points.length-1])];var e=lerpPoint(this.points[0],this.points[1],t),i=lerpPoint(this.points[1],this.points[2],t),s=lerpPoint(this.points[2],this.points[3],t),r=lerpPoint(e,i,t),n=lerpPoint(i,s,t),o=lerpPoint(r,n,t);return[new PolynomialBezier(this.points[0],e,r,o,!0),new PolynomialBezier(o,n,s,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var t=this.bounds();return{left:t.x.min,right:t.x.max,top:t.y.min,bottom:t.y.max,width:t.x.max-t.x.min,height:t.y.max-t.y.min,cx:(t.x.max+t.x.min)/2,cy:(t.y.max+t.y.min)/2}},PolynomialBezier.prototype.intersections=function(t,e,i){void 0===e&&(e=2),void 0===i&&(i=7);var s=[];return intersectsImpl(intersectData(this,0,1),intersectData(t,0,1),0,e,s,i),s},PolynomialBezier.shapeSegment=function(t,e){var i=(e+1)%t.length();return new PolynomialBezier(t.v[e],t.o[e],t.i[i],t.v[i],!0)},PolynomialBezier.shapeSegmentInverted=function(t,e){var i=(e+1)%t.length();return new PolynomialBezier(t.v[i],t.i[i],t.o[e],t.v[e],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(t,e.s,0,null,this),this.frequency=PropertyFactory.getProp(t,e.r,0,null,this),this.pointsType=PropertyFactory.getProp(t,e.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(t,e,i,s){var r=t._length,n=shapePool.newElement();if(n.c=t.c,t.c||(r-=1),0===r)return n;var o=-1,a=PolynomialBezier.shapeSegment(t,0);zigZagCorner(n,t,0,e,i,s,o);for(var h=0;h<r;h+=1)o=zigZagSegment(n,a,e,i,s,-o),a=h!==r-1||t.c?PolynomialBezier.shapeSegment(t,(h+1)%r):null,zigZagCorner(n,t,h+1,e,i,s,o);return n},ZigZagModifier.prototype.processShapes=function(t){var e,i,s,r,n,o,a=this.shapes.length,h=this.amplitude.v,l=Math.max(0,Math.round(this.frequency.v)),c=this.pointsType.v;if(0!==h)for(i=0;i<a;i+=1){if(o=(n=this.shapes[i]).localShapeCollection,n.shape._mdf||this._mdf||t)for(o.releaseShapes(),n.shape._mdf=!0,e=n.shape.paths.shapes,r=n.shape.paths._length,s=0;s<r;s+=1)o.addShape(this.processPath(e[s],h,l,c));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(t,e){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(t,e.a,0,null,this),this.miterLimit=PropertyFactory.getProp(t,e.ml,0,null,this),this.lineJoin=e.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(t,e,i,s){var r=shapePool.newElement();r.c=t.c;var n,o,a,h=t.length();t.c||(h-=1);var l=[];for(n=0;n<h;n+=1)a=PolynomialBezier.shapeSegment(t,n),l.push(offsetSegmentSplit(a,e));if(!t.c)for(n=h-1;n>=0;n-=1)a=PolynomialBezier.shapeSegmentInverted(t,n),l.push(offsetSegmentSplit(a,e));l=pruneIntersections(l);var c=null,u=null;for(n=0;n<l.length;n+=1){var p=l[n];for(u&&(c=joinLines(r,u,p[0],i,s)),u=p[p.length-1],o=0;o<p.length;o+=1)a=p[o],c&&pointEqual(a.points[0],c)?r.setXYAt(a.points[1][0],a.points[1][1],"o",r.length()-1):r.setTripleAt(a.points[0][0],a.points[0][1],a.points[1][0],a.points[1][1],a.points[0][0],a.points[0][1],r.length()),r.setTripleAt(a.points[3][0],a.points[3][1],a.points[3][0],a.points[3][1],a.points[2][0],a.points[2][1],r.length()),c=a.points[3]}return l.length&&joinLines(r,u,l[0][0],i,s),r},OffsetPathModifier.prototype.processShapes=function(t){var e,i,s,r,n,o,a=this.shapes.length,h=this.amount.v,l=this.miterLimit.v,c=this.lineJoin;if(0!==h)for(i=0;i<a;i+=1){if(o=(n=this.shapes[i]).localShapeCollection,n.shape._mdf||this._mdf||t)for(o.releaseShapes(),n.shape._mdf=!0,e=n.shape.paths.shapes,r=n.shape.paths._length,s=0;s<r;s+=1)o.addShape(this.processPath(e[s],h,c,l));n.shape.paths=n.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var t={w:0,size:0,shapes:[],data:{shapes:[]}},e=[];e=e.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var i=127988,s=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function r(t,e){var i=createTag("span");i.setAttribute("aria-hidden",!0),i.style.fontFamily=e;var s=createTag("span");s.innerText="giItT1WQy@!-/#",i.style.position="absolute",i.style.left="-10000px",i.style.top="-10000px",i.style.fontSize="300px",i.style.fontVariant="normal",i.style.fontStyle="normal",i.style.fontWeight="normal",i.style.letterSpacing="0",i.appendChild(s),document.body.appendChild(i);var r=s.offsetWidth;return s.style.fontFamily=function(t){var e,i=t.split(","),s=i.length,r=[];for(e=0;e<s;e+=1)"sans-serif"!==i[e]&&"monospace"!==i[e]&&r.push(i[e]);return r.join(",")}(t)+", "+e,{node:s,w:r,parent:i}}function n(t,e){var i,s=document.body&&e?"svg":"canvas",r=getFontProperties(t);if("svg"===s){var n=createNS("text");n.style.fontSize="100px",n.setAttribute("font-family",t.fFamily),n.setAttribute("font-style",r.style),n.setAttribute("font-weight",r.weight),n.textContent="1",t.fClass?(n.style.fontFamily="inherit",n.setAttribute("class",t.fClass)):n.style.fontFamily=t.fFamily,e.appendChild(n),i=n}else{var o=new OffscreenCanvas(500,500).getContext("2d");o.font=r.style+" "+r.weight+" 100px "+t.fFamily,i=o}return{measureText:function(t){return"svg"===s?(i.textContent=t,i.getComputedTextLength()):i.measureText(t).width}}}function o(t){var e=0,i=t.charCodeAt(0);if(i>=55296&&i<=56319){var s=t.charCodeAt(1);s>=56320&&s<=57343&&(e=1024*(i-55296)+s-56320+65536)}return e}function a(t){var e=o(t);return e>=127462&&e<=127487}var h=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};h.isModifier=function(t,e){var i=t.toString(16)+e.toString(16);return-1!==s.indexOf(i)},h.isZeroWidthJoiner=function(t){return 8205===t},h.isFlagEmoji=function(t){return a(t.substr(0,2))&&a(t.substr(2,2))},h.isRegionalCode=a,h.isCombinedCharacter=function(t){return-1!==e.indexOf(t)},h.isRegionalFlag=function(t,e){var s=o(t.substr(e,2));if(s!==i)return!1;var r=0;for(e+=2;r<5;){if((s=o(t.substr(e,2)))<917601||s>917626)return!1;r+=1,e+=2}return 917631===o(t.substr(e,2))},h.isVariationSelector=function(t){return 65039===t},h.BLACK_FLAG_CODE_POINT=i;var l={addChars:function(t){if(t){var e;this.chars||(this.chars=[]);var i,s,r=t.length,n=this.chars.length;for(e=0;e<r;e+=1){for(i=0,s=!1;i<n;)this.chars[i].style===t[e].style&&this.chars[i].fFamily===t[e].fFamily&&this.chars[i].ch===t[e].ch&&(s=!0),i+=1;s||(this.chars.push(t[e]),n+=1)}}},addFonts:function(t,e){if(t){if(this.chars)return this.isLoaded=!0,void(this.fonts=t.list);if(!document.body)return this.isLoaded=!0,t.list.forEach((function(t){t.helper=n(t),t.cache={}})),void(this.fonts=t.list);var i,s=t.list,o=s.length,a=o;for(i=0;i<o;i+=1){var h,l,c=!0;if(s[i].loaded=!1,s[i].monoCase=r(s[i].fFamily,"monospace"),s[i].sansCase=r(s[i].fFamily,"sans-serif"),s[i].fPath){if("p"===s[i].fOrigin||3===s[i].origin){if((h=document.querySelectorAll('style[f-forigin="p"][f-family="'+s[i].fFamily+'"], style[f-origin="3"][f-family="'+s[i].fFamily+'"]')).length>0&&(c=!1),c){var u=createTag("style");u.setAttribute("f-forigin",s[i].fOrigin),u.setAttribute("f-origin",s[i].origin),u.setAttribute("f-family",s[i].fFamily),u.type="text/css",u.innerText="@font-face {font-family: "+s[i].fFamily+"; font-style: normal; src: url('"+s[i].fPath+"');}",e.appendChild(u)}}else if("g"===s[i].fOrigin||1===s[i].origin){for(h=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),l=0;l<h.length;l+=1)-1!==h[l].href.indexOf(s[i].fPath)&&(c=!1);if(c){var p=createTag("link");p.setAttribute("f-forigin",s[i].fOrigin),p.setAttribute("f-origin",s[i].origin),p.type="text/css",p.rel="stylesheet",p.href=s[i].fPath,document.body.appendChild(p)}}else if("t"===s[i].fOrigin||2===s[i].origin){for(h=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),l=0;l<h.length;l+=1)s[i].fPath===h[l].src&&(c=!1);if(c){var d=createTag("link");d.setAttribute("f-forigin",s[i].fOrigin),d.setAttribute("f-origin",s[i].origin),d.setAttribute("rel","stylesheet"),d.setAttribute("href",s[i].fPath),e.appendChild(d)}}}else s[i].loaded=!0,a-=1;s[i].helper=n(s[i],e),s[i].cache={},this.fonts.push(s[i])}0===a?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},getCharData:function(e,i,s){for(var r=0,n=this.chars.length;r<n;){if(this.chars[r].ch===e&&this.chars[r].style===i&&this.chars[r].fFamily===s)return this.chars[r];r+=1}return("string"==typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",e,i,s)),t},getFontByName:function(t){for(var e=0,i=this.fonts.length;e<i;){if(this.fonts[e].fName===t)return this.fonts[e];e+=1}return this.fonts[0]},measureText:function(t,e,i){var s=this.getFontByName(e),r=t;if(!s.cache[r]){var n=s.helper;if(" "===t){var o=n.measureText("|"+t+"|"),a=n.measureText("||");s.cache[r]=(o-a)/100}else s.cache[r]=n.measureText(t)/100}return s.cache[r]*i},checkLoadedFonts:function(){var t,e,i,s=this.fonts.length,r=s;for(t=0;t<s;t+=1)this.fonts[t].loaded?r-=1:"n"===this.fonts[t].fOrigin||0===this.fonts[t].origin?this.fonts[t].loaded=!0:(e=this.fonts[t].monoCase.node,i=this.fonts[t].monoCase.w,e.offsetWidth!==i?(r-=1,this.fonts[t].loaded=!0):(e=this.fonts[t].sansCase.node,i=this.fonts[t].sansCase.w,e.offsetWidth!==i&&(r-=1,this.fonts[t].loaded=!0)),this.fonts[t].loaded&&(this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));0!==r&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)},setIsLoaded:function(){this.isLoaded=!0}};return h.prototype=l,h}();function SlotManager(t){this.animationData=t}function slotFactory(t){return new SlotManager(t)}function RenderableElement(){}SlotManager.prototype.getProp=function(t){return this.animationData.slots&&this.animationData.slots[t.sid]?Object.assign(t,this.animationData.slots[t.sid].p):t},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(t){-1===this.renderableComponents.indexOf(t)&&this.renderableComponents.push(t)},removeRenderableComponent:function(t){-1!==this.renderableComponents.indexOf(t)&&this.renderableComponents.splice(this.renderableComponents.indexOf(t),1)},prepareRenderableFrame:function(t){this.checkLayerLimits(t)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(t){this.data.ip-this.data.st<=t&&this.data.op-this.data.st>t?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var t,e=this.renderableComponents.length;for(t=0;t<e;t+=1)this.renderableComponents[t].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(t){return blendModeEnums[t]||""}),blendModeEnums;function SliderEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function AngleEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function ColorEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function PointEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,1,0,i)}function LayerIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function MaskIndexEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function CheckboxEffect(t,e,i){this.p=PropertyFactory.getProp(e,t.v,0,0,i)}function NoValueEffect(){this.p={}}function EffectsManager(t,e){var i,s=t.ef||[];this.effectElements=[];var r,n=s.length;for(i=0;i<n;i+=1)r=new GroupEffect(s[i],e),this.effectElements.push(r)}function GroupEffect(t,e){this.init(t,e)}function BaseElement(){}function FrameElement(){}function FootageElement(t,e,i){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.footageData=e.imageLoader.getAsset(this.assetData),this.initBaseData(t,e,i)}function AudioElement(t,e,i){this.initFrame(),this.initRenderable(),this.assetData=e.getAssetData(t.refId),this.initBaseData(t,e,i),this._isPlaying=!1,this._canPlay=!1;var s=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(s),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,t.au&&t.au.lv?t.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(t,e){var i;this.data=t,this.effectElements=[],this.initDynamicPropertyContainer(e);var s,r=this.data.ef.length,n=this.data.ef;for(i=0;i<r;i+=1){switch(s=null,n[i].ty){case 0:s=new SliderEffect(n[i],e,this);break;case 1:s=new AngleEffect(n[i],e,this);break;case 2:s=new ColorEffect(n[i],e,this);break;case 3:s=new PointEffect(n[i],e,this);break;case 4:case 7:s=new CheckboxEffect(n[i],e,this);break;case 10:s=new LayerIndexEffect(n[i],e,this);break;case 11:s=new MaskIndexEffect(n[i],e,this);break;case 5:s=new EffectsManager(n[i],e,this);break;default:s=new NoValueEffect(n[i],e,this)}s&&this.effectElements.push(s)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var t=0,e=this.data.masksProperties.length;t<e;){if("n"!==this.data.masksProperties[t].mode&&!1!==this.data.masksProperties[t].cl)return!0;t+=1}return!1},initExpressions:function(){var t=getExpressionInterfaces();if(t){var e=t("layer"),i=t("effects"),s=t("shape"),r=t("text"),n=t("comp");this.layerInterface=e(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var o=i.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(o),0===this.data.ty||this.data.xt?this.compInterface=n(this):4===this.data.ty?(this.layerInterface.shapeInterface=s(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=r(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var t=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=t},initBaseData:function(t,e,i){this.globalData=e,this.comp=i,this.data=t,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(t,e){var i,s=this.dynamicProperties.length;for(i=0;i<s;i+=1)(e||this._isParent&&"transform"===this.dynamicProperties[i].propType)&&(this.dynamicProperties[i].getValue(),this.dynamicProperties[i]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(t){-1===this.dynamicProperties.indexOf(t)&&this.dynamicProperties.push(t)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var t=getExpressionInterfaces();if(t){var e=t("footage");this.layerInterface=e(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(t){if(this.prepareRenderableFrame(t,!0),this.prepareProperties(t,!0),this.tm._placeholder)this._currentTime=t/this.data.sr;else{var e=this.tm.v;this._currentTime=e}this._volume=this.lv.v[0];var i=this._volume*this._volumeMultiplier;this._previousVolume!==i&&(this._previousVolume=i,this.audio.volume(i))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(t){this.audio.rate(t)},AudioElement.prototype.volume=function(t){this._volumeMultiplier=t,this._previousVolume=t*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(t){var e,i,s=this.layers.length;for(this.completeLayers=!0,e=s-1;e>=0;e-=1)this.elements[e]||(i=this.layers[e]).ip-i.st<=t-this.layers[e].st&&i.op-i.st>t-this.layers[e].st&&this.buildItem(e),this.completeLayers=!!this.elements[e]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(t){switch(t.ty){case 2:return this.createImage(t);case 0:return this.createComp(t);case 1:return this.createSolid(t);case 3:default:return this.createNull(t);case 4:return this.createShape(t);case 5:return this.createText(t);case 6:return this.createAudio(t);case 13:return this.createCamera(t);case 15:return this.createFootage(t)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(t){return new AudioElement(t,this.globalData,this)},BaseRenderer.prototype.createFootage=function(t){return new FootageElement(t,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.buildItem(t);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(t){var e;this.completeLayers=!1;var i,s=t.length,r=this.layers.length;for(e=0;e<s;e+=1)for(i=0;i<r;){if(this.layers[i].id===t[e].id){this.layers[i]=t[e];break}i+=1}},BaseRenderer.prototype.setProjectInterface=function(t){this.globalData.projectInterface=t},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(t,e,i){for(var s=this.elements,r=this.layers,n=0,o=r.length;n<o;)r[n].ind==e&&(s[n]&&!0!==s[n]?(i.push(s[n]),s[n].setAsParent(),void 0!==r[n].parent?this.buildElementParenting(t,r[n].parent,i):t.setHierarchy(i)):(this.buildItem(n),this.addPendingElement(t))),n+=1},BaseRenderer.prototype.addPendingElement=function(t){this.pendingElements.push(t)},BaseRenderer.prototype.searchExtraCompositions=function(t){var e,i=t.length;for(e=0;e<i;e+=1)if(t[e].xt){var s=this.createComp(t[e]);s.initExpressions(),this.globalData.projectInterface.registerComposition(s)}},BaseRenderer.prototype.getElementById=function(t){var e,i=this.elements.length;for(e=0;e<i;e+=1)if(this.elements[e].data.ind===t)return this.elements[e];return null},BaseRenderer.prototype.getElementByPath=function(t){var e,i=t.shift();if("number"==typeof i)e=this.elements[i];else{var s,r=this.elements.length;for(s=0;s<r;s+=1)if(this.elements[s].data.nm===i){e=this.elements[s];break}}return 0===t.length?e:e.getElementByPath(t)},BaseRenderer.prototype.setupGlobalData=function(t,e){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(t),this.globalData.fontManager.addChars(t.chars),this.globalData.fontManager.addFonts(t.fonts,e),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=t.fr,this.globalData.nm=t.nm,this.globalData.compSize={w:t.w,h:t.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(t,e,i){this.data=t,this.element=e,this.globalData=i,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var s,r,n=this.globalData.defs,o=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(o),this.solidPath="";var a,h,l,c,u,p,d=this.masksProperties,f=0,m=[],g=createElementID(),y="clipPath",v="clip-path";for(s=0;s<o;s+=1)if(("a"!==d[s].mode&&"n"!==d[s].mode||d[s].inv||100!==d[s].o.k||d[s].o.x)&&(y="mask",v="mask"),"s"!==d[s].mode&&"i"!==d[s].mode||0!==f?l=null:((l=createNS("rect")).setAttribute("fill","#ffffff"),l.setAttribute("width",this.element.comp.data.w||0),l.setAttribute("height",this.element.comp.data.h||0),m.push(l)),r=createNS("path"),"n"===d[s].mode)this.viewData[s]={op:PropertyFactory.getProp(this.element,d[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,d[s],3),elem:r,lastPath:""},n.appendChild(r);else{var b;if(f+=1,r.setAttribute("fill","s"===d[s].mode?"#000000":"#ffffff"),r.setAttribute("clip-rule","nonzero"),0!==d[s].x.k?(y="mask",v="mask",p=PropertyFactory.getProp(this.element,d[s].x,0,null,this.element),b=createElementID(),(c=createNS("filter")).setAttribute("id",b),(u=createNS("feMorphology")).setAttribute("operator","erode"),u.setAttribute("in","SourceGraphic"),u.setAttribute("radius","0"),c.appendChild(u),n.appendChild(c),r.setAttribute("stroke","s"===d[s].mode?"#000000":"#ffffff")):(u=null,p=null),this.storedData[s]={elem:r,x:p,expan:u,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},"i"===d[s].mode){h=m.length;var S=createNS("g");for(a=0;a<h;a+=1)S.appendChild(m[a]);var x=createNS("mask");x.setAttribute("mask-type","alpha"),x.setAttribute("id",g+"_"+f),x.appendChild(r),n.appendChild(x),S.setAttribute("mask","url("+getLocationHref()+"#"+g+"_"+f+")"),m.length=0,m.push(S)}else m.push(r);d[s].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[s]={elem:r,lastPath:"",op:PropertyFactory.getProp(this.element,d[s].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,d[s],3),invRect:l},this.viewData[s].prop.k||this.drawPath(d[s],this.viewData[s].prop.v,this.viewData[s])}for(this.maskElement=createNS(y),o=m.length,s=0;s<o;s+=1)this.maskElement.appendChild(m[s]);f>0&&(this.maskElement.setAttribute("id",g),this.element.maskedElement.setAttribute(v,"url("+getLocationHref()+"#"+g+")"),n.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var t=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:t,localMat:t,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var t,e=this.finalTransform.mat,i=0,s=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;i<s;){if(this.hierarchy[i].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}i+=1}if(this.finalTransform._matMdf)for(t=this.finalTransform.mProp.v.props,e.cloneFromProps(t),i=0;i<s;i+=1)e.multiply(this.hierarchy[i].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var t=0,e=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;t<e;)this.localTransforms[t]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[t]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),t+=1;if(this.finalTransform._localMatMdf){var i=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(i),t=1;t<e;t+=1){var s=this.localTransforms[t].matrix;i.multiply(s)}i.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var r=this.finalTransform.localOpacity;for(t=0;t<e;t+=1)r*=.01*this.localTransforms[t].opacity;this.finalTransform.localOpacity=r}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var t=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(t.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var e=0,i=t.length;for(e=0;e<i;e+=1)this.localTransforms.push(t[e])}}},globalToLocal:function(t){var e=[];e.push(this.finalTransform);for(var i,s=!0,r=this.comp;s;)r.finalTransform?(r.data.hasMask&&e.splice(0,0,r.finalTransform),r=r.comp):s=!1;var n,o=e.length;for(i=0;i<o;i+=1)n=e[i].mat.applyToPointArray(0,0,0),t=[t[0]-n[0],t[1]-n[1],0];return t},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(t){return this.viewData[t].prop},MaskElement.prototype.renderFrame=function(t){var e,i=this.element.finalTransform.mat,s=this.masksProperties.length;for(e=0;e<s;e+=1)if((this.viewData[e].prop._mdf||t)&&this.drawPath(this.masksProperties[e],this.viewData[e].prop.v,this.viewData[e]),(this.viewData[e].op._mdf||t)&&this.viewData[e].elem.setAttribute("fill-opacity",this.viewData[e].op.v),"n"!==this.masksProperties[e].mode&&(this.viewData[e].invRect&&(this.element.finalTransform.mProp._mdf||t)&&this.viewData[e].invRect.setAttribute("transform",i.getInverseMatrix().to2dCSS()),this.storedData[e].x&&(this.storedData[e].x._mdf||t))){var r=this.storedData[e].expan;this.storedData[e].x.v<0?("erode"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="erode",this.storedData[e].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[e].filterId+")")),r.setAttribute("radius",-this.storedData[e].x.v)):("dilate"!==this.storedData[e].lastOperator&&(this.storedData[e].lastOperator="dilate",this.storedData[e].elem.setAttribute("filter",null)),this.storedData[e].elem.setAttribute("stroke-width",2*this.storedData[e].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var t="M0,0 ";return t+=" h"+this.globalData.compSize.w,t+=" v"+this.globalData.compSize.h,(t+=" h-"+this.globalData.compSize.w)+" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(t,e,i){var s,r,n=" M"+e.v[0][0]+","+e.v[0][1];for(r=e._length,s=1;s<r;s+=1)n+=" C"+e.o[s-1][0]+","+e.o[s-1][1]+" "+e.i[s][0]+","+e.i[s][1]+" "+e.v[s][0]+","+e.v[s][1];if(e.c&&r>1&&(n+=" C"+e.o[s-1][0]+","+e.o[s-1][1]+" "+e.i[0][0]+","+e.i[0][1]+" "+e.v[0][0]+","+e.v[0][1]),i.lastPath!==n){var o="";i.elem&&(e.c&&(o=t.inv?this.solidPath+n:n),i.elem.setAttribute("d",o)),i.lastPath=n}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory={createFilter:function(t,e){var i=createNS("filter");return i.setAttribute("id",t),!0!==e&&(i.setAttribute("filterUnits","objectBoundingBox"),i.setAttribute("x","0%"),i.setAttribute("y","0%"),i.setAttribute("width","100%"),i.setAttribute("height","100%")),i},createAlphaToLuminanceFilter:function(){var t=createNS("feColorMatrix");return t.setAttribute("type","matrix"),t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),t}},featureSupport=function(){var t={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!=typeof OffscreenCanvas};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(t.maskType=!1),/firefox/i.test(navigator.userAgent)&&(t.svgLumaHidden=!1),t}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(t){var e,i,s="SourceGraphic",r=t.data.ef?t.data.ef.length:0,n=createElementID(),o=filtersFactory.createFilter(n,!0),a=0;for(this.filters=[],e=0;e<r;e+=1){i=null;var h=t.data.ef[e].ty;registeredEffects$1[h]&&(i=new(0,registeredEffects$1[h].effect)(o,t.effectsManager.effectElements[e],t,idPrefix+a,s),s=idPrefix+a,registeredEffects$1[h].countsAsEffect&&(a+=1)),i&&this.filters.push(i)}a&&(t.globalData.defs.appendChild(o),t.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+n+")")),this.filters.length&&t.addRenderableComponent(this)}function registerEffect$1(t,e,i){registeredEffects$1[t]={effect:e,countsAsEffect:i}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.assetData&&this.assetData.sid&&(this.assetData=e.slotManager.getProp(this.assetData)),this.initElement(t,e,i),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(t,e){this.elem=t,this.pos=e}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(t){var e,i=this.filters.length;for(e=0;e<i;e+=1)this.filters[e].renderFrame(t)},SVGEffects.prototype.getEffects=function(t){var e,i=this.filters.length,s=[];for(e=0;e<i;e+=1)this.filters[e].type===t&&s.push(this.filters[e]);return s},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var t=null;if(this.data.td){this.matteMasks={};var e=createNS("g");e.setAttribute("id",this.layerId),e.appendChild(this.layerElement),t=e,this.globalData.defs.appendChild(e)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),t=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var i=createNS("clipPath"),s=createNS("path");s.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var r=createElementID();if(i.setAttribute("id",r),i.appendChild(s),this.globalData.defs.appendChild(i),this.checkMasks()){var n=createNS("g");n.setAttribute("clip-path","url("+getLocationHref()+"#"+r+")"),n.appendChild(this.layerElement),this.transformedElement=n,t?t.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+r+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(t){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[t]){var e,i,s,r,n=this.layerId+"_"+t;if(1===t||3===t){var o=createNS("mask");o.setAttribute("id",n),o.setAttribute("mask-type",3===t?"luminance":"alpha"),(s=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),o.appendChild(s),this.globalData.defs.appendChild(o),featureSupport.maskType||1!==t||(o.setAttribute("mask-type","luminance"),e=createElementID(),i=filtersFactory.createFilter(e),this.globalData.defs.appendChild(i),i.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(r=createNS("g")).appendChild(s),o.appendChild(r),r.setAttribute("filter","url("+getLocationHref()+"#"+e+")"))}else if(2===t){var a=createNS("mask");a.setAttribute("id",n),a.setAttribute("mask-type","alpha");var h=createNS("g");a.appendChild(h),e=createElementID(),i=filtersFactory.createFilter(e);var l=createNS("feComponentTransfer");l.setAttribute("in","SourceGraphic"),i.appendChild(l);var c=createNS("feFuncA");c.setAttribute("type","table"),c.setAttribute("tableValues","1.0 0.0"),l.appendChild(c),this.globalData.defs.appendChild(i);var u=createNS("rect");u.setAttribute("width",this.comp.data.w),u.setAttribute("height",this.comp.data.h),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("fill","#ffffff"),u.setAttribute("opacity","0"),h.setAttribute("filter","url("+getLocationHref()+"#"+e+")"),h.appendChild(u),(s=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),h.appendChild(s),featureSupport.maskType||(a.setAttribute("mask-type","luminance"),i.appendChild(filtersFactory.createAlphaToLuminanceFilter()),r=createNS("g"),h.appendChild(u),r.appendChild(this.layerElement),h.appendChild(r)),this.globalData.defs.appendChild(a)}this.matteMasks[t]=n}return this.matteMasks[t]},setMatte:function(t){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+t+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(t){this.hierarchy=t},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initTransform(t,e,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(t){var e,i=this.shapeModifiers.length;for(e=0;e<i;e+=1)this.shapeModifiers[e].addShape(t)},isShapeInAnimatedModifiers:function(t){for(var e=this.shapeModifiers.length;0<e;)if(this.shapeModifiers[0].isAnimatedWithShape(t))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var t,e=this.shapes.length;for(t=0;t<e;t+=1)this.shapes[t].sh.reset();for(t=(e=this.shapeModifiers.length)-1;t>=0&&!this.shapeModifiers[t].processShapes(this._isFirstFrame);t-=1);}},searchProcessedElement:function(t){for(var e=this.processedElements,i=0,s=e.length;i<s;){if(e[i].elem===t)return e[i].pos;i+=1}return 0},addProcessedElement:function(t,e){for(var i=this.processedElements,s=i.length;s;)if(i[s-=1].elem===t)return void(i[s].pos=e);i.push(new ProcessedElement(t,e))},prepareFrame:function(t){this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(t,e,i){this.caches=[],this.styles=[],this.transformers=t,this.lStr="",this.sh=i,this.lvl=e,this._isAnimated=!!i.k;for(var s=0,r=t.length;s<r;){if(t[s].mProps.dynamicProperties.length){this._isAnimated=!0;break}s+=1}}function SVGStyleData(t,e){this.data=t,this.type=t.ty,this.d="",this.lvl=e,this._mdf=!1,this.closed=!0===t.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(t,e,i,s){var r;this.elem=t,this.frameId=-1,this.dataProps=createSizedArray(e.length),this.renderer=i,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",e.length?e.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(s);var n,o=e.length||0;for(r=0;r<o;r+=1)n=PropertyFactory.getProp(t,e[r].v,0,0,this),this.k=n.k||this.k,this.dataProps[r]={n:e[r].n,p:n};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=i,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.c=PropertyFactory.getProp(t,e.c,1,255,this),this.style=i}function SVGNoStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.style=i}function GradientProperty(t,e,i){this.data=e,this.c=createTypedArray("uint8c",4*e.p);var s=e.k.k[0].s?e.k.k[0].s.length-4*e.p:e.k.k.length-4*e.p;this.o=createTypedArray("float32",s),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=s,this.initDynamicPropertyContainer(i),this.prop=PropertyFactory.getProp(t,e.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.initGradientData(t,e,i)}function SVGGradientStrokeStyleData(t,e,i){this.initDynamicPropertyContainer(t),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(t,e.w,0,null,this),this.d=new DashProperty(t,e.d||{},"svg",this),this.initGradientData(t,e,i),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(t,e,i){this.transform={mProps:t,op:e,container:i},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(t){if((this.elem.globalData.frameId!==this.frameId||t)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||t,this._mdf)){var e=0,i=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),e=0;e<i;e+=1)"o"!==this.dataProps[e].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[e].p.v:this.dashArray[e]=this.dataProps[e].p.v:this.dashoffset[0]=this.dataProps[e].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(t,e){for(var i=0,s=this.o.length/2;i<s;){if(Math.abs(t[4*i]-t[4*e+2*i])>.01)return!1;i+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var t=0,e=this.data.k.k.length;t<e;){if(!this.comparePoints(this.data.k.k[t].s,this.data.p))return!1;t+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(t){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||t){var e,i,s,r=4*this.data.p;for(e=0;e<r;e+=1)i=e%4==0?100:255,s=Math.round(this.prop.v[e]*i),this.c[e]!==s&&(this.c[e]=s,this._cmdf=!t);if(this.o.length)for(r=this.prop.v.length,e=4*this.data.p;e<r;e+=1)i=e%2==0?100:1,s=e%2==0?Math.round(100*this.prop.v[e]):this.prop.v[e],this.o[e-4*this.data.p]!==s&&(this.o[e-4*this.data.p]=s,this._omdf=!t);this._mdf=!t}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(t,e,i){this.o=PropertyFactory.getProp(t,e.o,0,.01,this),this.s=PropertyFactory.getProp(t,e.s,1,null,this),this.e=PropertyFactory.getProp(t,e.e,1,null,this),this.h=PropertyFactory.getProp(t,e.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(t,e.a||{k:0},0,degToRads,this),this.g=new GradientProperty(t,e.g,this),this.style=i,this.stops=[],this.setGradientData(i.pElem,e),this.setGradientOpacity(e,i),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(t,e){var i=createElementID(),s=createNS(1===e.t?"linearGradient":"radialGradient");s.setAttribute("id",i),s.setAttribute("spreadMethod","pad"),s.setAttribute("gradientUnits","userSpaceOnUse");var r,n,o,a=[];for(o=4*e.g.p,n=0;n<o;n+=4)r=createNS("stop"),s.appendChild(r),a.push(r);t.setAttribute("gf"===e.ty?"fill":"stroke","url("+getLocationHref()+"#"+i+")"),this.gf=s,this.cst=a},SVGGradientFillStyleData.prototype.setGradientOpacity=function(t,e){if(this.g._hasOpacity&&!this.g._collapsable){var i,s,r,n=createNS("mask"),o=createNS("path");n.appendChild(o);var a=createElementID(),h=createElementID();n.setAttribute("id",h);var l=createNS(1===t.t?"linearGradient":"radialGradient");l.setAttribute("id",a),l.setAttribute("spreadMethod","pad"),l.setAttribute("gradientUnits","userSpaceOnUse"),r=t.g.k.k[0].s?t.g.k.k[0].s.length:t.g.k.k.length;var c=this.stops;for(s=4*t.g.p;s<r;s+=2)(i=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),l.appendChild(i),c.push(i);o.setAttribute("gf"===t.ty?"fill":"stroke","url("+getLocationHref()+"#"+a+")"),"gs"===t.ty&&(o.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),o.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),1===t.lj&&o.setAttribute("stroke-miterlimit",t.ml)),this.of=l,this.ms=n,this.ost=c,this.maskId=h,e.msElem=o}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(t,e,i,s){if(0===e)return"";var r,n=t.o,o=t.i,a=t.v,h=" M"+s.applyToPointStringified(a[0][0],a[0][1]);for(r=1;r<e;r+=1)h+=" C"+s.applyToPointStringified(n[r-1][0],n[r-1][1])+" "+s.applyToPointStringified(o[r][0],o[r][1])+" "+s.applyToPointStringified(a[r][0],a[r][1]);return i&&e&&(h+=" C"+s.applyToPointStringified(n[r-1][0],n[r-1][1])+" "+s.applyToPointStringified(o[0][0],o[0][1])+" "+s.applyToPointStringified(a[0][0],a[0][1]),h+="z"),h},SVGElementsRenderer=function(){var t=new Matrix,e=new Matrix;function i(t,e,i){(i||e.transform.op._mdf)&&e.transform.container.setAttribute("opacity",e.transform.op.v),(i||e.transform.mProps._mdf)&&e.transform.container.setAttribute("transform",e.transform.mProps.v.to2dCSS())}function s(){}function r(i,s,r){var n,o,a,h,l,c,u,p,d,f,m=s.styles.length,g=s.lvl;for(c=0;c<m;c+=1){if(h=s.sh._mdf||r,s.styles[c].lvl<g){for(p=e.reset(),d=g-s.styles[c].lvl,f=s.transformers.length-1;!h&&d>0;)h=s.transformers[f].mProps._mdf||h,d-=1,f-=1;if(h)for(d=g-s.styles[c].lvl,f=s.transformers.length-1;d>0;)p.multiply(s.transformers[f].mProps.v),d-=1,f-=1}else p=t;if(o=(u=s.sh.paths)._length,h){for(a="",n=0;n<o;n+=1)(l=u.shapes[n])&&l._length&&(a+=buildShapeString(l,l._length,l.c,p));s.caches[c]=a}else a=s.caches[c];s.styles[c].d+=!0===i.hd?"":a,s.styles[c]._mdf=h||s.styles[c]._mdf}}function n(t,e,i){var s=e.style;(e.c._mdf||i)&&s.pElem.setAttribute("fill","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i)&&s.pElem.setAttribute("fill-opacity",e.o.v)}function o(t,e,i){a(t,e,i),h(0,e,i)}function a(t,e,i){var s,r,n,o,a,h=e.gf,l=e.g._hasOpacity,c=e.s.v,u=e.e.v;if(e.o._mdf||i){var p="gf"===t.ty?"fill-opacity":"stroke-opacity";e.style.pElem.setAttribute(p,e.o.v)}if(e.s._mdf||i){var d=1===t.t?"x1":"cx",f="x1"===d?"y1":"cy";h.setAttribute(d,c[0]),h.setAttribute(f,c[1]),l&&!e.g._collapsable&&(e.of.setAttribute(d,c[0]),e.of.setAttribute(f,c[1]))}if(e.g._cmdf||i){s=e.cst;var m=e.g.c;for(n=s.length,r=0;r<n;r+=1)(o=s[r]).setAttribute("offset",m[4*r]+"%"),o.setAttribute("stop-color","rgb("+m[4*r+1]+","+m[4*r+2]+","+m[4*r+3]+")")}if(l&&(e.g._omdf||i)){var g=e.g.o;for(n=(s=e.g._collapsable?e.cst:e.ost).length,r=0;r<n;r+=1)o=s[r],e.g._collapsable||o.setAttribute("offset",g[2*r]+"%"),o.setAttribute("stop-opacity",g[2*r+1])}if(1===t.t)(e.e._mdf||i)&&(h.setAttribute("x2",u[0]),h.setAttribute("y2",u[1]),l&&!e.g._collapsable&&(e.of.setAttribute("x2",u[0]),e.of.setAttribute("y2",u[1])));else if((e.s._mdf||e.e._mdf||i)&&(a=Math.sqrt(Math.pow(c[0]-u[0],2)+Math.pow(c[1]-u[1],2)),h.setAttribute("r",a),l&&!e.g._collapsable&&e.of.setAttribute("r",a)),e.e._mdf||e.h._mdf||e.a._mdf||i){a||(a=Math.sqrt(Math.pow(c[0]-u[0],2)+Math.pow(c[1]-u[1],2)));var y=Math.atan2(u[1]-c[1],u[0]-c[0]),v=e.h.v;v>=1?v=.99:v<=-1&&(v=-.99);var b=a*v,S=Math.cos(y+e.a.v)*b+c[0],x=Math.sin(y+e.a.v)*b+c[1];h.setAttribute("fx",S),h.setAttribute("fy",x),l&&!e.g._collapsable&&(e.of.setAttribute("fx",S),e.of.setAttribute("fy",x))}}function h(t,e,i){var s=e.style,r=e.d;r&&(r._mdf||i)&&r.dashStr&&(s.pElem.setAttribute("stroke-dasharray",r.dashStr),s.pElem.setAttribute("stroke-dashoffset",r.dashoffset[0])),e.c&&(e.c._mdf||i)&&s.pElem.setAttribute("stroke","rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i)&&s.pElem.setAttribute("stroke-opacity",e.o.v),(e.w._mdf||i)&&(s.pElem.setAttribute("stroke-width",e.w.v),s.msElem&&s.msElem.setAttribute("stroke-width",e.w.v))}return{createRenderFunction:function(t){switch(t.ty){case"fl":return n;case"gf":return a;case"gs":return o;case"st":return h;case"sh":case"el":case"rc":case"sr":return r;case"tr":return i;case"no":return s;default:return null}}}}();function SVGShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(t,e,i),this.prevViewData=[]}function LetterProps(t,e,i,s,r,n){this.o=t,this.sw=e,this.sc=i,this.fc=s,this.m=r,this.p=n,this._mdf={o:!0,sw:!!e,sc:!!i,fc:!!s,m:!0,p:!0}}function TextProperty(t,e){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,e.d&&e.d.sid&&(e.d=t.globalData.slotManager.getProp(e.d)),this.data=e,this.elem=t,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var t,e,i,s,r=this.shapes.length,n=this.stylesList.length,o=[],a=!1;for(i=0;i<n;i+=1){for(s=this.stylesList[i],a=!1,o.length=0,t=0;t<r;t+=1)-1!==(e=this.shapes[t]).styles.indexOf(s)&&(o.push(e),a=e._isAnimated||a);o.length>1&&a&&this.setShapesAsAnimated(o)}},SVGShapeElement.prototype.setShapesAsAnimated=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(t,e){var i,s=new SVGStyleData(t,e),r=s.pElem;return"st"===t.ty?i=new SVGStrokeStyleData(this,t,s):"fl"===t.ty?i=new SVGFillStyleData(this,t,s):"gf"===t.ty||"gs"===t.ty?(i=new("gf"===t.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,t,s),this.globalData.defs.appendChild(i.gf),i.maskId&&(this.globalData.defs.appendChild(i.ms),this.globalData.defs.appendChild(i.of),r.setAttribute("mask","url("+getLocationHref()+"#"+i.maskId+")"))):"no"===t.ty&&(i=new SVGNoStyleData(this,t,s)),"st"!==t.ty&&"gs"!==t.ty||(r.setAttribute("stroke-linecap",lineCapEnum[t.lc||2]),r.setAttribute("stroke-linejoin",lineJoinEnum[t.lj||2]),r.setAttribute("fill-opacity","0"),1===t.lj&&r.setAttribute("stroke-miterlimit",t.ml)),2===t.r&&r.setAttribute("fill-rule","evenodd"),t.ln&&r.setAttribute("id",t.ln),t.cl&&r.setAttribute("class",t.cl),t.bm&&(r.style["mix-blend-mode"]=getBlendMode(t.bm)),this.stylesList.push(s),this.addToAnimatedContents(t,i),i},SVGShapeElement.prototype.createGroupElement=function(t){var e=new ShapeGroupData;return t.ln&&e.gr.setAttribute("id",t.ln),t.cl&&e.gr.setAttribute("class",t.cl),t.bm&&(e.gr.style["mix-blend-mode"]=getBlendMode(t.bm)),e},SVGShapeElement.prototype.createTransformElement=function(t,e){var i=TransformPropertyFactory.getTransformProperty(this,t,this),s=new SVGTransformData(i,i.o,e);return this.addToAnimatedContents(t,s),s},SVGShapeElement.prototype.createShapeElement=function(t,e,i){var s=4;"rc"===t.ty?s=5:"el"===t.ty?s=6:"sr"===t.ty&&(s=7);var r=new SVGShapeData(e,i,ShapePropertyFactory.getShapeProp(this,t,s,this));return this.shapes.push(r),this.addShapeToModifiers(r),this.addToAnimatedContents(t,r),r},SVGShapeElement.prototype.addToAnimatedContents=function(t,e){for(var i=0,s=this.animatedContents.length;i<s;){if(this.animatedContents[i].element===e)return;i+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(t),element:e,data:t})},SVGShapeElement.prototype.setElementStyles=function(t){var e,i=t.styles,s=this.stylesList.length;for(e=0;e<s;e+=1)this.stylesList[e].closed||i.push(this.stylesList[e])},SVGShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(t,e,i,s,r,n,o){var a,h,l,c,u,p,d=[].concat(n),f=t.length-1,m=[],g=[];for(a=f;a>=0;a-=1){if((p=this.searchProcessedElement(t[a]))?e[a]=i[p-1]:t[a]._render=o,"fl"===t[a].ty||"st"===t[a].ty||"gf"===t[a].ty||"gs"===t[a].ty||"no"===t[a].ty)p?e[a].style.closed=!1:e[a]=this.createStyleElement(t[a],r),t[a]._render&&e[a].style.pElem.parentNode!==s&&s.appendChild(e[a].style.pElem),m.push(e[a].style);else if("gr"===t[a].ty){if(p)for(l=e[a].it.length,h=0;h<l;h+=1)e[a].prevViewData[h]=e[a].it[h];else e[a]=this.createGroupElement(t[a]);this.searchShapes(t[a].it,e[a].it,e[a].prevViewData,e[a].gr,r+1,d,o),t[a]._render&&e[a].gr.parentNode!==s&&s.appendChild(e[a].gr)}else"tr"===t[a].ty?(p||(e[a]=this.createTransformElement(t[a],s)),c=e[a].transform,d.push(c)):"sh"===t[a].ty||"rc"===t[a].ty||"el"===t[a].ty||"sr"===t[a].ty?(p||(e[a]=this.createShapeElement(t[a],d,r)),this.setElementStyles(e[a])):"tm"===t[a].ty||"rd"===t[a].ty||"ms"===t[a].ty||"pb"===t[a].ty||"zz"===t[a].ty||"op"===t[a].ty?(p?(u=e[a]).closed=!1:((u=ShapeModifiers.getModifier(t[a].ty)).init(this,t[a]),e[a]=u,this.shapeModifiers.push(u)),g.push(u)):"rp"===t[a].ty&&(p?(u=e[a]).closed=!0:(u=ShapeModifiers.getModifier(t[a].ty),e[a]=u,u.init(this,t,a,e),this.shapeModifiers.push(u),o=!1),g.push(u));this.addProcessedElement(t[a],a+1)}for(f=m.length,a=0;a<f;a+=1)m[a].closed=!0;for(f=g.length,a=0;a<f;a+=1)g[a].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){var t;this.renderModifiers();var e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].reset();for(this.renderShape(),t=0;t<e;t+=1)(this.stylesList[t]._mdf||this._isFirstFrame)&&(this.stylesList[t].msElem&&(this.stylesList[t].msElem.setAttribute("d",this.stylesList[t].d),this.stylesList[t].d="M0 0"+this.stylesList[t].d),this.stylesList[t].pElem.setAttribute("d",this.stylesList[t].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var t,e,i=this.animatedContents.length;for(t=0;t<i;t+=1)e=this.animatedContents[t],(this._isFirstFrame||e.element._isAnimated)&&!0!==e.data&&e.fn(e.data,e.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(t,e,i,s,r,n){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var o=!1;return this.o!==t&&(this.o=t,this._mdf.o=!0,o=!0),this.sw!==e&&(this.sw=e,this._mdf.sw=!0,o=!0),this.sc!==i&&(this.sc=i,this._mdf.sc=!0,o=!0),this.fc!==s&&(this.fc=s,this._mdf.fc=!0,o=!0),this.m!==r&&(this.m=r,this._mdf.m=!0,o=!0),!n.length||this.p[0]===n[0]&&this.p[1]===n[1]&&this.p[4]===n[4]&&this.p[5]===n[5]&&this.p[12]===n[12]&&this.p[13]===n[13]||(this.p=n,this._mdf.p=!0,o=!0),o},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},TextProperty.prototype.setCurrentData=function(t){t.__complete||this.completeTextData(t),this.currentData=t,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(t){this.effectsSequence.push(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(t){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||t){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var e=this.currentData,i=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{var s;this.lock=!0,this._mdf=!1;var r=this.effectsSequence.length,n=t||this.data.d.k[this.keysIndex].s;for(s=0;s<r;s+=1)n=i!==this.keysIndex?this.effectsSequence[s](n,n.t):this.effectsSequence[s](this.currentData,n.t);e!==n&&this.setCurrentData(n),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var t=this.data.d.k,e=this.elem.comp.renderedFrame,i=0,s=t.length;i<=s-1&&!(i===s-1||t[i+1].t>e);)i+=1;return this.keysIndex!==i&&(this.keysIndex=i),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(t){for(var e,i,s=[],r=0,n=t.length,o=!1,a=!1,h="";r<n;)o=a,a=!1,e=t.charCodeAt(r),h=t.charAt(r),FontManager.isCombinedCharacter(e)?o=!0:e>=55296&&e<=56319?FontManager.isRegionalFlag(t,r)?h=t.substr(r,14):(i=t.charCodeAt(r+1))>=56320&&i<=57343&&(FontManager.isModifier(e,i)?(h=t.substr(r,2),o=!0):h=FontManager.isFlagEmoji(t.substr(r,4))?t.substr(r,4):t.substr(r,2)):e>56319?(i=t.charCodeAt(r+1),FontManager.isVariationSelector(e)&&(o=!0)):FontManager.isZeroWidthJoiner(e)&&(o=!0,a=!0),o?(s[s.length-1]+=h,o=!1):s.push(h),r+=h.length;return s},TextProperty.prototype.completeTextData=function(t){t.__complete=!0;var e,i,s,r,n,o,a,h=this.elem.globalData.fontManager,l=this.data,c=[],u=0,p=l.m.g,d=0,f=0,m=0,g=[],y=0,v=0,b=h.getFontByName(t.f),S=0,x=getFontProperties(b);t.fWeight=x.weight,t.fStyle=x.style,t.finalSize=t.s,t.finalText=this.buildFinalText(t.t),i=t.finalText.length,t.finalLineHeight=t.lh;var w,k=t.tr/1e3*t.finalSize;if(t.sz)for(var _,C,E=!0,P=t.sz[0],I=t.sz[1];E;){_=0,y=0,i=(C=this.buildFinalText(t.t)).length,k=t.tr/1e3*t.finalSize;var T=-1;for(e=0;e<i;e+=1)w=C[e].charCodeAt(0),s=!1," "===C[e]?T=e:13!==w&&3!==w||(y=0,s=!0,_+=t.finalLineHeight||1.2*t.finalSize),h.chars?(a=h.getCharData(C[e],b.fStyle,b.fFamily),S=s?0:a.w*t.finalSize/100):S=h.measureText(C[e],t.f,t.finalSize),y+S>P&&" "!==C[e]?(-1===T?i+=1:e=T,_+=t.finalLineHeight||1.2*t.finalSize,C.splice(e,T===e?1:0,"\r"),T=-1,y=0):(y+=S,y+=k);_+=b.ascent*t.finalSize/100,this.canResize&&t.finalSize>this.minimumFontSize&&I<_?(t.finalSize-=1,t.finalLineHeight=t.finalSize*t.lh/t.s):(t.finalText=C,i=t.finalText.length,E=!1)}y=-k,S=0;var A,M=0;for(e=0;e<i;e+=1)if(s=!1,13===(w=(A=t.finalText[e]).charCodeAt(0))||3===w?(M=0,g.push(y),v=y>v?y:v,y=-2*k,r="",s=!0,m+=1):r=A,h.chars?(a=h.getCharData(A,b.fStyle,h.getFontByName(t.f).fFamily),S=s?0:a.w*t.finalSize/100):S=h.measureText(r,t.f,t.finalSize)," "===A?M+=S+k:(y+=S+k+M,M=0),c.push({l:S,an:S,add:d,n:s,anIndexes:[],val:r,line:m,animatorJustifyOffset:0}),2==p){if(d+=S,""===r||" "===r||e===i-1){for(""!==r&&" "!==r||(d-=S);f<=e;)c[f].an=d,c[f].ind=u,c[f].extra=S,f+=1;u+=1,d=0}}else if(3==p){if(d+=S,""===r||e===i-1){for(""===r&&(d-=S);f<=e;)c[f].an=d,c[f].ind=u,c[f].extra=S,f+=1;d=0,u+=1}}else c[u].ind=u,c[u].extra=0,u+=1;if(t.l=c,v=y>v?y:v,g.push(y),t.sz)t.boxWidth=t.sz[0],t.justifyOffset=0;else switch(t.boxWidth=v,t.j){case 1:t.justifyOffset=-t.boxWidth;break;case 2:t.justifyOffset=-t.boxWidth/2;break;default:t.justifyOffset=0}t.lineWidths=g;var R,B,z,D,F=l.a;o=F.length;var L=[];for(n=0;n<o;n+=1){for((R=F[n]).a.sc&&(t.strokeColorAnim=!0),R.a.sw&&(t.strokeWidthAnim=!0),(R.a.fc||R.a.fh||R.a.fs||R.a.fb)&&(t.fillColorAnim=!0),D=0,z=R.s.b,e=0;e<i;e+=1)(B=c[e]).anIndexes[n]=D,(1==z&&""!==B.val||2==z&&""!==B.val&&" "!==B.val||3==z&&(B.n||" "==B.val||e==i-1)||4==z&&(B.n||e==i-1))&&(1===R.s.rn&&L.push(D),D+=1);l.a[n].s.totalChars=D;var V,O=-1;if(1===R.s.rn)for(e=0;e<i;e+=1)O!=(B=c[e]).anIndexes[n]&&(O=B.anIndexes[n],V=L.splice(Math.floor(Math.random()*L.length),1)[0]),B.anIndexes[n]=V}t.yOffset=t.finalLineHeight||1.2*t.finalSize,t.ls=t.ls||0,t.ascent=b.ascent*t.finalSize/100},TextProperty.prototype.updateDocumentData=function(t,e){e=void 0===e?this.keysIndex:e;var i=this.copyData({},this.data.d.k[e].s);i=this.copyData(i,t),this.data.d.k[e].s=i,this.recalculate(e),this.setCurrentData(i),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(t){var e=this.data.d.k[t].s;e.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(e)},TextProperty.prototype.canResizeFont=function(t){this.canResize=t,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(t){this.minimumFontSize=Math.floor(t)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var t=Math.max,e=Math.min,i=Math.floor;function s(t,e){this._currentTextLength=-1,this.k=!1,this.data=e,this.elem=t,this.comp=t.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(t),this.s=PropertyFactory.getProp(t,e.s||{k:0},0,0,this),this.e="e"in e?PropertyFactory.getProp(t,e.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(t,e.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(t,e.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(t,e.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(t,e.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(t,e.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return s.prototype={getMult:function(s){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var r=0,n=0,o=1,a=1;this.ne.v>0?r=this.ne.v/100:n=-this.ne.v/100,this.xe.v>0?o=1-this.xe.v/100:a=1+this.xe.v/100;var h=BezierFactory.getBezierEasing(r,n,o,a).get,l=0,c=this.finalS,u=this.finalE,p=this.data.sh;if(2===p)l=h(l=u===c?s>=u?1:0:t(0,e(.5/(u-c)+(s-c)/(u-c),1)));else if(3===p)l=h(l=u===c?s>=u?0:1:1-t(0,e(.5/(u-c)+(s-c)/(u-c),1)));else if(4===p)u===c?l=0:(l=t(0,e(.5/(u-c)+(s-c)/(u-c),1)))<.5?l*=2:l=1-2*(l-.5),l=h(l);else if(5===p){if(u===c)l=0;else{var d=u-c,f=-d/2+(s=e(t(0,s+.5-c),u-c)),m=d/2;l=Math.sqrt(1-f*f/(m*m))}l=h(l)}else 6===p?(u===c?l=0:(s=e(t(0,s+.5-c),u-c),l=(1+Math.cos(Math.PI+2*Math.PI*s/(u-c)))/2),l=h(l)):(s>=i(c)&&(l=t(0,e(s-c<0?e(u,1)-(c-s):u-s,1))),l=h(l));if(100!==this.sm.v){var g=.01*this.sm.v;0===g&&(g=1e-8);var y=.5-.5*g;l<y?l=0:(l=(l-y)/g)>1&&(l=1)}return l*this.a.v},getValue:function(t){this.iterateDynamicProperties(),this._mdf=t||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,t&&2===this.data.r&&(this.e.v=this._currentTextLength);var e=2===this.data.r?1:100/this.data.totalChars,i=this.o.v/e,s=this.s.v/e+i,r=this.e.v/e+i;if(s>r){var n=s;s=r,r=n}this.finalS=s,this.finalE=r}},extendPrototype([DynamicPropertyContainer],s),{getTextSelectorProp:function(t,e,i){return new s(t,e,i)}}}();function TextAnimatorDataProperty(t,e,i){var s={propType:!1},r=PropertyFactory.getProp,n=e.a;this.a={r:n.r?r(t,n.r,0,degToRads,i):s,rx:n.rx?r(t,n.rx,0,degToRads,i):s,ry:n.ry?r(t,n.ry,0,degToRads,i):s,sk:n.sk?r(t,n.sk,0,degToRads,i):s,sa:n.sa?r(t,n.sa,0,degToRads,i):s,s:n.s?r(t,n.s,1,.01,i):s,a:n.a?r(t,n.a,1,0,i):s,o:n.o?r(t,n.o,0,.01,i):s,p:n.p?r(t,n.p,1,0,i):s,sw:n.sw?r(t,n.sw,0,0,i):s,sc:n.sc?r(t,n.sc,1,0,i):s,fc:n.fc?r(t,n.fc,1,0,i):s,fh:n.fh?r(t,n.fh,0,0,i):s,fs:n.fs?r(t,n.fs,0,.01,i):s,fb:n.fb?r(t,n.fb,0,.01,i):s,t:n.t?r(t,n.t,0,0,i):s},this.s=TextSelectorProp.getTextSelectorProp(t,e.s,i),this.s.t=e.s.t}function TextAnimatorProperty(t,e,i){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=t,this._renderType=e,this._elem=i,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(i)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var t,e,i=this._textData.a.length,s=PropertyFactory.getProp;for(t=0;t<i;t+=1)e=this._textData.a[t],this._animatorsData[t]=new TextAnimatorDataProperty(this._elem,e,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:s(this._elem,this._textData.p.a,0,0,this),f:s(this._elem,this._textData.p.f,0,0,this),l:s(this._elem,this._textData.p.l,0,0,this),r:s(this._elem,this._textData.p.r,0,0,this),p:s(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=s(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(t,e){if(this.lettersChangedFlag=e,this._mdf||this._isFirstFrame||e||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var i,s,r,n,o,a,h,l,c,u,p,d,f,m,g,y,v,b,S,x=this._moreOptions.alignment.v,w=this._animatorsData,k=this._textData,_=this.mHelper,C=this._renderType,E=this.renderedLetters.length,P=t.l;if(this._hasMaskedPath){if(S=this._pathData.m,!this._pathData.n||this._pathData._mdf){var I,T=S.v;for(this._pathData.r.v&&(T=T.reverse()),o={tLength:0,segments:[]},n=T._length-1,y=0,r=0;r<n;r+=1)I=bez.buildBezierData(T.v[r],T.v[r+1],[T.o[r][0]-T.v[r][0],T.o[r][1]-T.v[r][1]],[T.i[r+1][0]-T.v[r+1][0],T.i[r+1][1]-T.v[r+1][1]]),o.tLength+=I.segmentLength,o.segments.push(I),y+=I.segmentLength;r=n,S.v.c&&(I=bez.buildBezierData(T.v[r],T.v[0],[T.o[r][0]-T.v[r][0],T.o[r][1]-T.v[r][1]],[T.i[0][0]-T.v[0][0],T.i[0][1]-T.v[0][1]]),o.tLength+=I.segmentLength,o.segments.push(I),y+=I.segmentLength),this._pathData.pi=o}if(o=this._pathData.pi,a=this._pathData.f.v,p=0,u=1,l=0,c=!0,m=o.segments,a<0&&S.v.c)for(o.tLength<Math.abs(a)&&(a=-Math.abs(a)%o.tLength),u=(f=m[p=m.length-1].points).length-1;a<0;)a+=f[u].partialLength,(u-=1)<0&&(u=(f=m[p-=1].points).length-1);d=(f=m[p].points)[u-1],g=(h=f[u]).partialLength}n=P.length,i=0,s=0;var A,M,R,B,z,D=1.2*t.finalSize*.714,F=!0;R=w.length;var L,V,O,N,W,H,G,j,$,q,U,K,Z=-1,Y=a,J=p,X=u,Q=-1,tt="",et=this.defaultPropsArray;if(2===t.j||1===t.j){var it=0,st=0,rt=2===t.j?-.5:-1,nt=0,ot=!0;for(r=0;r<n;r+=1)if(P[r].n){for(it&&(it+=st);nt<r;)P[nt].animatorJustifyOffset=it,nt+=1;it=0,ot=!0}else{for(M=0;M<R;M+=1)(A=w[M].a).t.propType&&(ot&&2===t.j&&(st+=A.t.v*rt),(z=w[M].s.getMult(P[r].anIndexes[M],k.a[M].s.totalChars)).length?it+=A.t.v*z[0]*rt:it+=A.t.v*z*rt);ot=!1}for(it&&(it+=st);nt<r;)P[nt].animatorJustifyOffset=it,nt+=1}for(r=0;r<n;r+=1){if(_.reset(),N=1,P[r].n)i=0,s+=t.yOffset,s+=F?1:0,a=Y,F=!1,this._hasMaskedPath&&(u=X,d=(f=m[p=J].points)[u-1],g=(h=f[u]).partialLength,l=0),tt="",U="",$="",K="",et=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Q!==P[r].line){switch(t.j){case 1:a+=y-t.lineWidths[P[r].line];break;case 2:a+=(y-t.lineWidths[P[r].line])/2}Q=P[r].line}Z!==P[r].ind&&(P[Z]&&(a+=P[Z].extra),a+=P[r].an/2,Z=P[r].ind),a+=x[0]*P[r].an*.005;var at=0;for(M=0;M<R;M+=1)(A=w[M].a).p.propType&&((z=w[M].s.getMult(P[r].anIndexes[M],k.a[M].s.totalChars)).length?at+=A.p.v[0]*z[0]:at+=A.p.v[0]*z),A.a.propType&&((z=w[M].s.getMult(P[r].anIndexes[M],k.a[M].s.totalChars)).length?at+=A.a.v[0]*z[0]:at+=A.a.v[0]*z);for(c=!0,this._pathData.a.v&&(a=.5*P[0].an+(y-this._pathData.f.v-.5*P[0].an-.5*P[P.length-1].an)*Z/(n-1),a+=this._pathData.f.v);c;)l+g>=a+at||!f?(v=(a+at-l)/h.partialLength,V=d.point[0]+(h.point[0]-d.point[0])*v,O=d.point[1]+(h.point[1]-d.point[1])*v,_.translate(-x[0]*P[r].an*.005,-x[1]*D*.01),c=!1):f&&(l+=h.partialLength,(u+=1)>=f.length&&(u=0,m[p+=1]?f=m[p].points:S.v.c?(u=0,f=m[p=0].points):(l-=h.partialLength,f=null)),f&&(d=h,g=(h=f[u]).partialLength));L=P[r].an/2-P[r].add,_.translate(-L,0,0)}else L=P[r].an/2-P[r].add,_.translate(-L,0,0),_.translate(-x[0]*P[r].an*.005,-x[1]*D*.01,0);for(M=0;M<R;M+=1)(A=w[M].a).t.propType&&(z=w[M].s.getMult(P[r].anIndexes[M],k.a[M].s.totalChars),0===i&&0===t.j||(this._hasMaskedPath?z.length?a+=A.t.v*z[0]:a+=A.t.v*z:z.length?i+=A.t.v*z[0]:i+=A.t.v*z));for(t.strokeWidthAnim&&(H=t.sw||0),t.strokeColorAnim&&(W=t.sc?[t.sc[0],t.sc[1],t.sc[2]]:[0,0,0]),t.fillColorAnim&&t.fc&&(G=[t.fc[0],t.fc[1],t.fc[2]]),M=0;M<R;M+=1)(A=w[M].a).a.propType&&((z=w[M].s.getMult(P[r].anIndexes[M],k.a[M].s.totalChars)).length?_.translate(-A.a.v[0]*z[0],-A.a.v[1]*z[1],A.a.v[2]*z[2]):_.translate(-A.a.v[0]*z,-A.a.v[1]*z,A.a.v[2]*z));for(M=0;M<R;M+=1)(A=w[M].a).s.propType&&((z=w[M].s.getMult(P[r].anIndexes[M],k.a[M].s.totalChars)).length?_.scale(1+(A.s.v[0]-1)*z[0],1+(A.s.v[1]-1)*z[1],1):_.scale(1+(A.s.v[0]-1)*z,1+(A.s.v[1]-1)*z,1));for(M=0;M<R;M+=1){if(A=w[M].a,z=w[M].s.getMult(P[r].anIndexes[M],k.a[M].s.totalChars),A.sk.propType&&(z.length?_.skewFromAxis(-A.sk.v*z[0],A.sa.v*z[1]):_.skewFromAxis(-A.sk.v*z,A.sa.v*z)),A.r.propType&&(z.length?_.rotateZ(-A.r.v*z[2]):_.rotateZ(-A.r.v*z)),A.ry.propType&&(z.length?_.rotateY(A.ry.v*z[1]):_.rotateY(A.ry.v*z)),A.rx.propType&&(z.length?_.rotateX(A.rx.v*z[0]):_.rotateX(A.rx.v*z)),A.o.propType&&(z.length?N+=(A.o.v*z[0]-N)*z[0]:N+=(A.o.v*z-N)*z),t.strokeWidthAnim&&A.sw.propType&&(z.length?H+=A.sw.v*z[0]:H+=A.sw.v*z),t.strokeColorAnim&&A.sc.propType)for(j=0;j<3;j+=1)z.length?W[j]+=(A.sc.v[j]-W[j])*z[0]:W[j]+=(A.sc.v[j]-W[j])*z;if(t.fillColorAnim&&t.fc){if(A.fc.propType)for(j=0;j<3;j+=1)z.length?G[j]+=(A.fc.v[j]-G[j])*z[0]:G[j]+=(A.fc.v[j]-G[j])*z;A.fh.propType&&(G=z.length?addHueToRGB(G,A.fh.v*z[0]):addHueToRGB(G,A.fh.v*z)),A.fs.propType&&(G=z.length?addSaturationToRGB(G,A.fs.v*z[0]):addSaturationToRGB(G,A.fs.v*z)),A.fb.propType&&(G=z.length?addBrightnessToRGB(G,A.fb.v*z[0]):addBrightnessToRGB(G,A.fb.v*z))}}for(M=0;M<R;M+=1)(A=w[M].a).p.propType&&(z=w[M].s.getMult(P[r].anIndexes[M],k.a[M].s.totalChars),this._hasMaskedPath?z.length?_.translate(0,A.p.v[1]*z[0],-A.p.v[2]*z[1]):_.translate(0,A.p.v[1]*z,-A.p.v[2]*z):z.length?_.translate(A.p.v[0]*z[0],A.p.v[1]*z[1],-A.p.v[2]*z[2]):_.translate(A.p.v[0]*z,A.p.v[1]*z,-A.p.v[2]*z));if(t.strokeWidthAnim&&($=H<0?0:H),t.strokeColorAnim&&(q="rgb("+Math.round(255*W[0])+","+Math.round(255*W[1])+","+Math.round(255*W[2])+")"),t.fillColorAnim&&t.fc&&(U="rgb("+Math.round(255*G[0])+","+Math.round(255*G[1])+","+Math.round(255*G[2])+")"),this._hasMaskedPath){if(_.translate(0,-t.ls),_.translate(0,x[1]*D*.01+s,0),this._pathData.p.v){b=(h.point[1]-d.point[1])/(h.point[0]-d.point[0]);var ht=180*Math.atan(b)/Math.PI;h.point[0]<d.point[0]&&(ht+=180),_.rotate(-ht*Math.PI/180)}_.translate(V,O,0),a-=x[0]*P[r].an*.005,P[r+1]&&Z!==P[r+1].ind&&(a+=P[r].an/2,a+=.001*t.tr*t.finalSize)}else{switch(_.translate(i,s,0),t.ps&&_.translate(t.ps[0],t.ps[1]+t.ascent,0),t.j){case 1:_.translate(P[r].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[P[r].line]),0,0);break;case 2:_.translate(P[r].animatorJustifyOffset+t.justifyOffset+(t.boxWidth-t.lineWidths[P[r].line])/2,0,0)}_.translate(0,-t.ls),_.translate(L,0,0),_.translate(x[0]*P[r].an*.005,x[1]*D*.01,0),i+=P[r].l+.001*t.tr*t.finalSize}"html"===C?tt=_.toCSS():"svg"===C?tt=_.to2dCSS():et=[_.props[0],_.props[1],_.props[2],_.props[3],_.props[4],_.props[5],_.props[6],_.props[7],_.props[8],_.props[9],_.props[10],_.props[11],_.props[12],_.props[13],_.props[14],_.props[15]],K=N}E<=r?(B=new LetterProps(K,$,q,U,tt,et),this.renderedLetters.push(B),E+=1,this.lettersChangedFlag=!0):(B=this.renderedLetters[r],this.lettersChangedFlag=B.update(K,$,q,U,tt,et)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(t,e,i){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(t,e,i),this.textProperty=new TextProperty(this,t.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(t.t,this.renderType,this),this.initTransform(t,e,i),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(t){this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange)},ITextElement.prototype.createPathShape=function(t,e){var i,s,r=e.length,n="";for(i=0;i<r;i+=1)"sh"===e[i].ty&&(s=e[i].ks.k,n+=buildShapeString(s,s.i.length,!0,t));return n},ITextElement.prototype.updateDocumentData=function(t,e){this.textProperty.updateDocumentData(t,e)},ITextElement.prototype.canResizeFont=function(t){this.textProperty.canResizeFont(t)},ITextElement.prototype.setMinimumFontSize=function(t){this.textProperty.setMinimumFontSize(t)},ITextElement.prototype.applyTextPropertiesToMatrix=function(t,e,i,s,r){switch(t.ps&&e.translate(t.ps[0],t.ps[1]+t.ascent,0),e.translate(0,-t.ls,0),t.j){case 1:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i]),0,0);break;case 2:e.translate(t.justifyOffset+(t.boxWidth-t.lineWidths[i])/2,0,0)}e.translate(s,r,0)},ITextElement.prototype.buildColor=function(t){return"rgb("+Math.round(255*t[0])+","+Math.round(255*t[1])+","+Math.round(255*t[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(t,e,i){this.textSpans=[],this.renderType="svg",this.initElement(t,e,i)}function ISolidElement(t,e,i){this.initElement(t,e,i)}function NullElement(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initFrame(),this.initTransform(t,e,i),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(t,e,i){this.layers=t.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function SVGRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var i="";if(e&&e.title){var s=createNS("title"),r=createElementID();s.setAttribute("id",r),s.textContent=e.title,this.svgElement.appendChild(s),i+=r}if(e&&e.description){var n=createNS("desc"),o=createElementID();n.setAttribute("id",o),n.textContent=e.description,this.svgElement.appendChild(n),i+=" "+o}i&&this.svgElement.setAttribute("aria-labelledby",i);var a=createNS("defs");this.svgElement.appendChild(a);var h=createNS("g");this.svgElement.appendChild(h),this.layerElement=h,this.renderConfig={preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",progressiveLoad:e&&e.progressiveLoad||!1,hideOnTransparent:!(e&&!1===e.hideOnTransparent),viewBoxOnly:e&&e.viewBoxOnly||!1,viewBoxSize:e&&e.viewBoxSize||!1,className:e&&e.className||"",id:e&&e.id||"",focusable:e&&e.focusable,filterSize:{width:e&&e.filterSize&&e.filterSize.width||"100%",height:e&&e.filterSize&&e.filterSize.height||"100%",x:e&&e.filterSize&&e.filterSize.x||"0%",y:e&&e.filterSize&&e.filterSize.y||"0%"},width:e&&e.width,height:e&&e.height,runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:a,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(t){for(var e=0,i=t.length,s=[],r="";e<i;)t[e]===String.fromCharCode(13)||t[e]===String.fromCharCode(3)?(s.push(r),r=""):r+=t[e],e+=1;return s.push(r),s},SVGTextLottieElement.prototype.buildShapeData=function(t,e){if(t.shapes&&t.shapes.length){var i=t.shapes[0];if(i.it){var s=i.it[i.it.length-1];s.s&&(s.s.k[0]=e,s.s.k[1]=e)}}return t},SVGTextLottieElement.prototype.buildNewText=function(){var t,e;this.addDynamicProperty(this);var i=this.textProperty.currentData;this.renderedLetters=createSizedArray(i?i.l.length:0),i.fc?this.layerElement.setAttribute("fill",this.buildColor(i.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),i.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(i.sc)),this.layerElement.setAttribute("stroke-width",i.sw)),this.layerElement.setAttribute("font-size",i.finalSize);var s=this.globalData.fontManager.getFontByName(i.f);if(s.fClass)this.layerElement.setAttribute("class",s.fClass);else{this.layerElement.setAttribute("font-family",s.fFamily);var r=i.fWeight,n=i.fStyle;this.layerElement.setAttribute("font-style",n),this.layerElement.setAttribute("font-weight",r)}this.layerElement.setAttribute("aria-label",i.t);var o,a=i.l||[],h=!!this.globalData.fontManager.chars;e=a.length;var l=this.mHelper,c=this.data.singleShape,u=0,p=0,d=!0,f=.001*i.tr*i.finalSize;if(!c||h||i.sz){var m,g=this.textSpans.length;for(t=0;t<e;t+=1){if(this.textSpans[t]||(this.textSpans[t]={span:null,childSpan:null,glyph:null}),!h||!c||0===t){if(o=g>t?this.textSpans[t].span:createNS(h?"g":"text"),g<=t){if(o.setAttribute("stroke-linecap","butt"),o.setAttribute("stroke-linejoin","round"),o.setAttribute("stroke-miterlimit","4"),this.textSpans[t].span=o,h){var y=createNS("g");o.appendChild(y),this.textSpans[t].childSpan=y}this.textSpans[t].span=o,this.layerElement.appendChild(o)}o.style.display="inherit"}if(l.reset(),c&&(a[t].n&&(u=-f,p+=i.yOffset,p+=d?1:0,d=!1),this.applyTextPropertiesToMatrix(i,l,a[t].line,u,p),u+=a[t].l||0,u+=f),h){var v;if(1===(m=this.globalData.fontManager.getCharData(i.finalText[t],s.fStyle,this.globalData.fontManager.getFontByName(i.f).fFamily)).t)v=new SVGCompElement(m.data,this.globalData,this);else{var b=emptyShapeData;m.data&&m.data.shapes&&(b=this.buildShapeData(m.data,i.finalSize)),v=new SVGShapeElement(b,this.globalData,this)}if(this.textSpans[t].glyph){var S=this.textSpans[t].glyph;this.textSpans[t].childSpan.removeChild(S.layerElement),S.destroy()}this.textSpans[t].glyph=v,v._debug=!0,v.prepareFrame(0),v.renderFrame(),this.textSpans[t].childSpan.appendChild(v.layerElement),1===m.t&&this.textSpans[t].childSpan.setAttribute("transform","scale("+i.finalSize/100+","+i.finalSize/100+")")}else c&&o.setAttribute("transform","translate("+l.props[12]+","+l.props[13]+")"),o.textContent=a[t].val,o.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}c&&o&&o.setAttribute("d","")}else{var x=this.textContainer,w="start";switch(i.j){case 1:w="end";break;case 2:w="middle";break;default:w="start"}x.setAttribute("text-anchor",w),x.setAttribute("letter-spacing",f);var k=this.buildTextContents(i.finalText);for(e=k.length,p=i.ps?i.ps[1]+i.ascent:0,t=0;t<e;t+=1)(o=this.textSpans[t].span||createNS("tspan")).textContent=k[t],o.setAttribute("x",0),o.setAttribute("y",p),o.style.display="inherit",x.appendChild(o),this.textSpans[t]||(this.textSpans[t]={span:null,glyph:null}),this.textSpans[t].span=o,p+=i.finalLineHeight;this.layerElement.appendChild(x)}for(;t<this.textSpans.length;)this.textSpans[t].span.style.display="none",t+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var t,e,i=this.textSpans.length;for(this.renderedFrame=this.comp.renderedFrame,t=0;t<i;t+=1)(e=this.textSpans[t].glyph)&&(e.prepareFrame(this.comp.renderedFrame-this.data.st),e._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var t,e;this._sizeChanged=!0;var i,s,r,n=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;for(e=o.length,t=0;t<e;t+=1)o[t].n||(i=n[t],s=this.textSpans[t].span,(r=this.textSpans[t].glyph)&&r.renderFrame(),i._mdf.m&&s.setAttribute("transform",i.m),i._mdf.o&&s.setAttribute("opacity",i.o),i._mdf.sw&&s.setAttribute("stroke-width",i.sw),i._mdf.sc&&s.setAttribute("stroke",i.sc),i._mdf.fc&&s.setAttribute("fill",i.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var t=createNS("rect");t.setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.layerElement.appendChild(t)},NullElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(t){return new NullElement(t,this.globalData,this)},SVGRendererBase.prototype.createShape=function(t){return new SVGShapeElement(t,this.globalData,this)},SVGRendererBase.prototype.createText=function(t){return new SVGTextLottieElement(t,this.globalData,this)},SVGRendererBase.prototype.createImage=function(t){return new IImageElement(t,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(t){return new ISolidElement(t,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(t){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+t.w+" "+t.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",t.w),this.svgElement.setAttribute("height",t.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var e=this.globalData.defs;this.setupGlobalData(t,e),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=t;var i=createNS("clipPath"),s=createNS("rect");s.setAttribute("width",t.w),s.setAttribute("height",t.h),s.setAttribute("x",0),s.setAttribute("y",0);var r=createElementID();i.setAttribute("id",r),i.appendChild(s),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+r+")"),e.appendChild(i),this.layers=t.layers,this.elements=createSizedArray(t.layers.length)},SVGRendererBase.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(t){var e=0,i=this.layers.length;for(e=0;e<i;e+=1)if(this.layers[e].ind===t)return e;return-1},SVGRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){e[t]=!0;var i=this.createItem(this.layers[t]);if(e[t]=i,getExpressionsPlugin()&&(0===this.layers[t].ty&&this.globalData.projectInterface.registerComposition(i),i.initExpressions()),this.appendElementInPos(i,t),this.layers[t].tt){var s="tp"in this.layers[t]?this.findIndexByInd(this.layers[t].tp):t-1;if(-1===s)return;if(this.elements[s]&&!0!==this.elements[s]){var r=e[s].getMatte(this.layers[t].tt);i.setMatte(r)}else this.buildItem(s),this.addPendingElement(i)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var t=this.pendingElements.pop();if(t.checkParenting(),t.data.tt)for(var e=0,i=this.elements.length;e<i;){if(this.elements[e]===t){var s="tp"in t.data?this.findIndexByInd(t.data.tp):e-1,r=this.elements[s].getMatte(this.layers[e].tt);t.setMatte(r);break}e+=1}}},SVGRendererBase.prototype.renderFrame=function(t){if(this.renderedFrame!==t&&!this.destroyed){var e;null===t?t=this.renderedFrame:this.renderedFrame=t,this.globalData.frameNum=t,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=t,this.globalData._mdf=!1;var i=this.layers.length;for(this.completeLayers||this.checkLayers(t),e=i-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].prepareFrame(t-this.layers[e].st);if(this.globalData._mdf)for(e=0;e<i;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){for(var s,r=0;r<e;)this.elements[r]&&!0!==this.elements[r]&&this.elements[r].getBaseElement()&&(s=this.elements[r].getBaseElement()),r+=1;s?this.layerElement.insertBefore(i,s):this.layerElement.appendChild(i)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initTransform(t,e,i),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&e.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(t){if(this._mdf=!1,this.prepareRenderableFrame(t),this.prepareProperties(t,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=t/this.data.sr;else{var e=this.tm.v;e===this.data.op&&(e=this.data.op-1),this.renderedFrame=e}var i,s=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),i=s-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&(this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st),this.elements[i]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},ICompElement.prototype.setElements=function(t){this.elements=t},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var t,e=this.layers.length;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(t){return new SVGCompElement(t,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(t){var e,i=t.length,s="_";for(e=0;e<i;e+=1)s+=t[e].transform.key+"_";var r=this.sequences[s];return r||(r={transforms:[].concat(t),finalTransform:new Matrix,_mdf:!1},this.sequences[s]=r,this.sequenceList.push(r)),r},processSequence:function(t,e){for(var i=0,s=t.transforms.length,r=e;i<s&&!e;){if(t.transforms[i].transform.mProps._mdf){r=!0;break}i+=1}if(r)for(t.finalTransform.reset(),i=s-1;i>=0;i-=1)t.finalTransform.multiply(t.transforms[i].transform.mProps.v);t._mdf=r},processSequences:function(t){var e,i=this.sequenceList.length;for(e=0;e<i;e+=1)this.processSequence(this.sequenceList[e],t)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var t="__lottie_element_luma_buffer",e=null,i=null,s=null;function r(){var r,n,o;e||(r=createNS("svg"),n=createNS("filter"),o=createNS("feColorMatrix"),n.setAttribute("id",t),o.setAttribute("type","matrix"),o.setAttribute("color-interpolation-filters","sRGB"),o.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),n.appendChild(o),r.appendChild(n),r.setAttribute("id",t+"_svg"),featureSupport.svgLumaHidden&&(r.style.display="none"),s=r,document.body.appendChild(s),e=createTag("canvas"),(i=e.getContext("2d")).filter="url(#"+t+")",i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1))}return{load:r,get:function(s){return e||r(),e.width=s.width,e.height=s.height,i.filter="url(#"+t+")",e}}};function createCanvas(t,e){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(t,e);var i=createTag("canvas");return i.width=t,i.height=e,i}var assetLoader={loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas},registeredEffects={};function CVEffects(t){var e,i,s=t.data.ef?t.data.ef.length:0;for(this.filters=[],e=0;e<s;e+=1){i=null;var r=t.data.ef[e].ty;registeredEffects[r]&&(i=new(0,registeredEffects[r].effect)(t.effectsManager.effectElements[e],t)),i&&this.filters.push(i)}this.filters.length&&t.addRenderableComponent(this)}function registerEffect(t,e){registeredEffects[t]={effect:e}}function CVMaskElement(t,e){var i;this.data=t,this.element=e,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var s=this.masksProperties.length,r=!1;for(i=0;i<s;i+=1)"n"!==this.masksProperties[i].mode&&(r=!0),this.viewData[i]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3);this.hasMasks=r,r&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(t){var e,i=this.filters.length;for(e=0;e<i;e+=1)this.filters[e].renderFrame(t)},CVEffects.prototype.getEffects=function(t){var e,i=this.filters.length,s=[];for(e=0;e<i;e+=1)this.filters[e].type===t&&s.push(this.filters[e]);return s},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var t,e,i,s,r=this.element.finalTransform.mat,n=this.element.canvasContext,o=this.masksProperties.length;for(n.beginPath(),t=0;t<o;t+=1)if("n"!==this.masksProperties[t].mode){var a;this.masksProperties[t].inv&&(n.moveTo(0,0),n.lineTo(this.element.globalData.compSize.w,0),n.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),n.lineTo(0,this.element.globalData.compSize.h),n.lineTo(0,0)),s=this.viewData[t].v,e=r.applyToPointArray(s.v[0][0],s.v[0][1],0),n.moveTo(e[0],e[1]);var h=s._length;for(a=1;a<h;a+=1)i=r.applyToTriplePoints(s.o[a-1],s.i[a],s.v[a]),n.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);i=r.applyToTriplePoints(s.o[a-1],s.i[0],s.v[0]),n.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5])}this.element.globalData.renderer.save(!0),n.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(t,e,i,s){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var r,n=4;"rc"===e.ty?n=5:"el"===e.ty?n=6:"sr"===e.ty&&(n=7),this.sh=ShapePropertyFactory.getShapeProp(t,e,n,t);var o,a=i.length;for(r=0;r<a;r+=1)i[r].closed||(o={transforms:s.addTransformSequence(i[r].transforms),trNodes:[]},this.styledShapes.push(o),i[r].elements.push(o))}function CVShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(t,e,i)}function CVTextElement(t,e,i){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(t,e,i)}function CVImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.img=e.imageLoader.getAsset(this.assetData),this.initElement(t,e,i)}function CVSolidElement(t,e,i){this.initElement(t,e,i)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){var t;for(this.stack=[],this.cArrPos=0,this.cTr=new Matrix,t=0;t<15;t+=1){var e=new CanvasContext;this.stack[t]=e}this._length=15,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(t,e,i){this.completeLayers=!1,this.layers=t.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function CanvasRenderer(t,e){this.animationItem=t,this.renderConfig={clearCanvas:!e||void 0===e.clearCanvas||e.clearCanvas,context:e&&e.context||null,progressiveLoad:e&&e.progressiveLoad||!1,preserveAspectRatio:e&&e.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:e&&e.contentVisibility||"visible",className:e&&e.className||"",id:e&&e.id||"",runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.renderConfig.dpr=e&&e.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=e&&e.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(t,e,i){this.initElement(t,e,i)}function HShapeElement(t,e,i){this.shapes=[],this.shapesData=t.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(t,e,i),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(t,e,i){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(t,e,i)}function HCameraElement(t,e,i){this.initFrame(),this.initBaseData(t,e,i),this.initHierarchy();var s=PropertyFactory.getProp;if(this.pe=s(this,t.pe,0,0,this),t.ks.p.s?(this.px=s(this,t.ks.p.x,1,0,this),this.py=s(this,t.ks.p.y,1,0,this),this.pz=s(this,t.ks.p.z,1,0,this)):this.p=s(this,t.ks.p,1,0,this),t.ks.a&&(this.a=s(this,t.ks.a,1,0,this)),t.ks.or.k.length&&t.ks.or.k[0].to){var r,n=t.ks.or.k.length;for(r=0;r<n;r+=1)t.ks.or.k[r].to=null,t.ks.or.k[r].ti=null}this.or=s(this,t.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=s(this,t.ks.rx,0,degToRads,this),this.ry=s(this,t.ks.ry,0,degToRads,this),this.rz=s(this,t.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(t,e,i){this.assetData=e.getAssetData(t.refId),this.initElement(t,e,i)}function HybridRendererBase(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(t,e,i){this.layers=t.layers,this.supports3d=!t.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(t,e,i),this.tm=t.tm?PropertyFactory.getProp(this,t.tm,0,e.frameRate,this):{_placeholder:!0}}function HybridRenderer(t,e){this.animationItem=t,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:e&&e.className||"",imagePreserveAspectRatio:e&&e.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(e&&!1===e.hideOnTransparent),filterSize:{width:e&&e.filterSize&&e.filterSize.width||"400%",height:e&&e.filterSize&&e.filterSize.height||"400%",x:e&&e.filterSize&&e.filterSize.x||"-100%",y:e&&e.filterSize&&e.filterSize.y||"-100%"},runExpressions:!e||void 0===e.runExpressions||e.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var t=this.globalData.canvasContext,e=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(e);var i=assetLoader.createCanvas(t.canvas.width,t.canvas.height);this.buffers.push(i),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var t=this.globalData;if(t.blendMode!==this.data.bm){t.blendMode=this.data.bm;var e=getBlendMode(this.data.bm);t.canvasContext.globalCompositeOperation=e}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(t){t.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var t=this.buffers[0].getContext("2d");this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var t=this.buffers[1],e=t.getContext("2d");if(this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var i=assetLoader.getLumaCanvas(this.canvasContext.canvas);i.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(i,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(t,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(t){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||t)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var e=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(e),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(t,e){var i={data:t,type:t.ty,preTransforms:this.transformsManager.addTransformSequence(e),transforms:[],elements:[],closed:!0===t.hd},s={};if("fl"===t.ty||"st"===t.ty?(s.c=PropertyFactory.getProp(this,t.c,1,255,this),s.c.k||(i.co="rgb("+bmFloor(s.c.v[0])+","+bmFloor(s.c.v[1])+","+bmFloor(s.c.v[2])+")")):"gf"!==t.ty&&"gs"!==t.ty||(s.s=PropertyFactory.getProp(this,t.s,1,null,this),s.e=PropertyFactory.getProp(this,t.e,1,null,this),s.h=PropertyFactory.getProp(this,t.h||{k:0},0,.01,this),s.a=PropertyFactory.getProp(this,t.a||{k:0},0,degToRads,this),s.g=new GradientProperty(this,t.g,this)),s.o=PropertyFactory.getProp(this,t.o,0,.01,this),"st"===t.ty||"gs"===t.ty){if(i.lc=lineCapEnum[t.lc||2],i.lj=lineJoinEnum[t.lj||2],1==t.lj&&(i.ml=t.ml),s.w=PropertyFactory.getProp(this,t.w,0,null,this),s.w.k||(i.wi=s.w.v),t.d){var r=new DashProperty(this,t.d,"canvas",this);s.d=r,s.d.k||(i.da=s.d.dashArray,i.do=s.d.dashoffset[0])}}else i.r=2===t.r?"evenodd":"nonzero";return this.stylesList.push(i),s.style=i,s},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(t){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,t.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,t,this)}}},CVShapeElement.prototype.createShapeElement=function(t){var e=new CVShapeData(this,t,this.stylesList,this.transformsManager);return this.shapes.push(e),this.addShapeToModifiers(e),e},CVShapeElement.prototype.reloadShapes=function(){var t;this._isFirstFrame=!0;var e=this.itemsData.length;for(t=0;t<e;t+=1)this.prevViewData[t]=this.itemsData[t];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),e=this.dynamicProperties.length,t=0;t<e;t+=1)this.dynamicProperties[t].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(t){var e,i=this.stylesList.length;for(e=0;e<i;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.push(t)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var t,e=this.stylesList.length;for(t=0;t<e;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.pop()},CVShapeElement.prototype.closeStyles=function(t){var e,i=t.length;for(e=0;e<i;e+=1)t[e].closed=!0},CVShapeElement.prototype.searchShapes=function(t,e,i,s,r){var n,o,a,h,l,c,u=t.length-1,p=[],d=[],f=[].concat(r);for(n=u;n>=0;n-=1){if((h=this.searchProcessedElement(t[n]))?e[n]=i[h-1]:t[n]._shouldRender=s,"fl"===t[n].ty||"st"===t[n].ty||"gf"===t[n].ty||"gs"===t[n].ty)h?e[n].style.closed=!1:e[n]=this.createStyleElement(t[n],f),p.push(e[n].style);else if("gr"===t[n].ty){if(h)for(a=e[n].it.length,o=0;o<a;o+=1)e[n].prevViewData[o]=e[n].it[o];else e[n]=this.createGroupElement(t[n]);this.searchShapes(t[n].it,e[n].it,e[n].prevViewData,s,f)}else"tr"===t[n].ty?(h||(c=this.createTransformElement(t[n]),e[n]=c),f.push(e[n]),this.addTransformToStyleList(e[n])):"sh"===t[n].ty||"rc"===t[n].ty||"el"===t[n].ty||"sr"===t[n].ty?h||(e[n]=this.createShapeElement(t[n])):"tm"===t[n].ty||"rd"===t[n].ty||"pb"===t[n].ty||"zz"===t[n].ty||"op"===t[n].ty?(h?(l=e[n]).closed=!1:((l=ShapeModifiers.getModifier(t[n].ty)).init(this,t[n]),e[n]=l,this.shapeModifiers.push(l)),d.push(l)):"rp"===t[n].ty&&(h?(l=e[n]).closed=!0:(l=ShapeModifiers.getModifier(t[n].ty),e[n]=l,l.init(this,t,n,e),this.shapeModifiers.push(l),s=!1),d.push(l));this.addProcessedElement(t[n],n+1)}for(this.removeTransformFromStyleList(),this.closeStyles(p),u=d.length,n=0;n<u;n+=1)d[n].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(t,e){(t._opMdf||e.op._mdf||this._isFirstFrame)&&(e.opacity=t.opacity,e.opacity*=e.op.v,e._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var t,e,i,s,r,n,o,a,h,l=this.stylesList.length,c=this.globalData.renderer,u=this.globalData.canvasContext;for(t=0;t<l;t+=1)if(("st"!==(a=(h=this.stylesList[t]).type)&&"gs"!==a||0!==h.wi)&&h.data._shouldRender&&0!==h.coOp&&0!==this.globalData.currentGlobalAlpha){for(c.save(),n=h.elements,"st"===a||"gs"===a?(c.ctxStrokeStyle("st"===a?h.co:h.grd),c.ctxLineWidth(h.wi),c.ctxLineCap(h.lc),c.ctxLineJoin(h.lj),c.ctxMiterLimit(h.ml||0)):c.ctxFillStyle("fl"===a?h.co:h.grd),c.ctxOpacity(h.coOp),"st"!==a&&"gs"!==a&&u.beginPath(),c.ctxTransform(h.preTransforms.finalTransform.props),i=n.length,e=0;e<i;e+=1){for("st"!==a&&"gs"!==a||(u.beginPath(),h.da&&(u.setLineDash(h.da),u.lineDashOffset=h.do)),r=(o=n[e].trNodes).length,s=0;s<r;s+=1)"m"===o[s].t?u.moveTo(o[s].p[0],o[s].p[1]):"c"===o[s].t?u.bezierCurveTo(o[s].pts[0],o[s].pts[1],o[s].pts[2],o[s].pts[3],o[s].pts[4],o[s].pts[5]):u.closePath();"st"!==a&&"gs"!==a||(c.ctxStroke(),h.da&&u.setLineDash(this.dashResetter))}"st"!==a&&"gs"!==a&&this.globalData.renderer.ctxFill(h.r),c.restore()}},CVShapeElement.prototype.renderShape=function(t,e,i,s){var r,n;for(n=t,r=e.length-1;r>=0;r-=1)"tr"===e[r].ty?(n=i[r].transform,this.renderShapeTransform(t,n)):"sh"===e[r].ty||"el"===e[r].ty||"rc"===e[r].ty||"sr"===e[r].ty?this.renderPath(e[r],i[r]):"fl"===e[r].ty?this.renderFill(e[r],i[r],n):"st"===e[r].ty?this.renderStroke(e[r],i[r],n):"gf"===e[r].ty||"gs"===e[r].ty?this.renderGradientFill(e[r],i[r],n):"gr"===e[r].ty?this.renderShape(n,e[r].it,i[r].it):e[r].ty;s&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(t,e){if(this._isFirstFrame||e._mdf||t.transforms._mdf){var i,s,r,n=t.trNodes,o=e.paths,a=o._length;n.length=0;var h=t.transforms.finalTransform;for(r=0;r<a;r+=1){var l=o.shapes[r];if(l&&l.v){for(s=l._length,i=1;i<s;i+=1)1===i&&n.push({t:"m",p:h.applyToPointArray(l.v[0][0],l.v[0][1],0)}),n.push({t:"c",pts:h.applyToTriplePoints(l.o[i-1],l.i[i],l.v[i])});1===s&&n.push({t:"m",p:h.applyToPointArray(l.v[0][0],l.v[0][1],0)}),l.c&&s&&(n.push({t:"c",pts:h.applyToTriplePoints(l.o[i-1],l.i[0],l.v[0])}),n.push({t:"z"}))}}t.trNodes=n}},CVShapeElement.prototype.renderPath=function(t,e){if(!0!==t.hd&&t._shouldRender){var i,s=e.styledShapes.length;for(i=0;i<s;i+=1)this.renderStyledShape(e.styledShapes[i],e.sh)}},CVShapeElement.prototype.renderFill=function(t,e,i){var s=e.style;(e.c._mdf||this._isFirstFrame)&&(s.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i._opMdf||this._isFirstFrame)&&(s.coOp=e.o.v*i.opacity)},CVShapeElement.prototype.renderGradientFill=function(t,e,i){var s,r=e.style;if(!r.grd||e.g._mdf||e.s._mdf||e.e._mdf||1!==t.t&&(e.h._mdf||e.a._mdf)){var n,o=this.globalData.canvasContext,a=e.s.v,h=e.e.v;if(1===t.t)s=o.createLinearGradient(a[0],a[1],h[0],h[1]);else{var l=Math.sqrt(Math.pow(a[0]-h[0],2)+Math.pow(a[1]-h[1],2)),c=Math.atan2(h[1]-a[1],h[0]-a[0]),u=e.h.v;u>=1?u=.99:u<=-1&&(u=-.99);var p=l*u,d=Math.cos(c+e.a.v)*p+a[0],f=Math.sin(c+e.a.v)*p+a[1];s=o.createRadialGradient(d,f,0,a[0],a[1],l)}var m=t.g.p,g=e.g.c,y=1;for(n=0;n<m;n+=1)e.g._hasOpacity&&e.g._collapsable&&(y=e.g.o[2*n+1]),s.addColorStop(g[4*n]/100,"rgba("+g[4*n+1]+","+g[4*n+2]+","+g[4*n+3]+","+y+")");r.grd=s}r.coOp=e.o.v*i.opacity},CVShapeElement.prototype.renderStroke=function(t,e,i){var s=e.style,r=e.d;r&&(r._mdf||this._isFirstFrame)&&(s.da=r.dashArray,s.do=r.dashoffset[0]),(e.c._mdf||this._isFirstFrame)&&(s.co="rgb("+bmFloor(e.c.v[0])+","+bmFloor(e.c.v[1])+","+bmFloor(e.c.v[2])+")"),(e.o._mdf||i._opMdf||this._isFirstFrame)&&(s.coOp=e.o.v*i.opacity),(e.w._mdf||this._isFirstFrame)&&(s.wi=e.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=!1;t.fc?(e=!0,this.values.fill=this.buildColor(t.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=e;var i=!1;t.sc&&(i=!0,this.values.stroke=this.buildColor(t.sc),this.values.sWidth=t.sw);var s,r,n,o,a,h,l,c,u,p,d,f,m=this.globalData.fontManager.getFontByName(t.f),g=t.l,y=this.mHelper;this.stroke=i,this.values.fValue=t.finalSize+"px "+this.globalData.fontManager.getFontByName(t.f).fFamily,r=t.finalText.length;var v=this.data.singleShape,b=.001*t.tr*t.finalSize,S=0,x=0,w=!0,k=0;for(s=0;s<r;s+=1){o=(n=this.globalData.fontManager.getCharData(t.finalText[s],m.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily))&&n.data||{},y.reset(),v&&g[s].n&&(S=-b,x+=t.yOffset,x+=w?1:0,w=!1),u=(l=o.shapes?o.shapes[0].it:[]).length,y.scale(t.finalSize/100,t.finalSize/100),v&&this.applyTextPropertiesToMatrix(t,y,g[s].line,S,x),d=createSizedArray(u-1);var _=0;for(c=0;c<u;c+=1)if("sh"===l[c].ty){for(h=l[c].ks.k.i.length,p=l[c].ks.k,f=[],a=1;a<h;a+=1)1===a&&f.push(y.applyToX(p.v[0][0],p.v[0][1],0),y.applyToY(p.v[0][0],p.v[0][1],0)),f.push(y.applyToX(p.o[a-1][0],p.o[a-1][1],0),y.applyToY(p.o[a-1][0],p.o[a-1][1],0),y.applyToX(p.i[a][0],p.i[a][1],0),y.applyToY(p.i[a][0],p.i[a][1],0),y.applyToX(p.v[a][0],p.v[a][1],0),y.applyToY(p.v[a][0],p.v[a][1],0));f.push(y.applyToX(p.o[a-1][0],p.o[a-1][1],0),y.applyToY(p.o[a-1][0],p.o[a-1][1],0),y.applyToX(p.i[0][0],p.i[0][1],0),y.applyToY(p.i[0][0],p.i[0][1],0),y.applyToX(p.v[0][0],p.v[0][1],0),y.applyToY(p.v[0][0],p.v[0][1],0)),d[_]=f,_+=1}v&&(S+=g[s].l,S+=b),this.textSpans[k]?this.textSpans[k].elem=d:this.textSpans[k]={elem:d},k+=1}},CVTextElement.prototype.renderInnerContent=function(){var t,e,i,s,r,n;this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var o,a=this.textAnimator.renderedLetters,h=this.textProperty.currentData.l;e=h.length;var l,c,u=null,p=null,d=null,f=this.globalData.renderer;for(t=0;t<e;t+=1)if(!h[t].n){if((o=a[t])&&(f.save(),f.ctxTransform(o.p),f.ctxOpacity(o.o)),this.fill){for(o&&o.fc?u!==o.fc&&(f.ctxFillStyle(o.fc),u=o.fc):u!==this.values.fill&&(u=this.values.fill,f.ctxFillStyle(this.values.fill)),s=(l=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),i=0;i<s;i+=1)for(n=(c=l[i]).length,this.globalData.canvasContext.moveTo(c[0],c[1]),r=2;r<n;r+=6)this.globalData.canvasContext.bezierCurveTo(c[r],c[r+1],c[r+2],c[r+3],c[r+4],c[r+5]);this.globalData.canvasContext.closePath(),f.ctxFill()}if(this.stroke){for(o&&o.sw?d!==o.sw&&(d=o.sw,f.ctxLineWidth(o.sw)):d!==this.values.sWidth&&(d=this.values.sWidth,f.ctxLineWidth(this.values.sWidth)),o&&o.sc?p!==o.sc&&(p=o.sc,f.ctxStrokeStyle(o.sc)):p!==this.values.stroke&&(p=this.values.stroke,f.ctxStrokeStyle(this.values.stroke)),s=(l=this.textSpans[t].elem).length,this.globalData.canvasContext.beginPath(),i=0;i<s;i+=1)for(n=(c=l[i]).length,this.globalData.canvasContext.moveTo(c[0],c[1]),r=2;r<n;r+=6)this.globalData.canvasContext.bezierCurveTo(c[r],c[r+1],c[r+2],c[r+3],c[r+4],c[r+5]);this.globalData.canvasContext.closePath(),f.ctxStroke()}o&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var t=createTag("canvas");t.width=this.assetData.w,t.height=this.assetData.h;var e,i,s=t.getContext("2d"),r=this.img.width,n=this.img.height,o=r/n,a=this.assetData.w/this.assetData.h,h=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;o>a&&"xMidYMid slice"===h||o<a&&"xMidYMid slice"!==h?e=(i=n)*a:i=(e=r)/a,s.drawImage(this.img,(r-e)/2,(n-i)/2,e,i,0,0,this.assetData.w,this.assetData.h),this.img=t}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(t){return new CVShapeElement(t,this.globalData,this)},CanvasRendererBase.prototype.createText=function(t){return new CVTextElement(t,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(t){return new CVImageElement(t,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(t){return new CVSolidElement(t,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(t){1===t[0]&&0===t[1]&&0===t[4]&&1===t[5]&&0===t[12]&&0===t[13]||this.canvasContext.transform(t[0],t[1],t[4],t[5],t[12],t[13])},CanvasRendererBase.prototype.ctxOpacity=function(t){this.canvasContext.globalAlpha*=t<0?0:t},CanvasRendererBase.prototype.ctxFillStyle=function(t){this.canvasContext.fillStyle=t},CanvasRendererBase.prototype.ctxStrokeStyle=function(t){this.canvasContext.strokeStyle=t},CanvasRendererBase.prototype.ctxLineWidth=function(t){this.canvasContext.lineWidth=t},CanvasRendererBase.prototype.ctxLineCap=function(t){this.canvasContext.lineCap=t},CanvasRendererBase.prototype.ctxLineJoin=function(t){this.canvasContext.lineJoin=t},CanvasRendererBase.prototype.ctxMiterLimit=function(t){this.canvasContext.miterLimit=t},CanvasRendererBase.prototype.ctxFill=function(t){this.canvasContext.fill(t)},CanvasRendererBase.prototype.ctxFillRect=function(t,e,i,s){this.canvasContext.fillRect(t,e,i,s)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(t){this.renderConfig.clearCanvas?(t&&(this.globalData.blendMode="source-over"),this.contextData.restore(t)):this.canvasContext.restore()},CanvasRendererBase.prototype.configAnimation=function(t){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var e=this.animationItem.container.style;e.width="100%",e.height="100%";var i="0px 0px 0px";e.transformOrigin=i,e.mozTransformOrigin=i,e.webkitTransformOrigin=i,e["-webkit-transform"]=i,e.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=t,this.layers=t.layers,this.transformCanvas={w:t.w,h:t.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(t,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(t.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(t,e){var i,s,r,n;if(this.reset(),t?(i=t,s=e,this.canvasContext.canvas.width=i,this.canvasContext.canvas.height=s):(this.animationItem.wrapper&&this.animationItem.container?(i=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight):(i=this.canvasContext.canvas.width,s=this.canvasContext.canvas.height),this.canvasContext.canvas.width=i*this.renderConfig.dpr,this.canvasContext.canvas.height=s*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var o=this.renderConfig.preserveAspectRatio.split(" "),a=o[1]||"meet",h=o[0]||"xMidYMid",l=h.substr(0,4),c=h.substr(4);r=i/s,(n=this.transformCanvas.w/this.transformCanvas.h)>r&&"meet"===a||n<r&&"slice"===a?(this.transformCanvas.sx=i/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=s/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===l&&(n<r&&"meet"===a||n>r&&"slice"===a)?(i-this.transformCanvas.w*(s/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===l&&(n<r&&"meet"===a||n>r&&"slice"===a)?(i-this.transformCanvas.w*(s/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===c&&(n>r&&"meet"===a||n<r&&"slice"===a)?(s-this.transformCanvas.h*(i/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===c&&(n>r&&"meet"===a||n<r&&"slice"===a)?(s-this.transformCanvas.h*(i/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=i/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=s/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var t;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),t=(this.layers?this.layers.length:0)-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(t,e){if((this.renderedFrame!==t||!0!==this.renderConfig.clearCanvas||e)&&!this.destroyed&&-1!==t){var i;this.renderedFrame=t,this.globalData.frameNum=t-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||e,this.globalData.projectInterface.currentFrame=t;var s=this.layers.length;for(this.completeLayers||this.checkLayers(t),i=s-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].prepareFrame(t-this.layers[i].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),i=s-1;i>=0;i-=1)(this.completeLayers||this.elements[i])&&this.elements[i].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(t){var e=this.elements;if(!e[t]&&99!==this.layers[t].ty){var i=this.createItem(this.layers[t],this,this.globalData);e[t]=i,i.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var t=2*this._length,e=0;for(e=this._length;e<t;e+=1)this.stack[e]=new CanvasContext;this._length=t},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(t){this.cArrPos-=1;var e,i=this.stack[this.cArrPos],s=i.transform,r=this.cTr.props;for(e=0;e<16;e+=1)r[e]=s[e];if(t){this.nativeContext.restore();var n=this.stack[this.cArrPos+1];this.appliedFillStyle=n.fillStyle,this.appliedStrokeStyle=n.strokeStyle,this.appliedLineWidth=n.lineWidth,this.appliedLineCap=n.lineCap,this.appliedLineJoin=n.lineJoin,this.appliedMiterLimit=n.miterLimit}this.nativeContext.setTransform(s[0],s[1],s[4],s[5],s[12],s[13]),(t||-1!==i.opacity&&this.currentOpacity!==i.opacity)&&(this.nativeContext.globalAlpha=i.opacity,this.currentOpacity=i.opacity),this.currentFillStyle=i.fillStyle,this.currentStrokeStyle=i.strokeStyle,this.currentLineWidth=i.lineWidth,this.currentLineCap=i.lineCap,this.currentLineJoin=i.lineJoin,this.currentMiterLimit=i.miterLimit},CVContextData.prototype.save=function(t){t&&this.nativeContext.save();var e=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var i,s=this.stack[this.cArrPos];for(i=0;i<16;i+=1)s.transform[i]=e[i];this.cArrPos+=1;var r=this.stack[this.cArrPos];r.opacity=s.opacity,r.fillStyle=s.fillStyle,r.strokeStyle=s.strokeStyle,r.lineWidth=s.lineWidth,r.lineCap=s.lineCap,r.lineJoin=s.lineJoin,r.miterLimit=s.miterLimit},CVContextData.prototype.setOpacity=function(t){this.stack[this.cArrPos].opacity=t},CVContextData.prototype.setContext=function(t){this.nativeContext=t},CVContextData.prototype.fillStyle=function(t){this.stack[this.cArrPos].fillStyle!==t&&(this.currentFillStyle=t,this.stack[this.cArrPos].fillStyle=t)},CVContextData.prototype.strokeStyle=function(t){this.stack[this.cArrPos].strokeStyle!==t&&(this.currentStrokeStyle=t,this.stack[this.cArrPos].strokeStyle=t)},CVContextData.prototype.lineWidth=function(t){this.stack[this.cArrPos].lineWidth!==t&&(this.currentLineWidth=t,this.stack[this.cArrPos].lineWidth=t)},CVContextData.prototype.lineCap=function(t){this.stack[this.cArrPos].lineCap!==t&&(this.currentLineCap=t,this.stack[this.cArrPos].lineCap=t)},CVContextData.prototype.lineJoin=function(t){this.stack[this.cArrPos].lineJoin!==t&&(this.currentLineJoin=t,this.stack[this.cArrPos].lineJoin=t)},CVContextData.prototype.miterLimit=function(t){this.stack[this.cArrPos].miterLimit!==t&&(this.currentMiterLimit=t,this.stack[this.cArrPos].miterLimit=t)},CVContextData.prototype.transform=function(t){this.transformMat.cloneFromProps(t);var e=this.cTr;this.transformMat.multiply(e),e.cloneFromProps(this.transformMat.props);var i=e.props;this.nativeContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13])},CVContextData.prototype.opacity=function(t){var e=this.stack[this.cArrPos].opacity;e*=t<0?0:t,this.stack[this.cArrPos].opacity!==e&&(this.currentOpacity!==t&&(this.nativeContext.globalAlpha=t,this.currentOpacity=t),this.stack[this.cArrPos].opacity=e)},CVContextData.prototype.fill=function(t){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(t)},CVContextData.prototype.fillRect=function(t,e,i,s){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(t,e,i,s)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var t,e=this.canvasContext;for(e.beginPath(),e.moveTo(0,0),e.lineTo(this.data.w,0),e.lineTo(this.data.w,this.data.h),e.lineTo(0,this.data.h),e.lineTo(0,0),e.clip(),t=this.layers.length-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()},CVCompElement.prototype.destroy=function(){var t;for(t=this.layers.length-1;t>=0;t-=1)this.elements[t]&&this.elements[t].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(t){return new CVCompElement(t,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var t=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var e=this.finalTransform.mat.toCSS();t.transform=e,t.webkitTransform=e}this.finalTransform._opMdf&&(t.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var t;this.data.hasMask?((t=createNS("rect")).setAttribute("width",this.data.sw),t.setAttribute("height",this.data.sh),t.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((t=createTag("div")).style.width=this.data.sw+"px",t.style.height=this.data.sh+"px",t.style.backgroundColor=this.data.sc),this.layerElement.appendChild(t)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var t;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),t=this.svgElement;else{t=createNS("svg");var e=this.comp.data?this.comp.data:this.globalData.compSize;t.setAttribute("width",e.w),t.setAttribute("height",e.h),t.appendChild(this.shapesContainer),this.layerElement.appendChild(t)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=t},HShapeElement.prototype.getTransformedPoint=function(t,e){var i,s=t.length;for(i=0;i<s;i+=1)e=t[i].mProps.v.applyToPointArray(e[0],e[1],0);return e},HShapeElement.prototype.calculateShapeBoundingBox=function(t,e){var i,s,r,n,o,a=t.sh.v,h=t.transformers,l=a._length;if(!(l<=1)){for(i=0;i<l-1;i+=1)s=this.getTransformedPoint(h,a.v[i]),r=this.getTransformedPoint(h,a.o[i]),n=this.getTransformedPoint(h,a.i[i+1]),o=this.getTransformedPoint(h,a.v[i+1]),this.checkBounds(s,r,n,o,e);a.c&&(s=this.getTransformedPoint(h,a.v[i]),r=this.getTransformedPoint(h,a.o[i]),n=this.getTransformedPoint(h,a.i[0]),o=this.getTransformedPoint(h,a.v[0]),this.checkBounds(s,r,n,o,e))}},HShapeElement.prototype.checkBounds=function(t,e,i,s,r){this.getBoundsOfCurve(t,e,i,s);var n=this.shapeBoundingBox;r.x=bmMin(n.left,r.x),r.xMax=bmMax(n.right,r.xMax),r.y=bmMin(n.top,r.y),r.yMax=bmMax(n.bottom,r.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(t,e,i,s){for(var r,n,o,a,h,l,c,u=[[t[0],s[0]],[t[1],s[1]]],p=0;p<2;++p)n=6*t[p]-12*e[p]+6*i[p],r=-3*t[p]+9*e[p]-9*i[p]+3*s[p],o=3*e[p]-3*t[p],n|=0,o|=0,0==(r|=0)&&0===n||(0===r?(a=-o/n)>0&&a<1&&u[p].push(this.calculateF(a,t,e,i,s,p)):(h=n*n-4*o*r)>=0&&((l=(-n+bmSqrt(h))/(2*r))>0&&l<1&&u[p].push(this.calculateF(l,t,e,i,s,p)),(c=(-n-bmSqrt(h))/(2*r))>0&&c<1&&u[p].push(this.calculateF(c,t,e,i,s,p))));this.shapeBoundingBox.left=bmMin.apply(null,u[0]),this.shapeBoundingBox.top=bmMin.apply(null,u[1]),this.shapeBoundingBox.right=bmMax.apply(null,u[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,u[1])},HShapeElement.prototype.calculateF=function(t,e,i,s,r,n){return bmPow(1-t,3)*e[n]+3*bmPow(1-t,2)*t*i[n]+3*(1-t)*bmPow(t,2)*s[n]+bmPow(t,3)*r[n]},HShapeElement.prototype.calculateBoundingBox=function(t,e){var i,s=t.length;for(i=0;i<s;i+=1)t[i]&&t[i].sh?this.calculateShapeBoundingBox(t[i],e):t[i]&&t[i].it?this.calculateBoundingBox(t[i].it,e):t[i]&&t[i].style&&t[i].w&&this.expandStrokeBoundingBox(t[i].w,e)},HShapeElement.prototype.expandStrokeBoundingBox=function(t,e){var i=0;if(t.keyframes){for(var s=0;s<t.keyframes.length;s+=1){var r=t.keyframes[s].s;r>i&&(i=r)}i*=t.mult}else i=t.v*t.mult;e.x-=i,e.xMax+=i,e.y-=i,e.yMax+=i},HShapeElement.prototype.currentBoxContains=function(t){return this.currentBBox.x<=t.x&&this.currentBBox.y<=t.y&&this.currentBBox.width+this.currentBBox.x>=t.x+t.width&&this.currentBBox.height+this.currentBBox.y>=t.y+t.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var t=this.tempBoundingBox,e=999999;if(t.x=e,t.xMax=-e,t.y=e,t.yMax=-e,this.calculateBoundingBox(this.itemsData,t),t.width=t.xMax<t.x?0:t.xMax-t.x,t.height=t.yMax<t.y?0:t.yMax-t.y,this.currentBoxContains(t))return;var i=!1;if(this.currentBBox.w!==t.width&&(this.currentBBox.w=t.width,this.shapeCont.setAttribute("width",t.width),i=!0),this.currentBBox.h!==t.height&&(this.currentBBox.h=t.height,this.shapeCont.setAttribute("height",t.height),i=!0),i||this.currentBBox.x!==t.x||this.currentBBox.y!==t.y){this.currentBBox.w=t.width,this.currentBBox.h=t.height,this.currentBBox.x=t.x,this.currentBBox.y=t.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var s=this.shapeCont.style,r="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";s.transform=r,s.webkitTransform=r}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var t=createNS("g");this.maskedElement.appendChild(t),this.innerElem=t}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var t=this.textProperty.currentData;this.renderedLetters=createSizedArray(t.l?t.l.length:0);var e=this.innerElem.style,i=t.fc?this.buildColor(t.fc):"rgba(0,0,0,0)";e.fill=i,e.color=i,t.sc&&(e.stroke=this.buildColor(t.sc),e.strokeWidth=t.sw+"px");var s,r,n=this.globalData.fontManager.getFontByName(t.f);if(!this.globalData.fontManager.chars)if(e.fontSize=t.finalSize+"px",e.lineHeight=t.finalSize+"px",n.fClass)this.innerElem.className=n.fClass;else{e.fontFamily=n.fFamily;var o=t.fWeight,a=t.fStyle;e.fontStyle=a,e.fontWeight=o}var h,l,c,u=t.l;r=u.length;var p,d=this.mHelper,f="",m=0;for(s=0;s<r;s+=1){if(this.globalData.fontManager.chars?(this.textPaths[m]?h=this.textPaths[m]:((h=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),h.setAttribute("stroke-linejoin",lineJoinEnum[2]),h.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[m]?c=(l=this.textSpans[m]).children[0]:((l=createTag("div")).style.lineHeight=0,(c=createNS("svg")).appendChild(h),styleDiv(l)))):this.isMasked?h=this.textPaths[m]?this.textPaths[m]:createNS("text"):this.textSpans[m]?(l=this.textSpans[m],h=this.textPaths[m]):(styleDiv(l=createTag("span")),styleDiv(h=createTag("span")),l.appendChild(h)),this.globalData.fontManager.chars){var g,y=this.globalData.fontManager.getCharData(t.finalText[s],n.fStyle,this.globalData.fontManager.getFontByName(t.f).fFamily);if(g=y?y.data:null,d.reset(),g&&g.shapes&&g.shapes.length&&(p=g.shapes[0].it,d.scale(t.finalSize/100,t.finalSize/100),f=this.createPathShape(d,p),h.setAttribute("d",f)),this.isMasked)this.innerElem.appendChild(h);else{if(this.innerElem.appendChild(l),g&&g.shapes){document.body.appendChild(c);var v=c.getBBox();c.setAttribute("width",v.width+2),c.setAttribute("height",v.height+2),c.setAttribute("viewBox",v.x-1+" "+(v.y-1)+" "+(v.width+2)+" "+(v.height+2));var b=c.style,S="translate("+(v.x-1)+"px,"+(v.y-1)+"px)";b.transform=S,b.webkitTransform=S,u[s].yOffset=v.y-1}else c.setAttribute("width",1),c.setAttribute("height",1);l.appendChild(c)}}else if(h.textContent=u[s].val,h.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(h);else{this.innerElem.appendChild(l);var x=h.style,w="translate3d(0,"+-t.finalSize/1.2+"px,0)";x.transform=w,x.webkitTransform=w}this.isMasked?this.textSpans[m]=h:this.textSpans[m]=l,this.textSpans[m].style.display="block",this.textPaths[m]=h,m+=1}for(;m<this.textSpans.length;)this.textSpans[m].style.display="none",m+=1},HTextElement.prototype.renderInnerContent=function(){var t;if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),t=this.svgElement.style;var e="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";t.transform=e,t.webkitTransform=e}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var i,s,r,n,o,a=0,h=this.textAnimator.renderedLetters,l=this.textProperty.currentData.l;for(s=l.length,i=0;i<s;i+=1)l[i].n?a+=1:(n=this.textSpans[i],o=this.textPaths[i],r=h[a],a+=1,r._mdf.m&&(this.isMasked?n.setAttribute("transform",r.m):(n.style.webkitTransform=r.m,n.style.transform=r.m)),n.style.opacity=r.o,r.sw&&r._mdf.sw&&o.setAttribute("stroke-width",r.sw),r.sc&&r._mdf.sc&&o.setAttribute("stroke",r.sc),r.fc&&r._mdf.fc&&(o.setAttribute("fill",r.fc),o.style.color=r.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var c=this.innerElem.getBBox();if(this.currentBBox.w!==c.width&&(this.currentBBox.w=c.width,this.svgElement.setAttribute("width",c.width)),this.currentBBox.h!==c.height&&(this.currentBBox.h=c.height,this.svgElement.setAttribute("height",c.height)),this.currentBBox.w!==c.width+2||this.currentBBox.h!==c.height+2||this.currentBBox.x!==c.x-1||this.currentBBox.y!==c.y-1){this.currentBBox.w=c.width+2,this.currentBBox.h=c.height+2,this.currentBBox.x=c.x-1,this.currentBBox.y=c.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),t=this.svgElement.style;var u="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";t.transform=u,t.webkitTransform=u}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var t,e,i,s,r=this.comp.threeDElements.length;for(t=0;t<r;t+=1)if("3d"===(e=this.comp.threeDElements[t]).type){i=e.perspectiveElem.style,s=e.container.style;var n=this.pe.v+"px",o="0px 0px 0px",a="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";i.perspective=n,i.webkitPerspective=n,s.transformOrigin=o,s.mozTransformOrigin=o,s.webkitTransformOrigin=o,i.transform=a,i.webkitTransform=a}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var t,e,i=this._isFirstFrame;if(this.hierarchy)for(e=this.hierarchy.length,t=0;t<e;t+=1)i=this.hierarchy[t].finalTransform.mProp._mdf||i;if(i||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(t=e=this.hierarchy.length-1;t>=0;t-=1){var s=this.hierarchy[t].finalTransform.mProp;this.mat.translate(-s.p.v[0],-s.p.v[1],s.p.v[2]),this.mat.rotateX(-s.or.v[0]).rotateY(-s.or.v[1]).rotateZ(s.or.v[2]),this.mat.rotateX(-s.rx.v).rotateY(-s.ry.v).rotateZ(s.rz.v),this.mat.scale(1/s.s.v[0],1/s.s.v[1],1/s.s.v[2]),this.mat.translate(s.a.v[0],s.a.v[1],s.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var r;r=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var n=Math.sqrt(Math.pow(r[0],2)+Math.pow(r[1],2)+Math.pow(r[2],2)),o=[r[0]/n,r[1]/n,r[2]/n],a=Math.sqrt(o[2]*o[2]+o[0]*o[0]),h=Math.atan2(o[1],a),l=Math.atan2(o[0],-o[2]);this.mat.rotateY(l).rotateX(-h)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var c=!this._prevMat.equals(this.mat);if((c||this.pe._mdf)&&this.comp.threeDElements){var u,p,d;for(e=this.comp.threeDElements.length,t=0;t<e;t+=1)if("3d"===(u=this.comp.threeDElements[t]).type){if(c){var f=this.mat.toCSS();(d=u.container.style).transform=f,d.webkitTransform=f}this.pe._mdf&&((p=u.perspectiveElem.style).perspective=this.pe.v+"px",p.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(t){this.prepareProperties(t,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var t=this.globalData.getAssetsPath(this.assetData),e=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",t),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(e),e.crossOrigin="anonymous",e.src=t,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(t,e){var i=t.getBaseElement();if(i){var s=this.layers[e];if(s.ddd&&this.supports3d)this.addTo3dContainer(i,e);else if(this.threeDElements)this.addTo3dContainer(i,e);else{for(var r,n,o=0;o<e;)this.elements[o]&&!0!==this.elements[o]&&this.elements[o].getBaseElement&&(n=this.elements[o],r=(this.layers[o].ddd?this.getThreeDContainerByPos(o):n.getBaseElement())||r),o+=1;r?s.ddd&&this.supports3d||this.layerElement.insertBefore(i,r):s.ddd&&this.supports3d||this.layerElement.appendChild(i)}}},HybridRendererBase.prototype.createShape=function(t){return this.supports3d?new HShapeElement(t,this.globalData,this):new SVGShapeElement(t,this.globalData,this)},HybridRendererBase.prototype.createText=function(t){return this.supports3d?new HTextElement(t,this.globalData,this):new SVGTextLottieElement(t,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(t){return this.camera=new HCameraElement(t,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(t){return this.supports3d?new HImageElement(t,this.globalData,this):new IImageElement(t,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(t){return this.supports3d?new HSolidElement(t,this.globalData,this):new ISolidElement(t,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(t){for(var e=0,i=this.threeDElements.length;e<i;){if(this.threeDElements[e].startPos<=t&&this.threeDElements[e].endPos>=t)return this.threeDElements[e].perspectiveElem;e+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(t,e){var i,s,r=createTag("div");styleDiv(r);var n=createTag("div");if(styleDiv(n),"3d"===e){(i=r.style).width=this.globalData.compSize.w+"px",i.height=this.globalData.compSize.h+"px";var o="50% 50%";i.webkitTransformOrigin=o,i.mozTransformOrigin=o,i.transformOrigin=o;var a="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(s=n.style).transform=a,s.webkitTransform=a}r.appendChild(n);var h={container:n,perspectiveElem:r,startPos:t,endPos:t,type:e};return this.threeDElements.push(h),h},HybridRendererBase.prototype.build3dContainers=function(){var t,e,i=this.layers.length,s="";for(t=0;t<i;t+=1)this.layers[t].ddd&&3!==this.layers[t].ty?("3d"!==s&&(s="3d",e=this.createThreeDContainer(t,"3d")),e.endPos=Math.max(e.endPos,t)):("2d"!==s&&(s="2d",e=this.createThreeDContainer(t,"2d")),e.endPos=Math.max(e.endPos,t));for(t=(i=this.threeDElements.length)-1;t>=0;t-=1)this.resizerElem.appendChild(this.threeDElements[t].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(t,e){for(var i=0,s=this.threeDElements.length;i<s;){if(e<=this.threeDElements[i].endPos){for(var r,n=this.threeDElements[i].startPos;n<e;)this.elements[n]&&this.elements[n].getBaseElement&&(r=this.elements[n].getBaseElement()),n+=1;r?this.threeDElements[i].container.insertBefore(t,r):this.threeDElements[i].container.appendChild(t);break}i+=1}},HybridRendererBase.prototype.configAnimation=function(t){var e=createTag("div"),i=this.animationItem.wrapper,s=e.style;s.width=t.w+"px",s.height=t.h+"px",this.resizerElem=e,styleDiv(e),s.transformStyle="flat",s.mozTransformStyle="flat",s.webkitTransformStyle="flat",this.renderConfig.className&&e.setAttribute("class",this.renderConfig.className),i.appendChild(e),s.overflow="hidden";var r=createNS("svg");r.setAttribute("width","1"),r.setAttribute("height","1"),styleDiv(r),this.resizerElem.appendChild(r);var n=createNS("defs");r.appendChild(n),this.data=t,this.setupGlobalData(t,r),this.globalData.defs=n,this.layers=t.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){var t;this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e=this.layers?this.layers.length:0;for(t=0;t<e;t+=1)this.elements[t]&&this.elements[t].destroy&&this.elements[t].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var t,e,i,s,r=this.animationItem.wrapper.offsetWidth,n=this.animationItem.wrapper.offsetHeight,o=r/n;this.globalData.compSize.w/this.globalData.compSize.h>o?(t=r/this.globalData.compSize.w,e=r/this.globalData.compSize.w,i=0,s=(n-this.globalData.compSize.h*(r/this.globalData.compSize.w))/2):(t=n/this.globalData.compSize.h,e=n/this.globalData.compSize.h,i=(r-this.globalData.compSize.w*(n/this.globalData.compSize.h))/2,s=0);var a=this.resizerElem.style;a.webkitTransform="matrix3d("+t+",0,0,0,0,"+e+",0,0,0,0,1,0,"+i+","+s+",0,1)",a.transform=a.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var t,e=this.globalData.compSize.w,i=this.globalData.compSize.h,s=this.threeDElements.length;for(t=0;t<s;t+=1){var r=this.threeDElements[t].perspectiveElem.style;r.webkitPerspective=Math.sqrt(Math.pow(e,2)+Math.pow(i,2))+"px",r.perspective=r.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(t){var e,i=t.length,s=createTag("div");for(e=0;e<i;e+=1)if(t[e].xt){var r=this.createComp(t[e],s,this.globalData.comp,null);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(t,e){for(var i,s=0;s<e;)this.elements[s]&&this.elements[s].getBaseElement&&(i=this.elements[s].getBaseElement()),s+=1;i?this.layerElement.insertBefore(t,i):this.layerElement.appendChild(t)},HCompElement.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(t){return this.supports3d?new HCompElement(t,this.globalData,this):new SVGCompElement(t,this.globalData,this)};var CompExpressionInterface=function(t){function e(e){for(var i=0,s=t.layers.length;i<s;){if(t.layers[i].nm===e||t.layers[i].ind===e)return t.elements[i].layerInterface;i+=1}return null}return Object.defineProperty(e,"_name",{value:t.data.nm}),e.layer=e,e.pixelAspect=1,e.height=t.data.h||t.globalData.compSize.h,e.width=t.data.w||t.globalData.compSize.w,e.pixelAspect=1,e.frameDuration=1/t.globalData.frameRate,e.displayStartTime=0,e.numLayers=t.layers.length,e};function _typeof$2(t){return _typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$2(t)}function seedRandom(t,e){var i,s=this,r=256,n="random",o=e.pow(r,6),a=e.pow(2,52),h=2*a,l=255;function c(t){var e,i=t.length,s=this,n=0,o=s.i=s.j=0,a=s.S=[];for(i||(t=[i++]);n<r;)a[n]=n++;for(n=0;n<r;n++)a[n]=a[o=l&o+t[n%i]+(e=a[n])],a[o]=e;s.g=function(t){for(var e,i=0,n=s.i,o=s.j,a=s.S;t--;)e=a[n=l&n+1],i=i*r+a[l&(a[n]=a[o=l&o+e])+(a[o]=e)];return s.i=n,s.j=o,i}}function u(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function p(t,e){var i,s=[],r=_typeof$2(t);if(e&&"object"==r)for(i in t)try{s.push(p(t[i],e-1))}catch(t){}return s.length?s:"string"==r?t:t+"\0"}function d(t,e){for(var i,s=t+"",r=0;r<s.length;)e[l&r]=l&(i^=19*e[l&r])+s.charCodeAt(r++);return f(e)}function f(t){return String.fromCharCode.apply(0,t)}e["seed"+n]=function(l,m,g){var y=[],v=d(p((m=!0===m?{entropy:!0}:m||{}).entropy?[l,f(t)]:null===l?function(){try{i;var e=new Uint8Array(r);return(s.crypto||s.msCrypto).getRandomValues(e),f(e)}catch(e){var n=s.navigator,o=n&&n.plugins;return[+new Date,s,o,s.screen,f(t)]}}():l,3),y),b=new c(y),S=function(){for(var t=b.g(6),e=o,i=0;t<a;)t=(t+i)*r,e*=r,i=b.g(1);for(;t>=h;)t/=2,e/=2,i>>>=1;return(t+i)/e};return S.int32=function(){return 0|b.g(4)},S.quick=function(){return b.g(4)/4294967296},S.double=S,d(f(b.S),t),(m.pass||g||function(t,i,s,r){return r&&(r.S&&u(r,b),t.state=function(){return u(b,{})}),s?(e[n]=t,i):t})(S,v,"global"in m?m.global:this==e,m.state)},d(e.random(),t)}function initialize$2(t){seedRandom([],t)}var propTypes={SHAPE:"shape"};function _typeof$1(t){return _typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof$1(t)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(t){return t.constructor===Array||t.constructor===Float32Array}function isNumerable(t,e){return"number"===t||e instanceof Number||"boolean"===t||"string"===t}function $bm_neg(t){var e=_typeof$1(t);if("number"===e||t instanceof Number||"boolean"===e)return-t;if($bm_isInstanceOfArray(t)){var i,s=t.length,r=[];for(i=0;i<s;i+=1)r[i]=-t[i];return r}return t.propType?t.v:-t}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(t,e){var i=_typeof$1(t),s=_typeof$1(e);if(isNumerable(i,t)&&isNumerable(s,e)||"string"===i||"string"===s)return t+e;if($bm_isInstanceOfArray(t)&&isNumerable(s,e))return(t=t.slice(0))[0]+=e,t;if(isNumerable(i,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t+e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var r=0,n=t.length,o=e.length,a=[];r<n||r<o;)("number"==typeof t[r]||t[r]instanceof Number)&&("number"==typeof e[r]||e[r]instanceof Number)?a[r]=t[r]+e[r]:a[r]=void 0===e[r]?t[r]:t[r]||e[r],r+=1;return a}return 0}var add=sum;function sub(t,e){var i=_typeof$1(t),s=_typeof$1(e);if(isNumerable(i,t)&&isNumerable(s,e))return"string"===i&&(t=parseInt(t,10)),"string"===s&&(e=parseInt(e,10)),t-e;if($bm_isInstanceOfArray(t)&&isNumerable(s,e))return(t=t.slice(0))[0]-=e,t;if(isNumerable(i,t)&&$bm_isInstanceOfArray(e))return(e=e.slice(0))[0]=t-e[0],e;if($bm_isInstanceOfArray(t)&&$bm_isInstanceOfArray(e)){for(var r=0,n=t.length,o=e.length,a=[];r<n||r<o;)("number"==typeof t[r]||t[r]instanceof Number)&&("number"==typeof e[r]||e[r]instanceof Number)?a[r]=t[r]-e[r]:a[r]=void 0===e[r]?t[r]:t[r]||e[r],r+=1;return a}return 0}function mul(t,e){var i,s,r,n=_typeof$1(t),o=_typeof$1(e);if(isNumerable(n,t)&&isNumerable(o,e))return t*e;if($bm_isInstanceOfArray(t)&&isNumerable(o,e)){for(r=t.length,i=createTypedArray("float32",r),s=0;s<r;s+=1)i[s]=t[s]*e;return i}if(isNumerable(n,t)&&$bm_isInstanceOfArray(e)){for(r=e.length,i=createTypedArray("float32",r),s=0;s<r;s+=1)i[s]=t*e[s];return i}return 0}function div(t,e){var i,s,r,n=_typeof$1(t),o=_typeof$1(e);if(isNumerable(n,t)&&isNumerable(o,e))return t/e;if($bm_isInstanceOfArray(t)&&isNumerable(o,e)){for(r=t.length,i=createTypedArray("float32",r),s=0;s<r;s+=1)i[s]=t[s]/e;return i}if(isNumerable(n,t)&&$bm_isInstanceOfArray(e)){for(r=e.length,i=createTypedArray("float32",r),s=0;s<r;s+=1)i[s]=t/e[s];return i}return 0}function mod(t,e){return"string"==typeof t&&(t=parseInt(t,10)),"string"==typeof e&&(e=parseInt(e,10)),t%e}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(t,e,i){if(e>i){var s=i;i=e,e=s}return Math.min(Math.max(t,e),i)}function radiansToDegrees(t){return t/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(t){return t*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(t,e){if("number"==typeof t||t instanceof Number)return e=e||0,Math.abs(t-e);var i;e||(e=helperLengthArray);var s=Math.min(t.length,e.length),r=0;for(i=0;i<s;i+=1)r+=Math.pow(e[i]-t[i],2);return Math.sqrt(r)}function normalize(t){return div(t,length(t))}function rgbToHsl(t){var e,i,s=t[0],r=t[1],n=t[2],o=Math.max(s,r,n),a=Math.min(s,r,n),h=(o+a)/2;if(o===a)e=0,i=0;else{var l=o-a;switch(i=h>.5?l/(2-o-a):l/(o+a),o){case s:e=(r-n)/l+(r<n?6:0);break;case r:e=(n-s)/l+2;break;case n:e=(s-r)/l+4}e/=6}return[e,i,h,t[3]]}function hue2rgb(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function hslToRgb(t){var e,i,s,r=t[0],n=t[1],o=t[2];if(0===n)e=o,s=o,i=o;else{var a=o<.5?o*(1+n):o+n-o*n,h=2*o-a;e=hue2rgb(h,a,r+1/3),i=hue2rgb(h,a,r),s=hue2rgb(h,a,r-1/3)}return[e,i,s,t[3]]}function linear(t,e,i,s,r){if(void 0!==s&&void 0!==r||(s=e,r=i,e=0,i=1),i<e){var n=i;i=e,e=n}if(t<=e)return s;if(t>=i)return r;var o,a=i===e?0:(t-e)/(i-e);if(!s.length)return s+(r-s)*a;var h=s.length,l=createTypedArray("float32",h);for(o=0;o<h;o+=1)l[o]=s[o]+(r[o]-s[o])*a;return l}function random(t,e){if(void 0===e&&(void 0===t?(t=0,e=1):(e=t,t=void 0)),e.length){var i,s=e.length;t||(t=createTypedArray("float32",s));var r=createTypedArray("float32",s),n=BMMath.random();for(i=0;i<s;i+=1)r[i]=t[i]+n*(e[i]-t[i]);return r}return void 0===t&&(t=0),t+BMMath.random()*(e-t)}function createPath(t,e,i,s){var r,n=t.length,o=shapePool.newElement();o.setPathData(!!s,n);var a,h,l=[0,0];for(r=0;r<n;r+=1)a=e&&e[r]?e[r]:l,h=i&&i[r]?i[r]:l,o.setTripleAt(t[r][0],t[r][1],h[0]+t[r][0],h[1]+t[r][1],a[0]+t[r][0],a[1]+t[r][1],r,!0);return o}function initiateExpression(elem,data,property){function noOp(t){return t}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(t,e){var i,s,r=this.pv.length?this.pv.length:1,n=createTypedArray("float32",r),o=Math.floor(5*time);for(i=0,s=0;i<o;){for(s=0;s<r;s+=1)n[s]+=-e+2*e*BMMath.random();i+=1}var a=5*time,h=a-Math.floor(a),l=createTypedArray("float32",r);if(r>1){for(s=0;s<r;s+=1)l[s]=this.pv[s]+n[s]+(-e+2*e*BMMath.random())*h;return l}return this.pv+n[0]+(-e+2*e*BMMath.random())*h}.bind(this);function loopInDuration(t,e){return loopIn(t,e,!0)}function loopOutDuration(t,e){return loopOut(t,e,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(t,e){var i=[e[0]-t[0],e[1]-t[1],e[2]-t[2]],s=Math.atan2(i[0],Math.sqrt(i[1]*i[1]+i[2]*i[2]))/degToRads;return[-Math.atan2(i[1],i[2])/degToRads,s,0]}function easeOut(t,e,i,s,r){return applyEase(easeOutBez,t,e,i,s,r)}function easeIn(t,e,i,s,r){return applyEase(easeInBez,t,e,i,s,r)}function ease(t,e,i,s,r){return applyEase(easeInOutBez,t,e,i,s,r)}function applyEase(t,e,i,s,r,n){void 0===r?(r=i,n=s):e=(e-i)/(s-i),e>1?e=1:e<0&&(e=0);var o=t(e);if($bm_isInstanceOfArray(r)){var a,h=r.length,l=createTypedArray("float32",h);for(a=0;a<h;a+=1)l[a]=(n[a]-r[a])*o+r[a];return l}return(n-r)*o+r}function nearestKey(t){var e,i,s,r=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(i=-1,(t*=elem.comp.globalData.frameRate)<data.k[0].t)i=1,s=data.k[0].t;else{for(e=0;e<r-1;e+=1){if(t===data.k[e].t){i=e+1,s=data.k[e].t;break}if(t>data.k[e].t&&t<data.k[e+1].t){t-data.k[e].t>data.k[e+1].t-t?(i=e+2,s=data.k[e+1].t):(i=e+1,s=data.k[e].t);break}}-1===i&&(i=e+1,s=data.k[e].t)}else i=0,s=0;var n={};return n.index=i,n.time=s/elem.comp.globalData.frameRate,n}function key(t){var e,i,s;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+t);t-=1,e={time:data.k[t].t/elem.comp.globalData.frameRate,value:[]};var r=Object.prototype.hasOwnProperty.call(data.k[t],"s")?data.k[t].s:data.k[t-1].e;for(s=r.length,i=0;i<s;i+=1)e[i]=r[i],e.value[i]=r[i];return e}function framesToTime(t,e){return e||(e=elem.comp.globalData.frameRate),t/e}function timeToFrames(t,e){return t||0===t||(t=time),e||(e=elem.comp.globalData.frameRate),t*e}function seedRandom(t){BMMath.seedrandom(randSeed+t)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(t,e){return"string"==typeof value?void 0===e?value.substring(t):value.substring(t,e):""}function substr(t,e){return"string"==typeof value?void 0===e?value.substr(t):value.substr(t,e):""}function posterizeTime(t){time=0===t?0:Math.floor(time*t)/t,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(t){return value=t,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var t={initExpressions:function(t){var e=0,i=[];t.renderer.compInterface=CompExpressionInterface(t.renderer),t.renderer.globalData.projectInterface.registerComposition(t.renderer),t.renderer.globalData.pushExpression=function(){e+=1},t.renderer.globalData.popExpression=function(){0==(e-=1)&&function(){var t,e=i.length;for(t=0;t<e;t+=1)i[t].release();i.length=0}()},t.renderer.globalData.registerExpressionProperty=function(t){-1===i.indexOf(t)&&i.push(t)}}};return t.resetFrame=ExpressionManager.resetFrame,t}(),MaskManagerInterface=function(){function t(t,e){this._mask=t,this._data=e}return Object.defineProperty(t.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(t.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(e){var i,s=createSizedArray(e.viewData.length),r=e.viewData.length;for(i=0;i<r;i+=1)s[i]=new t(e.viewData[i],e.masksProperties[i]);return function(t){for(i=0;i<r;){if(e.masksProperties[i].nm===t)return s[i];i+=1}return null}}}(),ExpressionPropertyInterface=function(){var t={pv:0,v:0,mult:1},e={pv:[0,0,0],v:[0,0,0],mult:1};function i(t,e,i){Object.defineProperty(t,"velocity",{get:function(){return e.getVelocityAtTime(e.comp.currentFrame)}}),t.numKeys=e.keyframes?e.keyframes.length:0,t.key=function(s){if(!t.numKeys)return 0;var r;r="s"in e.keyframes[s-1]?e.keyframes[s-1].s:"e"in e.keyframes[s-2]?e.keyframes[s-2].e:e.keyframes[s-2].s;var n="unidimensional"===i?new Number(r):Object.assign({},r);return n.time=e.keyframes[s-1].t/e.elem.comp.globalData.frameRate,n.value="unidimensional"===i?r[0]:r,n},t.valueAtTime=e.getValueAtTime,t.speedAtTime=e.getSpeedAtTime,t.velocityAtTime=e.getVelocityAtTime,t.propertyGroup=e.propertyGroup}function s(){return t}return function(r){return r?"unidimensional"===r.propType?function(e){e&&"pv"in e||(e=t);var s=1/e.mult,r=e.pv*s,n=new Number(r);return n.value=r,i(n,e,"unidimensional"),function(){return e.k&&e.getValue(),r=e.v*s,n.value!==r&&((n=new Number(r)).value=r,i(n,e,"unidimensional")),n}}(r):function(t){t&&"pv"in t||(t=e);var s=1/t.mult,r=t.data&&t.data.l||t.pv.length,n=createTypedArray("float32",r),o=createTypedArray("float32",r);return n.value=o,i(n,t,"multidimensional"),function(){t.k&&t.getValue();for(var e=0;e<r;e+=1)o[e]=t.v[e]*s,n[e]=o[e];return n}}(r):s}}(),TransformExpressionInterface=function(t){function e(t){switch(t){case"scale":case"Scale":case"ADBE Scale":case 6:return e.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return e.rotation;case"ADBE Rotate X":return e.xRotation;case"ADBE Rotate Y":return e.yRotation;case"position":case"Position":case"ADBE Position":case 2:return e.position;case"ADBE Position_0":return e.xPosition;case"ADBE Position_1":return e.yPosition;case"ADBE Position_2":return e.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return e.anchorPoint;case"opacity":case"Opacity":case 11:return e.opacity;default:return null}}var i,s,r,n;return Object.defineProperty(e,"rotation",{get:ExpressionPropertyInterface(t.r||t.rz)}),Object.defineProperty(e,"zRotation",{get:ExpressionPropertyInterface(t.rz||t.r)}),Object.defineProperty(e,"xRotation",{get:ExpressionPropertyInterface(t.rx)}),Object.defineProperty(e,"yRotation",{get:ExpressionPropertyInterface(t.ry)}),Object.defineProperty(e,"scale",{get:ExpressionPropertyInterface(t.s)}),t.p?n=ExpressionPropertyInterface(t.p):(i=ExpressionPropertyInterface(t.px),s=ExpressionPropertyInterface(t.py),t.pz&&(r=ExpressionPropertyInterface(t.pz))),Object.defineProperty(e,"position",{get:function(){return t.p?n():[i(),s(),r?r():0]}}),Object.defineProperty(e,"xPosition",{get:ExpressionPropertyInterface(t.px)}),Object.defineProperty(e,"yPosition",{get:ExpressionPropertyInterface(t.py)}),Object.defineProperty(e,"zPosition",{get:ExpressionPropertyInterface(t.pz)}),Object.defineProperty(e,"anchorPoint",{get:ExpressionPropertyInterface(t.a)}),Object.defineProperty(e,"opacity",{get:ExpressionPropertyInterface(t.o)}),Object.defineProperty(e,"skew",{get:ExpressionPropertyInterface(t.sk)}),Object.defineProperty(e,"skewAxis",{get:ExpressionPropertyInterface(t.sa)}),Object.defineProperty(e,"orientation",{get:ExpressionPropertyInterface(t.or)}),e},LayerExpressionInterface=function(){function t(t){var e=new Matrix;return void 0!==t?this._elem.finalTransform.mProp.getValueAtTime(t).clone(e):this._elem.finalTransform.mProp.applyToMatrix(e),e}function e(t,e){var i=this.getMatrix(e);return i.props[12]=0,i.props[13]=0,i.props[14]=0,this.applyPoint(i,t)}function i(t,e){var i=this.getMatrix(e);return this.applyPoint(i,t)}function s(t,e){var i=this.getMatrix(e);return i.props[12]=0,i.props[13]=0,i.props[14]=0,this.invertPoint(i,t)}function r(t,e){var i=this.getMatrix(e);return this.invertPoint(i,t)}function n(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,s=this._elem.hierarchy.length;for(i=0;i<s;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(t)}return t.applyToPointArray(e[0],e[1],e[2]||0)}function o(t,e){if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,s=this._elem.hierarchy.length;for(i=0;i<s;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(t)}return t.inversePoint(e)}function a(t){var e=new Matrix;if(e.reset(),this._elem.finalTransform.mProp.applyToMatrix(e),this._elem.hierarchy&&this._elem.hierarchy.length){var i,s=this._elem.hierarchy.length;for(i=0;i<s;i+=1)this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(e);return e.inversePoint(t)}return e.inversePoint(t)}function h(){return[1,1,1,1]}return function(l){var c;function u(t){switch(t){case"ADBE Root Vectors Group":case"Contents":case 2:return u.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return c;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return u.effect;case"ADBE Text Properties":return u.textInterface;default:return null}}u.getMatrix=t,u.invertPoint=o,u.applyPoint=n,u.toWorld=i,u.toWorldVec=e,u.fromWorld=r,u.fromWorldVec=s,u.toComp=i,u.fromComp=a,u.sampleImage=h,u.sourceRectAtTime=l.sourceRectAtTime.bind(l),u._elem=l;var p=getDescriptor(c=TransformExpressionInterface(l.finalTransform.mProp),"anchorPoint");return Object.defineProperties(u,{hasParent:{get:function(){return l.hierarchy.length}},parent:{get:function(){return l.hierarchy[0].layerInterface}},rotation:getDescriptor(c,"rotation"),scale:getDescriptor(c,"scale"),position:getDescriptor(c,"position"),opacity:getDescriptor(c,"opacity"),anchorPoint:p,anchor_point:p,transform:{get:function(){return c}},active:{get:function(){return l.isInRange}}}),u.startTime=l.data.st,u.index=l.data.ind,u.source=l.data.refId,u.height=0===l.data.ty?l.data.h:100,u.width=0===l.data.ty?l.data.w:100,u.inPoint=l.data.ip/l.comp.globalData.frameRate,u.outPoint=l.data.op/l.comp.globalData.frameRate,u._name=l.data.nm,u.registerMaskInterface=function(t){u.mask=new MaskManagerInterface(t,l)},u.registerEffectsInterface=function(t){u.effect=t},u}}(),propertyGroupFactory=function(t,e){return function(i){return(i=void 0===i?1:i)<=0?t:e(i-1)}},PropertyInterface=function(t,e){var i={_name:t};return function(t){return(t=void 0===t?1:t)<=0?i:e(t-1)}},EffectsExpressionInterface=function(){function t(i,s,r,n){function o(t){for(var e=i.ef,s=0,r=e.length;s<r;){if(t===e[s].nm||t===e[s].mn||t===e[s].ix)return 5===e[s].ty?l[s]:l[s]();s+=1}throw new Error}var a,h=propertyGroupFactory(o,r),l=[],c=i.ef.length;for(a=0;a<c;a+=1)5===i.ef[a].ty?l.push(t(i.ef[a],s.effectElements[a],s.effectElements[a].propertyGroup,n)):l.push(e(s.effectElements[a],i.ef[a].ty,n,h));return"ADBE Color Control"===i.mn&&Object.defineProperty(o,"color",{get:function(){return l[0]()}}),Object.defineProperties(o,{numProperties:{get:function(){return i.np}},_name:{value:i.nm},propertyGroup:{value:h}}),o.enabled=0!==i.en,o.active=o.enabled,o}function e(t,e,i,s){var r=ExpressionPropertyInterface(t.p);return t.p.setGroupProperty&&t.p.setGroupProperty(PropertyInterface("",s)),function(){return 10===e?i.comp.compInterface(t.p.v):r()}}return{createEffectsInterface:function(e,i){if(e.effectsManager){var s,r=[],n=e.data.ef,o=e.effectsManager.effectElements.length;for(s=0;s<o;s+=1)r.push(t(n[s],e.effectsManager.effectElements[s],i,e));var a=e.data.ef||[],h=function(t){for(s=0,o=a.length;s<o;){if(t===a[s].nm||t===a[s].mn||t===a[s].ix)return r[s];s+=1}return null};return Object.defineProperty(h,"numProperties",{get:function(){return a.length}}),h}return null}}}(),ShapePathInterface=function(t,e,i){var s=e.sh;function r(t){return"Shape"===t||"shape"===t||"Path"===t||"path"===t||"ADBE Vector Shape"===t||2===t?r.path:null}var n=propertyGroupFactory(r,i);return s.setGroupProperty(PropertyInterface("Path",n)),Object.defineProperties(r,{path:{get:function(){return s.k&&s.getValue(),s}},shape:{get:function(){return s.k&&s.getValue(),s}},_name:{value:t.nm},ix:{value:t.ix},propertyIndex:{value:t.ix},mn:{value:t.mn},propertyGroup:{value:i}}),r},ShapeExpressionInterface=function(){function t(t,o,p){var d,f=[],m=t?t.length:0;for(d=0;d<m;d+=1)"gr"===t[d].ty?f.push(e(t[d],o[d],p)):"fl"===t[d].ty?f.push(i(t[d],o[d],p)):"st"===t[d].ty?f.push(r(t[d],o[d],p)):"tm"===t[d].ty?f.push(n(t[d],o[d],p)):"tr"===t[d].ty||("el"===t[d].ty?f.push(a(t[d],o[d],p)):"sr"===t[d].ty?f.push(h(t[d],o[d],p)):"sh"===t[d].ty?f.push(ShapePathInterface(t[d],o[d],p)):"rc"===t[d].ty?f.push(l(t[d],o[d],p)):"rd"===t[d].ty?f.push(c(t[d],o[d],p)):"rp"===t[d].ty?f.push(u(t[d],o[d],p)):"gf"===t[d].ty?f.push(s(t[d],o[d],p)):f.push((t[d],o[d],function(){return null})));return f}function e(e,i,s){var r=function(t){switch(t){case"ADBE Vectors Group":case"Contents":case 2:return r.content;default:return r.transform}};r.propertyGroup=propertyGroupFactory(r,s);var n=function(e,i,s){var r,n=function(t){for(var e=0,i=r.length;e<i;){if(r[e]._name===t||r[e].mn===t||r[e].propertyIndex===t||r[e].ix===t||r[e].ind===t)return r[e];e+=1}return"number"==typeof t?r[t-1]:null};n.propertyGroup=propertyGroupFactory(n,s),r=t(e.it,i.it,n.propertyGroup),n.numProperties=r.length;var a=o(e.it[e.it.length-1],i.it[i.it.length-1],n.propertyGroup);return n.transform=a,n.propertyIndex=e.cix,n._name=e.nm,n}(e,i,r.propertyGroup),a=o(e.it[e.it.length-1],i.it[i.it.length-1],r.propertyGroup);return r.content=n,r.transform=a,Object.defineProperty(r,"_name",{get:function(){return e.nm}}),r.numProperties=e.np,r.propertyIndex=e.ix,r.nm=e.nm,r.mn=e.mn,r}function i(t,e,i){function s(t){return"Color"===t||"color"===t?s.color:"Opacity"===t||"opacity"===t?s.opacity:null}return Object.defineProperties(s,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",i)),e.o.setGroupProperty(PropertyInterface("Opacity",i)),s}function s(t,e,i){function s(t){return"Start Point"===t||"start point"===t?s.startPoint:"End Point"===t||"end point"===t?s.endPoint:"Opacity"===t||"opacity"===t?s.opacity:null}return Object.defineProperties(s,{startPoint:{get:ExpressionPropertyInterface(e.s)},endPoint:{get:ExpressionPropertyInterface(e.e)},opacity:{get:ExpressionPropertyInterface(e.o)},type:{get:function(){return"a"}},_name:{value:t.nm},mn:{value:t.mn}}),e.s.setGroupProperty(PropertyInterface("Start Point",i)),e.e.setGroupProperty(PropertyInterface("End Point",i)),e.o.setGroupProperty(PropertyInterface("Opacity",i)),s}function r(t,e,i){var s,r=propertyGroupFactory(l,i),n=propertyGroupFactory(h,r);function o(i){Object.defineProperty(h,t.d[i].nm,{get:ExpressionPropertyInterface(e.d.dataProps[i].p)})}var a=t.d?t.d.length:0,h={};for(s=0;s<a;s+=1)o(s),e.d.dataProps[s].p.setGroupProperty(n);function l(t){return"Color"===t||"color"===t?l.color:"Opacity"===t||"opacity"===t?l.opacity:"Stroke Width"===t||"stroke width"===t?l.strokeWidth:null}return Object.defineProperties(l,{color:{get:ExpressionPropertyInterface(e.c)},opacity:{get:ExpressionPropertyInterface(e.o)},strokeWidth:{get:ExpressionPropertyInterface(e.w)},dash:{get:function(){return h}},_name:{value:t.nm},mn:{value:t.mn}}),e.c.setGroupProperty(PropertyInterface("Color",r)),e.o.setGroupProperty(PropertyInterface("Opacity",r)),e.w.setGroupProperty(PropertyInterface("Stroke Width",r)),l}function n(t,e,i){function s(e){return e===t.e.ix||"End"===e||"end"===e?s.end:e===t.s.ix?s.start:e===t.o.ix?s.offset:null}var r=propertyGroupFactory(s,i);return s.propertyIndex=t.ix,e.s.setGroupProperty(PropertyInterface("Start",r)),e.e.setGroupProperty(PropertyInterface("End",r)),e.o.setGroupProperty(PropertyInterface("Offset",r)),s.propertyIndex=t.ix,s.propertyGroup=i,Object.defineProperties(s,{start:{get:ExpressionPropertyInterface(e.s)},end:{get:ExpressionPropertyInterface(e.e)},offset:{get:ExpressionPropertyInterface(e.o)},_name:{value:t.nm}}),s.mn=t.mn,s}function o(t,e,i){function s(e){return t.a.ix===e||"Anchor Point"===e?s.anchorPoint:t.o.ix===e||"Opacity"===e?s.opacity:t.p.ix===e||"Position"===e?s.position:t.r.ix===e||"Rotation"===e||"ADBE Vector Rotation"===e?s.rotation:t.s.ix===e||"Scale"===e?s.scale:t.sk&&t.sk.ix===e||"Skew"===e?s.skew:t.sa&&t.sa.ix===e||"Skew Axis"===e?s.skewAxis:null}var r=propertyGroupFactory(s,i);return e.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",r)),e.transform.mProps.p.setGroupProperty(PropertyInterface("Position",r)),e.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",r)),e.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",r)),e.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",r)),e.transform.mProps.sk&&(e.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",r)),e.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",r))),e.transform.op.setGroupProperty(PropertyInterface("Opacity",r)),Object.defineProperties(s,{opacity:{get:ExpressionPropertyInterface(e.transform.mProps.o)},position:{get:ExpressionPropertyInterface(e.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(e.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(e.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(e.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(e.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(e.transform.mProps.sa)},_name:{value:t.nm}}),s.ty="tr",s.mn=t.mn,s.propertyGroup=i,s}function a(t,e,i){function s(e){return t.p.ix===e?s.position:t.s.ix===e?s.size:null}var r=propertyGroupFactory(s,i);s.propertyIndex=t.ix;var n="tm"===e.sh.ty?e.sh.prop:e.sh;return n.s.setGroupProperty(PropertyInterface("Size",r)),n.p.setGroupProperty(PropertyInterface("Position",r)),Object.defineProperties(s,{size:{get:ExpressionPropertyInterface(n.s)},position:{get:ExpressionPropertyInterface(n.p)},_name:{value:t.nm}}),s.mn=t.mn,s}function h(t,e,i){function s(e){return t.p.ix===e?s.position:t.r.ix===e?s.rotation:t.pt.ix===e?s.points:t.or.ix===e||"ADBE Vector Star Outer Radius"===e?s.outerRadius:t.os.ix===e?s.outerRoundness:!t.ir||t.ir.ix!==e&&"ADBE Vector Star Inner Radius"!==e?t.is&&t.is.ix===e?s.innerRoundness:null:s.innerRadius}var r=propertyGroupFactory(s,i),n="tm"===e.sh.ty?e.sh.prop:e.sh;return s.propertyIndex=t.ix,n.or.setGroupProperty(PropertyInterface("Outer Radius",r)),n.os.setGroupProperty(PropertyInterface("Outer Roundness",r)),n.pt.setGroupProperty(PropertyInterface("Points",r)),n.p.setGroupProperty(PropertyInterface("Position",r)),n.r.setGroupProperty(PropertyInterface("Rotation",r)),t.ir&&(n.ir.setGroupProperty(PropertyInterface("Inner Radius",r)),n.is.setGroupProperty(PropertyInterface("Inner Roundness",r))),Object.defineProperties(s,{position:{get:ExpressionPropertyInterface(n.p)},rotation:{get:ExpressionPropertyInterface(n.r)},points:{get:ExpressionPropertyInterface(n.pt)},outerRadius:{get:ExpressionPropertyInterface(n.or)},outerRoundness:{get:ExpressionPropertyInterface(n.os)},innerRadius:{get:ExpressionPropertyInterface(n.ir)},innerRoundness:{get:ExpressionPropertyInterface(n.is)},_name:{value:t.nm}}),s.mn=t.mn,s}function l(t,e,i){function s(e){return t.p.ix===e?s.position:t.r.ix===e?s.roundness:t.s.ix===e||"Size"===e||"ADBE Vector Rect Size"===e?s.size:null}var r=propertyGroupFactory(s,i),n="tm"===e.sh.ty?e.sh.prop:e.sh;return s.propertyIndex=t.ix,n.p.setGroupProperty(PropertyInterface("Position",r)),n.s.setGroupProperty(PropertyInterface("Size",r)),n.r.setGroupProperty(PropertyInterface("Rotation",r)),Object.defineProperties(s,{position:{get:ExpressionPropertyInterface(n.p)},roundness:{get:ExpressionPropertyInterface(n.r)},size:{get:ExpressionPropertyInterface(n.s)},_name:{value:t.nm}}),s.mn=t.mn,s}function c(t,e,i){function s(e){return t.r.ix===e||"Round Corners 1"===e?s.radius:null}var r=propertyGroupFactory(s,i),n=e;return s.propertyIndex=t.ix,n.rd.setGroupProperty(PropertyInterface("Radius",r)),Object.defineProperties(s,{radius:{get:ExpressionPropertyInterface(n.rd)},_name:{value:t.nm}}),s.mn=t.mn,s}function u(t,e,i){function s(e){return t.c.ix===e||"Copies"===e?s.copies:t.o.ix===e||"Offset"===e?s.offset:null}var r=propertyGroupFactory(s,i),n=e;return s.propertyIndex=t.ix,n.c.setGroupProperty(PropertyInterface("Copies",r)),n.o.setGroupProperty(PropertyInterface("Offset",r)),Object.defineProperties(s,{copies:{get:ExpressionPropertyInterface(n.c)},offset:{get:ExpressionPropertyInterface(n.o)},_name:{value:t.nm}}),s.mn=t.mn,s}return function(e,i,s){var r;function n(t){if("number"==typeof t)return 0===(t=void 0===t?1:t)?s:r[t-1];for(var e=0,i=r.length;e<i;){if(r[e]._name===t)return r[e];e+=1}return null}return n.propertyGroup=propertyGroupFactory(n,(function(){return s})),r=t(e,i,n.propertyGroup),n.numProperties=r.length,n._name="Contents",n}}(),TextExpressionInterface=function(t){var e;function i(t){return"ADBE Text Document"===t?i.sourceText:null}return Object.defineProperty(i,"sourceText",{get:function(){t.textProperty.getValue();var i=t.textProperty.currentData.t;return e&&i===e.value||((e=new String(i)).value=i||new String(i),Object.defineProperty(e,"style",{get:function(){return{fillColor:t.textProperty.currentData.fc}}})),e}}),i};function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var FootageInterface=(dataInterfaceFactory=function(t){function e(t){return"Outline"===t?e.outlineInterface():null}return e._name="Outline",e.outlineInterface=function(t){var e="",i=t.getFootageData();function s(t){if(i[t])return e=t,"object"===_typeof(i=i[t])?s:i;var r=t.indexOf(e);if(-1!==r){var n=parseInt(t.substr(r+e.length),10);return"object"===_typeof(i=i[n])?s:i}return""}return function(){return e="",i=t.getFootageData(),s}}(t),e},function(t){function e(t){return"Data"===t?e.dataInterface:null}return e._name="Data",e.dataInterface=dataInterfaceFactory(t),e}),dataInterfaceFactory,interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(t){return interfaces[t]||null}var expressionHelpers={searchExpressions:function(t,e,i){e.x&&(i.k=!0,i.x=!0,i.initiateExpression=ExpressionManager.initiateExpression,i.effectsSequence.push(i.initiateExpression(t,e,i).bind(i)))},getSpeedAtTime:function(t){var e=this.getValueAtTime(t),i=this.getValueAtTime(t+-.01),s=0;if(e.length){var r;for(r=0;r<e.length;r+=1)s+=Math.pow(i[r]-e[r],2);s=100*Math.sqrt(s)}else s=0;return s},getVelocityAtTime:function(t){if(void 0!==this.vel)return this.vel;var e,i,s=-.001,r=this.getValueAtTime(t),n=this.getValueAtTime(t+s);if(r.length)for(e=createTypedArray("float32",r.length),i=0;i<r.length;i+=1)e[i]=(n[i]-r[i])/s;else e=(n-r)/s;return e},getValueAtTime:function(t){return t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<t?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(t,this._cachingAtTime),this._cachingAtTime.lastFrame=t),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(t){this.propertyGroup=t}};function addPropertyDecorator(){function t(t,e,i){if(!this.k||!this.keyframes)return this.pv;t=t?t.toLowerCase():"";var s,r,n,o,a,h=this.comp.renderedFrame,l=this.keyframes,c=l[l.length-1].t;if(h<=c)return this.pv;if(i?r=c-(s=e?Math.abs(c-this.elem.comp.globalData.frameRate*e):Math.max(0,c-this.elem.data.ip)):((!e||e>l.length-1)&&(e=l.length-1),s=c-(r=l[l.length-1-e].t)),"pingpong"===t){if(Math.floor((h-r)/s)%2!=0)return this.getValueAtTime((s-(h-r)%s+r)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var u=this.getValueAtTime(r/this.comp.globalData.frameRate,0),p=this.getValueAtTime(c/this.comp.globalData.frameRate,0),d=this.getValueAtTime(((h-r)%s+r)/this.comp.globalData.frameRate,0),f=Math.floor((h-r)/s);if(this.pv.length){for(o=(a=new Array(u.length)).length,n=0;n<o;n+=1)a[n]=(p[n]-u[n])*f+d[n];return a}return(p-u)*f+d}if("continue"===t){var m=this.getValueAtTime(c/this.comp.globalData.frameRate,0),g=this.getValueAtTime((c-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(o=(a=new Array(m.length)).length,n=0;n<o;n+=1)a[n]=m[n]+(m[n]-g[n])*((h-c)/this.comp.globalData.frameRate)/5e-4;return a}return m+(h-c)/.001*(m-g)}}return this.getValueAtTime(((h-r)%s+r)/this.comp.globalData.frameRate,0)}function e(t,e,i){if(!this.k)return this.pv;t=t?t.toLowerCase():"";var s,r,n,o,a,h=this.comp.renderedFrame,l=this.keyframes,c=l[0].t;if(h>=c)return this.pv;if(i?r=c+(s=e?Math.abs(this.elem.comp.globalData.frameRate*e):Math.max(0,this.elem.data.op-c)):((!e||e>l.length-1)&&(e=l.length-1),s=(r=l[e].t)-c),"pingpong"===t){if(Math.floor((c-h)/s)%2==0)return this.getValueAtTime(((c-h)%s+c)/this.comp.globalData.frameRate,0)}else{if("offset"===t){var u=this.getValueAtTime(c/this.comp.globalData.frameRate,0),p=this.getValueAtTime(r/this.comp.globalData.frameRate,0),d=this.getValueAtTime((s-(c-h)%s+c)/this.comp.globalData.frameRate,0),f=Math.floor((c-h)/s)+1;if(this.pv.length){for(o=(a=new Array(u.length)).length,n=0;n<o;n+=1)a[n]=d[n]-(p[n]-u[n])*f;return a}return d-(p-u)*f}if("continue"===t){var m=this.getValueAtTime(c/this.comp.globalData.frameRate,0),g=this.getValueAtTime((c+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(o=(a=new Array(m.length)).length,n=0;n<o;n+=1)a[n]=m[n]+(m[n]-g[n])*(c-h)/.001;return a}return m+(m-g)*(c-h)/.001}}return this.getValueAtTime((s-((c-h)%s+c))/this.comp.globalData.frameRate,0)}function i(t,e){if(!this.k)return this.pv;if(t=.5*(t||.4),(e=Math.floor(e||5))<=1)return this.pv;var i,s,r=this.comp.renderedFrame/this.comp.globalData.frameRate,n=r-t,o=e>1?(r+t-n)/(e-1):1,a=0,h=0;for(i=this.pv.length?createTypedArray("float32",this.pv.length):0;a<e;){if(s=this.getValueAtTime(n+a*o),this.pv.length)for(h=0;h<this.pv.length;h+=1)i[h]+=s[h];else i+=s;a+=1}if(this.pv.length)for(h=0;h<this.pv.length;h+=1)i[h]/=e;else i/=e;return i}function s(t){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var e=this._transformCachingAtTime.v;if(e.cloneFromProps(this.pre.props),this.appliedTransformations<1){var i=this.a.getValueAtTime(t);e.translate(-i[0]*this.a.mult,-i[1]*this.a.mult,i[2]*this.a.mult)}if(this.appliedTransformations<2){var s=this.s.getValueAtTime(t);e.scale(s[0]*this.s.mult,s[1]*this.s.mult,s[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var r=this.sk.getValueAtTime(t),n=this.sa.getValueAtTime(t);e.skewFromAxis(-r*this.sk.mult,n*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var o=this.r.getValueAtTime(t);e.rotate(-o*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var a=this.rz.getValueAtTime(t),h=this.ry.getValueAtTime(t),l=this.rx.getValueAtTime(t),c=this.or.getValueAtTime(t);e.rotateZ(-a*this.rz.mult).rotateY(h*this.ry.mult).rotateX(l*this.rx.mult).rotateZ(-c[2]*this.or.mult).rotateY(c[1]*this.or.mult).rotateX(c[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var u=this.px.getValueAtTime(t),p=this.py.getValueAtTime(t);if(this.data.p.z){var d=this.pz.getValueAtTime(t);e.translate(u*this.px.mult,p*this.py.mult,-d*this.pz.mult)}else e.translate(u*this.px.mult,p*this.py.mult,0)}else{var f=this.p.getValueAtTime(t);e.translate(f[0]*this.p.mult,f[1]*this.p.mult,-f[2]*this.p.mult)}return e}function r(){return this.v.clone(new Matrix)}var n=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(t,e,i){var o=n(t,e,i);return o.dynamicProperties.length?o.getValueAtTime=s.bind(o):o.getValueAtTime=r.bind(o),o.setGroupProperty=expressionHelpers.setGroupProperty,o};var o=PropertyFactory.getProp;PropertyFactory.getProp=function(s,r,n,a,h){var l=o(s,r,n,a,h);l.kf?l.getValueAtTime=expressionHelpers.getValueAtTime.bind(l):l.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(l),l.setGroupProperty=expressionHelpers.setGroupProperty,l.loopOut=t,l.loopIn=e,l.smooth=i,l.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(l),l.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(l),l.numKeys=1===r.a?r.k.length:0,l.propertyIndex=r.ix;var c=0;return 0!==n&&(c=createTypedArray("float32",1===r.a?r.k[0].s.length:r.k.length)),l._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:c},expressionHelpers.searchExpressions(s,r,l),l.k&&h.addDynamicProperty(l),l};var a=ShapePropertyFactory.getConstructorFunction(),h=ShapePropertyFactory.getKeyframedConstructorFunction();function l(){}l.prototype={vertices:function(t,e){this.k&&this.getValue();var i,s=this.v;void 0!==e&&(s=this.getValueAtTime(e,0));var r=s._length,n=s[t],o=s.v,a=createSizedArray(r);for(i=0;i<r;i+=1)a[i]="i"===t||"o"===t?[n[i][0]-o[i][0],n[i][1]-o[i][1]]:[n[i][0],n[i][1]];return a},points:function(t){return this.vertices("v",t)},inTangents:function(t){return this.vertices("i",t)},outTangents:function(t){return this.vertices("o",t)},isClosed:function(){return this.v.c},pointOnPath:function(t,e){var i=this.v;void 0!==e&&(i=this.getValueAtTime(e,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(i));for(var s,r=this._segmentsLength,n=r.lengths,o=r.totalLength*t,a=0,h=n.length,l=0;a<h;){if(l+n[a].addedLength>o){var c=a,u=i.c&&a===h-1?0:a+1,p=(o-l)/n[a].addedLength;s=bez.getPointInSegment(i.v[c],i.v[u],i.o[c],i.i[u],p,n[a]);break}l+=n[a].addedLength,a+=1}return s||(s=i.c?[i.v[0][0],i.v[0][1]]:[i.v[i._length-1][0],i.v[i._length-1][1]]),s},vectorOnPath:function(t,e,i){1==t?t=this.v.c:0==t&&(t=.999);var s=this.pointOnPath(t,e),r=this.pointOnPath(t+.001,e),n=r[0]-s[0],o=r[1]-s[1],a=Math.sqrt(Math.pow(n,2)+Math.pow(o,2));return 0===a?[0,0]:"tangent"===i?[n/a,o/a]:[-o/a,n/a]},tangentOnPath:function(t,e){return this.vectorOnPath(t,e,"tangent")},normalOnPath:function(t,e){return this.vectorOnPath(t,e,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([l],a),extendPrototype([l],h),h.prototype.getValueAtTime=function(t){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),t*=this.elem.globalData.frameRate,(t-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<t?this._caching.lastIndex:0,this._cachingAtTime.lastTime=t,this.interpolateShape(t,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},h.prototype.initiateExpression=ExpressionManager.initiateExpression;var c=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(t,e,i,s,r){var n=c(t,e,i,s,r);return n.propertyIndex=e.ix,n.lock=!1,3===i?expressionHelpers.searchExpressions(t,e.pt,n):4===i&&expressionHelpers.searchExpressions(t,e.ks,n),n.k&&t.addDynamicProperty(n),n}}function initialize$1(){addPropertyDecorator()}function addDecorator(){TextProperty.prototype.getExpressionValue=function(t,e){var i=this.calculateExpression(e);if(t.t!==i){var s={};return this.copyData(s,t),s.t=i.toString(),s.__complete=!1,s}return t},TextProperty.prototype.searchProperty=function(){var t=this.searchKeyframes(),e=this.searchExpressions();return this.kf=t||e,this.kf},TextProperty.prototype.searchExpressions=function(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(t,e){var i,s,r=createNS("feMerge");for(r.setAttribute("result",t),s=0;s<e.length;s+=1)(i=createNS("feMergeNode")).setAttribute("in",e[s]),r.appendChild(i),r.appendChild(i);return r}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(t,e,i,s,r){this.filterManager=e;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=n,n.setAttribute("result",s+"_tint_1"),t.appendChild(n),(n=createNS("feColorMatrix")).setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result",s+"_tint_2"),t.appendChild(n),this.matrixFilter=n;var o=this.createMergeNode(s,[r,s+"_tint_1",s+"_tint_2"]);t.appendChild(o)}function SVGFillFilter(t,e,i,s){this.filterManager=e;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),r.setAttribute("result",s),t.appendChild(r),this.matrixFilter=r}function SVGStrokeEffect(t,e,i){this.initialized=!1,this.filterManager=e,this.elem=i,this.paths=[]}function SVGTritoneFilter(t,e,i,s){this.filterManager=e;var r=createNS("feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("color-interpolation-filters","linearRGB"),r.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),t.appendChild(r);var n=createNS("feComponentTransfer");n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("result",s),this.matrixFilter=n;var o=createNS("feFuncR");o.setAttribute("type","table"),n.appendChild(o),this.feFuncR=o;var a=createNS("feFuncG");a.setAttribute("type","table"),n.appendChild(a),this.feFuncG=a;var h=createNS("feFuncB");h.setAttribute("type","table"),n.appendChild(h),this.feFuncB=h,t.appendChild(n)}function SVGProLevelsFilter(t,e,i,s){this.filterManager=e;var r=this.filterManager.effectElements,n=createNS("feComponentTransfer");(r[10].p.k||0!==r[10].p.v||r[11].p.k||1!==r[11].p.v||r[12].p.k||1!==r[12].p.v||r[13].p.k||0!==r[13].p.v||r[14].p.k||1!==r[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",n)),(r[17].p.k||0!==r[17].p.v||r[18].p.k||1!==r[18].p.v||r[19].p.k||1!==r[19].p.v||r[20].p.k||0!==r[20].p.v||r[21].p.k||1!==r[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",n)),(r[24].p.k||0!==r[24].p.v||r[25].p.k||1!==r[25].p.v||r[26].p.k||1!==r[26].p.v||r[27].p.k||0!==r[27].p.v||r[28].p.k||1!==r[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",n)),(r[31].p.k||0!==r[31].p.v||r[32].p.k||1!==r[32].p.v||r[33].p.k||1!==r[33].p.v||r[34].p.k||0!==r[34].p.v||r[35].p.k||1!==r[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",n)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(n.setAttribute("color-interpolation-filters","sRGB"),t.appendChild(n)),(r[3].p.k||0!==r[3].p.v||r[4].p.k||1!==r[4].p.v||r[5].p.k||1!==r[5].p.v||r[6].p.k||0!==r[6].p.v||r[7].p.k||1!==r[7].p.v)&&((n=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("result",s),t.appendChild(n),this.feFuncRComposed=this.createFeFunc("feFuncR",n),this.feFuncGComposed=this.createFeFunc("feFuncG",n),this.feFuncBComposed=this.createFeFunc("feFuncB",n))}function SVGDropShadowEffect(t,e,i,s,r){var n=e.container.globalData.renderConfig.filterSize,o=e.data.fs||n;t.setAttribute("x",o.x||n.x),t.setAttribute("y",o.y||n.y),t.setAttribute("width",o.width||n.width),t.setAttribute("height",o.height||n.height),this.filterManager=e;var a=createNS("feGaussianBlur");a.setAttribute("in","SourceAlpha"),a.setAttribute("result",s+"_drop_shadow_1"),a.setAttribute("stdDeviation","0"),this.feGaussianBlur=a,t.appendChild(a);var h=createNS("feOffset");h.setAttribute("dx","25"),h.setAttribute("dy","0"),h.setAttribute("in",s+"_drop_shadow_1"),h.setAttribute("result",s+"_drop_shadow_2"),this.feOffset=h,t.appendChild(h);var l=createNS("feFlood");l.setAttribute("flood-color","#00ff00"),l.setAttribute("flood-opacity","1"),l.setAttribute("result",s+"_drop_shadow_3"),this.feFlood=l,t.appendChild(l);var c=createNS("feComposite");c.setAttribute("in",s+"_drop_shadow_3"),c.setAttribute("in2",s+"_drop_shadow_2"),c.setAttribute("operator","in"),c.setAttribute("result",s+"_drop_shadow_4"),t.appendChild(c);var u=this.createMergeNode(s,[s+"_drop_shadow_4",r]);t.appendChild(u)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,s=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+s+" 0"),this.matrixFilter.setAttribute("values",i[0]-e[0]+" 0 0 0 "+e[0]+" "+(i[1]-e[1])+" 0 0 0 "+e[1]+" "+(i[2]-e[2])+" 0 0 0 "+e[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[2].p.v,i=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+e[0]+" 0 0 0 0 "+e[1]+" 0 0 0 0 "+e[2]+" 0 0 0 "+i+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var t,e,i,s,r=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(s=this.elem.maskManager.masksProperties.length,i=0):s=1+(i=this.filterManager.effectElements[0].p.v-1),(e=createNS("g")).setAttribute("fill","none"),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dashoffset",1);i<s;i+=1)t=createNS("path"),e.appendChild(t),this.paths.push({p:t,m:i});if(3===this.filterManager.effectElements[10].p.v){var n=createNS("mask"),o=createElementID();n.setAttribute("id",o),n.setAttribute("mask-type","alpha"),n.appendChild(e),this.elem.globalData.defs.appendChild(n);var a=createNS("g");for(a.setAttribute("mask","url("+getLocationHref()+"#"+o+")");r[0];)a.appendChild(r[0]);this.elem.layerElement.appendChild(a),this.masker=n,e.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(r=this.elem.layerElement.children||this.elem.layerElement.childNodes;r.length;)this.elem.layerElement.removeChild(r[0]);this.elem.layerElement.appendChild(e),this.elem.layerElement.removeAttribute("mask"),e.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=e},SVGStrokeEffect.prototype.renderFrame=function(t){var e;this.initialized||this.initialize();var i,s,r=this.paths.length;for(e=0;e<r;e+=1)if(-1!==this.paths[e].m&&(i=this.elem.maskManager.viewData[this.paths[e].m],s=this.paths[e].p,(t||this.filterManager._mdf||i.prop._mdf)&&s.setAttribute("d",i.lastPath),t||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||i.prop._mdf)){var n;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var o=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),a=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),h=s.getTotalLength();n="0 0 0 "+h*o+" ";var l,c=h*(a-o),u=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01,p=Math.floor(c/u);for(l=0;l<p;l+=1)n+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";n+="0 "+10*h+" 0 0"}else n="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;s.setAttribute("stroke-dasharray",n)}if((t||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(t||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(t||this.filterManager.effectElements[3].p._mdf)){var d=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*d[0])+","+bmFloor(255*d[1])+","+bmFloor(255*d[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,s=this.filterManager.effectElements[2].p.v,r=s[0]+" "+i[0]+" "+e[0],n=s[1]+" "+i[1]+" "+e[1],o=s[2]+" "+i[2]+" "+e[2];this.feFuncR.setAttribute("tableValues",r),this.feFuncG.setAttribute("tableValues",n),this.feFuncB.setAttribute("tableValues",o)}},SVGProLevelsFilter.prototype.createFeFunc=function(t,e){var i=createNS(t);return i.setAttribute("type","table"),e.appendChild(i),i},SVGProLevelsFilter.prototype.getTableValue=function(t,e,i,s,r){for(var n,o,a=0,h=Math.min(t,e),l=Math.max(t,e),c=Array.call(null,{length:256}),u=0,p=r-s,d=e-t;a<=256;)o=(n=a/256)<=h?d<0?r:s:n>=l?d<0?s:r:s+p*Math.pow((n-t)/d,1/i),c[u]=o,u+=1,a+=256/255;return c.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e,i=this.filterManager.effectElements;this.feFuncRComposed&&(t||i[3].p._mdf||i[4].p._mdf||i[5].p._mdf||i[6].p._mdf||i[7].p._mdf)&&(e=this.getTableValue(i[3].p.v,i[4].p.v,i[5].p.v,i[6].p.v,i[7].p.v),this.feFuncRComposed.setAttribute("tableValues",e),this.feFuncGComposed.setAttribute("tableValues",e),this.feFuncBComposed.setAttribute("tableValues",e)),this.feFuncR&&(t||i[10].p._mdf||i[11].p._mdf||i[12].p._mdf||i[13].p._mdf||i[14].p._mdf)&&(e=this.getTableValue(i[10].p.v,i[11].p.v,i[12].p.v,i[13].p.v,i[14].p.v),this.feFuncR.setAttribute("tableValues",e)),this.feFuncG&&(t||i[17].p._mdf||i[18].p._mdf||i[19].p._mdf||i[20].p._mdf||i[21].p._mdf)&&(e=this.getTableValue(i[17].p.v,i[18].p.v,i[19].p.v,i[20].p.v,i[21].p.v),this.feFuncG.setAttribute("tableValues",e)),this.feFuncB&&(t||i[24].p._mdf||i[25].p._mdf||i[26].p._mdf||i[27].p._mdf||i[28].p._mdf)&&(e=this.getTableValue(i[24].p.v,i[25].p.v,i[26].p.v,i[27].p.v,i[28].p.v),this.feFuncB.setAttribute("tableValues",e)),this.feFuncA&&(t||i[31].p._mdf||i[32].p._mdf||i[33].p._mdf||i[34].p._mdf||i[35].p._mdf)&&(e=this.getTableValue(i[31].p.v,i[32].p.v,i[33].p.v,i[34].p.v,i[35].p.v),this.feFuncA.setAttribute("tableValues",e))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){if((t||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),t||this.filterManager.effectElements[0].p._mdf){var e=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*e[0]),Math.round(255*e[1]),Math.round(255*e[2])))}if((t||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),t||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var i=this.filterManager.effectElements[3].p.v,s=(this.filterManager.effectElements[2].p.v-90)*degToRads,r=i*Math.cos(s),n=i*Math.sin(s);this.feOffset.setAttribute("dx",r),this.feOffset.setAttribute("dy",n)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(t,e,i){this.initialized=!1,this.filterManager=e,this.filterElem=t,this.elem=i,i.matteElement=createNS("g"),i.matteElement.appendChild(i.layerElement),i.matteElement.appendChild(i.transformedElement),i.baseElement=i.matteElement}function SVGGaussianBlurEffect(t,e,i,s){t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width","300%"),t.setAttribute("height","300%"),this.filterManager=e;var r=createNS("feGaussianBlur");r.setAttribute("result",s),t.appendChild(r),this.feGaussianBlur=r}function TransformEffect(){}function SVGTransformEffect(t,e){this.init(e)}function CVTransformEffect(t){this.init(t)}return SVGMatte3Effect.prototype.findSymbol=function(t){for(var e=0,i=_svgMatteSymbols.length;e<i;){if(_svgMatteSymbols[e]===t)return _svgMatteSymbols[e];e+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(t,e){var i=t.layerElement.parentNode;if(i){for(var s,r=i.children,n=0,o=r.length;n<o&&r[n]!==t.layerElement;)n+=1;n<=o-2&&(s=r[n+1]);var a=createNS("use");a.setAttribute("href","#"+e),s?i.insertBefore(a,s):i.appendChild(a)}},SVGMatte3Effect.prototype.setElementAsMask=function(t,e){if(!this.findSymbol(e)){var i=createElementID(),s=createNS("mask");s.setAttribute("id",e.layerId),s.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(e);var r=t.globalData.defs;r.appendChild(s);var n=createNS("symbol");n.setAttribute("id",i),this.replaceInParent(e,i),n.appendChild(e.layerElement),r.appendChild(n);var o=createNS("use");o.setAttribute("href","#"+i),s.appendChild(o),e.data.hd=!1,e.show()}t.setMatte(e.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var t=this.filterManager.effectElements[0].p.v,e=this.elem.comp.elements,i=0,s=e.length;i<s;)e[i]&&e[i].data.ind===t&&this.setElementAsMask(this.elem,e[i]),i+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(t){if(t||this.filterManager._mdf){var e=.3*this.filterManager.effectElements[0].p.v,i=this.filterManager.effectElements[1].p.v,s=3==i?0:e,r=2==i?0:e;this.feGaussianBlur.setAttribute("stdDeviation",s+" "+r);var n=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",n)}},TransformEffect.prototype.init=function(t){this.effectsManager=t,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(t){if(this._opMdf=!1,this._mdf=!1,t||this.effectsManager._mdf){var e=this.effectsManager.effectElements,i=e[0].p.v,s=e[1].p.v,r=1===e[2].p.v,n=e[3].p.v,o=r?n:e[4].p.v,a=e[5].p.v,h=e[6].p.v,l=e[7].p.v;this.matrix.reset(),this.matrix.translate(-i[0],-i[1],i[2]),this.matrix.scale(.01*o,.01*n,1),this.matrix.rotate(-l*degToRads),this.matrix.skewFromAxis(-a*degToRads,(h+90)*degToRads),this.matrix.translate(s[0],s[1],0),this._mdf=!0,this.opacity!==e[8].p.v&&(this.opacity=e[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie},module.exports=factory())},"../../../node_modules/react-error-boundary/dist/react-error-boundary.esm.js":(t,e,i)=>{"use strict";i.d(e,{SV:()=>o});var s=i("../../../node_modules/react/index.js");const r=(0,s.createContext)(null),n={didCatch:!1,error:null};class o extends s.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=n}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(null!==t){for(var e,i,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];null===(e=(i=this.props).onReset)||void 0===e||e.call(i,{args:r,reason:"imperative-api"}),this.setState(n)}}componentDidCatch(t,e){var i,s;null===(i=(s=this.props).onError)||void 0===i||i.call(s,t,e)}componentDidUpdate(t,e){const{didCatch:i}=this.state,{resetKeys:s}=this.props;var r,o;i&&null!==e.error&&function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.length!==e.length||t.some(((t,i)=>!Object.is(t,e[i])))}(t.resetKeys,s)&&(null===(r=(o=this.props).onReset)||void 0===r||r.call(o,{next:s,prev:t.resetKeys,reason:"keys"}),this.setState(n))}render(){const{children:t,fallbackRender:e,FallbackComponent:i,fallback:n}=this.props,{didCatch:o,error:a}=this.state;let h=t;if(o){const t={error:a,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof e)h=e(t);else if(i)h=(0,s.createElement)(i,t);else{if(null!==n&&!(0,s.isValidElement)(n))throw a;h=n}}return(0,s.createElement)(r.Provider,{value:{didCatch:o,error:a,resetErrorBoundary:this.resetErrorBoundary}},h)}}},"../../../node_modules/react-router/dist/index.js":(t,e,i)=>{"use strict";var s;i.d(e,{AW:()=>z,F0:()=>D,FR:()=>l,Fg:()=>R,TH:()=>g,UO:()=>x,Us:()=>c,V$:()=>k,WU:()=>w,Z5:()=>F,bS:()=>y,j3:()=>B,oQ:()=>f,s0:()=>b,w3:()=>h});var r=i("../../../node_modules/react/index.js"),n=i("../../../node_modules/@remix-run/router/dist/router.js"),o=i("../../../node_modules/console-browserify/index.js");function a(){return a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a.apply(this,arguments)}const h=r.createContext(null),l=r.createContext(null),c=r.createContext(null),u=r.createContext(null),p=r.createContext({outlet:null,matches:[],isDataRoute:!1}),d=r.createContext(null);function f(t,e){let{relative:i}=void 0===e?{}:e;m()||(0,n.J0)(!1);let{basename:s,navigator:o}=r.useContext(c),{hash:a,pathname:h,search:l}=w(t,{relative:i}),u=h;return"/"!==s&&(u="/"===h?s:(0,n.RQ)([s,h])),o.createHref({pathname:u,search:l,hash:a})}function m(){return null!=r.useContext(u)}function g(){return m()||(0,n.J0)(!1),r.useContext(u).location}function y(t){m()||(0,n.J0)(!1);let{pathname:e}=g();return r.useMemo((()=>(0,n.LX)(t,e)),[e,t])}function v(t){r.useContext(c).static||r.useLayoutEffect(t)}function b(){let{isDataRoute:t}=r.useContext(p);return t?function(){let{router:t}=function(t){let e=r.useContext(h);return e||(0,n.J0)(!1),e}(I.UseNavigateStable),e=A(T.UseNavigateStable),i=r.useRef(!1);return v((()=>{i.current=!0})),r.useCallback((function(s,r){void 0===r&&(r={}),i.current&&("number"==typeof s?t.navigate(s):t.navigate(s,a({fromRouteId:e},r)))}),[t,e])}():function(){m()||(0,n.J0)(!1);let t=r.useContext(h),{basename:e,future:i,navigator:s}=r.useContext(c),{matches:o}=r.useContext(p),{pathname:a}=g(),l=JSON.stringify((0,n.cm)(o,i.v7_relativeSplatPath)),u=r.useRef(!1);return v((()=>{u.current=!0})),r.useCallback((function(i,r){if(void 0===r&&(r={}),!u.current)return;if("number"==typeof i)return void s.go(i);let o=(0,n.pC)(i,JSON.parse(l),a,"path"===r.relative);null==t&&"/"!==e&&(o.pathname="/"===o.pathname?e:(0,n.RQ)([e,o.pathname])),(r.replace?s.replace:s.push)(o,r.state,r)}),[e,s,l,a,t])}()}const S=r.createContext(null);function x(){let{matches:t}=r.useContext(p),e=t[t.length-1];return e?e.params:{}}function w(t,e){let{relative:i}=void 0===e?{}:e,{future:s}=r.useContext(c),{matches:o}=r.useContext(p),{pathname:a}=g(),h=JSON.stringify((0,n.cm)(o,s.v7_relativeSplatPath));return r.useMemo((()=>(0,n.pC)(t,JSON.parse(h),a,"path"===i)),[t,h,a,i])}function k(t,e){return function(t,e,i,s){m()||(0,n.J0)(!1);let{navigator:o}=r.useContext(c),{matches:h}=r.useContext(p),l=h[h.length-1],d=l?l.params:{},f=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let y,v=g();if(e){var b;let t="string"==typeof e?(0,n.cP)(e):e;"/"===f||(null==(b=t.pathname)?void 0:b.startsWith(f))||(0,n.J0)(!1),y=t}else y=v;let S=y.pathname||"/",x=S;if("/"!==f){let t=f.replace(/^\//,"").split("/");x="/"+S.replace(/^\//,"").split("/").slice(t.length).join("/")}let w=(0,n.fp)(t,{pathname:x}),k=function(t,e,i,s){var o;if(void 0===e&&(e=[]),void 0===i&&(i=null),void 0===s&&(s=null),null==t){var a;if(null==(a=i)||!a.errors)return null;t=i.matches}let h=t,l=null==(o=i)?void 0:o.errors;if(null!=l){let t=h.findIndex((t=>t.route.id&&void 0!==(null==l?void 0:l[t.route.id])));t>=0||(0,n.J0)(!1),h=h.slice(0,Math.min(h.length,t+1))}let c=!1,u=-1;if(i&&s&&s.v7_partialHydration)for(let t=0;t<h.length;t++){let e=h[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:s}=i,r=e.route.loader&&void 0===t[e.route.id]&&(!s||void 0===s[e.route.id]);if(e.route.lazy||r){c=!0,h=u>=0?h.slice(0,u+1):[h[0]];break}}}return h.reduceRight(((t,s,n)=>{let o,a=!1,p=null,d=null;var f;i&&(o=l&&s.route.id?l[s.route.id]:void 0,p=s.route.errorElement||C,c&&(u<0&&0===n?(M[f="route-fallback"]||(M[f]=!0),a=!0,d=null):u===n&&(a=!0,d=s.route.hydrateFallbackElement||null)));let m=e.concat(h.slice(0,n+1)),g=()=>{let e;return e=o?p:a?d:s.route.Component?r.createElement(s.route.Component,null):s.route.element?s.route.element:t,r.createElement(P,{match:s,routeContext:{outlet:t,matches:m,isDataRoute:null!=i},children:e})};return i&&(s.route.ErrorBoundary||s.route.errorElement||0===n)?r.createElement(E,{location:i.location,revalidation:i.revalidation,component:p,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}(w&&w.map((t=>Object.assign({},t,{params:Object.assign({},d,t.params),pathname:(0,n.RQ)([f,o.encodeLocation?o.encodeLocation(t.pathname).pathname:t.pathname]),pathnameBase:"/"===t.pathnameBase?f:(0,n.RQ)([f,o.encodeLocation?o.encodeLocation(t.pathnameBase).pathname:t.pathnameBase])}))),h,i,s);return e&&k?r.createElement(u.Provider,{value:{location:a({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:n.aU.Pop}},k):k}(t,e)}function _(){let t=function(){var t;let e=r.useContext(d),i=function(t){let e=r.useContext(l);return e||(0,n.J0)(!1),e}(T.UseRouteError),s=A(T.UseRouteError);return void 0!==e?e:null==(t=i.errors)?void 0:t[s]}(),e=(0,n.WK)(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),i=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},e),i?r.createElement("pre",{style:s},i):null,null)}const C=r.createElement(_,null);class E extends r.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||"idle"!==e.revalidation&&"idle"===t.revalidation?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:void 0!==t.error?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){o.error("React Router caught the following error during render",t,e)}render(){return void 0!==this.state.error?r.createElement(p.Provider,{value:this.props.routeContext},r.createElement(d.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function P(t){let{routeContext:e,match:i,children:s}=t,n=r.useContext(h);return n&&n.static&&n.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=i.route.id),r.createElement(p.Provider,{value:e},s)}var I=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(I||{}),T=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(T||{});function A(t){let e=function(t){let e=r.useContext(p);return e||(0,n.J0)(!1),e}(),i=e.matches[e.matches.length-1];return i.route.id||(0,n.J0)(!1),i.route.id}const M={};function R(t){let{to:e,replace:i,state:s,relative:o}=t;m()||(0,n.J0)(!1);let{future:a,static:h}=r.useContext(c),{matches:l}=r.useContext(p),{pathname:u}=g(),d=b(),f=(0,n.pC)(e,(0,n.cm)(l,a.v7_relativeSplatPath),u,"path"===o),y=JSON.stringify(f);return r.useEffect((()=>d(JSON.parse(y),{replace:i,state:s,relative:o})),[d,y,o,i,s]),null}function B(t){return function(t){let e=r.useContext(p).outlet;return e?r.createElement(S.Provider,{value:t},e):e}(t.context)}function z(t){(0,n.J0)(!1)}function D(t){let{basename:e="/",children:i=null,location:s,navigationType:o=n.aU.Pop,navigator:h,static:l=!1,future:p}=t;m()&&(0,n.J0)(!1);let d=e.replace(/^\/*/,"/"),f=r.useMemo((()=>({basename:d,navigator:h,static:l,future:a({v7_relativeSplatPath:!1},p)})),[d,p,h,l]);"string"==typeof s&&(s=(0,n.cP)(s));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:S="default"}=s,x=r.useMemo((()=>{let t=(0,n.Zn)(g,d);return null==t?null:{location:{pathname:t,search:y,hash:v,state:b,key:S},navigationType:o}}),[d,g,y,v,b,S,o]);return null==x?null:r.createElement(c.Provider,{value:f},r.createElement(u.Provider,{children:i,value:x}))}function F(t){let{children:e,location:i}=t;return k(L(e),i)}function L(t,e){void 0===e&&(e=[]);let i=[];return r.Children.forEach(t,((t,s)=>{if(!r.isValidElement(t))return;let o=[...e,s];if(t.type===r.Fragment)return void i.push.apply(i,L(t.props.children,o));t.type!==z&&(0,n.J0)(!1),t.props.index&&t.props.children&&(0,n.J0)(!1);let a={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=L(t.props.children,o)),i.push(a)})),i}(s||(s=i.t(r,2))).startTransition,new Promise((()=>{})),r.Component},"../../../node_modules/react-virtuoso/dist/index.m.js":(t,e,i)=>{"use strict";i.d(e,{Px:()=>si});var s=i("../../../node_modules/@virtuoso.dev/react-urx/dist/react-urx.esm.js"),r=i("../../../node_modules/@virtuoso.dev/urx/dist/urx.esm.js"),n=i("../../../node_modules/react/index.js"),o=i("../../../node_modules/react-dom/index.js"),a=i("../../../node_modules/console-browserify/index.js");function h(){return h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},h.apply(this,arguments)}function l(t,e){if(null==t)return{};var i,s,r={},n=Object.keys(t);for(s=0;s<n.length;s++)e.indexOf(i=n[s])>=0||(r[i]=t[i]);return r}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function u(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var p,d,f,m="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;(f=d||(d={}))[f.DEBUG=0]="DEBUG",f[f.INFO=1]="INFO",f[f.WARN=2]="WARN",f[f.ERROR=3]="ERROR";var g=((p={})[d.DEBUG]="debug",p[d.INFO]="log",p[d.WARN]="warn",p[d.ERROR]="error",p),y=r.By((function(){var t=r.P0(d.ERROR);return{log:r.P0((function(e,i,s){var n;void 0===s&&(s=d.INFO),s>=(null!=(n=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?n:r.NA(t))&&a[g[s]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",e,i)})),logLevel:t}}),[],{singleton:!0});function v(t,e){void 0===e&&(e=!0);var i=(0,n.useRef)(null),s=function(t){};if("undefined"!=typeof ResizeObserver){var r=new ResizeObserver((function(e){var i=e[0].target;null!==i.offsetParent&&t(i)}));s=function(t){t&&e?(r.observe(t),i.current=t):(i.current&&r.unobserve(i.current),i.current=null)}}return{ref:i,callbackRef:s}}function b(t,e){return void 0===e&&(e=!0),v(t,e).callbackRef}function S(t,e,i,s,r,n,o){return v((function(i){for(var a=function(t,e,i,s){var r=t.length;if(0===r)return null;for(var n=[],o=0;o<r;o++){var a=t.item(o);if(a&&void 0!==a.dataset.index){var h=parseInt(a.dataset.index),l=parseFloat(a.dataset.knownSize),c=e(a,"offsetHeight");if(0===c&&s("Zero-sized element, this should not happen",{child:a},d.ERROR),c!==l){var u=n[n.length-1];0===n.length||u.size!==c||u.endIndex!==h-1?n.push({startIndex:h,endIndex:h,size:c}):n[n.length-1].endIndex++}}}return n}(i.children,e,0,r),h=i.parentElement;!h.dataset.virtuosoScroller;)h=h.parentElement;var l="window"===h.firstElementChild.dataset.viewportType,c=o?o.scrollTop:l?window.pageYOffset||document.documentElement.scrollTop:h.scrollTop,u=o?o.scrollHeight:l?document.documentElement.scrollHeight:h.scrollHeight,p=o?o.offsetHeight:l?window.innerHeight:h.offsetHeight;s({scrollTop:Math.max(c,0),scrollHeight:u,viewportHeight:p}),null==n||n(function(t,e,i){return"normal"===e||null!=e&&e.endsWith("px")||i("row-gap was not resolved to pixel value correctly",e,d.WARN),"normal"===e?0:parseInt(null!=e?e:"0",10)}(0,getComputedStyle(i).rowGap,r)),null!==a&&t(a)}),i)}function x(t,e){return Math.round(t.getBoundingClientRect()[e])}function w(t,e){return Math.abs(t-e)<1.01}function k(t,e,i,s,a){void 0===s&&(s=r.ZT);var h=(0,n.useRef)(null),l=(0,n.useRef)(null),c=(0,n.useRef)(null),u=(0,n.useRef)(!1),p=(0,n.useCallback)((function(i){var s=i.target,r=s===window||s===document,n=r?window.pageYOffset||document.documentElement.scrollTop:s.scrollTop,a=r?document.documentElement.scrollHeight:s.scrollHeight,h=r?window.innerHeight:s.offsetHeight,p=function(){t({scrollTop:Math.max(n,0),scrollHeight:a,viewportHeight:h})};u.current?(0,o.flushSync)(p):p(),u.current=!1,null!==l.current&&(n===l.current||n<=0||n===a-h)&&(l.current=null,e(!0),c.current&&(clearTimeout(c.current),c.current=null))}),[t,e]);return(0,n.useEffect)((function(){var t=a||h.current;return s(a||h.current),p({target:t}),t.addEventListener("scroll",p,{passive:!0}),function(){s(null),t.removeEventListener("scroll",p)}}),[h,p,i,s,a]),{scrollerRef:h,scrollByCallback:function(t){u.current=!0,h.current.scrollBy(t)},scrollToCallback:function(i){var s=h.current;if(s&&(!("offsetHeight"in s)||0!==s.offsetHeight)){var r,n,o,a="smooth"===i.behavior;if(s===window?(n=Math.max(x(document.documentElement,"height"),document.documentElement.scrollHeight),r=window.innerHeight,o=document.documentElement.scrollTop):(n=s.scrollHeight,r=x(s,"height"),o=s.scrollTop),i.top=Math.ceil(Math.max(Math.min(n-r,i.top),0)),w(r,n)||i.top===o)return t({scrollTop:o,scrollHeight:n,viewportHeight:r}),void(a&&e(!0));a?(l.current=i.top,c.current&&clearTimeout(c.current),c.current=setTimeout((function(){c.current=null,l.current=null,e(!0)}),1e3)):l.current=null,s.scrollTo(i)}}}}var _=r.By((function(){var t=r.Vw(),e=r.Vw(),i=r.P0(0),s=r.Vw(),n=r.P0(0),o=r.Vw(),a=r.Vw(),h=r.P0(0),l=r.P0(0),c=r.P0(0),u=r.P0(0),p=r.Vw(),d=r.Vw(),f=r.P0(!1),m=r.P0(!1);return r.$j(r.zG(t,r.UI((function(t){return t.scrollTop}))),e),r.$j(r.zG(t,r.UI((function(t){return t.scrollHeight}))),a),r.$j(e,n),{scrollContainerState:t,scrollTop:e,viewportHeight:o,headerHeight:h,fixedHeaderHeight:l,fixedFooterHeight:c,footerHeight:u,scrollHeight:a,smoothScrollTargetReached:s,react18ConcurrentRendering:m,scrollTo:p,scrollBy:d,statefulScrollTop:n,deviation:i,scrollingInProgress:f}}),[],{singleton:!0}),C={lvl:0};function E(t,e,i,s,r){return void 0===s&&(s=C),void 0===r&&(r=C),{k:t,v:e,lvl:i,l:s,r}}function P(t){return t===C}function I(){return C}function T(t,e){if(P(t))return C;var i=t.k,s=t.l,r=t.r;if(e===i){if(P(s))return r;if(P(r))return s;var n=z(s);return V(F(t,{k:n[0],v:n[1],l:D(s)}))}return V(F(t,e<i?{l:T(s,e)}:{r:T(r,e)}))}function A(t,e,i){if(void 0===i&&(i="k"),P(t))return[-1/0,void 0];if(t[i]===e)return[t.k,t.v];if(t[i]<e){var s=A(t.r,e,i);return-1/0===s[0]?[t.k,t.v]:s}return A(t.l,e,i)}function M(t,e,i){return P(t)?E(e,i,1):e===t.k?F(t,{k:e,v:i}):function(t){return W(H(t))}(F(t,e<t.k?{l:M(t.l,e,i)}:{r:M(t.r,e,i)}))}function R(t,e,i){if(P(t))return[];var s=t.k,r=t.v,n=t.r,o=[];return s>e&&(o=o.concat(R(t.l,e,i))),s>=e&&s<=i&&o.push({k:s,v:r}),s<=i&&(o=o.concat(R(n,e,i))),o}function B(t){return P(t)?[]:[].concat(B(t.l),[{k:t.k,v:t.v}],B(t.r))}function z(t){return P(t.r)?[t.k,t.v]:z(t.r)}function D(t){return P(t.r)?t.l:V(F(t,{r:D(t.r)}))}function F(t,e){return E(void 0!==e.k?e.k:t.k,void 0!==e.v?e.v:t.v,void 0!==e.lvl?e.lvl:t.lvl,void 0!==e.l?e.l:t.l,void 0!==e.r?e.r:t.r)}function L(t){return P(t)||t.lvl>t.r.lvl}function V(t){var e=t.l,i=t.r,s=t.lvl;if(i.lvl>=s-1&&e.lvl>=s-1)return t;if(s>i.lvl+1){if(L(e))return H(F(t,{lvl:s-1}));if(P(e)||P(e.r))throw new Error("Unexpected empty nodes");return F(e.r,{l:F(e,{r:e.r.l}),r:F(t,{l:e.r.r,lvl:s-1}),lvl:s})}if(L(t))return W(F(t,{lvl:s-1}));if(P(i)||P(i.l))throw new Error("Unexpected empty nodes");var r=i.l,n=L(r)?i.lvl-1:i.lvl;return F(r,{l:F(t,{r:r.l,lvl:s-1}),r:W(F(i,{l:r.r,lvl:n})),lvl:r.lvl+1})}function O(t,e,i){return P(t)?[]:N(R(t,A(t,e)[0],i),(function(t){return{index:t.k,value:t.v}}))}function N(t,e){var i=t.length;if(0===i)return[];for(var s=e(t[0]),r=s.index,n=s.value,o=[],a=1;a<i;a++){var h=e(t[a]),l=h.index,c=h.value;o.push({start:r,end:l-1,value:n}),r=l,n=c}return o.push({start:r,end:1/0,value:n}),o}function W(t){var e=t.r,i=t.lvl;return P(e)||P(e.r)||e.lvl!==i||e.r.lvl!==i?t:F(e,{l:F(t,{r:e.l}),lvl:i+1})}function H(t){var e=t.l;return P(e)||e.lvl!==t.lvl?t:F(e,{r:F(t,{l:e.r})})}function G(t,e,i,s){void 0===s&&(s=0);for(var r=t.length-1;s<=r;){var n=Math.floor((s+r)/2),o=i(t[n],e);if(0===o)return n;if(-1===o){if(r-s<2)return n-1;r=n-1}else{if(r===s)return n;s=n+1}}throw new Error("Failed binary finding record in array - "+t.join(",")+", searched for "+e)}function j(t,e,i){return t[G(t,e,i)]}var $=r.By((function(){return{recalcInProgress:r.P0(!1)}}),[],{singleton:!0});function q(t){var e=t.size,i=t.startIndex,s=t.endIndex;return function(t){return t.start===i&&(t.end===s||1/0===t.end)&&t.value===e}}function U(t,e){var i=t.index;return e===i?0:e<i?-1:1}function K(t,e){var i=t.offset;return e===i?0:e<i?-1:1}function Z(t){return{index:t.index,value:t}}function Y(t,e,i,s){var r=t,n=0,o=0,a=0,h=0;if(0!==e){a=r[h=G(r,e-1,U)].offset;var l=A(i,e-1);n=l[0],o=l[1],r.length&&r[h].size===A(i,e)[1]&&(h-=1),r=r.slice(0,h+1)}else r=[];for(var c,p=u(O(i,e,1/0));!(c=p()).done;){var d=c.value,f=d.start,m=d.value,g=f-n,y=g*o+a+g*s;r.push({offset:y,size:m,index:f}),n=f,a=y,o=m}return{offsetTree:r,lastIndex:n,lastOffset:a,lastSize:o}}function J(t,e){var i=e[0],s=e[1],r=e[3];i.length>0&&(0,e[2])("received item sizes",i,d.DEBUG);var n=t.sizeTree,o=n,a=0;if(s.length>0&&P(n)&&2===i.length){var h=i[0].size,l=i[1].size;o=s.reduce((function(t,e){return M(M(t,e,h),e+1,l)}),o)}else{var c=function(t,e){for(var i,s=P(t)?0:1/0,r=u(e);!(i=r()).done;){var n=i.value,o=n.size,a=n.startIndex,h=n.endIndex;if(s=Math.min(s,a),P(t))t=M(t,0,o);else{var l=O(t,a-1,h+1);if(!l.some(q(n))){for(var c,p=!1,d=!1,f=u(l);!(c=f()).done;){var m=c.value,g=m.start,y=m.end,v=m.value;p?(h>=g||o===v)&&(t=T(t,g)):(d=v!==o,p=!0),y>h&&h>=g&&v!==o&&(t=M(t,h+1,v))}d&&(t=M(t,a,o))}}}return[t,s]}(o,i);o=c[0],a=c[1]}if(o===n)return t;var p=Y(t.offsetTree,a,o,r),f=p.offsetTree;return{sizeTree:o,offsetTree:f,lastIndex:p.lastIndex,lastOffset:p.lastOffset,lastSize:p.lastSize,groupOffsetTree:s.reduce((function(t,e){return M(t,e,X(e,f,r))}),I()),groupIndices:s}}function X(t,e,i){if(0===e.length)return 0;var s=j(e,t,U),r=t-s.index,n=s.size*r+(r-1)*i+s.offset;return n>0?n+i:n}function Q(t,e,i){if(function(t){return void 0!==t.groupIndex}(t))return e.groupIndices[t.groupIndex]+1;var s=tt("LAST"===t.index?i:t.index,e);return Math.max(0,s,Math.min(i,s))}function tt(t,e){if(!et(e))return t;for(var i=0;e.groupIndices[i]<=t+i;)i++;return t+i}function et(t){return!P(t.groupOffsetTree)}var it={offsetHeight:"height",offsetWidth:"width"},st=r.By((function(t){var e=t[0].log,i=t[1].recalcInProgress,s=r.Vw(),n=r.Vw(),o=r.o3(n,0),a=r.Vw(),l=r.Vw(),c=r.P0(0),u=r.P0([]),p=r.P0(void 0),f=r.P0(void 0),m=r.P0((function(t,e){return x(t,it[e])})),g=r.P0(void 0),y=r.P0(0),v={offsetTree:[],sizeTree:I(),groupOffsetTree:I(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},b=r.o3(r.zG(s,r.Mm(u,e,y),r.Rp(J,v),r.xb()),v);r.$j(r.zG(u,r.hX((function(t){return t.length>0})),r.Mm(b,y),r.UI((function(t){var e=t[0],i=t[1],s=t[2],r=e.reduce((function(t,e,r){return M(t,e,X(e,i.offsetTree,s)||r)}),I());return h({},i,{groupIndices:e,groupOffsetTree:r})}))),b),r.$j(r.zG(n,r.Mm(b),r.hX((function(t){return t[0]<t[1].lastIndex})),r.UI((function(t){var e=t[1];return[{startIndex:t[0],endIndex:e.lastIndex,size:e.lastSize}]}))),s),r.$j(p,f);var S=r.o3(r.zG(p,r.UI((function(t){return void 0===t}))),!0);r.$j(r.zG(f,r.hX((function(t){return void 0!==t&&P(r.NA(b).sizeTree)})),r.UI((function(t){return[{startIndex:0,endIndex:0,size:t}]}))),s);var w=r.Er(r.zG(s,r.Mm(b),r.Rp((function(t,e){var i=e[1];return{changed:i!==t.sizes,sizes:i}}),{changed:!1,sizes:v}),r.UI((function(t){return t.changed}))));r.Ld(r.zG(c,r.Rp((function(t,e){return{diff:t.prev-e,prev:e}}),{diff:0,prev:0}),r.UI((function(t){return t.diff}))),(function(t){t>0?(r.nY(i,!0),r.nY(a,t)):t<0&&r.nY(l,t)})),r.Ld(r.zG(c,r.Mm(e)),(function(t){t[0]<0&&(0,t[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:c},d.ERROR)}));var k=r.Er(a);r.$j(r.zG(a,r.Mm(b),r.UI((function(t){var e=t[0],i=t[1];if(i.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return B(i.sizeTree).reduce((function(t,i){var s=i.k,r=i.v;return{ranges:[].concat(t.ranges,[{startIndex:t.prevIndex,endIndex:s+e-1,size:t.prevSize}]),prevIndex:s+e,prevSize:r}}),{ranges:[],prevIndex:0,prevSize:i.lastSize}).ranges}))),s);var _=r.Er(r.zG(l,r.Mm(b,y),r.UI((function(t){return X(-t[0],t[1].offsetTree,t[2])}))));return r.$j(r.zG(l,r.Mm(b,y),r.UI((function(t){var e=t[0],i=t[1],s=t[2];if(i.groupIndices.length>0)throw new Error("Virtuoso: shifting items does not work with groups");var r=B(i.sizeTree).reduce((function(t,i){var s=i.v;return M(t,Math.max(0,i.k+e),s)}),I());return h({},i,{sizeTree:r},Y(i.offsetTree,0,r,s))}))),b),{data:g,totalCount:n,sizeRanges:s,groupIndices:u,defaultItemSize:f,fixedItemSize:p,unshiftWith:a,shiftWith:l,shiftWithOffset:_,beforeUnshiftWith:k,firstItemIndex:c,gap:y,sizes:b,listRefresh:w,statefulTotalCount:o,trackItemSizes:S,itemSize:m}}),r.Tc(y,$),{singleton:!0}),rt="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function nt(t){var e="number"==typeof t?{index:t}:t;return e.align||(e.align="start"),e.behavior&&rt||(e.behavior="auto"),e.offset||(e.offset=0),e}var ot=r.By((function(t){var e=t[0],i=e.sizes,s=e.totalCount,n=e.listRefresh,o=e.gap,a=t[1],h=a.scrollingInProgress,l=a.viewportHeight,c=a.scrollTo,u=a.smoothScrollTargetReached,p=a.headerHeight,f=a.footerHeight,m=a.fixedHeaderHeight,g=a.fixedFooterHeight,y=t[2].log,v=r.Vw(),b=r.P0(0),S=null,x=null,w=null;function k(){S&&(S(),S=null),w&&(w(),w=null),x&&(clearTimeout(x),x=null),r.nY(h,!1)}return r.$j(r.zG(v,r.Mm(i,l,s,b,p,f,y),r.Mm(o,m,g),r.UI((function(t){var e=t[0],i=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5],p=e[6],f=e[7],m=t[1],g=t[2],y=t[3],b=nt(i),_=b.align,C=b.behavior,E=b.offset,P=a-1,I=Q(b,s,P),T=X(I,s.offsetTree,m)+c;"end"===_?(T+=g+A(s.sizeTree,I)[1]-o+y,I===P&&(T+=p)):"center"===_?T+=(g+A(s.sizeTree,I)[1]-o+y)/2:T-=l,E&&(T+=E);var M=function(t){k(),t?(f("retrying to scroll to",{location:i},d.DEBUG),r.nY(v,i)):f("list did not change, scroll successful",{},d.DEBUG)};if(k(),"smooth"===C){var R=!1;w=r.Ld(n,(function(t){R=R||t})),S=r.eM(u,(function(){M(R)}))}else S=r.eM(r.zG(n,(function(t){var e=setTimeout((function(){t(!1)}),150);return function(i){i&&(t(!0),clearTimeout(e))}})),M);return x=setTimeout((function(){k()}),1200),r.nY(h,!0),f("scrolling from index to",{index:I,top:T,behavior:C},d.DEBUG),{top:T,behavior:C}}))),c),{scrollToIndex:v,topListHeight:b}}),r.Tc(st,_,y),{singleton:!0}),at="up",ht={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},lt=r.By((function(t){var e=t[0],i=e.scrollContainerState,s=e.scrollTop,n=e.viewportHeight,o=e.headerHeight,a=e.footerHeight,h=e.scrollBy,l=r.P0(!1),c=r.P0(!0),u=r.Vw(),p=r.Vw(),d=r.P0(4),f=r.P0(0),m=r.o3(r.zG(r.TS(r.zG(r.Ho(s),r.T0(1),r.hZ(!0)),r.zG(r.Ho(s),r.T0(1),r.hZ(!1),r.bh(100))),r.xb()),!1),g=r.o3(r.zG(r.TS(r.zG(h,r.hZ(!0)),r.zG(h,r.hZ(!1),r.bh(200))),r.xb()),!1);r.$j(r.zG(r.aj(r.Ho(s),r.Ho(f)),r.UI((function(t){return t[0]<=t[1]})),r.xb()),c),r.$j(r.zG(c,r.pO(50)),p);var y=r.Er(r.zG(r.aj(i,r.Ho(n),r.Ho(o),r.Ho(a),r.Ho(d)),r.Rp((function(t,e){var i,s,r=e[0],n=r.scrollTop,o=r.scrollHeight,a=e[1],h={viewportHeight:a,scrollTop:n,scrollHeight:o};return n+a-o>-e[4]?(n>t.state.scrollTop?(i="SCROLLED_DOWN",s=t.state.scrollTop-n):(i="SIZE_DECREASED",s=t.state.scrollTop-n||t.scrollTopDelta),{atBottom:!0,state:h,atBottomBecause:i,scrollTopDelta:s}):{atBottom:!1,notAtBottomBecause:h.scrollHeight>t.state.scrollHeight?"SIZE_INCREASED":a<t.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":n<t.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:h}}),ht),r.xb((function(t,e){return t&&t.atBottom===e.atBottom})))),v=r.o3(r.zG(i,r.Rp((function(t,e){var i=e.scrollTop,s=e.scrollHeight,r=e.viewportHeight;return w(t.scrollHeight,s)?{scrollTop:i,scrollHeight:s,jump:0,changed:!1}:t.scrollTop!==i&&s-(i+r)<1?{scrollHeight:s,scrollTop:i,jump:t.scrollTop-i,changed:!0}:{scrollHeight:s,scrollTop:i,jump:0,changed:!0}}),{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),r.hX((function(t){return t.changed})),r.UI((function(t){return t.jump}))),0);r.$j(r.zG(y,r.UI((function(t){return t.atBottom}))),l),r.$j(r.zG(l,r.pO(50)),u);var b=r.P0("down");r.$j(r.zG(i,r.UI((function(t){return t.scrollTop})),r.xb(),r.Rp((function(t,e){return r.NA(g)?{direction:t.direction,prevScrollTop:e}:{direction:e<t.prevScrollTop?at:"down",prevScrollTop:e}}),{direction:"down",prevScrollTop:0}),r.UI((function(t){return t.direction}))),b),r.$j(r.zG(i,r.pO(50),r.hZ("none")),b);var S=r.P0(0);return r.$j(r.zG(m,r.hX((function(t){return!t})),r.hZ(0)),S),r.$j(r.zG(s,r.pO(100),r.Mm(m),r.hX((function(t){return!!t[1]})),r.Rp((function(t,e){return[t[1],e[0]]}),[0,0]),r.UI((function(t){return t[1]-t[0]}))),S),{isScrolling:m,isAtTop:c,isAtBottom:l,atBottomState:y,atTopStateChange:p,atBottomStateChange:u,scrollDirection:b,atBottomThreshold:d,atTopThreshold:f,scrollVelocity:S,lastJumpDueToItemResize:v}}),r.Tc(_)),ct=r.By((function(t){var e=t[0].log,i=r.P0(!1),s=r.Er(r.zG(i,r.hX((function(t){return t})),r.xb()));return r.Ld(i,(function(t){t&&r.NA(e)("props updated",{},d.DEBUG)})),{propsReady:i,didMount:s}}),r.Tc(y),{singleton:!0}),ut=r.By((function(t){var e=t[0],i=e.sizes,s=e.listRefresh,n=e.defaultItemSize,o=t[1].scrollTop,a=t[2].scrollToIndex,h=t[3].didMount,l=r.P0(!0),c=r.P0(0);return r.$j(r.zG(h,r.Mm(c),r.hX((function(t){return!!t[1]})),r.hZ(!1)),l),r.Ld(r.zG(r.aj(s,h),r.Mm(l,i,n),r.hX((function(t){var e=t[1],i=t[3];return t[0][1]&&(!P(t[2].sizeTree)||void 0!==i)&&!e})),r.Mm(c)),(function(t){var e=t[1];setTimeout((function(){r.eM(o,(function(){r.nY(l,!0)})),r.nY(a,e)}))})),{scrolledToInitialItem:l,initialTopMostItemIndex:c}}),r.Tc(st,_,ot,ct),{singleton:!0});function pt(t){return!!t&&("smooth"===t?"smooth":"auto")}var dt=r.By((function(t){var e=t[0],i=e.totalCount,s=e.listRefresh,n=t[1],o=n.isAtBottom,a=n.atBottomState,h=t[2].scrollToIndex,l=t[3].scrolledToInitialItem,c=t[4],u=c.propsReady,p=c.didMount,f=t[5].log,m=t[6].scrollingInProgress,g=r.P0(!1),y=r.Vw(),v=null;function b(t){r.nY(h,{index:"LAST",align:"end",behavior:t})}function S(t){var e=r.eM(a,(function(e){!t||e.atBottom||"SIZE_INCREASED"!==e.notAtBottomBecause||v||(r.NA(f)("scrolling to bottom due to increased size",{},d.DEBUG),b("auto"))}));setTimeout(e,100)}return r.Ld(r.zG(r.aj(r.zG(r.Ho(i),r.T0(1)),p),r.Mm(r.Ho(g),o,l,m),r.UI((function(t){var e=t[0],i=e[0],s=e[1]&&t[3],r="auto";return s&&(r=function(t,e){return"function"==typeof t?pt(t(e)):e&&pt(t)}(t[1],t[2]||t[4]),s=s&&!!r),{totalCount:i,shouldFollow:s,followOutputBehavior:r}})),r.hX((function(t){return t.shouldFollow}))),(function(t){var e=t.totalCount,i=t.followOutputBehavior;v&&(v(),v=null),v=r.eM(s,(function(){r.NA(f)("following output to ",{totalCount:e},d.DEBUG),b(i),v=null}))})),r.Ld(r.zG(r.aj(r.Ho(g),i,u),r.hX((function(t){return t[0]&&t[2]})),r.Rp((function(t,e){var i=e[1];return{refreshed:t.value===i,value:i}}),{refreshed:!1,value:0}),r.hX((function(t){return t.refreshed})),r.Mm(g,i)),(function(t){S(!1!==t[1])})),r.Ld(y,(function(){S(!1!==r.NA(g))})),r.Ld(r.aj(r.Ho(g),a),(function(t){var e=t[1];t[0]&&!e.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===e.notAtBottomBecause&&b("auto")})),{followOutput:g,autoscrollToBottom:y}}),r.Tc(st,lt,ot,ut,ct,y,_));function ft(t){return t.reduce((function(t,e){return t.groupIndices.push(t.totalCount),t.totalCount+=e+1,t}),{totalCount:0,groupIndices:[]})}var mt=r.By((function(t){var e=t[0],i=e.totalCount,s=e.groupIndices,n=e.sizes,o=t[1],a=o.scrollTop,h=o.headerHeight,l=r.Vw(),c=r.Vw(),u=r.Er(r.zG(l,r.UI(ft)));return r.$j(r.zG(u,r.UI((function(t){return t.totalCount}))),i),r.$j(r.zG(u,r.UI((function(t){return t.groupIndices}))),s),r.$j(r.zG(r.aj(a,n,h),r.hX((function(t){return et(t[1])})),r.UI((function(t){return A(t[1].groupOffsetTree,Math.max(t[0]-t[2],0),"v")[0]})),r.xb(),r.UI((function(t){return[t]}))),c),{groupCounts:l,topItemsIndexes:c}}),r.Tc(st,_));function gt(t,e){return!(!t||t[0]!==e[0]||t[1]!==e[1])}function yt(t,e){return!(!t||t.startIndex!==e.startIndex||t.endIndex!==e.endIndex)}function vt(t,e,i){return"number"==typeof t?i===at&&"top"===e||"down"===i&&"bottom"===e?t:0:i===at?"top"===e?t.main:t.reverse:"bottom"===e?t.main:t.reverse}function bt(t,e){return"number"==typeof t?t:t[e]||0}var St=r.By((function(t){var e=t[0],i=e.scrollTop,s=e.viewportHeight,n=e.deviation,o=e.headerHeight,a=e.fixedHeaderHeight,h=r.Vw(),l=r.P0(0),c=r.P0(0),u=r.P0(0),p=r.o3(r.zG(r.aj(r.Ho(i),r.Ho(s),r.Ho(o),r.Ho(h,gt),r.Ho(u),r.Ho(l),r.Ho(a),r.Ho(n),r.Ho(c)),r.UI((function(t){var e=t[0],i=t[1],s=t[2],r=t[3],n=r[0],o=r[1],a=t[4],h=t[6],l=t[7],c=t[8],u=e-l,p=t[5]+h,d=Math.max(s-u,0),f="none",m=bt(c,"top"),g=bt(c,"bottom");return n-=l,o+=s+h,(n+=s+h)>e+p-m&&(f=at),(o-=l)<e-d+i+g&&(f="down"),"none"!==f?[Math.max(u-s-vt(a,"top",f)-m,0),u-d-h+i+vt(a,"bottom",f)+g]:null})),r.hX((function(t){return null!=t})),r.xb(gt)),[0,0]);return{listBoundary:h,overscan:u,topListHeight:l,increaseViewportBy:c,visibleRange:p}}),r.Tc(_),{singleton:!0}),xt={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function wt(t,e,i){if(0===t.length)return[];if(!et(e))return t.map((function(t){return h({},t,{index:t.index+i,originalIndex:t.index})}));for(var s,r=[],n=O(e.groupOffsetTree,t[0].index,t[t.length-1].index),o=void 0,a=0,l=u(t);!(s=l()).done;){var c=s.value;(!o||o.end<c.index)&&(o=n.shift(),a=e.groupIndices.indexOf(o.start)),r.push(h({},c.index===o.start?{type:"group",index:a}:{index:c.index-(a+1)+i,groupIndex:a},{size:c.size,offset:c.offset,originalIndex:c.index,data:c.data}))}return r}function kt(t,e,i,s,r,n){var o=0,a=0;if(t.length>0){o=t[0].offset;var h=t[t.length-1];a=h.offset+h.size}var l=i-r.lastIndex,c=o,u=r.lastOffset+l*r.lastSize+(l-1)*s-a;return{items:wt(t,r,n),topItems:wt(e,r,n),topListHeight:e.reduce((function(t,e){return e.size+t}),0),offsetTop:o,offsetBottom:u,top:c,bottom:a,totalCount:i,firstItemIndex:n}}var _t=r.By((function(t){var e=t[0],i=e.sizes,s=e.totalCount,n=e.data,o=e.firstItemIndex,a=e.gap,l=t[1],c=t[2],p=c.visibleRange,d=c.listBoundary,f=c.topListHeight,m=t[3],g=m.scrolledToInitialItem,y=m.initialTopMostItemIndex,v=t[4].topListHeight,b=t[5],S=t[6].didMount,x=t[7].recalcInProgress,w=r.P0([]),k=r.Vw();r.$j(l.topItemsIndexes,w);var _=r.o3(r.zG(r.aj(S,x,r.Ho(p,gt),r.Ho(s),r.Ho(i),r.Ho(y),g,r.Ho(w),r.Ho(o),r.Ho(a),n),r.hX((function(t){return t[0]&&!t[1]})),r.UI((function(t){var e=t[2],i=e[0],s=e[1],n=t[3],o=t[5],a=t[6],l=t[7],c=t[8],p=t[9],d=t[10],f=t[4],m=f.sizeTree,g=f.offsetTree;if(0===n||0===i&&0===s)return h({},xt,{totalCount:n});if(P(m))return kt(function(t,e,i){if(et(e)){var s=tt(t,e);return[{index:A(e.groupOffsetTree,s)[0],size:0,offset:0},{index:s,size:0,offset:0,data:i&&i[0]}]}return[{index:t,size:0,offset:0,data:i&&i[0]}]}(function(t,e){return"number"==typeof t?t:"LAST"===t.index?e-1:t.index}(o,n),f,d),[],n,p,f,c);var y=[];if(l.length>0)for(var v,b=l[0],S=l[l.length-1],x=0,w=u(O(m,b,S));!(v=w()).done;)for(var k=v.value,_=k.value,C=Math.max(k.start,b),E=Math.min(k.end,S),I=C;I<=E;I++)y.push({index:I,size:_,offset:x,data:d&&d[I]}),x+=_;if(!a)return kt([],y,n,p,f,c);var T=l.length>0?l[l.length-1]+1:0,M=function(t,e,i,s){return void 0===s&&(s=0),s>0&&(e=Math.max(e,j(t,s,U).offset)),N((n=i,a=G(r=t,e,o=K),h=G(r,n,o,a),r.slice(a,h+1)),Z);var r,n,o,a,h}(g,i,s,T);if(0===M.length)return null;var R=n-1;return kt(r.bw([],(function(t){for(var e,r=u(M);!(e=r()).done;){var n=e.value,o=n.value,a=o.offset,h=n.start,l=o.size;if(o.offset<i){var c=(h+=Math.floor((i-o.offset+p)/(l+p)))-n.start;a+=c*l+c*p}h<T&&(a+=(T-h)*l,h=T);for(var f=Math.min(n.end,R),m=h;m<=f&&!(a>=s);m++)t.push({index:m,size:l,offset:a,data:d&&d[m]}),a+=l+p}})),y,n,p,f,c)})),r.hX((function(t){return null!==t})),r.xb()),xt);return r.$j(r.zG(n,r.hX((function(t){return void 0!==t})),r.UI((function(t){return t.length}))),s),r.$j(r.zG(_,r.UI((function(t){return t.topListHeight}))),v),r.$j(v,f),r.$j(r.zG(_,r.UI((function(t){return[t.top,t.bottom]}))),d),r.$j(r.zG(_,r.UI((function(t){return t.items}))),k),h({listState:_,topItemsIndexes:w,endReached:r.Er(r.zG(_,r.hX((function(t){return t.items.length>0})),r.Mm(s,n),r.hX((function(t){var e=t[0].items;return e[e.length-1].originalIndex===t[1]-1})),r.UI((function(t){return[t[1]-1,t[2]]})),r.xb(gt),r.UI((function(t){return t[0]})))),startReached:r.Er(r.zG(_,r.pO(200),r.hX((function(t){var e=t.items;return e.length>0&&e[0].originalIndex===t.topItems.length})),r.UI((function(t){return t.items[0].index})),r.xb())),rangeChanged:r.Er(r.zG(_,r.hX((function(t){return t.items.length>0})),r.UI((function(t){for(var e=t.items,i=0,s=e.length-1;"group"===e[i].type&&i<s;)i++;for(;"group"===e[s].type&&s>i;)s--;return{startIndex:e[i].index,endIndex:e[s].index}})),r.xb(yt))),itemsRendered:k},b)}),r.Tc(st,mt,St,ut,ot,lt,ct,$),{singleton:!0}),Ct=r.By((function(t){var e=t[0],i=e.sizes,s=e.firstItemIndex,n=e.data,o=e.gap,a=t[1].listState,h=t[2].didMount,l=r.P0(0);return r.$j(r.zG(h,r.Mm(l),r.hX((function(t){return 0!==t[1]})),r.Mm(i,s,o,n),r.UI((function(t){var e=t[0][1],i=t[1],s=t[2],r=t[3],n=t[4],o=void 0===n?[]:n,a=0;if(i.groupIndices.length>0)for(var h,l=u(i.groupIndices);!((h=l()).done||h.value-a>=e);)a++;var c=e+a;return kt(Array.from({length:c}).map((function(t,e){return{index:e,size:0,offset:0,data:o[e]}})),[],c,r,i,s)}))),a),{initialItemCount:l}}),r.Tc(st,_t,ct),{singleton:!0}),Et=r.By((function(t){var e=t[0].scrollVelocity,i=r.P0(!1),s=r.Vw(),n=r.P0(!1);return r.$j(r.zG(e,r.Mm(n,i,s),r.hX((function(t){return!!t[1]})),r.UI((function(t){var e=t[0],i=t[1],s=t[2],r=t[3],n=i.enter;if(s){if((0,i.exit)(e,r))return!1}else if(n(e,r))return!0;return s})),r.xb()),i),r.Ld(r.zG(r.aj(i,e,s),r.Mm(n)),(function(t){var e=t[0],i=t[1];return e[0]&&i&&i.change&&i.change(e[1],e[2])})),{isSeeking:i,scrollSeekConfiguration:n,scrollVelocity:e,scrollSeekRangeChanged:s}}),r.Tc(lt),{singleton:!0}),Pt=r.By((function(t){var e=t[0].topItemsIndexes,i=r.P0(0);return r.$j(r.zG(i,r.hX((function(t){return t>0})),r.UI((function(t){return Array.from({length:t}).map((function(t,e){return e}))}))),e),{topItemCount:i}}),r.Tc(_t)),It=r.By((function(t){var e=t[0],i=e.footerHeight,s=e.headerHeight,n=e.fixedHeaderHeight,o=e.fixedFooterHeight,a=t[1].listState,h=r.Vw(),l=r.o3(r.zG(r.aj(i,o,s,n,a),r.UI((function(t){var e=t[4];return t[0]+t[1]+t[2]+t[3]+e.offsetBottom+e.bottom}))),0);return r.$j(r.Ho(l),h),{totalListHeight:l,totalListHeightChanged:h}}),r.Tc(_,_t),{singleton:!0});function Tt(t){var e,i=!1;return function(){return i||(i=!0,e=t()),e}}var At=Tt((function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)})),Mt=r.By((function(t){var e=t[0],i=e.scrollBy,s=e.scrollTop,n=e.deviation,o=e.scrollingInProgress,a=t[1],h=a.isScrolling,l=a.isAtBottom,c=a.scrollDirection,u=t[3],p=u.beforeUnshiftWith,f=u.shiftWithOffset,m=u.sizes,g=u.gap,y=t[4].log,v=t[5].recalcInProgress,b=r.Er(r.zG(t[2].listState,r.Mm(a.lastJumpDueToItemResize),r.Rp((function(t,e){var i=t[1],s=e[0],r=s.items,n=s.totalCount,o=s.bottom+s.offsetBottom,a=0;return t[2]===n&&i.length>0&&r.length>0&&(0===r[0].originalIndex&&0===i[0].originalIndex||0!=(a=o-t[3])&&(a+=e[1])),[a,r,n,o]}),[0,[],0,0]),r.hX((function(t){return 0!==t[0]})),r.Mm(s,c,o,l,y),r.hX((function(t){return!t[3]&&0!==t[1]&&t[2]===at})),r.UI((function(t){var e=t[0][0];return(0,t[5])("Upward scrolling compensation",{amount:e},d.DEBUG),e}))));function S(t){t>0?(r.nY(i,{top:-t,behavior:"auto"}),r.nY(n,0)):(r.nY(n,0),r.nY(i,{top:-t,behavior:"auto"}))}return r.Ld(r.zG(b,r.Mm(n,h)),(function(t){var e=t[0],i=t[1];t[2]&&At()?r.nY(n,i-e):S(-e)})),r.Ld(r.zG(r.aj(r.o3(h,!1),n,v),r.hX((function(t){return!t[0]&&!t[2]&&0!==t[1]})),r.UI((function(t){return t[1]})),r.pO(1)),S),r.$j(r.zG(f,r.UI((function(t){return{top:-t}}))),i),r.Ld(r.zG(p,r.Mm(m,g),r.UI((function(t){var e=t[0];return e*t[1].lastSize+e*t[2]}))),(function(t){r.nY(n,t),requestAnimationFrame((function(){r.nY(i,{top:t}),requestAnimationFrame((function(){r.nY(n,0),r.nY(v,!1)}))}))})),{deviation:n}}),r.Tc(_,lt,_t,st,y,$)),Rt=r.By((function(t){var e=t[0].totalListHeight,i=t[1].didMount,s=t[2].scrollTo,n=r.P0(0);return r.Ld(r.zG(i,r.Mm(n),r.hX((function(t){return 0!==t[1]})),r.UI((function(t){return{top:t[1]}}))),(function(t){r.eM(r.zG(e,r.hX((function(t){return 0!==t}))),(function(){setTimeout((function(){r.nY(s,t)}))}))})),{initialScrollTop:n}}),r.Tc(It,ct,_),{singleton:!0}),Bt=r.By((function(t){var e=t[0].viewportHeight,i=t[1].totalListHeight,s=r.P0(!1);return{alignToBottom:s,paddingTopAddition:r.o3(r.zG(r.aj(s,e,i),r.hX((function(t){return t[0]})),r.UI((function(t){return Math.max(0,t[1]-t[2])})),r.xb()),0)}}),r.Tc(_,It),{singleton:!0}),zt=r.By((function(t){var e=t[0],i=e.scrollTo,s=e.scrollContainerState,n=r.Vw(),o=r.Vw(),a=r.Vw(),l=r.P0(!1),c=r.P0(void 0);return r.$j(r.zG(r.aj(n,o),r.UI((function(t){var e=t[0],i=e.viewportHeight,s=e.scrollHeight;return{scrollTop:Math.max(0,e.scrollTop-t[1].offsetTop),scrollHeight:s,viewportHeight:i}}))),s),r.$j(r.zG(i,r.Mm(o),r.UI((function(t){var e=t[0];return h({},e,{top:e.top+t[1].offsetTop})}))),a),{useWindowScroll:l,customScrollParent:c,windowScrollContainerState:n,windowViewportRect:o,windowScrollTo:a}}),r.Tc(_)),Dt=["done","behavior","align"],Ft=r.By((function(t){var e=t[0],i=e.sizes,s=e.totalCount,n=e.gap,o=t[1],a=o.scrollTop,c=o.viewportHeight,u=o.headerHeight,p=o.scrollingInProgress,d=t[2].scrollToIndex,f=r.Vw();return r.$j(r.zG(f,r.Mm(i,c,s,u,a,n),r.UI((function(t){var e=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],c=t[6],u=e.done,d=e.behavior,f=e.align,m=l(e,Dt),g=null,y=Q(e,i,n-1),v=X(y,i.offsetTree,c)+o;return v<a?g=h({},m,{behavior:d,align:null!=f?f:"start"}):v+A(i.sizeTree,y)[1]>a+s&&(g=h({},m,{behavior:d,align:null!=f?f:"end"})),g?u&&r.eM(r.zG(p,r.T0(1),r.hX((function(t){return!1===t}))),u):u&&u(),g})),r.hX((function(t){return null!==t}))),d),{scrollIntoView:f}}),r.Tc(st,_,ot,_t,y),{singleton:!0}),Lt=["listState","topItemsIndexes"],Vt=r.By((function(t){return h({},t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}),r.Tc(St,Ct,ct,Et,It,Rt,Bt,zt,Ft)),Ot=r.By((function(t){var e=t[0],i=e.totalCount,s=e.sizeRanges,n=e.fixedItemSize,o=e.defaultItemSize,a=e.trackItemSizes,c=e.itemSize,u=e.data,p=e.firstItemIndex,d=e.groupIndices,f=e.statefulTotalCount,m=e.gap,g=t[1],y=g.initialTopMostItemIndex,v=g.scrolledToInitialItem,b=t[2],S=t[3],x=t[4],w=x.listState,k=x.topItemsIndexes,_=l(x,Lt),C=t[5].scrollToIndex,E=t[7].topItemCount,P=t[8].groupCounts,I=t[9],T=t[10];return r.$j(_.rangeChanged,I.scrollSeekRangeChanged),r.$j(r.zG(I.windowViewportRect,r.UI((function(t){return t.visibleHeight}))),b.viewportHeight),h({totalCount:i,data:u,firstItemIndex:p,sizeRanges:s,initialTopMostItemIndex:y,scrolledToInitialItem:v,topItemsIndexes:k,topItemCount:E,groupCounts:P,fixedItemHeight:n,defaultItemHeight:o,gap:m},S,{statefulTotalCount:f,listState:w,scrollToIndex:C,trackItemSizes:a,itemSize:c,groupIndices:d},_,I,b,T)}),r.Tc(st,ut,_,dt,_t,ot,Mt,Pt,mt,Vt,y)),Nt=Tt((function(){if("undefined"==typeof document)return"sticky";var t=document.createElement("div");return t.style.position="-webkit-sticky","-webkit-sticky"===t.style.position?"-webkit-sticky":"sticky"}));function Wt(t,e){var i=(0,n.useRef)(null),s=(0,n.useCallback)((function(s){if(null!==s&&s.offsetParent){var r,n,o=s.getBoundingClientRect(),a=o.width;if(e){var h=e.getBoundingClientRect(),l=o.top-h.top;r=h.height-Math.max(0,l),n=l+e.scrollTop}else r=window.innerHeight-Math.max(0,o.top),n=o.top+window.pageYOffset;i.current={offsetTop:n,visibleHeight:r,visibleWidth:a},t(i.current)}}),[t,e]),r=v(s),o=r.callbackRef,a=r.ref,h=(0,n.useCallback)((function(){s(a.current)}),[s,a]);return(0,n.useEffect)((function(){if(e){e.addEventListener("scroll",h);var t=new ResizeObserver(h);return t.observe(e),function(){e.removeEventListener("scroll",h),t.unobserve(e)}}return window.addEventListener("scroll",h),window.addEventListener("resize",h),function(){window.removeEventListener("scroll",h),window.removeEventListener("resize",h)}}),[h,e]),o}var Ht=n.createContext(void 0),Gt=["placeholder"],jt=["style","children"],$t=["style","children"];function qt(t){return t}var Ut=r.By((function(){var t=r.P0((function(t){return"Item "+t})),e=r.P0(null),i=r.P0((function(t){return"Group "+t})),s=r.P0({}),n=r.P0(qt),o=r.P0("div"),a=r.P0(r.ZT),h=function(t,e){return void 0===e&&(e=null),r.o3(r.zG(s,r.UI((function(e){return e[t]})),r.xb()),e)};return{context:e,itemContent:t,groupContent:i,components:s,computeItemKey:n,headerFooterTag:o,scrollerRef:a,FooterComponent:h("Footer"),HeaderComponent:h("Header"),TopItemListComponent:h("TopItemList"),ListComponent:h("List","div"),ItemComponent:h("Item","div"),GroupComponent:h("Group","div"),ScrollerComponent:h("Scroller","div"),EmptyPlaceholder:h("EmptyPlaceholder"),ScrollSeekPlaceholder:h("ScrollSeekPlaceholder")}}));function Kt(t,e){var i=r.Vw();return r.Ld(i,(function(){return a.warn("react-virtuoso: You are using a deprecated property. "+e,"color: red;","color: inherit;","color: blue;")})),r.$j(i,t),i}var Zt=r.By((function(t){var e=t[0],i=t[1],s={item:Kt(i.itemContent,"Rename the %citem%c prop to %citemContent."),group:Kt(i.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Kt(e.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Kt(e.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Kt(e.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:r.Vw(),maxHeightCacheSize:r.Vw(),footer:r.Vw(),header:r.Vw(),HeaderContainer:r.Vw(),FooterContainer:r.Vw(),ItemContainer:r.Vw(),ScrollContainer:r.Vw(),GroupContainer:r.Vw(),ListContainer:r.Vw(),emptyComponent:r.Vw(),scrollSeek:r.Vw()};function n(t,e,s){r.$j(r.zG(t,r.Mm(i.components),r.UI((function(t){var i,r=t[0],n=t[1];return a.warn("react-virtuoso: "+s+" property is deprecated. Pass components."+e+" instead."),h({},n,((i={})[e]=r,i))}))),i.components)}return r.Ld(s.adjustForPrependedItems,(function(){a.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")})),r.Ld(s.maxHeightCacheSize,(function(){a.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")})),r.Ld(s.HeaderContainer,(function(){a.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")})),r.Ld(s.FooterContainer,(function(){a.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")})),r.Ld(s.scrollSeek,(function(t){var s=t.placeholder,n=l(t,Gt);a.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),r.nY(i.components,h({},r.NA(i.components),{ScrollSeekPlaceholder:s})),r.nY(e.scrollSeekConfiguration,n)})),n(s.footer,"Footer","footer"),n(s.header,"Header","header"),n(s.ItemContainer,"Item","ItemContainer"),n(s.ListContainer,"List","ListContainer"),n(s.ScrollContainer,"Scroller","ScrollContainer"),n(s.emptyComponent,"EmptyPlaceholder","emptyComponent"),n(s.GroupContainer,"Group","GroupContainer"),h({},e,i,s)}),r.Tc(Ot,Ut)),Yt=function(t){return n.createElement("div",{style:{height:t.height}})},Jt={position:Nt(),zIndex:1,overflowAnchor:"none"},Xt={overflowAnchor:"none"},Qt=n.memo((function(t){var e=t.showTopList,i=void 0!==e&&e,s=fe("listState"),o=de("sizeRanges"),a=fe("useWindowScroll"),l=fe("customScrollParent"),c=de("windowScrollContainerState"),u=de("scrollContainerState"),p=l||a?c:u,d=fe("itemContent"),f=fe("context"),m=fe("groupContent"),g=fe("trackItemSizes"),y=fe("itemSize"),v=fe("log"),b=de("gap"),x=S(o,y,g,i?r.ZT:p,v,b,l).callbackRef,w=n.useState(0),k=w[0],_=w[1];me("deviation",(function(t){k!==t&&_(t)}));var C=fe("EmptyPlaceholder"),E=fe("ScrollSeekPlaceholder")||Yt,P=fe("ListComponent"),I=fe("ItemComponent"),T=fe("GroupComponent"),A=fe("computeItemKey"),M=fe("isSeeking"),R=fe("groupIndices").length>0,B=fe("paddingTopAddition"),z=i?{}:{boxSizing:"border-box",paddingTop:s.offsetTop+B,paddingBottom:s.offsetBottom,marginTop:k};return!i&&0===s.totalCount&&C?(0,n.createElement)(C,se(C,f)):(0,n.createElement)(P,h({},se(P,f),{ref:x,style:z,"data-test-id":i?"virtuoso-top-item-list":"virtuoso-item-list"}),(i?s.topItems:s.items).map((function(t){var e=t.originalIndex,i=A(e+s.firstItemIndex,t.data,f);return M?(0,n.createElement)(E,h({},se(E,f),{key:i,index:t.index,height:t.size,type:t.type||"item"},"group"===t.type?{}:{groupIndex:t.groupIndex})):"group"===t.type?(0,n.createElement)(T,h({},se(T,f),{key:i,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,style:Jt}),m(t.index)):(0,n.createElement)(I,h({},se(I,f),{key:i,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,"data-item-group-index":t.groupIndex,style:Xt}),R?d(t.index,t.groupIndex,t.data,f):d(t.index,t.data,f))})))})),te={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},ee={width:"100%",height:"100%",position:"absolute",top:0},ie={width:"100%",position:Nt(),top:0};function se(t,e){if("string"!=typeof t)return{context:e}}var re=n.memo((function(){var t=fe("HeaderComponent"),e=de("headerHeight"),i=fe("headerFooterTag"),s=b((function(t){return e(x(t,"height"))})),r=fe("context");return t?(0,n.createElement)(i,{ref:s},(0,n.createElement)(t,se(t,r))):null})),ne=n.memo((function(){var t=fe("FooterComponent"),e=de("footerHeight"),i=fe("headerFooterTag"),s=b((function(t){return e(x(t,"height"))})),r=fe("context");return t?(0,n.createElement)(i,{ref:s},(0,n.createElement)(t,se(t,r))):null}));function oe(t){var e=t.usePublisher,i=t.useEmitter,s=t.useEmitterValue;return n.memo((function(t){var r=t.style,o=t.children,a=l(t,jt),c=e("scrollContainerState"),u=s("ScrollerComponent"),p=e("smoothScrollTargetReached"),d=s("scrollerRef"),f=s("context"),m=k(c,p,u,d),g=m.scrollerRef,y=m.scrollByCallback;return i("scrollTo",m.scrollToCallback),i("scrollBy",y),(0,n.createElement)(u,h({ref:g,style:h({},te,r),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},a,se(u,f)),o)}))}function ae(t){var e=t.usePublisher,i=t.useEmitter,s=t.useEmitterValue;return n.memo((function(t){var o=t.style,a=t.children,c=l(t,$t),u=e("windowScrollContainerState"),p=s("ScrollerComponent"),d=e("smoothScrollTargetReached"),f=s("totalListHeight"),g=s("deviation"),y=s("customScrollParent"),v=s("context"),b=k(u,d,p,r.ZT,y),S=b.scrollerRef,x=b.scrollByCallback,w=b.scrollToCallback;return m((function(){return S.current=y||window,function(){S.current=null}}),[S,y]),i("windowScrollTo",w),i("scrollBy",x),(0,n.createElement)(p,h({style:h({position:"relative"},o,0!==f?{height:f+g}:{}),"data-virtuoso-scroller":!0},c,se(p,v)),a)}))}var he=function(t){var e=t.children,i=(0,n.useContext)(Ht),s=de("viewportHeight"),o=de("fixedItemHeight"),a=b(r.qC(s,(function(t){return x(t,"height")})));return n.useEffect((function(){i&&(s(i.viewportHeight),o(i.itemHeight))}),[i,s,o]),n.createElement("div",{style:ee,ref:a,"data-viewport-type":"element"},e)},le=function(t){var e=t.children,i=(0,n.useContext)(Ht),s=de("windowViewportRect"),r=de("fixedItemHeight"),o=fe("customScrollParent"),a=Wt(s,o);return n.useEffect((function(){i&&(r(i.itemHeight),s({offsetTop:0,visibleHeight:i.viewportHeight,visibleWidth:100}))}),[i,s,r]),n.createElement("div",{ref:a,style:ee,"data-viewport-type":"window"},e)},ce=function(t){var e=t.children,i=fe("TopItemListComponent"),s=fe("headerHeight"),r=h({},ie,{marginTop:s+"px"}),o=fe("context");return(0,n.createElement)(i||"div",{style:r,context:o},e)},ue=(0,s.C)(Zt,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},n.memo((function(t){var e=fe("useWindowScroll"),i=fe("topItemsIndexes").length>0,s=fe("customScrollParent"),r=s||e?le:he;return n.createElement(s||e?ye:ge,h({},t),n.createElement(r,null,n.createElement(re,null),n.createElement(Qt,null),n.createElement(ne,null)),i&&n.createElement(ce,null,n.createElement(Qt,{showTopList:!0})))}))),pe=ue.Component,de=ue.usePublisher,fe=ue.useEmitterValue,me=ue.useEmitter,ge=oe({usePublisher:de,useEmitterValue:fe,useEmitter:me}),ye=ae({usePublisher:de,useEmitterValue:fe,useEmitter:me}),ve={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},be={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Se=Math.round,xe=Math.ceil,we=Math.floor,ke=Math.min,_e=Math.max;function Ce(t,e){return Array.from({length:e-t+1}).map((function(e,i){return{index:i+t}}))}function Ee(t,e){return t&&t.column===e.column&&t.row===e.row}var Pe=r.By((function(t){var e=t[0],i=e.overscan,s=e.visibleRange,n=e.listBoundary,o=t[1],a=o.scrollTop,l=o.viewportHeight,c=o.scrollBy,u=o.scrollTo,p=o.smoothScrollTargetReached,d=o.scrollContainerState,f=t[2],m=t[3],g=t[4],y=g.propsReady,v=g.didMount,b=t[5],S=b.windowViewportRect,x=b.windowScrollTo,w=b.useWindowScroll,k=b.customScrollParent,_=b.windowScrollContainerState,C=t[6],E=r.P0(0),P=r.P0(0),I=r.P0(ve),T=r.P0({height:0,width:0}),A=r.P0({height:0,width:0}),M=r.Vw(),R=r.Vw(),B=r.P0(0),z=r.P0({row:0,column:0});r.$j(r.zG(v,r.Mm(P),r.hX((function(t){return 0!==t[1]})),r.UI((function(t){return{items:Ce(0,t[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}}))),I),r.$j(r.zG(r.aj(r.Ho(E),s,r.Ho(z,Ee),r.Ho(A,(function(t,e){return t&&t.width===e.width&&t.height===e.height}))),r.Mm(T),r.UI((function(t){var e=t[0],i=e[0],s=e[1],r=s[0],n=s[1],o=e[2],a=e[3],h=t[1],l=o.row,c=a.height,u=a.width,p=h.width;if(0===i||0===p)return ve;if(0===u)return be;var d=Ae(p,u,o.column),f=d*we((r+l)/(c+l)),m=d*xe((n+l)/(c+l))-1;m=_e(0,ke(i-1,m));var g=Ce(f=ke(m,_e(0,f)),m),y=Ie(h,o,a,g),v=y.top,b=y.bottom,S=xe(i/d);return{items:g,offsetTop:v,offsetBottom:S*c+(S-1)*l-b,top:v,bottom:b,itemHeight:c,itemWidth:u}}))),I),r.$j(r.zG(T,r.UI((function(t){return t.height}))),l),r.$j(r.zG(r.aj(T,A,I,z),r.UI((function(t){var e=Ie(t[0],t[3],t[1],t[2].items);return[e.top,e.bottom]})),r.xb(gt)),n);var D=r.Er(r.zG(r.Ho(I),r.hX((function(t){return t.items.length>0})),r.Mm(E),r.hX((function(t){var e=t[0].items;return e[e.length-1].index===t[1]-1})),r.UI((function(t){return t[1]-1})),r.xb())),F=r.Er(r.zG(r.Ho(I),r.hX((function(t){var e=t.items;return e.length>0&&0===e[0].index})),r.hZ(0),r.xb())),L=r.Er(r.zG(r.Ho(I),r.hX((function(t){return t.items.length>0})),r.UI((function(t){var e=t.items;return{startIndex:e[0].index,endIndex:e[e.length-1].index}})),r.xb(yt)));r.$j(L,m.scrollSeekRangeChanged),r.$j(r.zG(M,r.Mm(T,A,E,z),r.UI((function(t){var e=t[1],i=t[2],s=t[3],r=t[4],n=nt(t[0]),o=n.align,a=n.behavior,h=n.offset,l=n.index;"LAST"===l&&(l=s-1);var c=Te(e,r,i,l=_e(0,l,ke(s-1,l)));return"end"===o?c=Se(c-e.height+i.height):"center"===o&&(c=Se(c-e.height/2+i.height/2)),h&&(c+=h),{top:c,behavior:a}}))),u);var V=r.o3(r.zG(I,r.UI((function(t){return t.offsetBottom+t.bottom}))),0);return r.$j(r.zG(S,r.UI((function(t){return{width:t.visibleWidth,height:t.visibleHeight}}))),T),h({totalCount:E,viewportDimensions:T,itemDimensions:A,scrollTop:a,scrollHeight:R,overscan:i,scrollBy:c,scrollTo:u,scrollToIndex:M,smoothScrollTargetReached:p,windowViewportRect:S,windowScrollTo:x,useWindowScroll:w,customScrollParent:k,windowScrollContainerState:_,deviation:B,scrollContainerState:d,initialItemCount:P,gap:z},m,{gridState:I,totalListHeight:V},f,{startReached:F,endReached:D,rangeChanged:L,propsReady:y},C)}),r.Tc(St,_,lt,Et,ct,zt,y));function Ie(t,e,i,s){var r=i.height;return void 0===r||0===s.length?{top:0,bottom:0}:{top:Te(t,e,i,s[0].index),bottom:Te(t,e,i,s[s.length-1].index)+r}}function Te(t,e,i,s){var r=Ae(t.width,i.width,e.column),n=we(s/r),o=n*i.height+_e(0,n-1)*e.row;return o>0?o+e.row:o}function Ae(t,e,i){return _e(1,we((t+i)/(e+i)))}var Me=["placeholder"],Re=r.By((function(){var t=r.P0((function(t){return"Item "+t})),e=r.P0({}),i=r.P0(null),s=r.P0("virtuoso-grid-item"),n=r.P0("virtuoso-grid-list"),o=r.P0(qt),a=r.P0(r.ZT),h=function(t,i){return void 0===i&&(i=null),r.o3(r.zG(e,r.UI((function(e){return e[t]})),r.xb()),i)};return{context:i,itemContent:t,components:e,computeItemKey:o,itemClassName:s,listClassName:n,scrollerRef:a,ListComponent:h("List","div"),ItemComponent:h("Item","div"),ScrollerComponent:h("Scroller","div"),ScrollSeekPlaceholder:h("ScrollSeekPlaceholder","div")}})),Be=r.By((function(t){var e=t[0],i=t[1],s={item:Kt(i.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:r.Vw(),ScrollContainer:r.Vw(),ListContainer:r.Vw(),emptyComponent:r.Vw(),scrollSeek:r.Vw()};function n(t,e,s){r.$j(r.zG(t,r.Mm(i.components),r.UI((function(t){var i,r=t[0],n=t[1];return a.warn("react-virtuoso: "+s+" property is deprecated. Pass components."+e+" instead."),h({},n,((i={})[e]=r,i))}))),i.components)}return r.Ld(s.scrollSeek,(function(t){var s=t.placeholder,n=l(t,Me);a.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),r.nY(i.components,h({},r.NA(i.components),{ScrollSeekPlaceholder:s})),r.nY(e.scrollSeekConfiguration,n)})),n(s.ItemContainer,"Item","ItemContainer"),n(s.ListContainer,"List","ListContainer"),n(s.ScrollContainer,"Scroller","ScrollContainer"),h({},e,i,s)}),r.Tc(Pe,Re)),ze=n.memo((function(){var t=Oe("gridState"),e=Oe("listClassName"),i=Oe("itemClassName"),s=Oe("itemContent"),r=Oe("computeItemKey"),o=Oe("isSeeking"),a=Ve("scrollHeight"),l=Oe("ItemComponent"),c=Oe("ListComponent"),u=Oe("ScrollSeekPlaceholder"),p=Oe("context"),d=Ve("itemDimensions"),f=Ve("gap"),m=Oe("log"),g=b((function(t){a(t.parentElement.parentElement.scrollHeight);var e=t.firstChild;e&&d(e.getBoundingClientRect()),f({row:Ge("row-gap",getComputedStyle(t).rowGap,m),column:Ge("column-gap",getComputedStyle(t).columnGap,m)})}));return(0,n.createElement)(c,h({ref:g,className:e},se(c,p),{style:{paddingTop:t.offsetTop,paddingBottom:t.offsetBottom}}),t.items.map((function(e){var a=r(e.index);return o?(0,n.createElement)(u,h({key:a},se(u,p),{index:e.index,height:t.itemHeight,width:t.itemWidth})):(0,n.createElement)(l,h({},se(l,p),{className:i,"data-index":e.index,key:a}),s(e.index,p))})))})),De=function(t){var e=t.children,i=Ve("viewportDimensions"),s=b((function(t){i(t.getBoundingClientRect())}));return n.createElement("div",{style:ee,ref:s},e)},Fe=function(t){var e=t.children,i=Wt(Ve("windowViewportRect"),Oe("customScrollParent"));return n.createElement("div",{ref:i,style:ee},e)},Le=(0,s.C)(Be,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},n.memo((function(t){var e=h({},t),i=Oe("useWindowScroll"),s=Oe("customScrollParent"),r=s||i?Fe:De;return n.createElement(s||i?He:We,h({},e),n.createElement(r,null,n.createElement(ze,null)))}))),Ve=(Le.Component,Le.usePublisher),Oe=Le.useEmitterValue,Ne=Le.useEmitter,We=oe({usePublisher:Ve,useEmitterValue:Oe,useEmitter:Ne}),He=ae({usePublisher:Ve,useEmitterValue:Oe,useEmitter:Ne});function Ge(t,e,i){return"normal"===e||null!=e&&e.endsWith("px")||i(t+" was not resolved to pixel value correctly",e,d.WARN),"normal"===e?0:parseInt(null!=e?e:"0",10)}var je=r.By((function(){var t=r.P0((function(t){return n.createElement("td",null,"Item $",t)})),e=r.P0(null),i=r.P0(null),s=r.P0(null),o=r.P0({}),a=r.P0(qt),h=r.P0(r.ZT),l=function(t,e){return void 0===e&&(e=null),r.o3(r.zG(o,r.UI((function(e){return e[t]})),r.xb()),e)};return{context:e,itemContent:t,fixedHeaderContent:i,fixedFooterContent:s,components:o,computeItemKey:a,scrollerRef:h,TableComponent:l("Table","table"),TableHeadComponent:l("TableHead","thead"),TableFooterComponent:l("TableFoot","tfoot"),TableBodyComponent:l("TableBody","tbody"),TableRowComponent:l("TableRow","tr"),ScrollerComponent:l("Scroller","div"),EmptyPlaceholder:l("EmptyPlaceholder"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),FillerRow:l("FillerRow")}})),$e=r.By((function(t){return h({},t[0],t[1])}),r.Tc(Ot,je)),qe=function(t){return n.createElement("tr",null,n.createElement("td",{style:{height:t.height}}))},Ue=function(t){return n.createElement("tr",null,n.createElement("td",{style:{height:t.height,padding:0,border:0}}))},Ke=n.memo((function(){var t=Qe("listState"),e=Xe("sizeRanges"),i=Qe("useWindowScroll"),s=Qe("customScrollParent"),r=Xe("windowScrollContainerState"),o=Xe("scrollContainerState"),a=s||i?r:o,l=Qe("itemContent"),c=Qe("trackItemSizes"),u=S(e,Qe("itemSize"),c,a,Qe("log"),void 0,s),p=u.callbackRef,d=u.ref,f=n.useState(0),m=f[0],g=f[1];ti("deviation",(function(t){m!==t&&(d.current.style.marginTop=t+"px",g(t))}));var y=Qe("EmptyPlaceholder"),v=Qe("ScrollSeekPlaceholder")||qe,b=Qe("FillerRow")||Ue,x=Qe("TableBodyComponent"),w=Qe("TableRowComponent"),k=Qe("computeItemKey"),_=Qe("isSeeking"),C=Qe("paddingTopAddition"),E=Qe("firstItemIndex"),P=Qe("statefulTotalCount"),I=Qe("context");if(0===P&&y)return(0,n.createElement)(y,se(y,I));var T=t.offsetTop+C+m,A=t.offsetBottom,M=T>0?n.createElement(b,{height:T,key:"padding-top"}):null,R=A>0?n.createElement(b,{height:A,key:"padding-bottom"}):null,B=t.items.map((function(t){var e=t.originalIndex,i=k(e+E,t.data,I);return _?(0,n.createElement)(v,h({},se(v,I),{key:i,index:t.index,height:t.size,type:t.type||"item"})):(0,n.createElement)(w,h({},se(w,I),{key:i,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,style:{overflowAnchor:"none"}}),l(t.index,t.data,I))}));return(0,n.createElement)(x,h({ref:p,"data-test-id":"virtuoso-item-list"},se(x,I)),[M].concat(B,[R]))})),Ze=function(t){var e=t.children,i=(0,n.useContext)(Ht),s=Xe("viewportHeight"),o=Xe("fixedItemHeight"),a=b(r.qC(s,(function(t){return x(t,"height")})));return n.useEffect((function(){i&&(s(i.viewportHeight),o(i.itemHeight))}),[i,s,o]),n.createElement("div",{style:ee,ref:a,"data-viewport-type":"element"},e)},Ye=function(t){var e=t.children,i=(0,n.useContext)(Ht),s=Xe("windowViewportRect"),r=Xe("fixedItemHeight"),o=Qe("customScrollParent"),a=Wt(s,o);return n.useEffect((function(){i&&(r(i.itemHeight),s({offsetTop:0,visibleHeight:i.viewportHeight,visibleWidth:100}))}),[i,s,r]),n.createElement("div",{ref:a,style:ee,"data-viewport-type":"window"},e)},Je=(0,s.C)($e,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},n.memo((function(t){var e=Qe("useWindowScroll"),i=Qe("customScrollParent"),s=Xe("fixedHeaderHeight"),o=Xe("fixedFooterHeight"),a=Qe("fixedHeaderContent"),l=Qe("fixedFooterContent"),c=Qe("context"),u=b(r.qC(s,(function(t){return x(t,"height")}))),p=b(r.qC(o,(function(t){return x(t,"height")}))),d=i||e?ii:ei,f=i||e?Ye:Ze,m=Qe("TableComponent"),g=Qe("TableHeadComponent"),y=Qe("TableFooterComponent"),v=a?n.createElement(g,h({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:u},se(g,c)),a()):null,S=l?n.createElement(y,h({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:p},se(y,c)),l()):null;return n.createElement(d,h({},t),n.createElement(f,null,n.createElement(m,h({style:{borderSpacing:0}},se(m,c)),[v,n.createElement(Ke,{key:"TableBody"}),S])))}))),Xe=(Je.Component,Je.usePublisher),Qe=Je.useEmitterValue,ti=Je.useEmitter,ei=oe({usePublisher:Xe,useEmitterValue:Qe,useEmitter:ti}),ii=ae({usePublisher:Xe,useEmitterValue:Qe,useEmitter:ti}),si=pe},"../../../node_modules/react/cjs/react.production.min.js":(t,e)=>{"use strict";var i=Symbol.for("react.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),h=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),d=Symbol.iterator,f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(t,e,i){this.props=t,this.context=e,this.refs=g,this.updater=i||f}function v(){}function b(t,e,i){this.props=t,this.context=e,this.refs=g,this.updater=i||f}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},v.prototype=y.prototype;var S=b.prototype=new v;S.constructor=b,m(S,y.prototype),S.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function C(t,e,s){var r,n={},o=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(o=""+e.key),e)w.call(e,r)&&!_.hasOwnProperty(r)&&(n[r]=e[r]);var h=arguments.length-2;if(1===h)n.children=s;else if(1<h){for(var l=Array(h),c=0;c<h;c++)l[c]=arguments[c+2];n.children=l}if(t&&t.defaultProps)for(r in h=t.defaultProps)void 0===n[r]&&(n[r]=h[r]);return{$$typeof:i,type:t,key:o,ref:a,props:n,_owner:k.current}}function E(t){return"object"==typeof t&&null!==t&&t.$$typeof===i}var P=/\/+/g;function I(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function T(t,e,r,n,o){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var h=!1;if(null===t)h=!0;else switch(a){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case i:case s:h=!0}}if(h)return o=o(h=t),t=""===n?"."+I(h,0):n,x(o)?(r="",null!=t&&(r=t.replace(P,"$&/")+"/"),T(o,e,r,"",(function(t){return t}))):null!=o&&(E(o)&&(o=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(o,r+(!o.key||h&&h.key===o.key?"":(""+o.key).replace(P,"$&/")+"/")+t)),e.push(o)),1;if(h=0,n=""===n?".":n+":",x(t))for(var l=0;l<t.length;l++){var c=n+I(a=t[l],l);h+=T(a,e,r,c,o)}else if(c=function(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t),"function"==typeof c)for(t=c.call(t),l=0;!(a=t.next()).done;)h+=T(a=a.value,e,r,c=n+I(a,l++),o);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function A(t,e,i){if(null==t)return t;var s=[],r=0;return T(t,s,"","",(function(t){return e.call(i,t,r++)})),s}function M(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var R={current:null},B={transition:null},z={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:B,ReactCurrentOwner:k};e.Children={map:A,forEach:function(t,e,i){A(t,(function(){e.apply(this,arguments)}),i)},count:function(t){var e=0;return A(t,(function(){e++})),e},toArray:function(t){return A(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=y,e.Fragment=r,e.Profiler=o,e.PureComponent=b,e.StrictMode=n,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,e.cloneElement=function(t,e,s){if(null==t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=m({},t.props),n=t.key,o=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(o=e.ref,a=k.current),void 0!==e.key&&(n=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(l in e)w.call(e,l)&&!_.hasOwnProperty(l)&&(r[l]=void 0===e[l]&&void 0!==h?h[l]:e[l])}var l=arguments.length-2;if(1===l)r.children=s;else if(1<l){h=Array(l);for(var c=0;c<l;c++)h[c]=arguments[c+2];r.children=h}return{$$typeof:i,type:t.type,key:n,ref:o,props:r,_owner:a}},e.createContext=function(t){return(t={$$typeof:h,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=C,e.createFactory=function(t){var e=C.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:l,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:p,_payload:{_status:-1,_result:t},_init:M}},e.memo=function(t,e){return{$$typeof:u,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=B.transition;B.transition={};try{t()}finally{B.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return R.current.useCallback(t,e)},e.useContext=function(t){return R.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return R.current.useDeferredValue(t)},e.useEffect=function(t,e){return R.current.useEffect(t,e)},e.useId=function(){return R.current.useId()},e.useImperativeHandle=function(t,e,i){return R.current.useImperativeHandle(t,e,i)},e.useInsertionEffect=function(t,e){return R.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return R.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return R.current.useMemo(t,e)},e.useReducer=function(t,e,i){return R.current.useReducer(t,e,i)},e.useRef=function(t){return R.current.useRef(t)},e.useState=function(t){return R.current.useState(t)},e.useSyncExternalStore=function(t,e,i){return R.current.useSyncExternalStore(t,e,i)},e.useTransition=function(){return R.current.useTransition()},e.version="18.2.0"},"../../../node_modules/react/index.js":(t,e,i)=>{"use strict";t.exports=i("../../../node_modules/react/cjs/react.production.min.js")},"../../../node_modules/@tanstack/query-core/build/modern/utils.js":(t,e,i)=>{"use strict";i.d(e,{CN:()=>C,Ht:()=>_,KC:()=>h,Kp:()=>a,Nc:()=>l,PN:()=>o,Rm:()=>p,SE:()=>n,VS:()=>g,VX:()=>k,Wk:()=>w,X7:()=>u,Ym:()=>d,ZT:()=>r,_v:()=>S,_x:()=>c,cG:()=>E,oE:()=>x,sk:()=>s,to:()=>f});var s="undefined"==typeof window||"Deno"in globalThis;function r(){}function n(t,e){return"function"==typeof t?t(e):t}function o(t){return"number"==typeof t&&t>=0&&t!==1/0}function a(t,e){return Math.max(t+(e||0)-Date.now(),0)}function h(t,e){return"function"==typeof t?t(e):t}function l(t,e){return"function"==typeof t?t(e):t}function c(t,e){const{type:i="all",exact:s,fetchStatus:r,predicate:n,queryKey:o,stale:a}=t;if(o)if(s){if(e.queryHash!==p(o,e.options))return!1}else if(!f(e.queryKey,o))return!1;if("all"!==i){const t=e.isActive();if("active"===i&&!t)return!1;if("inactive"===i&&t)return!1}return!("boolean"==typeof a&&e.isStale()!==a||r&&r!==e.state.fetchStatus||n&&!n(e))}function u(t,e){const{exact:i,status:s,predicate:r,mutationKey:n}=t;if(n){if(!e.options.mutationKey)return!1;if(i){if(d(e.options.mutationKey)!==d(n))return!1}else if(!f(e.options.mutationKey,n))return!1}return!(s&&e.state.status!==s||r&&!r(e))}function p(t,e){return(e?.queryKeyHashFn||d)(t)}function d(t){return JSON.stringify(t,((t,e)=>v(e)?Object.keys(e).sort().reduce(((t,i)=>(t[i]=e[i],t)),{}):e))}function f(t,e){return t===e||typeof t==typeof e&&!(!t||!e||"object"!=typeof t||"object"!=typeof e)&&!Object.keys(e).some((i=>!f(t[i],e[i])))}function m(t,e){if(t===e)return t;const i=y(t)&&y(e);if(i||v(t)&&v(e)){const s=i?t:Object.keys(t),r=s.length,n=i?e:Object.keys(e),o=n.length,a=i?[]:{};let h=0;for(let r=0;r<o;r++){const o=i?r:n[r];(!i&&s.includes(o)||i)&&void 0===t[o]&&void 0===e[o]?(a[o]=void 0,h++):(a[o]=m(t[o],e[o]),a[o]===t[o]&&void 0!==t[o]&&h++)}return r===o&&h===r?t:a}return e}function g(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(t[i]!==e[i])return!1;return!0}function y(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function v(t){if(!b(t))return!1;const e=t.constructor;if(void 0===e)return!0;const i=e.prototype;return!!b(i)&&!!i.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(t)===Object.prototype}function b(t){return"[object Object]"===Object.prototype.toString.call(t)}function S(t){return new Promise((e=>{setTimeout(e,t)}))}function x(t,e,i){return"function"==typeof i.structuralSharing?i.structuralSharing(t,e):!1!==i.structuralSharing?m(t,e):e}function w(t){return t}function k(t,e,i=0){const s=[...t,e];return i&&s.length>i?s.slice(1):s}function _(t,e,i=0){const s=[e,...t];return i&&s.length>i?s.slice(0,-1):s}var C=Symbol();function E(t,e){return!t.queryFn&&e?.initialPromise?()=>e.initialPromise:t.queryFn&&t.queryFn!==C?t.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`))}},"../../../node_modules/lightweight-charts/dist/lightweight-charts.production.mjs":(t,e,i)=>{"use strict";function s(t){var e=t.width,i=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(i<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:i}}function r(t,e){return t.width===e.width&&t.height===e.height}i.d(e,{Mr:()=>Vi,rM:()=>ft,TD:()=>b,SP:()=>v,C2:()=>Er});var n=function(){function t(t){var e=this;this._resolutionListener=function(){return e._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=t,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(t){var e=this,i={next:t};return this._observers.push(i),{unsubscribe:function(){e._observers=e._observers.filter((function(t){return t!==i}))}}},t.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var t=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(t,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var t=this;this._observers.forEach((function(e){return e.next(t._window.devicePixelRatio)})),this._reinstallResolutionListener()},t}(),o=function(){function t(t,e,i){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=t,this._canvasElementClientSize=s({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=e?e:function(t){return t},this._allowResizeObserver=null===(r=null==i?void 0:i.allowResizeObserver)||void 0===r||r,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var t,e;if(null===this._canvasElement)throw new Error("Object is disposed");null===(t=this._canvasElementResizeObserver)||void 0===t||t.disconnect(),this._canvasElementResizeObserver=null,null===(e=this._devicePixelRatioObservable)||void 0===e||e.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return s({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(t){this._canvasElementClientSize=s(t),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeBitmapSizeChanged=function(t){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter((function(e){return e!==t}))},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners.push(t)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(t){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter((function(e){return e!==t}))},t.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var t=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(t),this._emitSuggestedBitmapSizeChanged(t,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(t){var e=this.bitmapSize;r(e,t)||(this.canvasElement.width=t.width,this.canvasElement.height=t.height,this._emitBitmapSizeChanged(e,t))},t.prototype._emitBitmapSizeChanged=function(t,e){var i=this;this._bitmapSizeChangedListeners.forEach((function(s){return s.call(i,t,e)}))},t.prototype._suggestNewBitmapSize=function(t){var e=this._suggestedBitmapSize,i=s(this._transformBitmapSize(t,this._canvasElementClientSize)),n=r(this.bitmapSize,i)?null:i;null===e&&null===n||null!==e&&null!==n&&r(e,n)||(this._suggestedBitmapSize=n,this._emitSuggestedBitmapSizeChanged(e,n))},t.prototype._emitSuggestedBitmapSizeChanged=function(t,e){var i=this;this._suggestedBitmapSizeChangedListeners.forEach((function(s){return s.call(i,t,e)}))},t.prototype._chooseAndInitObserver=function(){var t=this;this._allowResizeObserver?new Promise((function(t){var e=new ResizeObserver((function(i){t(i.every((function(t){return"devicePixelContentBoxSize"in t}))),e.disconnect()}));e.observe(document.body,{box:"device-pixel-content-box"})})).catch((function(){return!1})).then((function(e){return e?t._initResizeObserver():t._initDevicePixelRatioObservable()})):this._initDevicePixelRatioObservable()},t.prototype._initDevicePixelRatioObservable=function(){var t=this;if(null!==this._canvasElement){var e=a(this._canvasElement);if(null===e)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=function(t){return new n(t)}(e),this._devicePixelRatioObservable.subscribe((function(){return t._invalidateBitmapSize()})),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var t,e;if(null!==this._canvasElement){var i=a(this._canvasElement);if(null!==i){var r=null!==(e=null===(t=this._devicePixelRatioObservable)||void 0===t?void 0:t.value)&&void 0!==e?e:i.devicePixelRatio,n=this._canvasElement.getClientRects(),o=void 0!==n[0]?function(t,e){return s({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}(n[0],r):s({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var t=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver((function(e){var i=e.find((function(e){return e.target===t._canvasElement}));if(i&&i.devicePixelContentBoxSize&&i.devicePixelContentBoxSize[0]){var r=i.devicePixelContentBoxSize[0],n=s({width:r.inlineSize,height:r.blockSize});t._suggestNewBitmapSize(n)}})),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function a(t){return t.ownerDocument.defaultView}var h=function(){function t(t,e,i){if(0===e.width||0===e.height)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=e,0===i.width||0===i.height)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=i,this._context=t}return t.prototype.useMediaCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),t({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(t){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),t({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function l(t,e){var i=t.canvasElementClientSize;if(0===i.width||0===i.height)return null;var s=t.bitmapSize;if(0===s.width||0===s.height)return null;var r=t.canvasElement.getContext("2d",e);return null===r?null:new h(r,i,s)}const c={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},u={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},p={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},d={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},f={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},m={color:"#26a69a",base:0},g={color:"#2196f3"},y={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var v,b,S;function x(t,e){const i={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(i)}function w(t,e,i,s){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(i,e+r),t.lineTo(s,e+r),t.stroke()}function k(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function _(t){if(void 0===t)throw new Error("Value is undefined");return t}function C(t){if(null===t)throw new Error("Value is null");return t}function E(t){return C(_(t))}(S=v||(v={}))[S.Simple=0]="Simple",S[S.WithSteps=1]="WithSteps",S[S.Curved=2]="Curved",function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(b||(b={}));const P={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function I(t){return t<0?0:t>255?255:Math.round(t)||0}function T(t){return t<=0||t>1?Math.min(Math.max(t,0),1):Math.round(1e4*t)/1e4}const A=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,M=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,R=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,B=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d*\.?\d+)\s*\)$/;function z(t){(t=t.toLowerCase())in P&&(t=P[t]);{const e=B.exec(t)||R.exec(t);if(e)return[I(parseInt(e[1],10)),I(parseInt(e[2],10)),I(parseInt(e[3],10)),T(e.length<5?1:parseFloat(e[4]))]}{const e=M.exec(t);if(e)return[I(parseInt(e[1],16)),I(parseInt(e[2],16)),I(parseInt(e[3],16)),1]}{const e=A.exec(t);if(e)return[I(17*parseInt(e[1],16)),I(17*parseInt(e[2],16)),I(17*parseInt(e[3],16)),1]}throw new Error(`Cannot parse color: ${t}`)}function D(t){const e=z(t);return{t:`rgb(${e[0]}, ${e[1]}, ${e[2]})`,i:(i=e,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")};var i}class F{constructor(){this.h=[]}l(t,e,i){const s={o:t,_:e,u:!0===i};this.h.push(s)}v(t){const e=this.h.findIndex((e=>t===e.o));e>-1&&this.h.splice(e,1)}p(t){this.h=this.h.filter((e=>e._!==t))}m(t,e,i){const s=[...this.h];this.h=this.h.filter((t=>!t.u)),s.forEach((s=>s.o(t,e,i)))}M(){return this.h.length>0}S(){this.h=[]}}function L(t,...e){for(const i of e)for(const e in i)void 0!==i[e]&&("object"!=typeof i[e]||void 0===t[e]||Array.isArray(i[e])?t[e]=i[e]:L(t[e],i[e]));return t}function V(t){return"number"==typeof t&&isFinite(t)}function O(t){return"number"==typeof t&&t%1==0}function N(t){return"string"==typeof t}function W(t){return"boolean"==typeof t}function H(t){const e=t;if(!e||"object"!=typeof e)return e;let i,s,r;for(s in i=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(r=e[s],i[s]=r&&"object"==typeof r?H(r):r);return i}function G(t){return null!==t}function j(t){return null===t?void 0:t}const $="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function q(t,e,i){return void 0===e&&(e=$),`${i=void 0!==i?`${i} `:""}${t}px ${e}`}class U{constructor(t){this.k={C:1,T:5,P:NaN,R:"",D:"",O:"",A:"",B:0,V:0,I:0,L:0,N:0},this.F=t}W(){const t=this.k,e=this.j(),i=this.H();return t.P===e&&t.D===i||(t.P=e,t.D=i,t.R=q(e,i),t.L=2.5/12*e,t.B=t.L,t.V=e/12*t.T,t.I=e/12*t.T,t.N=0),t.O=this.$(),t.A=this.U(),this.k}$(){return this.F.W().layout.textColor}U(){return this.F.q()}j(){return this.F.W().layout.fontSize}H(){return this.F.W().layout.fontFamily}}class K{constructor(){this.Y=[]}X(t){this.Y=t}K(t,e,i){this.Y.forEach((s=>{s.K(t,e,i)}))}}class Z{K(t,e,i){t.useBitmapCoordinateSpace((t=>this.Z(t,e,i)))}}class Y extends Z{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.G||null===this.G.tt)return;const s=this.G.tt,r=this.G,n=Math.max(1,Math.floor(e))%2/2,o=o=>{t.beginPath();for(let a=s.to-1;a>=s.from;--a){const s=r.it[a],h=Math.round(s.nt*e)+n,l=s.st*i,c=o*i+n;t.moveTo(h,l),t.arc(h,l,c,0,2*Math.PI)}t.fill()};r.et>0&&(t.fillStyle=r.rt,o(r.ht+r.et)),t.fillStyle=r.lt,o(r.ht)}}function J(){return{it:[{nt:0,st:0,ot:0,_t:0}],lt:"",rt:"",ht:0,et:0,tt:null}}const X={from:0,to:1};class Q{constructor(t,e){this.ut=new K,this.ct=[],this.dt=[],this.ft=!0,this.F=t,this.vt=e,this.ut.X(this.ct)}bt(t){const e=this.F.wt();e.length!==this.ct.length&&(this.dt=e.map(J),this.ct=this.dt.map((t=>{const e=new Y;return e.J(t),e})),this.ut.X(this.ct)),this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.ut}Mt(){const t=2===this.vt.W().mode,e=this.F.wt(),i=this.vt.xt(),s=this.F.St();e.forEach(((e,r)=>{var n;const o=this.dt[r],a=e.kt(i);if(t||null===a||!e.yt())return void(o.tt=null);const h=C(e.Ct());o.lt=a.Tt,o.ht=a.ht,o.et=a.Pt,o.it[0]._t=a._t,o.it[0].st=e.Dt().Rt(a._t,h.Ot),o.rt=null!==(n=a.At)&&void 0!==n?n:this.F.Bt(o.it[0].st/e.Dt().Vt()),o.it[0].ot=i,o.it[0].nt=s.It(i),o.tt=X}))}}class tt extends Z{constructor(t){super(),this.zt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt)return;const r=this.zt.Lt.yt,n=this.zt.Et.yt;if(!r&&!n)return;const o=Math.round(this.zt.nt*i),a=Math.round(this.zt.st*s);t.lineCap="butt",r&&o>=0&&(t.lineWidth=Math.floor(this.zt.Lt.et*i),t.strokeStyle=this.zt.Lt.O,t.fillStyle=this.zt.Lt.O,x(t,this.zt.Lt.Nt),function(t,e,i,s){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(e+r,0),t.lineTo(e+r,s),t.stroke()}(t,o,0,e.height)),n&&a>=0&&(t.lineWidth=Math.floor(this.zt.Et.et*s),t.strokeStyle=this.zt.Et.O,t.fillStyle=this.zt.Et.O,x(t,this.zt.Et.Nt),w(t,a,0,e.width))}}class et{constructor(t){this.ft=!0,this.Ft={Lt:{et:1,Nt:0,O:"",yt:!1},Et:{et:1,Nt:0,O:"",yt:!1},nt:0,st:0},this.Wt=new tt(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const t=this.jt.yt(),e=C(this.jt.Ht()),i=e.$t().W().crosshair,s=this.Ft;if(2===i.mode)return s.Et.yt=!1,void(s.Lt.yt=!1);s.Et.yt=t&&this.jt.Ut(e),s.Lt.yt=t&&this.jt.qt(),s.Et.et=i.horzLine.width,s.Et.Nt=i.horzLine.style,s.Et.O=i.horzLine.color,s.Lt.et=i.vertLine.width,s.Lt.Nt=i.vertLine.style,s.Lt.O=i.vertLine.color,s.nt=this.jt.Yt(),s.st=this.jt.Xt()}}function it(t,e,i,s,r,n){t.fillRect(e+n,i,s-2*n,n),t.fillRect(e+n,i+r-n,s-2*n,n),t.fillRect(e,i,n,r),t.fillRect(e+s-n,i,n,r)}function st(t,e,i,s,r,n){t.save(),t.globalCompositeOperation="copy",t.fillStyle=n,t.fillRect(e,i,s,r),t.restore()}function rt(t,e,i,s,r,n){t.beginPath(),t.roundRect?t.roundRect(e,i,s,r,n):(t.lineTo(e+s-n[1],i),0!==n[1]&&t.arcTo(e+s,i,e+s,i+n[1],n[1]),t.lineTo(e+s,i+r-n[2]),0!==n[2]&&t.arcTo(e+s,i+r,e+s-n[2],i+r,n[2]),t.lineTo(e+n[3],i+r),0!==n[3]&&t.arcTo(e,i+r,e,i+r-n[3],n[3]),t.lineTo(e,i+n[0]),0!==n[0]&&t.arcTo(e,i,e+n[0],i,n[0]))}function nt(t,e,i,s,r,n,o=0,a=[0,0,0,0],h=""){if(t.save(),!o||!h||h===n)return rt(t,e,i,s,r,a),t.fillStyle=n,t.fill(),void t.restore();const l=o/2;var c;rt(t,e+l,i+l,s-o,r-o,(c=-l,a.map((t=>0===t?t:t+c)))),"transparent"!==n&&(t.fillStyle=n,t.fill()),"transparent"!==h&&(t.lineWidth=o,t.strokeStyle=h,t.closePath(),t.stroke()),t.restore()}function ot(t,e,i,s,r,n,o){t.save(),t.globalCompositeOperation="copy";const a=t.createLinearGradient(0,0,0,r);a.addColorStop(0,n),a.addColorStop(1,o),t.fillStyle=a,t.fillRect(e,i,s,r),t.restore()}class at{constructor(t,e){this.J(t,e)}J(t,e){this.zt=t,this.Kt=e}Vt(t,e){return this.zt.yt?t.P+t.L+t.B:0}K(t,e,i,s){if(!this.zt.yt||0===this.zt.Zt.length)return;const r=this.zt.O,n=this.Kt.t,o=t.useBitmapCoordinateSpace((t=>{const o=t.context;o.font=e.R;const a=this.Gt(t,e,i,s),h=a.Jt,l=(t,e)=>{a.Qt?nt(o,h.ti,h.ii,h.ni,h.si,t,h.ei,[h.ht,0,0,h.ht],e):nt(o,h.ri,h.ii,h.ni,h.si,t,h.ei,[0,h.ht,h.ht,0],e)};return l(n,"transparent"),this.zt.hi&&(o.fillStyle=r,o.fillRect(h.ri,h.li,h.ai-h.ri,h.oi)),l("transparent",n),this.zt._i&&(o.fillStyle=e.A,o.fillRect(a.Qt?h.ui-h.ei:0,h.ii,h.ei,h.ci-h.ii)),a}));t.useMediaCoordinateSpace((({context:t})=>{const i=o.di;t.font=e.R,t.textAlign=o.Qt?"right":"left",t.textBaseline="middle",t.fillStyle=r,t.fillText(this.zt.Zt,i.fi,(i.ii+i.ci)/2+i.vi)}))}Gt(t,e,i,s){var r;const{context:n,bitmapSize:o,mediaSize:a,horizontalPixelRatio:h,verticalPixelRatio:l}=t,c=this.zt.hi||!this.zt.pi?e.T:0,u=this.zt.mi?e.C:0,p=e.L+this.Kt.bi,d=e.B+this.Kt.wi,f=e.V,m=e.I,g=this.zt.Zt,y=e.P,v=i.gi(n,g),b=Math.ceil(i.Mi(n,g)),S=y+p+d,x=e.C+f+m+b+c,w=Math.max(1,Math.floor(l));let k=Math.round(S*l);k%2!=w%2&&(k+=1);const _=u>0?Math.max(1,Math.floor(u*h)):0,C=Math.round(x*h),E=Math.round(c*h),P=null!==(r=this.Kt.xi)&&void 0!==r?r:this.Kt.Si,I=Math.round(P*l)-Math.floor(.5*l),T=Math.floor(I+w/2-k/2),A=T+k,M="right"===s,R=M?a.width-u:u,B=M?o.width-_:_;let z,D,F;return M?(z=B-C,D=B-E,F=R-c-f-u):(z=B+C,D=B+E,F=R+c+f),{Qt:M,Jt:{ii:T,li:I,ci:A,ni:C,si:k,ht:2*h,ei:_,ti:z,ri:B,ai:D,oi:w,ui:o.width},di:{ii:T/l,ci:A/l,fi:F,vi:v}}}}class ht{constructor(t){this.ki={Si:0,t:"#000",wi:0,bi:0},this.yi={Zt:"",yt:!1,hi:!0,pi:!1,At:"",O:"#FFF",_i:!1,mi:!1},this.Ci={Zt:"",yt:!1,hi:!1,pi:!0,At:"",O:"#FFF",_i:!0,mi:!0},this.ft=!0,this.Ti=new(t||at)(this.yi,this.ki),this.Pi=new(t||at)(this.Ci,this.ki)}Zt(){return this.Ri(),this.yi.Zt}Si(){return this.Ri(),this.ki.Si}bt(){this.ft=!0}Vt(t,e=!1){return Math.max(this.Ti.Vt(t,e),this.Pi.Vt(t,e))}Di(){return this.ki.xi||0}Oi(t){this.ki.xi=t}Ai(){return this.Ri(),this.yi.yt||this.Ci.yt}Bi(){return this.Ri(),this.yi.yt}gt(t){return this.Ri(),this.yi.hi=this.yi.hi&&t.W().ticksVisible,this.Ci.hi=this.Ci.hi&&t.W().ticksVisible,this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Ti}Vi(){return this.Ri(),this.Ti.J(this.yi,this.ki),this.Pi.J(this.Ci,this.ki),this.Pi}Ri(){this.ft&&(this.yi.hi=!0,this.Ci.hi=!1,this.Ii(this.yi,this.Ci,this.ki))}}class lt extends ht{constructor(t,e,i){super(),this.jt=t,this.zi=e,this.Li=i}Ii(t,e,i){if(t.yt=!1,2===this.jt.W().mode)return;const s=this.jt.W().horzLine;if(!s.labelVisible)return;const r=this.zi.Ct();if(!this.jt.yt()||this.zi.Ei()||null===r)return;const n=D(s.labelBackgroundColor);i.t=n.t,t.O=n.i;const o=2/12*this.zi.P();i.bi=o,i.wi=o;const a=this.Li(this.zi);i.Si=a.Si,t.Zt=this.zi.Ni(a._t,r),t.yt=!0}}const ct=/[1-9]/g;class ut{constructor(){this.zt=null}J(t){this.zt=t}K(t,e){if(null===this.zt||!1===this.zt.yt||0===this.zt.Zt.length)return;const i=t.useMediaCoordinateSpace((({context:t})=>(t.font=e.R,Math.round(e.Fi.Mi(t,C(this.zt).Zt,ct)))));if(i<=0)return;const s=e.Wi,r=i+2*s,n=r/2,o=this.zt.ji;let a=this.zt.Si,h=Math.floor(a-n)+.5;h<0?(a+=Math.abs(0-h),h=Math.floor(a-n)+.5):h+r>o&&(a-=Math.abs(o-(h+r)),h=Math.floor(a-n)+.5);const l=h+r,c=Math.ceil(0+e.C+e.T+e.L+e.P+e.B);t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:i,verticalPixelRatio:s})=>{const r=C(this.zt);t.fillStyle=r.t;const n=Math.round(h*i),o=Math.round(0*s),a=Math.round(l*i),u=Math.round(c*s),p=Math.round(2*i);if(t.beginPath(),t.moveTo(n,o),t.lineTo(n,u-p),t.arcTo(n,u,n+p,u,p),t.lineTo(a-p,u),t.arcTo(a,u,a,u-p,p),t.lineTo(a,o),t.fill(),r.hi){const n=Math.round(r.Si*i),a=o,h=Math.round((a+e.T)*s);t.fillStyle=r.O;const l=Math.max(1,Math.floor(i)),c=Math.floor(.5*i);t.fillRect(n-c,a,l,h-a)}})),t.useMediaCoordinateSpace((({context:t})=>{const i=C(this.zt),r=0+e.C+e.T+e.L+e.P/2;t.font=e.R,t.textAlign="left",t.textBaseline="middle",t.fillStyle=i.O;const n=e.Fi.gi(t,"Apr0");t.translate(h+s,r+n),t.fillText(i.Zt,0,0)}))}}class pt{constructor(t,e,i){this.ft=!0,this.Wt=new ut,this.Ft={yt:!1,t:"#4c525e",O:"white",Zt:"",ji:0,Si:NaN,hi:!0},this.vt=t,this.Hi=e,this.Li=i}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt.J(this.Ft),this.Wt}Mt(){const t=this.Ft;if(t.yt=!1,2===this.vt.W().mode)return;const e=this.vt.W().vertLine;if(!e.labelVisible)return;const i=this.Hi.St();if(i.Ei())return;t.ji=i.ji();const s=this.Li();if(null===s)return;t.Si=s.Si;const r=i.$i(this.vt.xt());t.Zt=i.Ui(C(r)),t.yt=!0;const n=D(e.labelBackgroundColor);t.t=n.t,t.O=n.i,t.hi=i.W().ticksVisible}}class dt{constructor(){this.qi=null,this.Yi=0}Xi(){return this.Yi}Ki(t){this.Yi=t}Dt(){return this.qi}Zi(t){this.qi=t}Gi(t){return[]}Ji(){return[]}yt(){return!0}}var ft;!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden"}(ft||(ft={}));class mt extends dt{constructor(t,e){super(),this.Qi=null,this.tn=NaN,this.nn=0,this.sn=!0,this.en=new Map,this.rn=!1,this.hn=NaN,this.ln=NaN,this.an=NaN,this.on=NaN,this.Hi=t,this._n=e,this.un=new Q(t,this),this.cn=((t,e)=>i=>{const s=e(),r=t();if(i===C(this.Qi).dn())return{_t:r,Si:s};{const t=C(i.Ct());return{_t:i.fn(s,t),Si:s}}})((()=>this.tn),(()=>this.ln));const i=((t,e)=>()=>{const i=this.Hi.St().vn(t()),s=e();return i&&Number.isFinite(s)?{ot:i,Si:s}:null})((()=>this.nn),(()=>this.Yt()));this.pn=new pt(this,t,i),this.mn=new et(this)}W(){return this._n}bn(t,e){this.an=t,this.on=e}wn(){this.an=NaN,this.on=NaN}gn(){return this.an}Mn(){return this.on}xn(t,e,i){this.rn||(this.rn=!0),this.sn=!0,this.Sn(t,e,i)}xt(){return this.nn}Yt(){return this.hn}Xt(){return this.ln}yt(){return this.sn}kn(){this.sn=!1,this.yn(),this.tn=NaN,this.hn=NaN,this.ln=NaN,this.Qi=null,this.wn()}Cn(t){return null!==this.Qi?[this.mn,this.un]:[]}Ut(t){return t===this.Qi&&this._n.horzLine.visible}qt(){return this._n.vertLine.visible}Tn(t,e){this.sn&&this.Qi===t||this.en.clear();const i=[];return this.Qi===t&&i.push(this.Pn(this.en,e,this.cn)),i}Ji(){return this.sn?[this.pn]:[]}Ht(){return this.Qi}Rn(){this.mn.bt(),this.en.forEach((t=>t.bt())),this.pn.bt(),this.un.bt()}Dn(t){return t&&!t.dn().Ei()?t.dn():null}Sn(t,e,i){this.On(t,e,i)&&this.Rn()}On(t,e,i){const s=this.hn,r=this.ln,n=this.tn,o=this.nn,a=this.Qi,h=this.Dn(i);this.nn=t,this.hn=isNaN(t)?NaN:this.Hi.St().It(t),this.Qi=i;const l=null!==h?h.Ct():null;return null!==h&&null!==l?(this.tn=e,this.ln=h.Rt(e,l)):(this.tn=NaN,this.ln=NaN),s!==this.hn||r!==this.ln||o!==this.nn||n!==this.tn||a!==this.Qi}yn(){const t=this.Hi.wt().map((t=>t.Bn().An())).filter(G),e=0===t.length?null:Math.max(...t);this.nn=null!==e?e:NaN}Pn(t,e,i){let s=t.get(e);return void 0===s&&(s=new lt(this,e,i),t.set(e,s)),s}}function gt(t){return"left"===t||"right"===t}class yt{constructor(t){this.Vn=new Map,this.In=[],this.zn=t}Ln(t,e){const i=function(t,e){return void 0===t?e:{En:Math.max(t.En,e.En),Nn:t.Nn||e.Nn}}(this.Vn.get(t),e);this.Vn.set(t,i)}Fn(){return this.zn}Wn(t){const e=this.Vn.get(t);return void 0===e?{En:this.zn}:{En:Math.max(this.zn,e.En),Nn:e.Nn}}jn(){this.Hn(),this.In=[{$n:0}]}Un(t){this.Hn(),this.In=[{$n:1,Ot:t}]}qn(t){this.Yn(),this.In.push({$n:5,Ot:t})}Hn(){this.Yn(),this.In.push({$n:6})}Xn(){this.Hn(),this.In=[{$n:4}]}Kn(t){this.Hn(),this.In.push({$n:2,Ot:t})}Zn(t){this.Hn(),this.In.push({$n:3,Ot:t})}Gn(){return this.In}Jn(t){for(const e of t.In)this.Qn(e);this.zn=Math.max(this.zn,t.zn),t.Vn.forEach(((t,e)=>{this.Ln(e,t)}))}static ts(){return new yt(2)}static ns(){return new yt(3)}Qn(t){switch(t.$n){case 0:this.jn();break;case 1:this.Un(t.Ot);break;case 2:this.Kn(t.Ot);break;case 3:this.Zn(t.Ot);break;case 4:this.Xn();break;case 5:this.qn(t.Ot);break;case 6:this.Yn()}}Yn(){const t=this.In.findIndex((t=>5===t.$n));-1!==t&&this.In.splice(t,1)}}function vt(t,e){if(!V(t))return"n/a";if(!O(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return 0===e?t.toString():("0000000000000000"+t.toString()).slice(-e)}class bt{constructor(t,e){if(e||(e=1),V(t)&&O(t)||(t=100),t<0)throw new TypeError("invalid base");this.zi=t,this.ss=e,this.es()}format(t){const e=t<0?"−":"";return t=Math.abs(t),e+this.rs(t)}es(){if(this.hs=0,this.zi>0&&this.ss>0){let t=this.zi;for(;t>1;)t/=10,this.hs++}}rs(t){const e=this.zi/this.ss;let i=Math.floor(t),s="";const r=void 0!==this.hs?this.hs:NaN;if(e>1){let n=+(Math.round(t*e)-i*e).toFixed(this.hs);n>=e&&(n-=e,i+=1),s="."+vt(+n.toFixed(this.hs)*this.ss,r)}else i=Math.round(i*e)/e,r>0&&(s="."+vt(0,r));return i.toFixed(0)+s}}class St extends bt{constructor(t=100){super(t)}format(t){return`${super.format(t)}%`}}class xt{constructor(t){this.ls=t}format(t){let e="";return t<0&&(e="-",t=-t),t<995?e+this.os(t):t<999995?e+this.os(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),e+this.os(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),e+this.os(t/1e9)+"B")}os(t){let e;const i=Math.pow(10,this.ls);return e=(t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.ls).replace(/\.?0+$/,""):String(t),e.replace(/(\.[1-9]*)0+$/,((t,e)=>e))}}function wt(t,e,i,s,r,n,o){if(0===e.length||s.from>=e.length||s.to<=0)return;const{context:a,horizontalPixelRatio:h,verticalPixelRatio:l}=t,c=e[s.from];let u=n(t,c),p=c;if(s.to-s.from<2){const e=r/2;a.beginPath();const i={nt:c.nt-e,st:c.st},s={nt:c.nt+e,st:c.st};a.moveTo(i.nt*h,i.st*l),a.lineTo(s.nt*h,s.st*l),o(t,u,i,s)}else{const r=(e,i)=>{o(t,u,p,i),a.beginPath(),u=e,p=i};let d=p;a.beginPath(),a.moveTo(c.nt*h,c.st*l);for(let o=s.from+1;o<s.to;++o){d=e[o];const s=n(t,d);switch(i){case 0:a.lineTo(d.nt*h,d.st*l);break;case 1:a.lineTo(d.nt*h,e[o-1].st*l),s!==u&&(r(s,d),a.lineTo(d.nt*h,e[o-1].st*l)),a.lineTo(d.nt*h,d.st*l);break;case 2:{const[t,i]=Et(e,o-1,o);a.bezierCurveTo(t.nt*h,t.st*l,i.nt*h,i.st*l,d.nt*h,d.st*l);break}}1!==i&&s!==u&&(r(s,d),a.moveTo(d.nt*h,d.st*l))}(p!==d||p===d&&1===i)&&o(t,u,p,d)}}const kt=6;function _t(t,e){return{nt:t.nt-e.nt,st:t.st-e.st}}function Ct(t,e){return{nt:t.nt/e,st:t.st/e}}function Et(t,e,i){const s=Math.max(0,e-1),r=Math.min(t.length-1,i+1);var n,o;return[(n=t[e],o=Ct(_t(t[i],t[s]),kt),{nt:n.nt+o.nt,st:n.st+o.st}),_t(t[i],Ct(_t(t[r],t[e]),kt))]}function Pt(t,e,i,s,r){const{context:n,horizontalPixelRatio:o,verticalPixelRatio:a}=e;n.lineTo(r.nt*o,t*a),n.lineTo(s.nt*o,t*a),n.closePath(),n.fillStyle=i,n.fill()}class It extends Z{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z(t){var e;if(null===this.G)return;const{it:i,tt:s,_s:r,et:n,Nt:o,us:a}=this.G,h=null!==(e=this.G.cs)&&void 0!==e?e:this.G.ds?0:t.mediaSize.height;if(null===s)return;const l=t.context;l.lineCap="butt",l.lineJoin="round",l.lineWidth=n,x(l,o),l.lineWidth=1,wt(t,i,a,s,r,this.fs.bind(this),Pt.bind(null,h))}}function Tt(t,e,i){return Math.min(Math.max(t,e),i)}function At(t,e,i){return e-t<=i}function Mt(t){const e=Math.ceil(t);return e%2==0?e-1:e}class Rt{vs(t,e){const i=this.ps,{bs:s,ws:r,gs:n,Ms:o,xs:a,cs:h}=e;if(void 0===this.Ss||void 0===i||i.bs!==s||i.ws!==r||i.gs!==n||i.Ms!==o||i.cs!==h||i.xs!==a){const i=t.context.createLinearGradient(0,0,0,a);if(i.addColorStop(0,s),null!=h){const e=Tt(h*t.verticalPixelRatio/a,0,1);i.addColorStop(e,r),i.addColorStop(e,n)}i.addColorStop(1,o),this.Ss=i,this.ps=e}return this.Ss}}class Bt extends It{constructor(){super(...arguments),this.ks=new Rt}fs(t,e){return this.ks.vs(t,{bs:e.ys,ws:"",gs:"",Ms:e.Cs,xs:t.bitmapSize.height})}}function zt(t,e){const i=t.context;i.strokeStyle=e,i.stroke()}class Dt extends Z{constructor(){super(...arguments),this.G=null}J(t){this.G=t}Z(t){if(null===this.G)return;const{it:e,tt:i,_s:s,us:r,et:n,Nt:o,Ts:a}=this.G;if(null===i)return;const h=t.context;h.lineCap="butt",h.lineWidth=n*t.verticalPixelRatio,x(h,o),h.lineJoin="round";const l=this.Ps.bind(this);void 0!==r&&wt(t,e,r,i,s,l,zt),a&&function(t,e,i,s,r){const{horizontalPixelRatio:n,verticalPixelRatio:o,context:a}=t;let h=null;const l=Math.max(1,Math.floor(n))%2/2,c=i*o+l;for(let i=s.to-1;i>=s.from;--i){const s=e[i];if(s){const e=r(t,s);e!==h&&(a.beginPath(),null!==h&&a.fill(),a.fillStyle=e,h=e);const i=Math.round(s.nt*n)+l,u=s.st*o;a.moveTo(i,u),a.arc(i,u,c,0,2*Math.PI)}}a.fill()}(t,e,a,i,l)}}class Ft extends Dt{Ps(t,e){return e.lt}}function Lt(t,e,i,s,r=0,n=e.length){let o=n-r;for(;0<o;){const n=o>>1,a=r+n;s(e[a],i)===t?(r=a+1,o-=n+1):o=n}return r}const Vt=Lt.bind(null,!0),Ot=Lt.bind(null,!1);function Nt(t,e){return t.ot<e}function Wt(t,e){return e<t.ot}function Ht(t,e,i){const s=e.Rs(),r=e.ui(),n=Vt(t,s,Nt),o=Ot(t,r,Wt);if(!i)return{from:n,to:o};let a=n,h=o;return n>0&&n<t.length&&t[n].ot>=s&&(a=n-1),o>0&&o<t.length&&t[o-1].ot<=r&&(h=o+1),{from:a,to:h}}class Gt{constructor(t,e,i){this.Ds=!0,this.Os=!0,this.As=!0,this.Bs=[],this.Vs=null,this.Is=t,this.zs=e,this.Ls=i}bt(t){this.Ds=!0,"data"===t&&(this.Os=!0),"options"===t&&(this.As=!0)}gt(){return this.Is.yt()?(this.Es(),null===this.Vs?null:this.Ns):null}Fs(){this.Bs=this.Bs.map((t=>Object.assign(Object.assign({},t),this.Is.js().Ws(t.ot))))}Hs(){this.Vs=null}Es(){this.Os&&(this.$s(),this.Os=!1),this.As&&(this.Fs(),this.As=!1),this.Ds&&(this.Us(),this.Ds=!1)}Us(){const t=this.Is.Dt(),e=this.zs.St();if(this.Hs(),e.Ei()||t.Ei())return;const i=e.qs();if(null===i)return;if(0===this.Is.Bn().Ys())return;const s=this.Is.Ct();null!==s&&(this.Vs=Ht(this.Bs,i,this.Ls),this.Xs(t,e,s.Ot),this.Ks())}}class jt extends Gt{constructor(t,e){super(t,e,!0)}Xs(t,e,i){e.Zs(this.Bs,j(this.Vs)),t.Gs(this.Bs,i,j(this.Vs))}Js(t,e){return{ot:t,_t:e,nt:NaN,st:NaN}}$s(){const t=this.Is.js();this.Bs=this.Is.Bn().Qs().map((e=>{const i=e.Ot[3];return this.te(e.ie,i,t)}))}}class $t extends jt{constructor(t,e){super(t,e),this.Ns=new K,this.ne=new Bt,this.se=new Ft,this.Ns.X([this.ne,this.se])}te(t,e,i){return Object.assign(Object.assign({},this.Js(t,e)),i.Ws(t))}Ks(){const t=this.Is.W();this.ne.J({us:t.lineType,it:this.Bs,Nt:t.lineStyle,et:t.lineWidth,cs:null,ds:t.invertFilledArea,tt:this.Vs,_s:this.zs.St().ee()}),this.se.J({us:t.lineVisible?t.lineType:void 0,it:this.Bs,Nt:t.lineStyle,et:t.lineWidth,tt:this.Vs,_s:this.zs.St().ee(),Ts:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0})}}class qt extends Z{constructor(){super(...arguments),this.zt=null,this.re=0,this.he=0}J(t){this.zt=t}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.zt||0===this.zt.Bn.length||null===this.zt.tt)return;this.re=this.le(e),this.re>=2&&Math.max(1,Math.floor(e))%2!=this.re%2&&this.re--,this.he=this.zt.ae?Math.min(this.re,Math.floor(e)):this.re;let s=null;const r=this.he<=this.re&&this.zt.ee>=Math.floor(1.5*e);for(let n=this.zt.tt.from;n<this.zt.tt.to;++n){const o=this.zt.Bn[n];s!==o.oe&&(t.fillStyle=o.oe,s=o.oe);const a=Math.floor(.5*this.he),h=Math.round(o.nt*e),l=h-a,c=this.he,u=l+c-1,p=Math.min(o._e,o.ue),d=Math.max(o._e,o.ue),f=Math.round(p*i)-a,m=Math.round(d*i)+a,g=Math.max(m-f,this.he);t.fillRect(l,f,c,g);const y=Math.ceil(1.5*this.re);if(r){if(this.zt.ce){const e=h-y;let s=Math.max(f,Math.round(o.de*i)-a),r=s+c-1;r>f+g-1&&(r=f+g-1,s=r-c+1),t.fillRect(e,s,l-e,r-s+1)}const e=h+y;let s=Math.max(f,Math.round(o.fe*i)-a),r=s+c-1;r>f+g-1&&(r=f+g-1,s=r-c+1),t.fillRect(u+1,s,e-u,r-s+1)}}}le(t){const e=Math.floor(t);return Math.max(e,Math.floor(function(t,e){return Math.floor(.3*t*e)}(C(this.zt).ee,t)))}}class Ut extends Gt{constructor(t,e){super(t,e,!1)}Xs(t,e,i){e.Zs(this.Bs,j(this.Vs)),t.ve(this.Bs,i,j(this.Vs))}pe(t,e,i){return{ot:t,me:e.Ot[0],be:e.Ot[1],we:e.Ot[2],ge:e.Ot[3],nt:NaN,de:NaN,_e:NaN,ue:NaN,fe:NaN}}$s(){const t=this.Is.js();this.Bs=this.Is.Bn().Qs().map((e=>this.te(e.ie,e,t)))}}class Kt extends Ut{constructor(){super(...arguments),this.Ns=new qt}te(t,e,i){return Object.assign(Object.assign({},this.pe(t,e,i)),i.Ws(t))}Ks(){const t=this.Is.W();this.Ns.J({Bn:this.Bs,ee:this.zs.St().ee(),ce:t.openVisible,ae:t.thinBars,tt:this.Vs})}}class Zt extends It{constructor(){super(...arguments),this.ks=new Rt}fs(t,e){const i=this.G;return this.ks.vs(t,{bs:e.Me,ws:e.xe,gs:e.Se,Ms:e.ke,xs:t.bitmapSize.height,cs:i.cs})}}class Yt extends Dt{constructor(){super(...arguments),this.ye=new Rt}Ps(t,e){const i=this.G;return this.ye.vs(t,{bs:e.Ce,ws:e.Ce,gs:e.Te,Ms:e.Te,xs:t.bitmapSize.height,cs:i.cs})}}class Jt extends jt{constructor(t,e){super(t,e),this.Ns=new K,this.Pe=new Zt,this.Re=new Yt,this.Ns.X([this.Pe,this.Re])}te(t,e,i){return Object.assign(Object.assign({},this.Js(t,e)),i.Ws(t))}Ks(){const t=this.Is.Ct();if(null===t)return;const e=this.Is.W(),i=this.Is.Dt().Rt(e.baseValue.price,t.Ot),s=this.zs.St().ee();this.Pe.J({it:this.Bs,et:e.lineWidth,Nt:e.lineStyle,us:e.lineType,cs:i,ds:!1,tt:this.Vs,_s:s}),this.Re.J({it:this.Bs,et:e.lineWidth,Nt:e.lineStyle,us:e.lineVisible?e.lineType:void 0,Ts:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,cs:i,tt:this.Vs,_s:s})}}class Xt extends Z{constructor(){super(...arguments),this.zt=null,this.re=0}J(t){this.zt=t}Z(t){if(null===this.zt||0===this.zt.Bn.length||null===this.zt.tt)return;const{horizontalPixelRatio:e}=t;this.re=function(t,e){if(t>=2.5&&t<=4)return Math.floor(3*e);const i=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.floor(t*i*e),r=Math.floor(t*e),n=Math.min(s,r);return Math.max(Math.floor(e),n)}(this.zt.ee,e),this.re>=2&&Math.floor(e)%2!=this.re%2&&this.re--;const i=this.zt.Bn;this.zt.De&&this.Oe(t,i,this.zt.tt),this.zt._i&&this.Ae(t,i,this.zt.tt);const s=this.Be(e);(!this.zt._i||this.re>2*s)&&this.Ve(t,i,this.zt.tt)}Oe(t,e,i){if(null===this.zt)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:n}=t;let o="",a=Math.min(Math.floor(r),Math.floor(this.zt.ee*r));a=Math.max(Math.floor(r),Math.min(a,this.re));const h=Math.floor(.5*a);let l=null;for(let t=i.from;t<i.to;t++){const i=e[t];i.Ie!==o&&(s.fillStyle=i.Ie,o=i.Ie);const c=Math.round(Math.min(i.de,i.fe)*n),u=Math.round(Math.max(i.de,i.fe)*n),p=Math.round(i._e*n),d=Math.round(i.ue*n);let f=Math.round(r*i.nt)-h;const m=f+a-1;null!==l&&(f=Math.max(l+1,f),f=Math.min(f,m));const g=m-f+1;s.fillRect(f,p,g,c-p),s.fillRect(f,u+1,g,d-u),l=m}}Be(t){let e=Math.floor(1*t);this.re<=2*e&&(e=Math.floor(.5*(this.re-1)));const i=Math.max(Math.floor(t),e);return this.re<=2*i?Math.max(Math.floor(t),Math.floor(1*t)):i}Ae(t,e,i){if(null===this.zt)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:n}=t;let o="";const a=this.Be(r);let h=null;for(let t=i.from;t<i.to;t++){const i=e[t];i.ze!==o&&(s.fillStyle=i.ze,o=i.ze);let l=Math.round(i.nt*r)-Math.floor(.5*this.re);const c=l+this.re-1,u=Math.round(Math.min(i.de,i.fe)*n),p=Math.round(Math.max(i.de,i.fe)*n);if(null!==h&&(l=Math.max(h+1,l),l=Math.min(l,c)),this.zt.ee*r>2*a)it(s,l,u,c-l+1,p-u+1,a);else{const t=c-l+1;s.fillRect(l,u,t,p-u+1)}h=c}}Ve(t,e,i){if(null===this.zt)return;const{context:s,horizontalPixelRatio:r,verticalPixelRatio:n}=t;let o="";const a=this.Be(r);for(let t=i.from;t<i.to;t++){const i=e[t];let h=Math.round(Math.min(i.de,i.fe)*n),l=Math.round(Math.max(i.de,i.fe)*n),c=Math.round(i.nt*r)-Math.floor(.5*this.re),u=c+this.re-1;if(i.oe!==o){const t=i.oe;s.fillStyle=t,o=t}this.zt._i&&(c+=a,h+=a,u-=a,l-=a),h>l||s.fillRect(c,h,u-c+1,l-h+1)}}}class Qt extends Ut{constructor(){super(...arguments),this.Ns=new Xt}te(t,e,i){return Object.assign(Object.assign({},this.pe(t,e,i)),i.Ws(t))}Ks(){const t=this.Is.W();this.Ns.J({Bn:this.Bs,ee:this.zs.St().ee(),De:t.wickVisible,_i:t.borderVisible,tt:this.Vs})}}class te{constructor(t,e){this.Le=t,this.zi=e}K(t,e,i){this.Le.draw(t,this.zi,e,i)}}class ee extends Gt{constructor(t,e,i){super(t,e,!1),this.mn=i,this.Ns=new te(this.mn.renderer(),(e=>{const i=t.Ct();return null===i?null:t.Dt().Rt(e,i.Ot)}))}Ee(t){return this.mn.priceValueBuilder(t)}Ne(t){return this.mn.isWhitespace(t)}$s(){const t=this.Is.js();this.Bs=this.Is.Bn().Qs().map((e=>Object.assign(Object.assign({ot:e.ie,nt:NaN},t.Ws(e.ie)),{Fe:e.We})))}Xs(t,e){e.Zs(this.Bs,j(this.Vs))}Ks(){this.mn.update({bars:this.Bs.map(ie),barSpacing:this.zs.St().ee(),visibleRange:this.Vs},this.Is.W())}}function ie(t){return{x:t.nt,time:t.ot,originalData:t.Fe,barColor:t.oe}}class se extends Z{constructor(){super(...arguments),this.zt=null,this.je=[]}J(t){this.zt=t,this.je=[]}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return;this.je.length||this.He(e);const s=Math.max(1,Math.floor(i)),r=Math.round(this.zt.$e*i)-Math.floor(s/2),n=r+s;for(let e=this.zt.tt.from;e<this.zt.tt.to;e++){const o=this.zt.it[e],a=this.je[e-this.zt.tt.from],h=Math.round(o.st*i);let l,c;t.fillStyle=o.oe,h<=r?(l=h,c=n):(l=r,c=h-Math.floor(s/2)+s),t.fillRect(a.Rs,l,a.ui-a.Rs+1,c-l)}}He(t){if(null===this.zt||0===this.zt.it.length||null===this.zt.tt)return void(this.je=[]);const e=Math.ceil(this.zt.ee*t)<=1?0:Math.max(1,Math.floor(t)),i=Math.round(this.zt.ee*t)-e;this.je=new Array(this.zt.tt.to-this.zt.tt.from);for(let e=this.zt.tt.from;e<this.zt.tt.to;e++){const s=this.zt.it[e],r=Math.round(s.nt*t);let n,o;if(i%2){const t=(i-1)/2;n=r-t,o=r+t}else{const t=i/2;n=r-t,o=r+t-1}this.je[e-this.zt.tt.from]={Rs:n,ui:o,Ue:r,qe:s.nt*t,ot:s.ot}}for(let t=this.zt.tt.from+1;t<this.zt.tt.to;t++){const i=this.je[t-this.zt.tt.from],s=this.je[t-this.zt.tt.from-1];i.ot===s.ot+1&&i.Rs-s.ui!==e+1&&(s.Ue>s.qe?s.ui=i.Rs-e-1:i.Rs=s.ui+e+1)}let s=Math.ceil(this.zt.ee*t);for(let t=this.zt.tt.from;t<this.zt.tt.to;t++){const e=this.je[t-this.zt.tt.from];e.ui<e.Rs&&(e.ui=e.Rs);const i=e.ui-e.Rs+1;s=Math.min(i,s)}if(e>0&&s<4)for(let t=this.zt.tt.from;t<this.zt.tt.to;t++){const e=this.je[t-this.zt.tt.from];e.ui-e.Rs+1>s&&(e.Ue>e.qe?e.ui-=1:e.Rs+=1)}}}class re extends jt{constructor(){super(...arguments),this.Ns=new se}te(t,e,i){return Object.assign(Object.assign({},this.Js(t,e)),i.Ws(t))}Ks(){const t={it:this.Bs,ee:this.zs.St().ee(),tt:this.Vs,$e:this.Is.Dt().Rt(this.Is.W().base,C(this.Is.Ct()).Ot)};this.Ns.J(t)}}class ne extends jt{constructor(){super(...arguments),this.Ns=new Ft}te(t,e,i){return Object.assign(Object.assign({},this.Js(t,e)),i.Ws(t))}Ks(){const t=this.Is.W(),e={it:this.Bs,Nt:t.lineStyle,us:t.lineVisible?t.lineType:void 0,et:t.lineWidth,Ts:t.pointMarkersVisible?t.pointMarkersRadius||t.lineWidth/2+2:void 0,tt:this.Vs,_s:this.zs.St().ee()};this.Ns.J(e)}}const oe=/[2-9]/g;class ae{constructor(t=50){this.Ye=0,this.Xe=1,this.Ke=1,this.Ze={},this.Ge=new Map,this.Je=t}Qe(){this.Ye=0,this.Ge.clear(),this.Xe=1,this.Ke=1,this.Ze={}}Mi(t,e,i){return this.tr(t,e,i).width}gi(t,e,i){const s=this.tr(t,e,i);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}tr(t,e,i){const s=i||oe,r=String(e).replace(s,"0");if(this.Ge.has(r))return _(this.Ge.get(r)).ir;if(this.Ye===this.Je){const t=this.Ze[this.Ke];delete this.Ze[this.Ke],this.Ge.delete(t),this.Ke++,this.Ye--}t.save(),t.textBaseline="middle";const n=t.measureText(r);return t.restore(),0===n.width&&e.length||(this.Ge.set(r,{ir:n,nr:this.Xe}),this.Ze[this.Xe]=r,this.Ye++,this.Xe++),n}}class he{constructor(t){this.sr=null,this.k=null,this.er="right",this.rr=t}hr(t,e,i){this.sr=t,this.k=e,this.er=i}K(t){null!==this.k&&null!==this.sr&&this.sr.K(t,this.k,this.rr,this.er)}}class le{constructor(t,e,i){this.lr=t,this.rr=new ae(50),this.ar=e,this.F=i,this.j=-1,this.Wt=new he(this.rr)}gt(){const t=this.F._r(this.ar);if(null===t)return null;const e=t.ur(this.ar)?t.cr():this.ar.Dt();if(null===e)return null;const i=t.dr(e);if("overlay"===i)return null;const s=this.F.vr();return s.P!==this.j&&(this.j=s.P,this.rr.Qe()),this.Wt.hr(this.lr.Vi(),s,i),this.Wt}}class ce extends Z{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}pr(t,e){var i;if(!(null===(i=this.zt)||void 0===i?void 0:i.yt))return null;const{st:s,et:r,mr:n}=this.zt;return e>=s-r-7&&e<=s+r+7?{br:this.zt,mr:n}:null}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt)return;if(!1===this.zt.yt)return;const r=Math.round(this.zt.st*s);r<0||r>e.height||(t.lineCap="butt",t.strokeStyle=this.zt.O,t.lineWidth=Math.floor(this.zt.et*i),x(t,this.zt.Nt),w(t,r,0,e.width))}}class ue{constructor(t){this.wr={st:0,O:"rgba(0, 0, 0, 0)",et:1,Nt:0,yt:!1},this.gr=new ce,this.ft=!0,this.Is=t,this.zs=t.$t(),this.gr.J(this.wr)}bt(){this.ft=!0}gt(){return this.Is.yt()?(this.ft&&(this.Mr(),this.ft=!1),this.gr):null}}class pe extends ue{constructor(t){super(t)}Mr(){this.wr.yt=!1;const t=this.Is.Dt(),e=t.Sr().Sr;if(2!==e&&3!==e)return;const i=this.Is.W();if(!i.baseLineVisible||!this.Is.yt())return;const s=this.Is.Ct();null!==s&&(this.wr.yt=!0,this.wr.st=t.Rt(s.Ot,s.Ot),this.wr.O=i.baseLineColor,this.wr.et=i.baseLineWidth,this.wr.Nt=i.baseLineStyle)}}class de extends Z{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}We(){return this.zt}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i}){const s=this.zt;if(null===s)return;const r=Math.max(1,Math.floor(e)),n=r%2/2,o=Math.round(s.qe.x*e)+n,a=s.qe.y*i;t.fillStyle=s.kr,t.beginPath();const h=Math.max(2,1.5*s.yr)*e;t.arc(o,a,h,0,2*Math.PI,!1),t.fill(),t.fillStyle=s.Cr,t.beginPath(),t.arc(o,a,s.ht*e,0,2*Math.PI,!1),t.fill(),t.lineWidth=r,t.strokeStyle=s.Tr,t.beginPath(),t.arc(o,a,s.ht*e+r/2,0,2*Math.PI,!1),t.stroke()}}const fe=[{Pr:0,Rr:.25,Dr:4,Or:10,Ar:.25,Br:0,Vr:.4,Ir:.8},{Pr:.25,Rr:.525,Dr:10,Or:14,Ar:0,Br:0,Vr:.8,Ir:0},{Pr:.525,Rr:1,Dr:14,Or:14,Ar:0,Br:0,Vr:0,Ir:0}];function me(t,e,i,s){return function(t,e){if("transparent"===t)return t;const i=z(t),s=i[3];return`rgba(${i[0]}, ${i[1]}, ${i[2]}, ${e*s})`}(t,i+(s-i)*e)}function ge(t,e){const i=t%2600/2600;let s;for(const t of fe)if(i>=t.Pr&&i<=t.Rr){s=t;break}k(void 0!==s,"Last price animation internal logic error");const r=(i-s.Pr)/(s.Rr-s.Pr);return{Cr:me(e,r,s.Ar,s.Br),Tr:me(e,r,s.Vr,s.Ir),ht:(n=r,o=s.Dr,a=s.Or,o+(a-o)*n)};var n,o,a}class ye{constructor(t){this.Wt=new de,this.ft=!0,this.zr=!0,this.Lr=performance.now(),this.Er=this.Lr-1,this.Nr=t}Fr(){this.Er=this.Lr-1,this.bt()}Wr(){if(this.bt(),2===this.Nr.W().lastPriceAnimation){const t=performance.now(),e=this.Er-t;if(e>0)return void(e<650&&(this.Er+=2600));this.Lr=t,this.Er=t+2600}}bt(){this.ft=!0}jr(){this.zr=!0}yt(){return 0!==this.Nr.W().lastPriceAnimation}Hr(){switch(this.Nr.W().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.Er}}gt(){return this.ft?(this.Mt(),this.ft=!1,this.zr=!1):this.zr&&(this.$r(),this.zr=!1),this.Wt}Mt(){this.Wt.J(null);const t=this.Nr.$t().St(),e=t.qs(),i=this.Nr.Ct();if(null===e||null===i)return;const s=this.Nr.Ur(!0);if(s.qr||!e.Yr(s.ie))return;const r={x:t.It(s.ie),y:this.Nr.Dt().Rt(s._t,i.Ot)},n=s.O,o=this.Nr.W().lineWidth,a=ge(this.Xr(),n);this.Wt.J({kr:n,yr:o,Cr:a.Cr,Tr:a.Tr,ht:a.ht,qe:r})}$r(){const t=this.Wt.We();if(null!==t){const e=ge(this.Xr(),t.kr);t.Cr=e.Cr,t.Tr=e.Tr,t.ht=e.ht}}Xr(){return this.Hr()?performance.now()-this.Lr:2599}}function ve(t,e){return Mt(Math.min(Math.max(t,12),30)*e)}function be(t,e){switch(t){case"arrowDown":case"arrowUp":return ve(e,1);case"circle":return ve(e,.8);case"square":return ve(e,.7)}}function Se(t){return function(t){const e=Math.ceil(t);return e%2!=0?e-1:e}(ve(t,1))}function xe(t){return Math.max(ve(t,.1),3)}function we(t,e,i){return e?t:i?Math.ceil(t/2):0}function ke(t,e,i,s,r){const n=be("square",i),o=(n-1)/2,a=t-o,h=e-o;return s>=a&&s<=a+n&&r>=h&&r<=h+n}function _e(t,e,i,s){const r=(be("arrowUp",s)-1)/2*i.Kr,n=(Mt(s/2)-1)/2*i.Kr;e.beginPath(),t?(e.moveTo(i.nt-r,i.st),e.lineTo(i.nt,i.st-r),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+n,i.st+r),e.lineTo(i.nt-n,i.st+r),e.lineTo(i.nt-n,i.st)):(e.moveTo(i.nt-r,i.st),e.lineTo(i.nt,i.st+r),e.lineTo(i.nt+r,i.st),e.lineTo(i.nt+n,i.st),e.lineTo(i.nt+n,i.st-r),e.lineTo(i.nt-n,i.st-r),e.lineTo(i.nt-n,i.st)),e.fill()}class Ce extends Z{constructor(){super(...arguments),this.zt=null,this.rr=new ae,this.j=-1,this.H="",this.Zr=""}J(t){this.zt=t}hr(t,e){this.j===t&&this.H===e||(this.j=t,this.H=e,this.Zr=q(t,e),this.rr.Qe())}pr(t,e){if(null===this.zt||null===this.zt.tt)return null;for(let i=this.zt.tt.from;i<this.zt.tt.to;i++){const s=this.zt.it[i];if(Pe(s,t,e))return{br:s.Gr,mr:s.mr}}return null}Z({context:t,horizontalPixelRatio:e,verticalPixelRatio:i},s,r){if(null!==this.zt&&null!==this.zt.tt){t.textBaseline="middle",t.font=this.Zr;for(let s=this.zt.tt.from;s<this.zt.tt.to;s++){const r=this.zt.it[s];void 0!==r.Zt&&(r.Zt.ji=this.rr.Mi(t,r.Zt.Jr),r.Zt.Vt=this.j,r.Zt.nt=r.nt-r.Zt.ji/2),Ee(r,t,e,i)}}}}function Ee(t,e,i,s){e.fillStyle=t.O,void 0!==t.Zt&&function(t,e,i,s,r,n){t.save(),t.scale(r,n),t.fillText(e,i,s),t.restore()}(e,t.Zt.Jr,t.Zt.nt,t.Zt.st,i,s),function(t,e,i){if(0!==t.Ys){switch(t.Qr){case"arrowDown":return void _e(!1,e,i,t.Ys);case"arrowUp":return void _e(!0,e,i,t.Ys);case"circle":return void function(t,e,i){const s=(be("circle",i)-1)/2;t.beginPath(),t.arc(e.nt,e.st,s*e.Kr,0,2*Math.PI,!1),t.fill()}(e,i,t.Ys);case"square":return void function(t,e,i){const s=be("square",i),r=(s-1)*e.Kr/2,n=e.nt-r,o=e.st-r;t.fillRect(n,o,s*e.Kr,s*e.Kr)}(e,i,t.Ys)}t.Qr}}(t,e,function(t,e,i){const s=Math.max(1,Math.floor(e))%2/2;return{nt:Math.round(t.nt*e)+s,st:t.st*i,Kr:e}}(t,i,s))}function Pe(t,e,i){return!(void 0===t.Zt||!function(t,e,i,s,r,n){const o=s/2;return r>=t&&r<=t+i&&n>=e-o&&n<=e+o}(t.Zt.nt,t.Zt.st,t.Zt.ji,t.Zt.Vt,e,i))||function(t,e,i){if(0===t.Ys)return!1;switch(t.Qr){case"arrowDown":case"arrowUp":return function(t,e,i,s,r,n){return ke(e,i,s,r,n)}(0,t.nt,t.st,t.Ys,e,i);case"circle":return function(t,e,i,s,r){const n=2+be("circle",i)/2,o=t-s,a=e-r;return Math.sqrt(o*o+a*a)<=n}(t.nt,t.st,t.Ys,e,i);case"square":return ke(t.nt,t.st,t.Ys,e,i)}}(t,e,i)}function Ie(t,e,i,s,r,n,o,a,h){const l=V(i)?i:i.ge,c=V(i)?i:i.be,u=V(i)?i:i.we,p=V(e.size)?Math.max(e.size,0):1,d=Se(a.ee())*p,f=d/2;switch(t.Ys=d,e.position){case"inBar":return t.st=o.Rt(l,h),void(void 0!==t.Zt&&(t.Zt.st=t.st+f+n+.6*r));case"aboveBar":return t.st=o.Rt(c,h)-f-s.th,void 0!==t.Zt&&(t.Zt.st=t.st-f-.6*r,s.th+=1.2*r),void(s.th+=d+n);case"belowBar":return t.st=o.Rt(u,h)+f+s.ih,void 0!==t.Zt&&(t.Zt.st=t.st+f+n+.6*r,s.ih+=1.2*r),void(s.ih+=d+n)}e.position}class Te{constructor(t,e){this.ft=!0,this.nh=!0,this.sh=!0,this.eh=null,this.rh=null,this.Wt=new Ce,this.Nr=t,this.Hi=e,this.zt={it:[],tt:null}}bt(t){this.ft=!0,this.sh=!0,"data"===t&&(this.nh=!0,this.rh=null)}gt(t){if(!this.Nr.yt())return null;this.ft&&this.hh();const e=this.Hi.W().layout;return this.Wt.hr(e.fontSize,e.fontFamily),this.Wt.J(this.zt),this.Wt}lh(){if(this.sh){if(this.Nr.ah().length>0){const t=this.Hi.St().ee(),e=xe(t),i=1.5*Se(t)+2*e,s=this.oh();this.eh={above:we(i,s.aboveBar,s.inBar),below:we(i,s.belowBar,s.inBar)}}else this.eh=null;this.sh=!1}return this.eh}oh(){return null===this.rh&&(this.rh=this.Nr.ah().reduce(((t,e)=>(t[e.position]||(t[e.position]=!0),t)),{inBar:!1,aboveBar:!1,belowBar:!1})),this.rh}hh(){const t=this.Nr.Dt(),e=this.Hi.St(),i=this.Nr.ah();this.nh&&(this.zt.it=i.map((t=>({ot:t.time,nt:0,st:0,Ys:0,Qr:t.shape,O:t.color,Gr:t.Gr,mr:t.id,Zt:void 0}))),this.nh=!1);const s=this.Hi.W().layout;this.zt.tt=null;const r=e.qs();if(null===r)return;const n=this.Nr.Ct();if(null===n)return;if(0===this.zt.it.length)return;let o=NaN;const a=xe(e.ee()),h={th:a,ih:a};this.zt.tt=Ht(this.zt.it,r,!0);for(let r=this.zt.tt.from;r<this.zt.tt.to;r++){const l=i[r];l.time!==o&&(h.th=a,h.ih=a,o=l.time);const c=this.zt.it[r];c.nt=e.It(l.time),void 0!==l.text&&l.text.length>0&&(c.Zt={Jr:l.text,nt:0,st:0,ji:0,Vt:0});const u=this.Nr._h(l.time);null!==u&&Ie(c,l,u,h,s.fontSize,a,t,e,n.Ot)}this.ft=!1}}class Ae extends ue{constructor(t){super(t)}Mr(){const t=this.wr;t.yt=!1;const e=this.Is.W();if(!e.priceLineVisible||!this.Is.yt())return;const i=this.Is.Ur(0===e.priceLineSource);i.qr||(t.yt=!0,t.st=i.Si,t.O=this.Is.uh(i.O),t.et=e.priceLineWidth,t.Nt=e.priceLineStyle)}}class Me extends ht{constructor(t){super(),this.jt=t}Ii(t,e,i){t.yt=!1,e.yt=!1;const s=this.jt;if(!s.yt())return;const r=s.W(),n=r.lastValueVisible,o=""!==s.dh(),a=0===r.seriesLastValueMode,h=s.Ur(!1);if(h.qr)return;n&&(t.Zt=this.fh(h,n,a),t.yt=0!==t.Zt.length),(o||a)&&(e.Zt=this.ph(h,n,o,a),e.yt=e.Zt.length>0);const l=s.uh(h.O),c=D(l);i.t=c.t,i.Si=h.Si,e.At=s.$t().Bt(h.Si/s.Dt().Vt()),t.At=l,t.O=c.i,e.O=c.i}ph(t,e,i,s){let r="";const n=this.jt.dh();return i&&0!==n.length&&(r+=`${n} `),e&&s&&(r+=this.jt.Dt().mh()?t.bh:t.wh),r.trim()}fh(t,e,i){return e?i?this.jt.Dt().mh()?t.wh:t.bh:t.Zt:""}}function Re(t,e,i,s){const r=Number.isFinite(e),n=Number.isFinite(i);return r&&n?t(e,i):r||n?r?e:i:s}class Be{constructor(t,e){this.gh=t,this.Mh=e}xh(t){return null!==t&&this.gh===t.gh&&this.Mh===t.Mh}Sh(){return new Be(this.gh,this.Mh)}kh(){return this.gh}yh(){return this.Mh}Ch(){return this.Mh-this.gh}Ei(){return this.Mh===this.gh||Number.isNaN(this.Mh)||Number.isNaN(this.gh)}Jn(t){return null===t?this:new Be(Re(Math.min,this.kh(),t.kh(),-1/0),Re(Math.max,this.yh(),t.yh(),1/0))}Th(t){if(!V(t))return;if(0==this.Mh-this.gh)return;const e=.5*(this.Mh+this.gh);let i=this.Mh-e,s=this.gh-e;i*=t,s*=t,this.Mh=e+i,this.gh=e+s}Ph(t){V(t)&&(this.Mh+=t,this.gh+=t)}Rh(){return{minValue:this.gh,maxValue:this.Mh}}static Dh(t){return null===t?null:new Be(t.minValue,t.maxValue)}}class ze{constructor(t,e){this.Oh=t,this.Ah=e||null}Bh(){return this.Oh}Vh(){return this.Ah}Rh(){return null===this.Oh?null:{priceRange:this.Oh.Rh(),margins:this.Ah||void 0}}static Dh(t){return null===t?null:new ze(Be.Dh(t.priceRange),t.margins)}}class De extends ue{constructor(t,e){super(t),this.Ih=e}Mr(){const t=this.wr;t.yt=!1;const e=this.Ih.W();if(!this.Is.yt()||!e.lineVisible)return;const i=this.Ih.zh();null!==i&&(t.yt=!0,t.st=i,t.O=e.color,t.et=e.lineWidth,t.Nt=e.lineStyle,t.mr=this.Ih.W().id)}}class Fe extends ht{constructor(t,e){super(),this.Nr=t,this.Ih=e}Ii(t,e,i){t.yt=!1,e.yt=!1;const s=this.Ih.W(),r=s.axisLabelVisible,n=""!==s.title,o=this.Nr;if(!r||!o.yt())return;const a=this.Ih.zh();if(null===a)return;n&&(e.Zt=s.title,e.yt=!0),e.At=o.$t().Bt(a/o.Dt().Vt()),t.Zt=this.Lh(s.price),t.yt=!0;const h=D(s.axisLabelColor||s.color);i.t=h.t;const l=s.axisLabelTextColor||h.i;t.O=l,e.O=l,i.Si=a}Lh(t){const e=this.Nr.Ct();return null===e?"":this.Nr.Dt().Ni(t,e.Ot)}}class Le{constructor(t,e){this.Nr=t,this._n=e,this.Eh=new De(t,this),this.lr=new Fe(t,this),this.Nh=new le(this.lr,t,t.$t())}Fh(t){L(this._n,t),this.bt(),this.Nr.$t().Wh()}W(){return this._n}jh(){return this.Eh}Hh(){return this.Nh}$h(){return this.lr}bt(){this.Eh.bt(),this.lr.bt()}zh(){const t=this.Nr,e=t.Dt();if(t.$t().St().Ei()||e.Ei())return null;const i=t.Ct();return null===i?null:e.Rt(this._n.price,i.Ot)}}class Ve extends dt{constructor(t){super(),this.Hi=t}$t(){return this.Hi}}const Oe={Bar:(t,e,i,s)=>{var r;const n=e.upColor,o=e.downColor,a=C(t(i,s)),h=E(a.Ot[0])<=E(a.Ot[3]);return{oe:null!==(r=a.O)&&void 0!==r?r:h?n:o}},Candlestick:(t,e,i,s)=>{var r,n,o;const a=e.upColor,h=e.downColor,l=e.borderUpColor,c=e.borderDownColor,u=e.wickUpColor,p=e.wickDownColor,d=C(t(i,s)),f=E(d.Ot[0])<=E(d.Ot[3]);return{oe:null!==(r=d.O)&&void 0!==r?r:f?a:h,ze:null!==(n=d.At)&&void 0!==n?n:f?l:c,Ie:null!==(o=d.Uh)&&void 0!==o?o:f?u:p}},Custom:(t,e,i,s)=>{var r;return{oe:null!==(r=C(t(i,s)).O)&&void 0!==r?r:e.color}},Area:(t,e,i,s)=>{var r,n,o,a;const h=C(t(i,s));return{oe:null!==(r=h.lt)&&void 0!==r?r:e.lineColor,lt:null!==(n=h.lt)&&void 0!==n?n:e.lineColor,ys:null!==(o=h.ys)&&void 0!==o?o:e.topColor,Cs:null!==(a=h.Cs)&&void 0!==a?a:e.bottomColor}},Baseline:(t,e,i,s)=>{var r,n,o,a,h,l;const c=C(t(i,s));return{oe:c.Ot[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,Ce:null!==(r=c.Ce)&&void 0!==r?r:e.topLineColor,Te:null!==(n=c.Te)&&void 0!==n?n:e.bottomLineColor,Me:null!==(o=c.Me)&&void 0!==o?o:e.topFillColor1,xe:null!==(a=c.xe)&&void 0!==a?a:e.topFillColor2,Se:null!==(h=c.Se)&&void 0!==h?h:e.bottomFillColor1,ke:null!==(l=c.ke)&&void 0!==l?l:e.bottomFillColor2}},Line:(t,e,i,s)=>{var r,n;const o=C(t(i,s));return{oe:null!==(r=o.O)&&void 0!==r?r:e.color,lt:null!==(n=o.O)&&void 0!==n?n:e.color}},Histogram:(t,e,i,s)=>{var r;return{oe:null!==(r=C(t(i,s)).O)&&void 0!==r?r:e.color}}};class Ne{constructor(t){this.qh=(t,e)=>void 0!==e?e.Ot:this.Nr.Bn().Yh(t),this.Nr=t,this.Xh=Oe[t.Kh()]}Ws(t,e){return this.Xh(this.qh,this.Nr.W(),t,e)}}var We;!function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"}(We||(We={}));const He=30;class Ge{constructor(){this.Zh=[],this.Gh=new Map,this.Jh=new Map}Qh(){return this.Ys()>0?this.Zh[this.Zh.length-1]:null}tl(){return this.Ys()>0?this.il(0):null}An(){return this.Ys()>0?this.il(this.Zh.length-1):null}Ys(){return this.Zh.length}Ei(){return 0===this.Ys()}Yr(t){return null!==this.nl(t,0)}Yh(t){return this.sl(t)}sl(t,e=0){const i=this.nl(t,e);return null===i?null:Object.assign(Object.assign({},this.el(i)),{ie:this.il(i)})}Qs(){return this.Zh}rl(t,e,i){if(this.Ei())return null;let s=null;for(const r of i)s=je(s,this.hl(t,e,r));return s}J(t){this.Jh.clear(),this.Gh.clear(),this.Zh=t}il(t){return this.Zh[t].ie}el(t){return this.Zh[t]}nl(t,e){const i=this.ll(t);if(null===i&&0!==e)switch(e){case-1:return this.al(t);case 1:return this.ol(t);default:throw new TypeError("Unknown search mode")}return i}al(t){let e=this._l(t);return e>0&&(e-=1),e!==this.Zh.length&&this.il(e)<t?e:null}ol(t){const e=this.ul(t);return e!==this.Zh.length&&t<this.il(e)?e:null}ll(t){const e=this._l(t);return e===this.Zh.length||t<this.Zh[e].ie?null:e}_l(t){return Vt(this.Zh,t,((t,e)=>t.ie<e))}ul(t){return Ot(this.Zh,t,((t,e)=>t.ie>e))}cl(t,e,i){let s=null;for(let r=t;r<e;r++){const t=this.Zh[r].Ot[i];Number.isNaN(t)||(null===s?s={dl:t,fl:t}:(t<s.dl&&(s.dl=t),t>s.fl&&(s.fl=t)))}return s}hl(t,e,i){if(this.Ei())return null;let s=null;const r=C(this.tl()),n=C(this.An()),o=Math.max(t,r),a=Math.min(e,n),h=Math.ceil(o/He)*He,l=Math.max(h,Math.floor(a/He)*He);{const t=this._l(o),r=this.ul(Math.min(a,h,e));s=je(s,this.cl(t,r,i))}let c=this.Gh.get(i);void 0===c&&(c=new Map,this.Gh.set(i,c));for(let t=Math.max(h+1,o);t<l;t+=He){const e=Math.floor(t/He);let r=c.get(e);if(void 0===r){const t=this._l(e*He),s=this.ul((e+1)*He-1);r=this.cl(t,s,i),c.set(e,r)}s=je(s,r)}{const t=this._l(l),e=this.ul(a);s=je(s,this.cl(t,e,i))}return s}}function je(t,e){return null===t?e:null===e?t:{dl:Math.min(t.dl,e.dl),fl:Math.max(t.fl,e.fl)}}class $e{constructor(t){this.vl=t}K(t,e,i){this.vl.draw(t)}pl(t,e,i){var s,r;null===(r=(s=this.vl).drawBackground)||void 0===r||r.call(s,t)}}class qe{constructor(t){this.Ge=null,this.mn=t}gt(){var t;const e=this.mn.renderer();if(null===e)return null;if((null===(t=this.Ge)||void 0===t?void 0:t.ml)===e)return this.Ge.bl;const i=new $e(e);return this.Ge={ml:e,bl:i},i}wl(){var t,e,i;return null!==(i=null===(e=(t=this.mn).zOrder)||void 0===e?void 0:e.call(t))&&void 0!==i?i:"normal"}}function Ue(t){var e,i,s,r,n;return{Zt:t.text(),Si:t.coordinate(),xi:null===(e=t.fixedCoordinate)||void 0===e?void 0:e.call(t),O:t.textColor(),t:t.backColor(),yt:null===(s=null===(i=t.visible)||void 0===i?void 0:i.call(t))||void 0===s||s,hi:null===(n=null===(r=t.tickVisible)||void 0===r?void 0:r.call(t))||void 0===n||n}}class Ke{constructor(t,e){this.Wt=new ut,this.gl=t,this.Ml=e}gt(){return this.Wt.J(Object.assign({ji:this.Ml.ji()},Ue(this.gl))),this.Wt}}class Ze extends ht{constructor(t,e){super(),this.gl=t,this.zi=e}Ii(t,e,i){const s=Ue(this.gl);i.t=s.t,t.O=s.O;const r=2/12*this.zi.P();i.bi=r,i.wi=r,i.Si=s.Si,i.xi=s.xi,t.Zt=s.Zt,t.yt=s.yt,t.hi=s.hi}}class Ye{constructor(t,e){this.xl=null,this.Sl=null,this.kl=null,this.yl=null,this.Cl=null,this.Tl=t,this.Nr=e}Pl(){return this.Tl}Rn(){var t,e;null===(e=(t=this.Tl).updateAllViews)||void 0===e||e.call(t)}Cn(){var t,e,i,s;const r=null!==(i=null===(e=(t=this.Tl).paneViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(s=this.xl)||void 0===s?void 0:s.ml)===r)return this.xl.bl;const n=r.map((t=>new qe(t)));return this.xl={ml:r,bl:n},n}Ji(){var t,e,i,s;const r=null!==(i=null===(e=(t=this.Tl).timeAxisViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(s=this.Sl)||void 0===s?void 0:s.ml)===r)return this.Sl.bl;const n=this.Nr.$t().St(),o=r.map((t=>new Ke(t,n)));return this.Sl={ml:r,bl:o},o}Tn(){var t,e,i,s;const r=null!==(i=null===(e=(t=this.Tl).priceAxisViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(s=this.kl)||void 0===s?void 0:s.ml)===r)return this.kl.bl;const n=this.Nr.Dt(),o=r.map((t=>new Ze(t,n)));return this.kl={ml:r,bl:o},o}Rl(){var t,e,i,s;const r=null!==(i=null===(e=(t=this.Tl).priceAxisPaneViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(s=this.yl)||void 0===s?void 0:s.ml)===r)return this.yl.bl;const n=r.map((t=>new qe(t)));return this.yl={ml:r,bl:n},n}Dl(){var t,e,i,s;const r=null!==(i=null===(e=(t=this.Tl).timeAxisPaneViews)||void 0===e?void 0:e.call(t))&&void 0!==i?i:[];if((null===(s=this.Cl)||void 0===s?void 0:s.ml)===r)return this.Cl.bl;const n=r.map((t=>new qe(t)));return this.Cl={ml:r,bl:n},n}Ol(t,e){var i,s,r;return null!==(r=null===(s=(i=this.Tl).autoscaleInfo)||void 0===s?void 0:s.call(i,t,e))&&void 0!==r?r:null}pr(t,e){var i,s,r;return null!==(r=null===(s=(i=this.Tl).hitTest)||void 0===s?void 0:s.call(i,t,e))&&void 0!==r?r:null}}function Je(t,e,i,s){t.forEach((t=>{e(t).forEach((t=>{t.wl()===i&&s.push(t)}))}))}function Xe(t){return t.Cn()}function Qe(t){return t.Rl()}function ti(t){return t.Dl()}class ei extends Ve{constructor(t,e,i,s,r){super(t),this.zt=new Ge,this.Eh=new Ae(this),this.Al=[],this.Bl=new pe(this),this.Vl=null,this.Il=null,this.zl=[],this.Ll=[],this.El=null,this.Nl=[],this._n=e,this.Fl=i;const n=new Me(this);this.en=[n],this.Nh=new le(n,this,t),"Area"!==i&&"Line"!==i&&"Baseline"!==i||(this.Vl=new ye(this)),this.Wl(),this.jl(r)}S(){null!==this.El&&clearTimeout(this.El)}uh(t){return this._n.priceLineColor||t}Ur(t){const e={qr:!0},i=this.Dt();if(this.$t().St().Ei()||i.Ei()||this.zt.Ei())return e;const s=this.$t().St().qs(),r=this.Ct();if(null===s||null===r)return e;let n,o;if(t){const t=this.zt.Qh();if(null===t)return e;n=t,o=t.ie}else{const t=this.zt.sl(s.ui(),-1);if(null===t)return e;if(n=this.zt.Yh(t.ie),null===n)return e;o=t.ie}const a=n.Ot[3],h=this.js().Ws(o,{Ot:n}),l=i.Rt(a,r.Ot);return{qr:!1,_t:a,Zt:i.Ni(a,r.Ot),bh:i.Hl(a),wh:i.$l(a,r.Ot),O:h.oe,Si:l,ie:o}}js(){return null!==this.Il||(this.Il=new Ne(this)),this.Il}W(){return this._n}Fh(t){const e=t.priceScaleId;void 0!==e&&e!==this._n.priceScaleId&&this.$t().Ul(this,e),L(this._n,t),void 0!==t.priceFormat&&(this.Wl(),this.$t().ql()),this.$t().Yl(this),this.$t().Xl(),this.mn.bt("options")}J(t,e){this.zt.J(t),this.Kl(),this.mn.bt("data"),this.un.bt("data"),null!==this.Vl&&(e&&e.Zl?this.Vl.Wr():0===t.length&&this.Vl.Fr());const i=this.$t()._r(this);this.$t().Gl(i),this.$t().Yl(this),this.$t().Xl(),this.$t().Wh()}Jl(t){this.zl=t,this.Kl();const e=this.$t()._r(this);this.un.bt("data"),this.$t().Gl(e),this.$t().Yl(this),this.$t().Xl(),this.$t().Wh()}Ql(){return this.zl}ah(){return this.Ll}ta(t){const e=new Le(this,t);return this.Al.push(e),this.$t().Yl(this),e}ia(t){const e=this.Al.indexOf(t);-1!==e&&this.Al.splice(e,1),this.$t().Yl(this)}Kh(){return this.Fl}Ct(){const t=this.na();return null===t?null:{Ot:t.Ot[3],sa:t.ot}}na(){const t=this.$t().St().qs();if(null===t)return null;const e=t.Rs();return this.zt.sl(e,1)}Bn(){return this.zt}_h(t){const e=this.zt.Yh(t);return null===e?null:"Bar"===this.Fl||"Candlestick"===this.Fl||"Custom"===this.Fl?{me:e.Ot[0],be:e.Ot[1],we:e.Ot[2],ge:e.Ot[3]}:e.Ot[3]}ea(t){const e=[];Je(this.Nl,Xe,"top",e);const i=this.Vl;return null!==i&&i.yt()?(null===this.El&&i.Hr()&&(this.El=setTimeout((()=>{this.El=null,this.$t().ra()}),0)),i.jr(),e.unshift(i),e):e}Cn(){const t=[];this.ha()||t.push(this.Bl),t.push(this.mn,this.Eh,this.un);const e=this.Al.map((t=>t.jh()));return t.push(...e),Je(this.Nl,Xe,"normal",t),t}la(){return this.aa(Xe,"bottom")}oa(t){return this.aa(Qe,t)}_a(t){return this.aa(ti,t)}ua(t,e){return this.Nl.map((i=>i.pr(t,e))).filter((t=>null!==t))}Gi(t){return[this.Nh,...this.Al.map((t=>t.Hh()))]}Tn(t,e){if(e!==this.qi&&!this.ha())return[];const i=[...this.en];for(const t of this.Al)i.push(t.$h());return this.Nl.forEach((t=>{i.push(...t.Tn())})),i}Ji(){const t=[];return this.Nl.forEach((e=>{t.push(...e.Ji())})),t}Ol(t,e){if(void 0!==this._n.autoscaleInfoProvider){const i=this._n.autoscaleInfoProvider((()=>{const i=this.ca(t,e);return null===i?null:i.Rh()}));return ze.Dh(i)}return this.ca(t,e)}da(){return this._n.priceFormat.minMove}fa(){return this.va}Rn(){var t;this.mn.bt(),this.un.bt();for(const t of this.en)t.bt();for(const t of this.Al)t.bt();this.Eh.bt(),this.Bl.bt(),null===(t=this.Vl)||void 0===t||t.bt(),this.Nl.forEach((t=>t.Rn()))}Dt(){return C(super.Dt())}kt(t){if("Line"!==this.Fl&&"Area"!==this.Fl&&"Baseline"!==this.Fl||!this._n.crosshairMarkerVisible)return null;const e=this.zt.Yh(t);return null===e?null:{_t:e.Ot[3],ht:this.pa(),At:this.ma(),Pt:this.ba(),Tt:this.wa(t)}}dh(){return this._n.title}yt(){return this._n.visible}ga(t){this.Nl.push(new Ye(t,this))}Ma(t){this.Nl=this.Nl.filter((e=>e.Pl()!==t))}xa(){if(this.mn instanceof ee!=0)return t=>this.mn.Ee(t)}Sa(){if(this.mn instanceof ee!=0)return t=>this.mn.Ne(t)}ha(){return!gt(this.Dt().ka())}ca(t,e){if(!O(t)||!O(e)||this.zt.Ei())return null;const i="Line"===this.Fl||"Area"===this.Fl||"Baseline"===this.Fl||"Histogram"===this.Fl?[3]:[2,1],s=this.zt.rl(t,e,i);let r=null!==s?new Be(s.dl,s.fl):null;if("Histogram"===this.Kh()){const t=this._n.base,e=new Be(t,t);r=null!==r?r.Jn(e):e}let n=this.un.lh();return this.Nl.forEach((i=>{const s=i.Ol(t,e);if(null==s?void 0:s.priceRange){const t=new Be(s.priceRange.minValue,s.priceRange.maxValue);r=null!==r?r.Jn(t):t}var o,a,h,l;(null==s?void 0:s.margins)&&(o=n,a=s.margins,n={above:Math.max(null!==(h=null==o?void 0:o.above)&&void 0!==h?h:0,a.above),below:Math.max(null!==(l=null==o?void 0:o.below)&&void 0!==l?l:0,a.below)})})),new ze(r,n)}pa(){switch(this.Fl){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerRadius}return 0}ma(){switch(this.Fl){case"Line":case"Area":case"Baseline":{const t=this._n.crosshairMarkerBorderColor;if(0!==t.length)return t}}return null}ba(){switch(this.Fl){case"Line":case"Area":case"Baseline":return this._n.crosshairMarkerBorderWidth}return 0}wa(t){switch(this.Fl){case"Line":case"Area":case"Baseline":{const t=this._n.crosshairMarkerBackgroundColor;if(0!==t.length)return t}}return this.js().Ws(t).oe}Wl(){switch(this._n.priceFormat.type){case"custom":this.va={format:this._n.priceFormat.formatter};break;case"volume":this.va=new xt(this._n.priceFormat.precision);break;case"percent":this.va=new St(this._n.priceFormat.precision);break;default:{const t=Math.pow(10,this._n.priceFormat.precision);this.va=new bt(t,this._n.priceFormat.minMove*t)}}null!==this.qi&&this.qi.ya()}Kl(){const t=this.$t().St();if(!t.Ca()||this.zt.Ei())return void(this.Ll=[]);const e=C(this.zt.tl());this.Ll=this.zl.map(((i,s)=>{const r=C(t.Ta(i.time,!0)),n=r<e?1:-1;return{time:C(this.zt.sl(r,n)).ie,position:i.position,shape:i.shape,color:i.color,id:i.id,Gr:s,text:i.text,size:i.size,originalTime:i.originalTime}}))}jl(t){switch(this.un=new Te(this,this.$t()),this.Fl){case"Bar":this.mn=new Kt(this,this.$t());break;case"Candlestick":this.mn=new Qt(this,this.$t());break;case"Line":this.mn=new ne(this,this.$t());break;case"Custom":this.mn=new ee(this,this.$t(),_(t));break;case"Area":this.mn=new $t(this,this.$t());break;case"Baseline":this.mn=new Jt(this,this.$t());break;case"Histogram":this.mn=new re(this,this.$t());break;default:throw Error("Unknown chart style assigned: "+this.Fl)}}aa(t,e){const i=[];return Je(this.Nl,t,e,i),i}}class ii{constructor(t){this._n=t}Pa(t,e,i){let s=t;if(0===this._n.mode)return s;const r=i.dn(),n=r.Ct();if(null===n)return s;const o=r.Rt(t,n),a=i.Ra().filter((t=>t instanceof ei)).reduce(((t,s)=>{if(i.ur(s)||!s.yt())return t;const r=s.Dt(),n=s.Bn();if(r.Ei()||!n.Yr(e))return t;const o=n.Yh(e);if(null===o)return t;const a=E(s.Ct());return t.concat([r.Rt(o.Ot[3],a.Ot)])}),[]);if(0===a.length)return s;a.sort(((t,e)=>Math.abs(t-o)-Math.abs(e-o)));const h=a[0];return s=r.fn(h,n),s}}class si extends Z{constructor(){super(...arguments),this.zt=null}J(t){this.zt=t}Z({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(null===this.zt)return;const r=Math.max(1,Math.floor(i));t.lineWidth=r,function(t,e){t.save(),t.lineWidth%2&&t.translate(.5,.5),e(),t.restore()}(t,(()=>{const n=C(this.zt);if(n.Da){t.strokeStyle=n.Oa,x(t,n.Aa),t.beginPath();for(const s of n.Ba){const n=Math.round(s.Va*i);t.moveTo(n,-r),t.lineTo(n,e.height+r)}t.stroke()}if(n.Ia){t.strokeStyle=n.za,x(t,n.La),t.beginPath();for(const i of n.Ea){const n=Math.round(i.Va*s);t.moveTo(-r,n),t.lineTo(e.width+r,n)}t.stroke()}}))}}class ri{constructor(t){this.Wt=new si,this.ft=!0,this.Qi=t}bt(){this.ft=!0}gt(){if(this.ft){const t=this.Qi.$t().W().grid,e={Ia:t.horzLines.visible,Da:t.vertLines.visible,za:t.horzLines.color,Oa:t.vertLines.color,La:t.horzLines.style,Aa:t.vertLines.style,Ea:this.Qi.dn().Na(),Ba:(this.Qi.$t().St().Na()||[]).map((t=>({Va:t.coord})))};this.Wt.J(e),this.ft=!1}return this.Wt}}class ni{constructor(t){this.mn=new ri(t)}jh(){return this.mn}}const oi={Fa:4,Wa:1e-4};function ai(t,e){const i=100*(t-e)/e;return e<0?-i:i}function hi(t,e){const i=ai(t.kh(),e),s=ai(t.yh(),e);return new Be(i,s)}function li(t,e){const i=100*(t-e)/e+100;return e<0?-i:i}function ci(t,e){const i=li(t.kh(),e),s=li(t.yh(),e);return new Be(i,s)}function ui(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const s=Math.log10(i+e.Wa)+e.Fa;return t<0?-s:s}function pi(t,e){const i=Math.abs(t);if(i<1e-15)return 0;const s=Math.pow(10,i-e.Fa)-e.Wa;return t<0?-s:s}function di(t,e){if(null===t)return null;const i=ui(t.kh(),e),s=ui(t.yh(),e);return new Be(i,s)}function fi(t,e){if(null===t)return null;const i=pi(t.kh(),e),s=pi(t.yh(),e);return new Be(i,s)}function mi(t){if(null===t)return oi;const e=Math.abs(t.yh()-t.kh());if(e>=1||e<1e-15)return oi;const i=Math.ceil(Math.abs(Math.log10(e))),s=oi.Fa+i;return{Fa:s,Wa:1/Math.pow(10,s)}}class gi{constructor(t,e){if(this.ja=t,this.Ha=e,function(t){if(t<0)return!1;for(let e=t;e>1;e/=10)if(e%10!=0)return!1;return!0}(this.ja))this.$a=[2,2.5,2];else{this.$a=[];for(let t=this.ja;1!==t;){if(t%2==0)this.$a.push(2),t/=2;else{if(t%5!=0)throw new Error("unexpected base");this.$a.push(2,2.5),t/=5}if(this.$a.length>100)throw new Error("something wrong with base")}}}Ua(t,e,i){const s=0===this.ja?0:1/this.ja;let r=Math.pow(10,Math.max(0,Math.ceil(Math.log10(t-e)))),n=0,o=this.Ha[0];for(;;){const t=At(r,s,1e-14)&&r>s+1e-14,e=At(r,i*o,1e-14),a=At(r,1,1e-14);if(!(t&&e&&a))break;r/=o,o=this.Ha[++n%this.Ha.length]}if(r<=s+1e-14&&(r=s),r=Math.max(1,r),this.$a.length>0&&(a=r,Math.abs(a-1)<1e-14))for(n=0,o=this.$a[0];At(r,i*o,1e-14)&&r>s+1e-14;)r/=o,o=this.$a[++n%this.$a.length];var a;return r}}class yi{constructor(t,e,i,s){this.qa=[],this.zi=t,this.ja=e,this.Ya=i,this.Xa=s}Ua(t,e){if(t<e)throw new Error("high < low");const i=this.zi.Vt(),s=(t-e)*this.Ka()/i,r=new gi(this.ja,[2,2.5,2]),n=new gi(this.ja,[2,2,2.5]),o=new gi(this.ja,[2.5,2,2]),a=[];return a.push(r.Ua(t,e,s),n.Ua(t,e,s),o.Ua(t,e,s)),function(t){if(t.length<1)throw Error("array is empty");let e=t[0];for(let i=1;i<t.length;++i)t[i]<e&&(e=t[i]);return e}(a)}Za(){const t=this.zi,e=t.Ct();if(null===e)return void(this.qa=[]);const i=t.Vt(),s=this.Ya(i-1,e),r=this.Ya(0,e),n=this.zi.W().entireTextOnly?this.Ga()/2:0,o=n,a=i-1-n,h=Math.max(s,r),l=Math.min(s,r);if(h===l)return void(this.qa=[]);let c=this.Ua(h,l),u=h%c;u+=u<0?c:0;const p=h>=l?1:-1;let d=null,f=0;for(let i=h-u;i>l;i-=c){const s=this.Xa(i,e,!0);null!==d&&Math.abs(s-d)<this.Ka()||s<o||s>a||(f<this.qa.length?(this.qa[f].Va=s,this.qa[f].Ja=t.Qa(i)):this.qa.push({Va:s,Ja:t.Qa(i)}),f++,d=s,t.io()&&(c=this.Ua(i*p,l)))}this.qa.length=f}Na(){return this.qa}Ga(){return this.zi.P()}Ka(){return Math.ceil(2.5*this.Ga())}}function vi(t){return t.slice().sort(((t,e)=>C(t.Xi())-C(e.Xi())))}var bi;!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(bi||(bi={}));const Si=new St,xi=new bt(100,1);class wi{constructor(t,e,i,s){this.no=0,this.so=null,this.Oh=null,this.eo=null,this.ro={ho:!1,lo:null},this.ao=0,this.oo=0,this._o=new F,this.uo=new F,this.co=[],this.do=null,this.fo=null,this.vo=null,this.po=null,this.va=xi,this.mo=mi(null),this.bo=t,this._n=e,this.wo=i,this.Mo=s,this.xo=new yi(this,100,this.So.bind(this),this.ko.bind(this))}ka(){return this.bo}W(){return this._n}Fh(t){if(L(this._n,t),this.ya(),void 0!==t.mode&&this.yo({Sr:t.mode}),void 0!==t.scaleMargins){const e=_(t.scaleMargins.top),i=_(t.scaleMargins.bottom);if(e<0||e>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${e}`);if(i<0||i>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${i}`);if(e+i>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${e+i}`);this.Co(),this.fo=null}}To(){return this._n.autoScale}io(){return 1===this._n.mode}mh(){return 2===this._n.mode}Po(){return 3===this._n.mode}Sr(){return{Nn:this._n.autoScale,Ro:this._n.invertScale,Sr:this._n.mode}}yo(t){const e=this.Sr();let i=null;void 0!==t.Nn&&(this._n.autoScale=t.Nn),void 0!==t.Sr&&(this._n.mode=t.Sr,2!==t.Sr&&3!==t.Sr||(this._n.autoScale=!0),this.ro.ho=!1),1===e.Sr&&t.Sr!==e.Sr&&(function(t,e){if(null===t)return!1;const i=pi(t.kh(),e),s=pi(t.yh(),e);return isFinite(i)&&isFinite(s)}(this.Oh,this.mo)?(i=fi(this.Oh,this.mo),null!==i&&this.Do(i)):this._n.autoScale=!0),1===t.Sr&&t.Sr!==e.Sr&&(i=di(this.Oh,this.mo),null!==i&&this.Do(i));const s=e.Sr!==this._n.mode;s&&(2===e.Sr||this.mh())&&this.ya(),s&&(3===e.Sr||this.Po())&&this.ya(),void 0!==t.Ro&&e.Ro!==t.Ro&&(this._n.invertScale=t.Ro,this.Oo()),this.uo.m(e,this.Sr())}Ao(){return this.uo}P(){return this.wo.fontSize}Vt(){return this.no}Bo(t){this.no!==t&&(this.no=t,this.Co(),this.fo=null)}Vo(){if(this.so)return this.so;const t=this.Vt()-this.Io()-this.zo();return this.so=t,t}Bh(){return this.Lo(),this.Oh}Do(t,e){const i=this.Oh;(e||null===i&&null!==t||null!==i&&!i.xh(t))&&(this.fo=null,this.Oh=t)}Ei(){return this.Lo(),0===this.no||!this.Oh||this.Oh.Ei()}Eo(t){return this.Ro()?t:this.Vt()-1-t}Rt(t,e){return this.mh()?t=ai(t,e):this.Po()&&(t=li(t,e)),this.ko(t,e)}Gs(t,e,i){this.Lo();const s=this.zo(),r=C(this.Bh()),n=r.kh(),o=r.yh(),a=this.Vo()-1,h=this.Ro(),l=a/(o-n),c=void 0===i?0:i.from,u=void 0===i?t.length:i.to,p=this.No();for(let i=c;i<u;i++){const r=t[i],o=r._t;if(isNaN(o))continue;let a=o;null!==p&&(a=p(r._t,e));const c=s+l*(a-n),u=h?c:this.no-1-c;r.st=u}}ve(t,e,i){this.Lo();const s=this.zo(),r=C(this.Bh()),n=r.kh(),o=r.yh(),a=this.Vo()-1,h=this.Ro(),l=a/(o-n),c=void 0===i?0:i.from,u=void 0===i?t.length:i.to,p=this.No();for(let i=c;i<u;i++){const r=t[i];let o=r.me,a=r.be,c=r.we,u=r.ge;null!==p&&(o=p(r.me,e),a=p(r.be,e),c=p(r.we,e),u=p(r.ge,e));let d=s+l*(o-n),f=h?d:this.no-1-d;r.de=f,d=s+l*(a-n),f=h?d:this.no-1-d,r._e=f,d=s+l*(c-n),f=h?d:this.no-1-d,r.ue=f,d=s+l*(u-n),f=h?d:this.no-1-d,r.fe=f}}fn(t,e){const i=this.So(t,e);return this.Fo(i,e)}Fo(t,e){let i=t;return this.mh()?i=function(t,e){return e<0&&(t=-t),t/100*e+e}(i,e):this.Po()&&(i=function(t,e){return t-=100,e<0&&(t=-t),t/100*e+e}(i,e)),i}Ra(){return this.co}Wo(){if(this.do)return this.do;let t=[];for(let e=0;e<this.co.length;e++){const i=this.co[e];null===i.Xi()&&i.Ki(e+1),t.push(i)}return t=vi(t),this.do=t,this.do}jo(t){-1===this.co.indexOf(t)&&(this.co.push(t),this.ya(),this.Ho())}$o(t){const e=this.co.indexOf(t);if(-1===e)throw new Error("source is not attached to scale");this.co.splice(e,1),0===this.co.length&&(this.yo({Nn:!0}),this.Do(null)),this.ya(),this.Ho()}Ct(){let t=null;for(const e of this.co){const i=e.Ct();null!==i&&(null===t||i.sa<t.sa)&&(t=i)}return null===t?null:t.Ot}Ro(){return this._n.invertScale}Na(){const t=null===this.Ct();if(null!==this.fo&&(t||this.fo.Uo===t))return this.fo.Na;this.xo.Za();const e=this.xo.Na();return this.fo={Na:e,Uo:t},this._o.m(),e}qo(){return this._o}Yo(t){this.mh()||this.Po()||null===this.vo&&null===this.eo&&(this.Ei()||(this.vo=this.no-t,this.eo=C(this.Bh()).Sh()))}Xo(t){if(this.mh()||this.Po())return;if(null===this.vo)return;this.yo({Nn:!1}),(t=this.no-t)<0&&(t=0);let e=(this.vo+.2*(this.no-1))/(t+.2*(this.no-1));const i=C(this.eo).Sh();e=Math.max(e,.1),i.Th(e),this.Do(i)}Ko(){this.mh()||this.Po()||(this.vo=null,this.eo=null)}Zo(t){this.To()||null===this.po&&null===this.eo&&(this.Ei()||(this.po=t,this.eo=C(this.Bh()).Sh()))}Go(t){if(this.To())return;if(null===this.po)return;const e=C(this.Bh()).Ch()/(this.Vo()-1);let i=t-this.po;this.Ro()&&(i*=-1);const s=i*e,r=C(this.eo).Sh();r.Ph(s),this.Do(r,!0),this.fo=null}Jo(){this.To()||null!==this.po&&(this.po=null,this.eo=null)}fa(){return this.va||this.ya(),this.va}Ni(t,e){switch(this._n.mode){case 2:return this.Qo(ai(t,e));case 3:return this.fa().format(li(t,e));default:return this.Lh(t)}}Qa(t){switch(this._n.mode){case 2:return this.Qo(t);case 3:return this.fa().format(t);default:return this.Lh(t)}}Hl(t){return this.Lh(t,C(this.t_()).fa())}$l(t,e){return t=ai(t,e),this.Qo(t,Si)}i_(){return this.co}n_(t){this.ro={lo:t,ho:!1}}Rn(){this.co.forEach((t=>t.Rn()))}ya(){this.fo=null;const t=this.t_();let e=100;null!==t&&(e=Math.round(1/t.da())),this.va=xi,this.mh()?(this.va=Si,e=100):this.Po()?(this.va=new bt(100,1),e=100):null!==t&&(this.va=t.fa()),this.xo=new yi(this,e,this.So.bind(this),this.ko.bind(this)),this.xo.Za()}Ho(){this.do=null}t_(){return this.co[0]||null}Io(){return this.Ro()?this._n.scaleMargins.bottom*this.Vt()+this.oo:this._n.scaleMargins.top*this.Vt()+this.ao}zo(){return this.Ro()?this._n.scaleMargins.top*this.Vt()+this.ao:this._n.scaleMargins.bottom*this.Vt()+this.oo}Lo(){this.ro.ho||(this.ro.ho=!0,this.s_())}Co(){this.so=null}ko(t,e){if(this.Lo(),this.Ei())return 0;t=this.io()&&t?ui(t,this.mo):t;const i=C(this.Bh()),s=this.zo()+(this.Vo()-1)*(t-i.kh())/i.Ch();return this.Eo(s)}So(t,e){if(this.Lo(),this.Ei())return 0;const i=this.Eo(t),s=C(this.Bh()),r=s.kh()+s.Ch()*((i-this.zo())/(this.Vo()-1));return this.io()?pi(r,this.mo):r}Oo(){this.fo=null,this.xo.Za()}s_(){const t=this.ro.lo;if(null===t)return;let e=null;const i=this.i_();let s=0,r=0;for(const n of i){if(!n.yt())continue;const i=n.Ct();if(null===i)continue;const o=n.Ol(t.Rs(),t.ui());let a=o&&o.Bh();if(null!==a){switch(this._n.mode){case 1:a=di(a,this.mo);break;case 2:a=hi(a,i.Ot);break;case 3:a=ci(a,i.Ot)}if(e=null===e?a:e.Jn(C(a)),null!==o){const t=o.Vh();null!==t&&(s=Math.max(s,t.above),r=Math.max(r,t.below))}}}if(s===this.ao&&r===this.oo||(this.ao=s,this.oo=r,this.fo=null,this.Co()),null!==e){if(e.kh()===e.yh()){const t=this.t_(),i=5*(null===t||this.mh()||this.Po()?1:t.da());this.io()&&(e=fi(e,this.mo)),e=new Be(e.kh()-i,e.yh()+i),this.io()&&(e=di(e,this.mo))}if(this.io()){const t=fi(e,this.mo),i=mi(t);if(n=i,o=this.mo,n.Fa!==o.Fa||n.Wa!==o.Wa){const s=null!==this.eo?fi(this.eo,this.mo):null;this.mo=i,e=di(t,i),null!==s&&(this.eo=di(s,i))}}this.Do(e)}else null===this.Oh&&(this.Do(new Be(-.5,.5)),this.mo=mi(null));var n,o;this.ro.ho=!0}No(){return this.mh()?ai:this.Po()?li:this.io()?t=>ui(t,this.mo):null}e_(t,e,i){return void 0===e?(void 0===i&&(i=this.fa()),i.format(t)):e(t)}Lh(t,e){return this.e_(t,this.Mo.priceFormatter,e)}Qo(t,e){return this.e_(t,this.Mo.percentageFormatter,e)}}class ki{constructor(t,e){this.co=[],this.r_=new Map,this.no=0,this.h_=0,this.l_=1e3,this.do=null,this.a_=new F,this.Ml=t,this.Hi=e,this.o_=new ni(this);const i=e.W();this.__=this.u_("left",i.leftPriceScale),this.c_=this.u_("right",i.rightPriceScale),this.__.Ao().l(this.d_.bind(this,this.__),this),this.c_.Ao().l(this.d_.bind(this,this.c_),this),this.f_(i)}f_(t){if(t.leftPriceScale&&this.__.Fh(t.leftPriceScale),t.rightPriceScale&&this.c_.Fh(t.rightPriceScale),t.localization&&(this.__.ya(),this.c_.ya()),t.overlayPriceScales){const e=Array.from(this.r_.values());for(const i of e){const e=C(i[0].Dt());e.Fh(t.overlayPriceScales),t.localization&&e.ya()}}}v_(t){switch(t){case"left":return this.__;case"right":return this.c_}return this.r_.has(t)?_(this.r_.get(t))[0].Dt():null}S(){this.$t().p_().p(this),this.__.Ao().p(this),this.c_.Ao().p(this),this.co.forEach((t=>{t.S&&t.S()})),this.a_.m()}m_(){return this.l_}b_(t){this.l_=t}$t(){return this.Hi}ji(){return this.h_}Vt(){return this.no}w_(t){this.h_=t,this.g_()}Bo(t){this.no=t,this.__.Bo(t),this.c_.Bo(t),this.co.forEach((e=>{if(this.ur(e)){const i=e.Dt();null!==i&&i.Bo(t)}})),this.g_()}Ra(){return this.co}ur(t){const e=t.Dt();return null===e||this.__!==e&&this.c_!==e}jo(t,e,i){const s=void 0!==i?i:this.x_().M_+1;this.S_(t,e,s)}$o(t){const e=this.co.indexOf(t);k(-1!==e,"removeDataSource: invalid data source"),this.co.splice(e,1);const i=C(t.Dt()).ka();if(this.r_.has(i)){const e=_(this.r_.get(i)),s=e.indexOf(t);-1!==s&&(e.splice(s,1),0===e.length&&this.r_.delete(i))}const s=t.Dt();s&&s.Ra().indexOf(t)>=0&&s.$o(t),null!==s&&(s.Ho(),this.k_(s)),this.do=null}dr(t){return t===this.__?"left":t===this.c_?"right":"overlay"}y_(){return this.__}C_(){return this.c_}T_(t,e){t.Yo(e)}P_(t,e){t.Xo(e),this.g_()}R_(t){t.Ko()}D_(t,e){t.Zo(e)}O_(t,e){t.Go(e),this.g_()}A_(t){t.Jo()}g_(){this.co.forEach((t=>{t.Rn()}))}dn(){let t=null;return this.Hi.W().rightPriceScale.visible&&0!==this.c_.Ra().length?t=this.c_:this.Hi.W().leftPriceScale.visible&&0!==this.__.Ra().length?t=this.__:0!==this.co.length&&(t=this.co[0].Dt()),null===t&&(t=this.c_),t}cr(){let t=null;return this.Hi.W().rightPriceScale.visible?t=this.c_:this.Hi.W().leftPriceScale.visible&&(t=this.__),t}k_(t){null!==t&&t.To()&&this.B_(t)}V_(t){const e=this.Ml.qs();t.yo({Nn:!0}),null!==e&&t.n_(e),this.g_()}I_(){this.B_(this.__),this.B_(this.c_)}z_(){this.k_(this.__),this.k_(this.c_),this.co.forEach((t=>{this.ur(t)&&this.k_(t.Dt())})),this.g_(),this.Hi.Wh()}Wo(){return null===this.do&&(this.do=vi(this.co)),this.do}L_(){return this.a_}E_(){return this.o_}B_(t){const e=t.i_();if(e&&e.length>0&&!this.Ml.Ei()){const e=this.Ml.qs();null!==e&&t.n_(e)}t.Rn()}x_(){const t=this.Wo();if(0===t.length)return{N_:0,M_:0};let e=0,i=0;for(let s=0;s<t.length;s++){const r=t[s].Xi();null!==r&&(r<e&&(e=r),r>i&&(i=r))}return{N_:e,M_:i}}S_(t,e,i){let s=this.v_(e);if(null===s&&(s=this.u_(e,this.Hi.W().overlayPriceScales)),this.co.push(t),!gt(e)){const i=this.r_.get(e)||[];i.push(t),this.r_.set(e,i)}s.jo(t),t.Zi(s),t.Ki(i),this.k_(s),this.do=null}d_(t,e,i){e.Sr!==i.Sr&&this.B_(t)}u_(t,e){const i=Object.assign({visible:!0,autoScale:!0},H(e)),s=new wi(t,i,this.Hi.W().layout,this.Hi.W().localization);return s.Bo(this.Vt()),s}}class _i{constructor(t,e,i=50){this.Ye=0,this.Xe=1,this.Ke=1,this.Ge=new Map,this.Ze=new Map,this.F_=t,this.W_=e,this.Je=i}j_(t){const e=t.time,i=this.W_.cacheKey(e),s=this.Ge.get(i);if(void 0!==s)return s.H_;if(this.Ye===this.Je){const t=this.Ze.get(this.Ke);this.Ze.delete(this.Ke),this.Ge.delete(_(t)),this.Ke++,this.Ye--}const r=this.F_(t);return this.Ge.set(i,{H_:r,nr:this.Xe}),this.Ze.set(this.Xe,i),this.Ye++,this.Xe++,r}}class Ci{constructor(t,e){k(t<=e,"right should be >= left"),this.U_=t,this.q_=e}Rs(){return this.U_}ui(){return this.q_}Y_(){return this.q_-this.U_+1}Yr(t){return this.U_<=t&&t<=this.q_}xh(t){return this.U_===t.Rs()&&this.q_===t.ui()}}function Ei(t,e){return null===t||null===e?t===e:t.xh(e)}class Pi{constructor(){this.X_=new Map,this.Ge=null,this.K_=!1}Z_(t){this.K_=t,this.Ge=null}G_(t,e){this.J_(e),this.Ge=null;for(let i=e;i<t.length;++i){const e=t[i];let s=this.X_.get(e.timeWeight);void 0===s&&(s=[],this.X_.set(e.timeWeight,s)),s.push({index:i,time:e.time,weight:e.timeWeight,originalTime:e.originalTime})}}Q_(t,e){const i=Math.ceil(e/t);return null!==this.Ge&&this.Ge.tu===i||(this.Ge={Na:this.iu(i),tu:i}),this.Ge.Na}J_(t){if(0===t)return void this.X_.clear();const e=[];this.X_.forEach(((i,s)=>{t<=i[0].index?e.push(s):i.splice(Vt(i,t,(e=>e.index<t)),1/0)}));for(const t of e)this.X_.delete(t)}iu(t){let e=[];for(const i of Array.from(this.X_.keys()).sort(((t,e)=>e-t))){if(!this.X_.get(i))continue;const s=e;e=[];const r=s.length;let n=0;const o=_(this.X_.get(i)),a=o.length;let h=1/0,l=-1/0;for(let i=0;i<a;i++){const a=o[i],c=a.index;for(;n<r;){const t=s[n],i=t.index;if(!(i<c)){h=i;break}n++,e.push(t),l=i,h=1/0}if(h-c>=t&&c-l>=t)e.push(a),l=c;else if(this.K_)return s}for(;n<r;n++)e.push(s[n])}return e}}class Ii{constructor(t){this.nu=t}su(){return null===this.nu?null:new Ci(Math.floor(this.nu.Rs()),Math.ceil(this.nu.ui()))}eu(){return this.nu}static ru(){return new Ii(null)}}function Ti(t,e){return t.weight>e.weight?t:e}class Ai{constructor(t,e,i,s){this.h_=0,this.hu=null,this.lu=[],this.po=null,this.vo=null,this.au=new Pi,this.ou=new Map,this._u=Ii.ru(),this.uu=!0,this.cu=new F,this.du=new F,this.fu=new F,this.vu=null,this.pu=null,this.mu=[],this._n=e,this.Mo=i,this.bu=e.rightOffset,this.wu=e.barSpacing,this.Hi=t,this.W_=s,this.gu(),this.au.Z_(e.uniformDistribution)}W(){return this._n}Mu(t){L(this.Mo,t),this.xu(),this.gu()}Fh(t,e){var i;L(this._n,t),this._n.fixLeftEdge&&this.Su(),this._n.fixRightEdge&&this.ku(),void 0!==t.barSpacing&&this.Hi.Kn(t.barSpacing),void 0!==t.rightOffset&&this.Hi.Zn(t.rightOffset),void 0!==t.minBarSpacing&&this.Hi.Kn(null!==(i=t.barSpacing)&&void 0!==i?i:this.wu),this.xu(),this.gu(),this.fu.m()}vn(t){var e,i;return null!==(i=null===(e=this.lu[t])||void 0===e?void 0:e.time)&&void 0!==i?i:null}$i(t){var e;return null!==(e=this.lu[t])&&void 0!==e?e:null}Ta(t,e){if(this.lu.length<1)return null;if(this.W_.key(t)>this.W_.key(this.lu[this.lu.length-1].time))return e?this.lu.length-1:null;const i=Vt(this.lu,this.W_.key(t),((t,e)=>this.W_.key(t.time)<e));return this.W_.key(t)<this.W_.key(this.lu[i].time)?e?i:null:i}Ei(){return 0===this.h_||0===this.lu.length||null===this.hu}Ca(){return this.lu.length>0}qs(){return this.yu(),this._u.su()}Cu(){return this.yu(),this._u.eu()}Tu(){const t=this.qs();if(null===t)return null;const e={from:t.Rs(),to:t.ui()};return this.Pu(e)}Pu(t){const e=Math.round(t.from),i=Math.round(t.to),s=C(this.Ru()),r=C(this.Du());return{from:C(this.$i(Math.max(s,e))),to:C(this.$i(Math.min(r,i)))}}Ou(t){return{from:C(this.Ta(t.from,!0)),to:C(this.Ta(t.to,!0))}}ji(){return this.h_}w_(t){if(!isFinite(t)||t<=0)return;if(this.h_===t)return;const e=this.Cu(),i=this.h_;if(this.h_=t,this.uu=!0,this._n.lockVisibleTimeRangeOnResize&&0!==i){const e=this.wu*t/i;this.wu=e}if(this._n.fixLeftEdge&&null!==e&&e.Rs()<=0){const e=i-t;this.bu-=Math.round(e/this.wu)+1,this.uu=!0}this.Au(),this.Bu()}It(t){if(this.Ei()||!O(t))return 0;const e=this.Vu()+this.bu-t;return this.h_-(e+.5)*this.wu-1}Zs(t,e){const i=this.Vu(),s=void 0===e?0:e.from,r=void 0===e?t.length:e.to;for(let e=s;e<r;e++){const s=t[e].ot,r=i+this.bu-s,n=this.h_-(r+.5)*this.wu-1;t[e].nt=n}}Iu(t){return Math.ceil(this.zu(t))}Zn(t){this.uu=!0,this.bu=t,this.Bu(),this.Hi.Lu(),this.Hi.Wh()}ee(){return this.wu}Kn(t){this.Eu(t),this.Bu(),this.Hi.Lu(),this.Hi.Wh()}Nu(){return this.bu}Na(){if(this.Ei())return null;if(null!==this.pu)return this.pu;const t=this.wu,e=5*(this.Hi.W().layout.fontSize+4)/8*(this._n.tickMarkMaxCharacterLength||8),i=Math.round(e/t),s=C(this.qs()),r=Math.max(s.Rs(),s.Rs()-i),n=Math.max(s.ui(),s.ui()-i),o=this.au.Q_(t,e),a=this.Ru()+i,h=this.Du()-i,l=this.Fu(),c=this._n.fixLeftEdge||l,u=this._n.fixRightEdge||l;let p=0;for(const t of o){if(!(r<=t.index&&t.index<=n))continue;let i;p<this.mu.length?(i=this.mu[p],i.coord=this.It(t.index),i.label=this.Wu(t),i.weight=t.weight):(i={needAlignCoordinate:!1,coord:this.It(t.index),label:this.Wu(t),weight:t.weight},this.mu.push(i)),this.wu>e/2&&!l?i.needAlignCoordinate=!1:i.needAlignCoordinate=c&&t.index<=a||u&&t.index>=h,p++}return this.mu.length=p,this.pu=this.mu,this.mu}ju(){this.uu=!0,this.Kn(this._n.barSpacing),this.Zn(this._n.rightOffset)}Hu(t){this.uu=!0,this.hu=t,this.Bu(),this.Su()}$u(t,e){const i=this.zu(t),s=this.ee(),r=s+e*(s/10);this.Kn(r),this._n.rightBarStaysOnScroll||this.Zn(this.Nu()+(i-this.zu(t)))}Yo(t){this.po&&this.Jo(),null===this.vo&&null===this.vu&&(this.Ei()||(this.vo=t,this.Uu()))}Xo(t){if(null===this.vu)return;const e=Tt(this.h_-t,0,this.h_),i=Tt(this.h_-C(this.vo),0,this.h_);0!==e&&0!==i&&this.Kn(this.vu.ee*e/i)}Ko(){null!==this.vo&&(this.vo=null,this.qu())}Zo(t){null===this.po&&null===this.vu&&(this.Ei()||(this.po=t,this.Uu()))}Go(t){if(null===this.po)return;const e=(this.po-t)/this.ee();this.bu=C(this.vu).Nu+e,this.uu=!0,this.Bu()}Jo(){null!==this.po&&(this.po=null,this.qu())}Yu(){this.Xu(this._n.rightOffset)}Xu(t,e=400){if(!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(e)||e<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const i=this.bu,s=performance.now();this.Hi.qn({Ku:t=>(t-s)/e>=1,Zu:r=>{const n=(r-s)/e;return n>=1?t:i+(t-i)*n}})}bt(t,e){this.uu=!0,this.lu=t,this.au.G_(t,e),this.Bu()}Gu(){return this.cu}Ju(){return this.du}Qu(){return this.fu}Vu(){return this.hu||0}tc(t){const e=t.Y_();this.Eu(this.h_/e),this.bu=t.ui()-this.Vu(),this.Bu(),this.uu=!0,this.Hi.Lu(),this.Hi.Wh()}ic(){const t=this.Ru(),e=this.Du();null!==t&&null!==e&&this.tc(new Ci(t,e+this._n.rightOffset))}nc(t){const e=new Ci(t.from,t.to);this.tc(e)}Ui(t){return void 0!==this.Mo.timeFormatter?this.Mo.timeFormatter(t.originalTime):this.W_.formatHorzItem(t.time)}Fu(){const{handleScroll:t,handleScale:e}=this.Hi.W();return!(t.horzTouchDrag||t.mouseWheel||t.pressedMouseMove||t.vertTouchDrag||e.axisDoubleClickReset.time||e.axisPressedMouseMove.time||e.mouseWheel||e.pinch)}Ru(){return 0===this.lu.length?null:0}Du(){return 0===this.lu.length?null:this.lu.length-1}sc(t){return(this.h_-1-t)/this.wu}zu(t){const e=this.sc(t),i=this.Vu()+this.bu-e;return Math.round(1e6*i)/1e6}Eu(t){const e=this.wu;this.wu=t,this.Au(),e!==this.wu&&(this.uu=!0,this.ec())}yu(){if(!this.uu)return;if(this.uu=!1,this.Ei())return void this.rc(Ii.ru());const t=this.Vu(),e=this.h_/this.wu,i=this.bu+t,s=new Ci(i-e+1,i);this.rc(new Ii(s))}Au(){const t=this.hc();if(this.wu<t&&(this.wu=t,this.uu=!0),0!==this.h_){const t=.5*this.h_;this.wu>t&&(this.wu=t,this.uu=!0)}}hc(){return this._n.fixLeftEdge&&this._n.fixRightEdge&&0!==this.lu.length?this.h_/this.lu.length:this._n.minBarSpacing}Bu(){const t=this.lc();this.bu>t&&(this.bu=t,this.uu=!0);const e=this.ac();null!==e&&this.bu<e&&(this.bu=e,this.uu=!0)}ac(){const t=this.Ru(),e=this.hu;return null===t||null===e?null:t-e-1+(this._n.fixLeftEdge?this.h_/this.wu:Math.min(2,this.lu.length))}lc(){return this._n.fixRightEdge?0:this.h_/this.wu-Math.min(2,this.lu.length)}Uu(){this.vu={ee:this.ee(),Nu:this.Nu()}}qu(){this.vu=null}Wu(t){let e=this.ou.get(t.weight);return void 0===e&&(e=new _i((t=>this.oc(t)),this.W_),this.ou.set(t.weight,e)),e.j_(t)}oc(t){return this.W_.formatTickmark(t,this.Mo)}rc(t){const e=this._u;this._u=t,Ei(e.su(),this._u.su())||this.cu.m(),Ei(e.eu(),this._u.eu())||this.du.m(),this.ec()}ec(){this.pu=null}xu(){this.ec(),this.ou.clear()}gu(){this.W_.updateFormatter(this.Mo)}Su(){if(!this._n.fixLeftEdge)return;const t=this.Ru();if(null===t)return;const e=this.qs();if(null===e)return;const i=e.Rs()-t;if(i<0){const t=this.bu-i-1;this.Zn(t)}this.Au()}ku(){this.Bu(),this.Au()}}class Mi{K(t,e,i){t.useMediaCoordinateSpace((t=>this.Z(t,e,i)))}pl(t,e,i){t.useMediaCoordinateSpace((t=>this._c(t,e,i)))}_c(t,e,i){}}class Ri extends Mi{constructor(t){super(),this.uc=new Map,this.zt=t}Z(t){}_c(t){if(!this.zt.yt)return;const{context:e,mediaSize:i}=t;let s=0;for(const t of this.zt.cc){if(0===t.Zt.length)continue;e.font=t.R;const r=this.dc(e,t.Zt);r>i.width?t.$u=i.width/r:t.$u=1,s+=t.fc*t.$u}let r=0;switch(this.zt.vc){case"top":r=0;break;case"center":r=Math.max((i.height-s)/2,0);break;case"bottom":r=Math.max(i.height-s,0)}e.fillStyle=this.zt.O;for(const t of this.zt.cc){e.save();let s=0;switch(this.zt.mc){case"left":e.textAlign="left",s=t.fc/2;break;case"center":e.textAlign="center",s=i.width/2;break;case"right":e.textAlign="right",s=i.width-1-t.fc/2}e.translate(s,r),e.textBaseline="top",e.font=t.R,e.scale(t.$u,t.$u),e.fillText(t.Zt,0,t.bc),e.restore(),r+=t.fc*t.$u}}dc(t,e){const i=this.wc(t.font);let s=i.get(e);return void 0===s&&(s=t.measureText(e).width,i.set(e,s)),s}wc(t){let e=this.uc.get(t);return void 0===e&&(e=new Map,this.uc.set(t,e)),e}}class Bi{constructor(t){this.ft=!0,this.Ft={yt:!1,O:"",cc:[],vc:"center",mc:"center"},this.Wt=new Ri(this.Ft),this.jt=t}bt(){this.ft=!0}gt(){return this.ft&&(this.Mt(),this.ft=!1),this.Wt}Mt(){const t=this.jt.W(),e=this.Ft;e.yt=t.visible,e.yt&&(e.O=t.color,e.mc=t.horzAlign,e.vc=t.vertAlign,e.cc=[{Zt:t.text,R:q(t.fontSize,t.fontFamily,t.fontStyle),fc:1.2*t.fontSize,bc:0,$u:0}])}}class zi extends dt{constructor(t,e){super(),this._n=e,this.mn=new Bi(this)}Tn(){return[]}Cn(){return[this.mn]}W(){return this._n}Rn(){this.mn.bt()}}var Di,Fi,Li,Vi,Oi;!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(Di||(Di={}));class Ni{constructor(t,e,i){this.gc=[],this.Mc=[],this.h_=0,this.xc=null,this.Sc=new F,this.kc=new F,this.yc=null,this.Cc=t,this._n=e,this.W_=i,this.Tc=new U(this),this.Ml=new Ai(this,e.timeScale,this._n.localization,i),this.vt=new mt(this,e.crosshair),this.Pc=new ii(e.crosshair),this.Rc=new zi(this,e.watermark),this.Dc(),this.gc[0].b_(2e3),this.Oc=this.Ac(0),this.Bc=this.Ac(1)}ql(){this.Vc(yt.ns())}Wh(){this.Vc(yt.ts())}ra(){this.Vc(new yt(1))}Yl(t){const e=this.Ic(t);this.Vc(e)}zc(){return this.xc}Lc(t){const e=this.xc;this.xc=t,null!==e&&this.Yl(e.Ec),null!==t&&this.Yl(t.Ec)}W(){return this._n}Fh(t){L(this._n,t),this.gc.forEach((e=>e.f_(t))),void 0!==t.timeScale&&this.Ml.Fh(t.timeScale),void 0!==t.localization&&this.Ml.Mu(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.Sc.m(),this.Oc=this.Ac(0),this.Bc=this.Ac(1),this.ql()}Nc(t,e){if("left"===t)return void this.Fh({leftPriceScale:e});if("right"===t)return void this.Fh({rightPriceScale:e});const i=this.Fc(t);null!==i&&(i.Dt.Fh(e),this.Sc.m())}Fc(t){for(const e of this.gc){const i=e.v_(t);if(null!==i)return{Ht:e,Dt:i}}return null}St(){return this.Ml}Wc(){return this.gc}jc(){return this.Rc}Hc(){return this.vt}$c(){return this.kc}Uc(t,e){t.Bo(e),this.Lu()}w_(t){this.h_=t,this.Ml.w_(this.h_),this.gc.forEach((e=>e.w_(t))),this.Lu()}Dc(t){const e=new ki(this.Ml,this);void 0!==t?this.gc.splice(t,0,e):this.gc.push(e);const i=void 0===t?this.gc.length-1:t,s=yt.ns();return s.Ln(i,{En:0,Nn:!0}),this.Vc(s),e}T_(t,e,i){t.T_(e,i)}P_(t,e,i){t.P_(e,i),this.Xl(),this.Vc(this.qc(t,2))}R_(t,e){t.R_(e),this.Vc(this.qc(t,2))}D_(t,e,i){e.To()||t.D_(e,i)}O_(t,e,i){e.To()||(t.O_(e,i),this.Xl(),this.Vc(this.qc(t,2)))}A_(t,e){e.To()||(t.A_(e),this.Vc(this.qc(t,2)))}V_(t,e){t.V_(e),this.Vc(this.qc(t,2))}Yc(t){this.Ml.Yo(t)}Xc(t,e){const i=this.St();if(i.Ei()||0===e)return;const s=i.ji();t=Math.max(1,Math.min(t,s)),i.$u(t,e),this.Lu()}Kc(t){this.Zc(0),this.Gc(t),this.Jc()}Qc(t){this.Ml.Xo(t),this.Lu()}td(){this.Ml.Ko(),this.Wh()}Zc(t){this.Ml.Zo(t)}Gc(t){this.Ml.Go(t),this.Lu()}Jc(){this.Ml.Jo(),this.Wh()}wt(){return this.Mc}nd(t,e,i,s,r){this.vt.bn(t,e);let n=NaN,o=this.Ml.Iu(t);const a=this.Ml.qs();null!==a&&(o=Math.min(Math.max(a.Rs(),o),a.ui()));const h=s.dn(),l=h.Ct();null!==l&&(n=h.fn(e,l)),n=this.Pc.Pa(n,o,s),this.vt.xn(o,n,s),this.ra(),r||this.kc.m(this.vt.xt(),{x:t,y:e},i)}sd(t,e,i){const s=i.dn(),r=s.Ct(),n=s.Rt(t,C(r)),o=this.Ml.Ta(e,!0),a=this.Ml.It(C(o));this.nd(a,n,null,i,!0)}ed(t){this.Hc().kn(),this.ra(),t||this.kc.m(null,null,null)}Xl(){const t=this.vt.Ht();if(null!==t){const e=this.vt.gn(),i=this.vt.Mn();this.nd(e,i,null,t)}this.vt.Rn()}rd(t,e,i){const s=this.Ml.vn(0);void 0!==e&&void 0!==i&&this.Ml.bt(e,i);const r=this.Ml.vn(0),n=this.Ml.Vu(),o=this.Ml.qs();if(null!==o&&null!==s&&null!==r){const e=o.Yr(n),a=this.W_.key(s)>this.W_.key(r),h=null!==t&&t>n&&!a,l=this.Ml.W().allowShiftVisibleRangeOnWhitespaceReplacement,c=e&&(!(void 0===i)||l)&&this.Ml.W().shiftVisibleRangeOnNewBar;if(h&&!c){const e=t-n;this.Ml.Zn(this.Ml.Nu()-e)}}this.Ml.Hu(t)}Gl(t){null!==t&&t.z_()}_r(t){const e=this.gc.find((e=>e.Wo().includes(t)));return void 0===e?null:e}Lu(){this.Rc.Rn(),this.gc.forEach((t=>t.z_())),this.Xl()}S(){this.gc.forEach((t=>t.S())),this.gc.length=0,this._n.localization.priceFormatter=void 0,this._n.localization.percentageFormatter=void 0,this._n.localization.timeFormatter=void 0}hd(){return this.Tc}vr(){return this.Tc.W()}p_(){return this.Sc}ld(t,e,i){const s=this.gc[0],r=this.ad(e,t,s,i);return this.Mc.push(r),1===this.Mc.length?this.ql():this.Wh(),r}od(t){const e=this._r(t),i=this.Mc.indexOf(t);k(-1!==i,"Series not found"),this.Mc.splice(i,1),C(e).$o(t),t.S&&t.S()}Ul(t,e){const i=C(this._r(t));i.$o(t);const s=this.Fc(e);if(null===s){const s=t.Xi();i.jo(t,e,s)}else{const r=s.Ht===i?t.Xi():void 0;s.Ht.jo(t,e,r)}}ic(){const t=yt.ts();t.jn(),this.Vc(t)}_d(t){const e=yt.ts();e.Un(t),this.Vc(e)}Xn(){const t=yt.ts();t.Xn(),this.Vc(t)}Kn(t){const e=yt.ts();e.Kn(t),this.Vc(e)}Zn(t){const e=yt.ts();e.Zn(t),this.Vc(e)}qn(t){const e=yt.ts();e.qn(t),this.Vc(e)}Hn(){const t=yt.ts();t.Hn(),this.Vc(t)}ud(){return this._n.rightPriceScale.visible?"right":"left"}dd(){return this.Bc}q(){return this.Oc}Bt(t){const e=this.Bc,i=this.Oc;if(e===i)return e;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.yc||this.yc.ys!==i||this.yc.Cs!==e)this.yc={ys:i,Cs:e,fd:new Map};else{const e=this.yc.fd.get(t);if(void 0!==e)return e}const s=function(t,e,i){const[s,r,n,o]=z(t),[a,h,l,c]=z(e),u=[I(s+i*(a-s)),I(r+i*(h-r)),I(n+i*(l-n)),T(o+i*(c-o))];return`rgba(${u[0]}, ${u[1]}, ${u[2]}, ${u[3]})`}(i,e,t/100);return this.yc.fd.set(t,s),s}qc(t,e){const i=new yt(e);if(null!==t){const s=this.gc.indexOf(t);i.Ln(s,{En:e})}return i}Ic(t,e){return void 0===e&&(e=2),this.qc(this._r(t),e)}Vc(t){this.Cc&&this.Cc(t),this.gc.forEach((t=>t.E_().jh().bt()))}ad(t,e,i,s){const r=new ei(this,t,e,i,s),n=void 0!==t.priceScaleId?t.priceScaleId:this.ud();return i.jo(r,n),gt(n)||r.Fh(t),r}Ac(t){const e=this._n.layout;return"gradient"===e.background.type?0===t?e.background.topColor:e.background.bottomColor:e.background.color}}function Wi(t){return!V(t)&&!N(t)}function Hi(t){return V(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(Fi||(Fi={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(Li||(Li={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Vi||(Vi={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(Oi||(Oi={}));const Gi=t=>t.getUTCFullYear();class ji{constructor(t="yyyy-MM-dd",e="default"){this.vd=t,this.pd=e}j_(t){return function(t,e,i){return e.replace(/yyyy/g,(t=>vt(Gi(t),4))(t)).replace(/yy/g,(t=>vt(Gi(t)%100,2))(t)).replace(/MMMM/g,((t,e)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"long"}))(t,i)).replace(/MMM/g,((t,e)=>new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(e,{month:"short"}))(t,i)).replace(/MM/g,(t=>vt((t=>t.getUTCMonth()+1)(t),2))(t)).replace(/dd/g,(t=>vt((t=>t.getUTCDate())(t),2))(t))}(t,this.vd,this.pd)}}class $i{constructor(t){this.md=t||"%h:%m:%s"}j_(t){return this.md.replace("%h",vt(t.getUTCHours(),2)).replace("%m",vt(t.getUTCMinutes(),2)).replace("%s",vt(t.getUTCSeconds(),2))}}const qi={bd:"yyyy-MM-dd",wd:"%h:%m:%s",gd:" ",Md:"default"};class Ui{constructor(t={}){const e=Object.assign(Object.assign({},qi),t);this.xd=new ji(e.bd,e.Md),this.Sd=new $i(e.wd),this.kd=e.gd}j_(t){return`${this.xd.j_(t)}${this.kd}${this.Sd.j_(t)}`}}function Ki(t){return 60*t*60*1e3}function Zi(t){return 60*t*1e3}const Yi=[{yd:1e3,Cd:10},{yd:Zi(1),Cd:20},{yd:Zi(5),Cd:21},{yd:Zi(30),Cd:22},{yd:Ki(1),Cd:30},{yd:Ki(3),Cd:31},{yd:Ki(6),Cd:32},{yd:Ki(12),Cd:33}];function Ji(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let i=Yi.length-1;i>=0;--i)if(Math.floor(e.getTime()/Yi[i].yd)!==Math.floor(t.getTime()/Yi[i].yd))return Yi[i].Cd;return 0}function Xi(t){let e=t;if(N(t)&&(e=ts(t)),!Wi(e))throw new Error("time must be of type BusinessDay");const i=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{Td:Math.round(i.getTime()/1e3),Pd:e}}function Qi(t){if(!Hi(t))throw new Error("time must be of type isUTCTimestamp");return{Td:t}}function ts(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function es(t){N(t.time)&&(t.time=ts(t.time))}class is{options(){return this._n}setOptions(t){this._n=t,this.updateFormatter(t.localization)}preprocessData(t){Array.isArray(t)?function(t){t.forEach(es)}(t):es(t)}createConverterToInternalObj(t){return C(function(t){return 0===t.length?null:Wi(t[0].time)||N(t[0].time)?Xi:Qi}(t))}key(t){return"object"==typeof t&&"Td"in t?t.Td:this.key(this.convertHorzItemToInternal(t))}cacheKey(t){const e=t;return void 0===e.Pd?new Date(1e3*e.Td).getTime():new Date(Date.UTC(e.Pd.year,e.Pd.month-1,e.Pd.day)).getTime()}convertHorzItemToInternal(t){return Hi(e=t)?Qi(e):Wi(e)?Xi(e):Xi(ts(e));var e}updateFormatter(t){if(!this._n)return;const e=t.dateFormat;this._n.timeScale.timeVisible?this.Rd=new Ui({bd:e,wd:this._n.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",gd:"   ",Md:t.locale}):this.Rd=new ji(e,t.locale)}formatHorzItem(t){const e=t;return this.Rd.j_(new Date(1e3*e.Td))}formatTickmark(t,e){const i=function(t,e,i){switch(t){case 0:case 10:return e?i?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return e?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(t.weight,this._n.timeScale.timeVisible,this._n.timeScale.secondsVisible),s=this._n.timeScale;if(void 0!==s.tickMarkFormatter){const r=s.tickMarkFormatter(t.originalTime,i,e.locale);if(null!==r)return r}return function(t,e,i){const s={};switch(e){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}const r=void 0===t.Pd?new Date(1e3*t.Td):new Date(Date.UTC(t.Pd.year,t.Pd.month-1,t.Pd.day));return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()).toLocaleString(i,s)}(t.time,i,e.locale)}maxTickMarkWeight(t){let e=t.reduce(Ti,t[0]).weight;return e>30&&e<50&&(e=30),e}fillWeightsForPoints(t,e){!function(t,e=0){if(0===t.length)return;let i=0===e?null:t[e-1].time.Td,s=null!==i?new Date(1e3*i):null,r=0;for(let n=e;n<t.length;++n){const e=t[n],o=new Date(1e3*e.time.Td);null!==s&&(e.timeWeight=Ji(o,s)),r+=e.time.Td-(i||e.time.Td),i=e.time.Td,s=o}if(0===e&&t.length>1){const e=Math.ceil(r/(t.length-1)),i=new Date(1e3*(t[0].time.Td-e));t[0].timeWeight=Ji(new Date(1e3*t[0].time.Td),i)}}(t,e)}static Dd(t){return L({localization:{dateFormat:"dd MMM 'yy"}},null!=t?t:{})}}const ss="undefined"!=typeof window;function rs(){return!!ss&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function ns(){return!!ss&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function os(t){return t+t%2}function as(t,e){return t.Od-e.Od}function hs(t,e,i){const s=(t.Od-e.Od)/(t.ot-e.ot);return Math.sign(s)*Math.min(Math.abs(s),i)}class ls{constructor(t,e,i,s){this.Ad=null,this.Bd=null,this.Vd=null,this.Id=null,this.zd=null,this.Ld=0,this.Ed=0,this.Nd=t,this.Fd=e,this.Wd=i,this.ss=s}jd(t,e){if(null!==this.Ad){if(this.Ad.ot===e)return void(this.Ad.Od=t);if(Math.abs(this.Ad.Od-t)<this.ss)return}this.Id=this.Vd,this.Vd=this.Bd,this.Bd=this.Ad,this.Ad={ot:e,Od:t}}Pr(t,e){if(null===this.Ad||null===this.Bd)return;if(e-this.Ad.ot>50)return;let i=0;const s=hs(this.Ad,this.Bd,this.Fd),r=as(this.Ad,this.Bd),n=[s],o=[r];if(i+=r,null!==this.Vd){const t=hs(this.Bd,this.Vd,this.Fd);if(Math.sign(t)===Math.sign(s)){const e=as(this.Bd,this.Vd);if(n.push(t),o.push(e),i+=e,null!==this.Id){const t=hs(this.Vd,this.Id,this.Fd);if(Math.sign(t)===Math.sign(s)){const e=as(this.Vd,this.Id);n.push(t),o.push(e),i+=e}}}}let a=0;for(let t=0;t<n.length;++t)a+=o[t]/i*n[t];Math.abs(a)<this.Nd||(this.zd={Od:t,ot:e},this.Ed=a,this.Ld=function(t,e){const i=Math.log(e);return Math.log(1*i/-t)/i}(Math.abs(a),this.Wd))}Zu(t){const e=C(this.zd),i=t-e.ot;return e.Od+this.Ed*(Math.pow(this.Wd,i)-1)/Math.log(this.Wd)}Ku(t){return null===this.zd||this.Hd(t)===this.Ld}Hd(t){const e=t-C(this.zd).ot;return Math.min(e,this.Ld)}}function cs(t,e){const i=C(t.ownerDocument).createElement("canvas");t.appendChild(i);const s=function(t,e){if("device-pixel-content-box"===e.type)return new o(t,e.transform,e.options);throw new Error("Unsupported binding target")}(i,{type:"device-pixel-content-box",options:{allowResizeObserver:!1},transform:(t,e)=>({width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)})});return s.resizeCanvasElement(e),s}function us(t){var e;t.width=1,t.height=1,null===(e=t.getContext("2d"))||void 0===e||e.clearRect(0,0,1,1)}function ps(t,e,i,s){t.pl&&t.pl(e,i,s)}function ds(t,e,i,s){t.K(e,i,s)}function fs(t,e,i,s){const r=t(i,s);for(const t of r){const i=t.gt();null!==i&&e(i)}}class ms{constructor(t,e,i){this.$d=0,this.Ud=null,this.qd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Yd=0,this.Xd=null,this.Kd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY},this.Zd=null,this.Gd=!1,this.Jd=null,this.Qd=null,this.tf=!1,this.if=!1,this.nf=!1,this.sf=null,this.ef=null,this.rf=null,this.hf=null,this.lf=null,this.af=null,this._f=null,this.uf=0,this.cf=!1,this.df=!1,this.ff=!1,this.vf=0,this.pf=null,this.mf=!ns(),this.bf=t=>{this.wf(t)},this.gf=t=>{if(this.Mf(t)){const e=this.xf(t);if(++this.Yd,this.Xd&&this.Yd>1){const{Sf:i}=this.kf(vs(t),this.Kd);i<30&&!this.nf&&this.yf(e,this.Tf.Cf),this.Pf()}}else{const e=this.xf(t);if(++this.$d,this.Ud&&this.$d>1){const{Sf:i}=this.kf(vs(t),this.qd);i<5&&!this.if&&this.Rf(e,this.Tf.Df),this.Of()}}},this.Af=t,this.Tf=e,this._n=i,this.Bf()}S(){null!==this.sf&&(this.sf(),this.sf=null),null!==this.ef&&(this.ef(),this.ef=null),null!==this.hf&&(this.hf(),this.hf=null),null!==this.lf&&(this.lf(),this.lf=null),null!==this.af&&(this.af(),this.af=null),null!==this.rf&&(this.rf(),this.rf=null),this.Vf(),this.Of()}If(t){this.hf&&this.hf();const e=this.zf.bind(this);if(this.hf=()=>{this.Af.removeEventListener("mousemove",e)},this.Af.addEventListener("mousemove",e),this.Mf(t))return;const i=this.xf(t);this.Rf(i,this.Tf.Lf),this.mf=!0}Of(){null!==this.Ud&&clearTimeout(this.Ud),this.$d=0,this.Ud=null,this.qd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}Pf(){null!==this.Xd&&clearTimeout(this.Xd),this.Yd=0,this.Xd=null,this.Kd={nt:Number.NEGATIVE_INFINITY,st:Number.POSITIVE_INFINITY}}zf(t){if(this.ff||null!==this.Qd)return;if(this.Mf(t))return;const e=this.xf(t);this.Rf(e,this.Tf.Ef),this.mf=!0}Nf(t){const e=Ss(t.changedTouches,C(this.pf));if(null===e)return;if(this.vf=bs(t),null!==this._f)return;if(this.df)return;this.cf=!0;const i=this.kf(vs(e),C(this.Qd)),{Ff:s,Wf:r,Sf:n}=i;if(this.tf||!(n<5)){if(!this.tf){const t=.5*s,e=r>=t&&!this._n.jf(),i=t>r&&!this._n.Hf();e||i||(this.df=!0),this.tf=!0,this.nf=!0,this.Vf(),this.Pf()}if(!this.df){const i=this.xf(t,e);this.yf(i,this.Tf.$f),ys(t)}}}Uf(t){if(0!==t.button)return;const e=this.kf(vs(t),C(this.Jd)),{Sf:i}=e;if(i>=5&&(this.if=!0,this.Of()),this.if){const e=this.xf(t);this.Rf(e,this.Tf.qf)}}kf(t,e){const i=Math.abs(e.nt-t.nt),s=Math.abs(e.st-t.st);return{Ff:i,Wf:s,Sf:i+s}}Yf(t){let e=Ss(t.changedTouches,C(this.pf));if(null===e&&0===t.touches.length&&(e=t.changedTouches[0]),null===e)return;this.pf=null,this.vf=bs(t),this.Vf(),this.Qd=null,this.af&&(this.af(),this.af=null);const i=this.xf(t,e);if(this.yf(i,this.Tf.Xf),++this.Yd,this.Xd&&this.Yd>1){const{Sf:t}=this.kf(vs(e),this.Kd);t<30&&!this.nf&&this.yf(i,this.Tf.Cf),this.Pf()}else this.nf||(this.yf(i,this.Tf.Kf),this.Tf.Kf&&ys(t));0===this.Yd&&ys(t),0===t.touches.length&&this.Gd&&(this.Gd=!1,ys(t))}wf(t){if(0!==t.button)return;const e=this.xf(t);if(this.Jd=null,this.ff=!1,this.lf&&(this.lf(),this.lf=null),rs()&&this.Af.ownerDocument.documentElement.removeEventListener("mouseleave",this.bf),!this.Mf(t))if(this.Rf(e,this.Tf.Zf),++this.$d,this.Ud&&this.$d>1){const{Sf:i}=this.kf(vs(t),this.qd);i<5&&!this.if&&this.Rf(e,this.Tf.Df),this.Of()}else this.if||this.Rf(e,this.Tf.Gf)}Vf(){null!==this.Zd&&(clearTimeout(this.Zd),this.Zd=null)}Jf(t){if(null!==this.pf)return;const e=t.changedTouches[0];this.pf=e.identifier,this.vf=bs(t);const i=this.Af.ownerDocument.documentElement;this.nf=!1,this.tf=!1,this.df=!1,this.Qd=vs(e),this.af&&(this.af(),this.af=null);{const e=this.Nf.bind(this),s=this.Yf.bind(this);this.af=()=>{i.removeEventListener("touchmove",e),i.removeEventListener("touchend",s)},i.addEventListener("touchmove",e,{passive:!1}),i.addEventListener("touchend",s,{passive:!1}),this.Vf(),this.Zd=setTimeout(this.Qf.bind(this,t),240)}const s=this.xf(t,e);this.yf(s,this.Tf.tv),this.Xd||(this.Yd=0,this.Xd=setTimeout(this.Pf.bind(this),500),this.Kd=vs(e))}iv(t){if(0!==t.button)return;const e=this.Af.ownerDocument.documentElement;rs()&&e.addEventListener("mouseleave",this.bf),this.if=!1,this.Jd=vs(t),this.lf&&(this.lf(),this.lf=null);{const t=this.Uf.bind(this),i=this.wf.bind(this);this.lf=()=>{e.removeEventListener("mousemove",t),e.removeEventListener("mouseup",i)},e.addEventListener("mousemove",t),e.addEventListener("mouseup",i)}if(this.ff=!0,this.Mf(t))return;const i=this.xf(t);this.Rf(i,this.Tf.nv),this.Ud||(this.$d=0,this.Ud=setTimeout(this.Of.bind(this),500),this.qd=vs(t))}Bf(){this.Af.addEventListener("mouseenter",this.If.bind(this)),this.Af.addEventListener("touchcancel",this.Vf.bind(this));{const t=this.Af.ownerDocument,e=t=>{this.Tf.sv&&(t.composed&&this.Af.contains(t.composedPath()[0])||t.target&&this.Af.contains(t.target)||this.Tf.sv())};this.ef=()=>{t.removeEventListener("touchstart",e)},this.sf=()=>{t.removeEventListener("mousedown",e)},t.addEventListener("mousedown",e),t.addEventListener("touchstart",e,{passive:!0})}ns()&&(this.rf=()=>{this.Af.removeEventListener("dblclick",this.gf)},this.Af.addEventListener("dblclick",this.gf)),this.Af.addEventListener("mouseleave",this.ev.bind(this)),this.Af.addEventListener("touchstart",this.Jf.bind(this),{passive:!0}),function(t){ss&&void 0!==window.chrome&&t.addEventListener("mousedown",(t=>{if(1===t.button)return t.preventDefault(),!1}))}(this.Af),this.Af.addEventListener("mousedown",this.iv.bind(this)),this.rv(),this.Af.addEventListener("touchmove",(()=>{}),{passive:!1})}rv(){void 0===this.Tf.hv&&void 0===this.Tf.lv&&void 0===this.Tf.av||(this.Af.addEventListener("touchstart",(t=>this.ov(t.touches)),{passive:!0}),this.Af.addEventListener("touchmove",(t=>{if(2===t.touches.length&&null!==this._f&&void 0!==this.Tf.lv){const e=gs(t.touches[0],t.touches[1])/this.uf;this.Tf.lv(this._f,e),ys(t)}}),{passive:!1}),this.Af.addEventListener("touchend",(t=>{this.ov(t.touches)})))}ov(t){1===t.length&&(this.cf=!1),2!==t.length||this.cf||this.Gd?this._v():this.uv(t)}uv(t){const e=this.Af.getBoundingClientRect()||{left:0,top:0};this._f={nt:(t[0].clientX-e.left+(t[1].clientX-e.left))/2,st:(t[0].clientY-e.top+(t[1].clientY-e.top))/2},this.uf=gs(t[0],t[1]),void 0!==this.Tf.hv&&this.Tf.hv(),this.Vf()}_v(){null!==this._f&&(this._f=null,void 0!==this.Tf.av&&this.Tf.av())}ev(t){if(this.hf&&this.hf(),this.Mf(t))return;if(!this.mf)return;const e=this.xf(t);this.Rf(e,this.Tf.cv),this.mf=!ns()}Qf(t){const e=Ss(t.touches,C(this.pf));if(null===e)return;const i=this.xf(t,e);this.yf(i,this.Tf.dv),this.nf=!0,this.Gd=!0}Mf(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:bs(t)<this.vf+500}yf(t,e){e&&e.call(this.Tf,t)}Rf(t,e){e&&e.call(this.Tf,t)}xf(t,e){const i=e||t,s=this.Af.getBoundingClientRect()||{left:0,top:0};return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,localX:i.clientX-s.left,localY:i.clientY-s.top,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,fv:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,vv:t.type,pv:i.target,mv:t.view,bv:()=>{"touchstart"!==t.type&&ys(t)}}}}function gs(t,e){const i=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(i*i+s*s)}function ys(t){t.cancelable&&t.preventDefault()}function vs(t){return{nt:t.pageX,st:t.pageY}}function bs(t){return t.timeStamp||performance.now()}function Ss(t,e){for(let i=0;i<t.length;++i)if(t[i].identifier===e)return t[i];return null}function xs(t){return{Ec:t.Ec,wv:{mr:t.gv.externalId},Mv:t.gv.cursorStyle}}function ws(t,e,i){for(const s of t){const t=s.gt();if(null!==t&&t.pr){const r=t.pr(e,i);if(null!==r)return{mv:s,wv:r}}}return null}function ks(t,e){return i=>{var s,r,n,o;return(null!==(r=null===(s=i.Dt())||void 0===s?void 0:s.ka())&&void 0!==r?r:"")!==e?[]:null!==(o=null===(n=i.oa)||void 0===n?void 0:n.call(i,t))&&void 0!==o?o:[]}}class _s{constructor(t,e,i,r){this.zi=null,this.xv=null,this.Sv=!1,this.kv=new ae(200),this.Zr=null,this.yv=0,this.Cv=!1,this.Tv=()=>{this.Cv||this.Qi.Pv().$t().Wh()},this.Rv=()=>{this.Cv||this.Qi.Pv().$t().Wh()},this.Qi=t,this._n=e,this.wo=e.layout,this.Tc=i,this.Dv="left"===r,this.Ov=ks("normal",r),this.Av=ks("top",r),this.Bv=ks("bottom",r),this.Vv=document.createElement("div"),this.Vv.style.height="100%",this.Vv.style.overflow="hidden",this.Vv.style.width="25px",this.Vv.style.left="0",this.Vv.style.position="relative",this.Iv=cs(this.Vv,s({width:16,height:16})),this.Iv.subscribeSuggestedBitmapSizeChanged(this.Tv);const n=this.Iv.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.zv=cs(this.Vv,s({width:16,height:16})),this.zv.subscribeSuggestedBitmapSizeChanged(this.Rv);const o=this.zv.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const a={nv:this.Lv.bind(this),tv:this.Lv.bind(this),qf:this.Ev.bind(this),$f:this.Ev.bind(this),sv:this.Nv.bind(this),Zf:this.Fv.bind(this),Xf:this.Fv.bind(this),Df:this.Wv.bind(this),Cf:this.Wv.bind(this),Lf:this.jv.bind(this),cv:this.Hv.bind(this)};this.$v=new ms(this.zv.canvasElement,a,{jf:()=>!this._n.handleScroll.vertTouchDrag,Hf:()=>!0})}S(){this.$v.S(),this.zv.unsubscribeSuggestedBitmapSizeChanged(this.Rv),us(this.zv.canvasElement),this.zv.dispose(),this.Iv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),us(this.Iv.canvasElement),this.Iv.dispose(),null!==this.zi&&this.zi.qo().p(this),this.zi=null}Uv(){return this.Vv}P(){return this.wo.fontSize}qv(){const t=this.Tc.W();return this.Zr!==t.R&&(this.kv.Qe(),this.Zr=t.R),t}Yv(){if(null===this.zi)return 0;let t=0;const e=this.qv(),i=C(this.Iv.canvasElement.getContext("2d"));i.save();const s=this.zi.Na();i.font=this.Xv(),s.length>0&&(t=Math.max(this.kv.Mi(i,s[0].Ja),this.kv.Mi(i,s[s.length-1].Ja)));const r=this.Kv();for(let e=r.length;e--;){const s=this.kv.Mi(i,r[e].Zt());s>t&&(t=s)}const n=this.zi.Ct();if(null!==n&&null!==this.xv){const e=this.zi.fn(1,n),s=this.zi.fn(this.xv.height-2,n);t=Math.max(t,this.kv.Mi(i,this.zi.Ni(Math.floor(Math.min(e,s))+.11111111111111,n)),this.kv.Mi(i,this.zi.Ni(Math.ceil(Math.max(e,s))-.11111111111111,n)))}i.restore();const o=t||34;return os(Math.ceil(e.C+e.T+e.V+e.I+5+o))}Zv(t){null!==this.xv&&r(this.xv,t)||(this.xv=t,this.Cv=!0,this.Iv.resizeCanvasElement(t),this.zv.resizeCanvasElement(t),this.Cv=!1,this.Vv.style.width=`${t.width}px`,this.Vv.style.height=`${t.height}px`)}Gv(){return C(this.xv).width}Zi(t){this.zi!==t&&(null!==this.zi&&this.zi.qo().p(this),this.zi=t,t.qo().l(this._o.bind(this),this))}Dt(){return this.zi}Qe(){const t=this.Qi.Jv();this.Qi.Pv().$t().V_(t,C(this.Dt()))}Qv(t){if(null===this.xv)return;if(1!==t){this.tp(),this.Iv.applySuggestedBitmapSize();const t=l(this.Iv);null!==t&&(t.useBitmapCoordinateSpace((t=>{this.ip(t),this.Ae(t)})),this.Qi.np(t,this.Bv),this.sp(t),this.Qi.np(t,this.Ov),this.ep(t))}this.zv.applySuggestedBitmapSize();const e=l(this.zv);null!==e&&(e.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.rp(e),this.Qi.np(e,this.Av))}hp(){return this.Iv.bitmapSize}lp(t,e,i){const s=this.hp();s.width>0&&s.height>0&&t.drawImage(this.Iv.canvasElement,e,i)}bt(){var t;null===(t=this.zi)||void 0===t||t.Na()}Lv(t){if(null===this.zi||this.zi.Ei()||!this._n.handleScale.axisPressedMouseMove.price)return;const e=this.Qi.Pv().$t(),i=this.Qi.Jv();this.Sv=!0,e.T_(i,this.zi,t.localY)}Ev(t){if(null===this.zi||!this._n.handleScale.axisPressedMouseMove.price)return;const e=this.Qi.Pv().$t(),i=this.Qi.Jv(),s=this.zi;e.P_(i,s,t.localY)}Nv(){if(null===this.zi||!this._n.handleScale.axisPressedMouseMove.price)return;const t=this.Qi.Pv().$t(),e=this.Qi.Jv(),i=this.zi;this.Sv&&(this.Sv=!1,t.R_(e,i))}Fv(t){if(null===this.zi||!this._n.handleScale.axisPressedMouseMove.price)return;const e=this.Qi.Pv().$t(),i=this.Qi.Jv();this.Sv=!1,e.R_(i,this.zi)}Wv(t){this._n.handleScale.axisDoubleClickReset.price&&this.Qe()}jv(t){null!==this.zi&&(!this.Qi.Pv().$t().W().handleScale.axisPressedMouseMove.price||this.zi.mh()||this.zi.Po()||this.ap(1))}Hv(t){this.ap(0)}Kv(){const t=[],e=null===this.zi?void 0:this.zi;return(i=>{for(let s=0;s<i.length;++s){const r=i[s].Tn(this.Qi.Jv(),e);for(let e=0;e<r.length;e++)t.push(r[e])}})(this.Qi.Jv().Wo()),t}ip({context:t,bitmapSize:e}){const{width:i,height:s}=e,r=this.Qi.Jv().$t(),n=r.q(),o=r.dd();n===o?st(t,0,0,i,s,n):ot(t,0,0,i,s,n,o)}Ae({context:t,bitmapSize:e,horizontalPixelRatio:i}){if(null===this.xv||null===this.zi||!this.zi.W().borderVisible)return;t.fillStyle=this.zi.W().borderColor;const s=Math.max(1,Math.floor(this.qv().C*i));let r;r=this.Dv?e.width-s:0,t.fillRect(r,0,s,e.height)}sp(t){if(null===this.xv||null===this.zi)return;const e=this.zi.Na(),i=this.zi.W(),s=this.qv(),r=this.Dv?this.xv.width-s.T:0;i.borderVisible&&i.ticksVisible&&t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:n,verticalPixelRatio:o})=>{t.fillStyle=i.borderColor;const a=Math.max(1,Math.floor(o)),h=Math.floor(.5*o),l=Math.round(s.T*n);t.beginPath();for(const i of e)t.rect(Math.floor(r*n),Math.round(i.Va*o)-h,l,a);t.fill()})),t.useMediaCoordinateSpace((({context:t})=>{var n;t.font=this.Xv(),t.fillStyle=null!==(n=i.textColor)&&void 0!==n?n:this.wo.textColor,t.textAlign=this.Dv?"right":"left",t.textBaseline="middle";const o=this.Dv?Math.round(r-s.V):Math.round(r+s.T+s.V),a=e.map((e=>this.kv.gi(t,e.Ja)));for(let i=e.length;i--;){const s=e[i];t.fillText(s.Ja,o,s.Va+a[i])}}))}tp(){if(null===this.xv||null===this.zi)return;let t=this.xv.height/2;const e=[],i=this.zi.Wo().slice(),s=this.Qi.Jv(),r=this.qv();this.zi===s.cr()&&this.Qi.Jv().Wo().forEach((t=>{s.ur(t)&&i.push(t)}));const n=this.zi.Ra()[0],o=this.zi;i.forEach((i=>{const r=i.Tn(s,o);r.forEach((t=>{t.Oi(null),t.Ai()&&e.push(t)})),n===i&&r.length>0&&(t=r[0].Si())})),e.forEach((t=>t.Oi(t.Si()))),this.zi.W().alignLabels&&this.op(e,r,t)}op(t,e,i){if(null===this.xv)return;const s=t.filter((t=>t.Si()<=i)),r=t.filter((t=>t.Si()>i));s.sort(((t,e)=>e.Si()-t.Si())),s.length&&r.length&&r.push(s[0]),r.sort(((t,e)=>t.Si()-e.Si()));for(const i of t){const t=Math.floor(i.Vt(e)/2),s=i.Si();s>-t&&s<t&&i.Oi(t),s>this.xv.height-t&&s<this.xv.height+t&&i.Oi(this.xv.height-t)}for(let t=1;t<s.length;t++){const i=s[t],r=s[t-1],n=r.Vt(e,!1),o=i.Si(),a=r.Di();o>a-n&&i.Oi(a-n)}for(let t=1;t<r.length;t++){const i=r[t],s=r[t-1],n=s.Vt(e,!0),o=i.Si(),a=s.Di();o<a+n&&i.Oi(a+n)}}ep(t){if(null===this.xv)return;const e=this.Kv(),i=this.qv(),s=this.Dv?"right":"left";e.forEach((e=>{e.Bi()&&e.gt(C(this.zi)).K(t,i,this.kv,s)}))}rp(t){if(null===this.xv||null===this.zi)return;const e=this.Qi.Pv().$t(),i=[],s=this.Qi.Jv(),r=e.Hc().Tn(s,this.zi);r.length&&i.push(r);const n=this.qv(),o=this.Dv?"right":"left";i.forEach((e=>{e.forEach((e=>{e.gt(C(this.zi)).K(t,n,this.kv,o)}))}))}ap(t){this.Vv.style.cursor=1===t?"ns-resize":"default"}_o(){const t=this.Yv();this.yv<t&&this.Qi.Pv().$t().ql(),this.yv=t}Xv(){return q(this.wo.fontSize,this.wo.fontFamily)}}function Cs(t,e){var i,s;return null!==(s=null===(i=t.la)||void 0===i?void 0:i.call(t,e))&&void 0!==s?s:[]}function Es(t,e){var i,s;return null!==(s=null===(i=t.Cn)||void 0===i?void 0:i.call(t,e))&&void 0!==s?s:[]}function Ps(t,e){var i,s;return null!==(s=null===(i=t.Gi)||void 0===i?void 0:i.call(t,e))&&void 0!==s?s:[]}function Is(t,e){var i,s;return null!==(s=null===(i=t.ea)||void 0===i?void 0:i.call(t,e))&&void 0!==s?s:[]}class Ts{constructor(t,e){this.xv=s({width:0,height:0}),this._p=null,this.up=null,this.cp=null,this.dp=!1,this.fp=new F,this.vp=new F,this.pp=0,this.mp=!1,this.bp=null,this.wp=!1,this.gp=null,this.Mp=null,this.Cv=!1,this.Tv=()=>{this.Cv||null===this.xp||this.Hi().Wh()},this.Rv=()=>{this.Cv||null===this.xp||this.Hi().Wh()},this.Sp=t,this.xp=e,this.xp.L_().l(this.kp.bind(this),this,!0),this.yp=document.createElement("td"),this.yp.style.padding="0",this.yp.style.position="relative";const i=document.createElement("div");i.style.width="100%",i.style.height="100%",i.style.position="relative",i.style.overflow="hidden",this.Cp=document.createElement("td"),this.Cp.style.padding="0",this.Tp=document.createElement("td"),this.Tp.style.padding="0",this.yp.appendChild(i),this.Iv=cs(i,s({width:16,height:16})),this.Iv.subscribeSuggestedBitmapSizeChanged(this.Tv);const r=this.Iv.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.zv=cs(i,s({width:16,height:16})),this.zv.subscribeSuggestedBitmapSizeChanged(this.Rv);const n=this.zv.canvasElement;n.style.position="absolute",n.style.zIndex="2",n.style.left="0",n.style.top="0",this.Pp=document.createElement("tr"),this.Pp.appendChild(this.Cp),this.Pp.appendChild(this.yp),this.Pp.appendChild(this.Tp),this.Rp(),this.$v=new ms(this.zv.canvasElement,this,{jf:()=>null===this.bp&&!this.Sp.W().handleScroll.vertTouchDrag,Hf:()=>null===this.bp&&!this.Sp.W().handleScroll.horzTouchDrag})}S(){null!==this._p&&this._p.S(),null!==this.up&&this.up.S(),this.zv.unsubscribeSuggestedBitmapSizeChanged(this.Rv),us(this.zv.canvasElement),this.zv.dispose(),this.Iv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),us(this.Iv.canvasElement),this.Iv.dispose(),null!==this.xp&&this.xp.L_().p(this),this.$v.S()}Jv(){return C(this.xp)}Dp(t){null!==this.xp&&this.xp.L_().p(this),this.xp=t,null!==this.xp&&this.xp.L_().l(Ts.prototype.kp.bind(this),this,!0),this.Rp()}Pv(){return this.Sp}Uv(){return this.Pp}Rp(){if(null!==this.xp&&(this.Op(),0!==this.Hi().wt().length)){if(null!==this._p){const t=this.xp.y_();this._p.Zi(C(t))}if(null!==this.up){const t=this.xp.C_();this.up.Zi(C(t))}}}Ap(){null!==this._p&&this._p.bt(),null!==this.up&&this.up.bt()}m_(){return null!==this.xp?this.xp.m_():0}b_(t){this.xp&&this.xp.b_(t)}Lf(t){if(!this.xp)return;this.Bp();const e=t.localX,i=t.localY;this.Vp(e,i,t)}nv(t){this.Bp(),this.Ip(),this.Vp(t.localX,t.localY,t)}Ef(t){var e;if(!this.xp)return;this.Bp();const i=t.localX,s=t.localY;this.Vp(i,s,t);const r=this.pr(i,s);this.Sp.zp(null!==(e=null==r?void 0:r.Mv)&&void 0!==e?e:null),this.Hi().Lc(r&&{Ec:r.Ec,wv:r.wv})}Gf(t){null!==this.xp&&(this.Bp(),this.Lp(t))}Df(t){null!==this.xp&&this.Ep(this.vp,t)}Cf(t){this.Df(t)}qf(t){this.Bp(),this.Np(t),this.Vp(t.localX,t.localY,t)}Zf(t){null!==this.xp&&(this.Bp(),this.mp=!1,this.Fp(t))}Kf(t){null!==this.xp&&this.Lp(t)}dv(t){if(this.mp=!0,null===this.bp){const e={x:t.localX,y:t.localY};this.Wp(e,e,t)}}cv(t){null!==this.xp&&(this.Bp(),this.xp.$t().Lc(null),this.jp())}Hp(){return this.fp}$p(){return this.vp}hv(){this.pp=1,this.Hi().Hn()}lv(t,e){if(!this.Sp.W().handleScale.pinch)return;const i=5*(e-this.pp);this.pp=e,this.Hi().Xc(t.nt,i)}tv(t){this.mp=!1,this.wp=null!==this.bp,this.Ip();const e=this.Hi().Hc();null!==this.bp&&e.yt()&&(this.gp={x:e.Yt(),y:e.Xt()},this.bp={x:t.localX,y:t.localY})}$f(t){if(null===this.xp)return;const e=t.localX,i=t.localY;if(null===this.bp)this.Np(t);else{this.wp=!1;const s=C(this.gp),r=s.x+(e-this.bp.x),n=s.y+(i-this.bp.y);this.Vp(r,n,t)}}Xf(t){0===this.Pv().W().trackingMode.exitMode&&(this.wp=!0),this.Up(),this.Fp(t)}pr(t,e){const i=this.xp;return null===i?null:function(t,e,i){const s=t.Wo(),r=function(t,e,i){var s,r;let n,o;for(const l of t){const t=null!==(r=null===(s=l.ua)||void 0===s?void 0:s.call(l,e,i))&&void 0!==r?r:[];for(const e of t)a=e.zOrder,(!(h=null==n?void 0:n.zOrder)||"top"===a&&"top"!==h||"normal"===a&&"bottom"===h)&&(n=e,o=l)}var a,h;return n&&o?{gv:n,Ec:o}:null}(s,e,i);if("top"===(null==r?void 0:r.gv.zOrder))return xs(r);for(const n of s){if(r&&r.Ec===n&&"bottom"!==r.gv.zOrder&&!r.gv.isBackground)return xs(r);const s=ws(n.Cn(t),e,i);if(null!==s)return{Ec:n,mv:s.mv,wv:s.wv};if(r&&r.Ec===n&&"bottom"!==r.gv.zOrder&&r.gv.isBackground)return xs(r)}return(null==r?void 0:r.gv)?xs(r):null}(i,t,e)}qp(t,e){C("left"===e?this._p:this.up).Zv(s({width:t,height:this.xv.height}))}Yp(){return this.xv}Zv(t){r(this.xv,t)||(this.xv=t,this.Cv=!0,this.Iv.resizeCanvasElement(t),this.zv.resizeCanvasElement(t),this.Cv=!1,this.yp.style.width=t.width+"px",this.yp.style.height=t.height+"px")}Xp(){const t=C(this.xp);t.k_(t.y_()),t.k_(t.C_());for(const e of t.Ra())if(t.ur(e)){const i=e.Dt();null!==i&&t.k_(i),e.Rn()}}hp(){return this.Iv.bitmapSize}lp(t,e,i){const s=this.hp();s.width>0&&s.height>0&&t.drawImage(this.Iv.canvasElement,e,i)}Qv(t){if(0===t)return;if(null===this.xp)return;if(t>1&&this.Xp(),null!==this._p&&this._p.Qv(t),null!==this.up&&this.up.Qv(t),1!==t){this.Iv.applySuggestedBitmapSize();const t=l(this.Iv);null!==t&&(t.useBitmapCoordinateSpace((t=>{this.ip(t)})),this.xp&&(this.Kp(t,Cs),this.Zp(t),this.Gp(t),this.Kp(t,Es),this.Kp(t,Ps)))}this.zv.applySuggestedBitmapSize();const e=l(this.zv);null!==e&&(e.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.Jp(e),this.Kp(e,Is))}Qp(){return this._p}tm(){return this.up}np(t,e){this.Kp(t,e)}kp(){null!==this.xp&&this.xp.L_().p(this),this.xp=null}Lp(t){this.Ep(this.fp,t)}Ep(t,e){const i=e.localX,s=e.localY;t.M()&&t.m(this.Hi().St().Iu(i),{x:i,y:s},e)}ip({context:t,bitmapSize:e}){const{width:i,height:s}=e,r=this.Hi(),n=r.q(),o=r.dd();n===o?st(t,0,0,i,s,o):ot(t,0,0,i,s,n,o)}Zp(t){const e=C(this.xp).E_().jh().gt();null!==e&&e.K(t,!1)}Gp(t){const e=this.Hi().jc();this.im(t,Es,ps,e),this.im(t,Es,ds,e)}Jp(t){this.im(t,Es,ds,this.Hi().Hc())}Kp(t,e){const i=C(this.xp).Wo();for(const s of i)this.im(t,e,ps,s);for(const s of i)this.im(t,e,ds,s)}im(t,e,i,s){const r=C(this.xp),n=r.$t().zc(),o=null!==n&&n.Ec===s,a=null!==n&&o&&void 0!==n.wv?n.wv.br:void 0;fs(e,(e=>i(e,t,o,a)),s,r)}Op(){if(null===this.xp)return;const t=this.Sp,e=this.xp.y_().W().visible,i=this.xp.C_().W().visible;e||null===this._p||(this.Cp.removeChild(this._p.Uv()),this._p.S(),this._p=null),i||null===this.up||(this.Tp.removeChild(this.up.Uv()),this.up.S(),this.up=null);const s=t.$t().hd();e&&null===this._p&&(this._p=new _s(this,t.W(),s,"left"),this.Cp.appendChild(this._p.Uv())),i&&null===this.up&&(this.up=new _s(this,t.W(),s,"right"),this.Tp.appendChild(this.up.Uv()))}nm(t){return t.fv&&this.mp||null!==this.bp}sm(t){return Math.max(0,Math.min(t,this.xv.width-1))}rm(t){return Math.max(0,Math.min(t,this.xv.height-1))}Vp(t,e,i){this.Hi().nd(this.sm(t),this.rm(e),i,C(this.xp))}jp(){this.Hi().ed()}Up(){this.wp&&(this.bp=null,this.jp())}Wp(t,e,i){this.bp=t,this.wp=!1,this.Vp(e.x,e.y,i);const s=this.Hi().Hc();this.gp={x:s.Yt(),y:s.Xt()}}Hi(){return this.Sp.$t()}Fp(t){if(!this.dp)return;const e=this.Hi(),i=this.Jv();if(e.A_(i,i.dn()),this.cp=null,this.dp=!1,e.Jc(),null!==this.Mp){const t=performance.now(),i=e.St();this.Mp.Pr(i.Nu(),t),this.Mp.Ku(t)||e.qn(this.Mp)}}Bp(){this.bp=null}Ip(){if(this.xp){if(this.Hi().Hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)C(document.activeElement).blur();else{const t=document.getSelection();null!==t&&t.removeAllRanges()}!this.xp.dn().Ei()&&this.Hi().St().Ei()}}Np(t){if(null===this.xp)return;const e=this.Hi(),i=e.St();if(i.Ei())return;const s=this.Sp.W(),r=s.handleScroll,n=s.kineticScroll;if((!r.pressedMouseMove||t.fv)&&(!r.horzTouchDrag&&!r.vertTouchDrag||!t.fv))return;const o=this.xp.dn(),a=performance.now();if(null!==this.cp||this.nm(t)||(this.cp={x:t.clientX,y:t.clientY,Td:a,hm:t.localX,lm:t.localY}),null!==this.cp&&!this.dp&&(this.cp.x!==t.clientX||this.cp.y!==t.clientY)){if(t.fv&&n.touch||!t.fv&&n.mouse){const t=i.ee();this.Mp=new ls(.2/t,7/t,.997,15/t),this.Mp.jd(i.Nu(),this.cp.Td)}else this.Mp=null;o.Ei()||e.D_(this.xp,o,t.localY),e.Zc(t.localX),this.dp=!0}this.dp&&(o.Ei()||e.O_(this.xp,o,t.localY),e.Gc(t.localX),null!==this.Mp&&this.Mp.jd(i.Nu(),a))}}class As{constructor(t,e,i,r,n){this.ft=!0,this.xv=s({width:0,height:0}),this.Tv=()=>this.Qv(3),this.Dv="left"===t,this.Tc=i.hd,this._n=e,this.am=r,this.om=n,this.Vv=document.createElement("div"),this.Vv.style.width="25px",this.Vv.style.height="100%",this.Vv.style.overflow="hidden",this.Iv=cs(this.Vv,s({width:16,height:16})),this.Iv.subscribeSuggestedBitmapSizeChanged(this.Tv)}S(){this.Iv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),us(this.Iv.canvasElement),this.Iv.dispose()}Uv(){return this.Vv}Yp(){return this.xv}Zv(t){r(this.xv,t)||(this.xv=t,this.Iv.resizeCanvasElement(t),this.Vv.style.width=`${t.width}px`,this.Vv.style.height=`${t.height}px`,this.ft=!0)}Qv(t){if(t<3&&!this.ft)return;if(0===this.xv.width||0===this.xv.height)return;this.ft=!1,this.Iv.applySuggestedBitmapSize();const e=l(this.Iv);null!==e&&e.useBitmapCoordinateSpace((t=>{this.ip(t),this.Ae(t)}))}hp(){return this.Iv.bitmapSize}lp(t,e,i){const s=this.hp();s.width>0&&s.height>0&&t.drawImage(this.Iv.canvasElement,e,i)}Ae({context:t,bitmapSize:e,horizontalPixelRatio:i,verticalPixelRatio:s}){if(!this.am())return;t.fillStyle=this._n.timeScale.borderColor;const r=Math.floor(this.Tc.W().C*i),n=Math.floor(this.Tc.W().C*s),o=this.Dv?e.width-r:0;t.fillRect(o,0,r,n)}ip({context:t,bitmapSize:e}){st(t,0,0,e.width,e.height,this.om())}}function Ms(t){return e=>{var i,s;return null!==(s=null===(i=e._a)||void 0===i?void 0:i.call(e,t))&&void 0!==s?s:[]}}const Rs=Ms("normal"),Bs=Ms("top"),zs=Ms("bottom");class Ds{constructor(t,e){this._m=null,this.um=null,this.k=null,this.dm=!1,this.xv=s({width:0,height:0}),this.fm=new F,this.kv=new ae(5),this.Cv=!1,this.Tv=()=>{this.Cv||this.Sp.$t().Wh()},this.Rv=()=>{this.Cv||this.Sp.$t().Wh()},this.Sp=t,this.W_=e,this._n=t.W().layout,this.vm=document.createElement("tr"),this.pm=document.createElement("td"),this.pm.style.padding="0",this.bm=document.createElement("td"),this.bm.style.padding="0",this.Vv=document.createElement("td"),this.Vv.style.height="25px",this.Vv.style.padding="0",this.wm=document.createElement("div"),this.wm.style.width="100%",this.wm.style.height="100%",this.wm.style.position="relative",this.wm.style.overflow="hidden",this.Vv.appendChild(this.wm),this.Iv=cs(this.wm,s({width:16,height:16})),this.Iv.subscribeSuggestedBitmapSizeChanged(this.Tv);const i=this.Iv.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.zv=cs(this.wm,s({width:16,height:16})),this.zv.subscribeSuggestedBitmapSizeChanged(this.Rv);const r=this.zv.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.vm.appendChild(this.pm),this.vm.appendChild(this.Vv),this.vm.appendChild(this.bm),this.gm(),this.Sp.$t().p_().l(this.gm.bind(this),this),this.$v=new ms(this.zv.canvasElement,this,{jf:()=>!0,Hf:()=>!this.Sp.W().handleScroll.horzTouchDrag})}S(){this.$v.S(),null!==this._m&&this._m.S(),null!==this.um&&this.um.S(),this.zv.unsubscribeSuggestedBitmapSizeChanged(this.Rv),us(this.zv.canvasElement),this.zv.dispose(),this.Iv.unsubscribeSuggestedBitmapSizeChanged(this.Tv),us(this.Iv.canvasElement),this.Iv.dispose()}Uv(){return this.vm}Mm(){return this._m}xm(){return this.um}nv(t){if(this.dm)return;this.dm=!0;const e=this.Sp.$t();!e.St().Ei()&&this.Sp.W().handleScale.axisPressedMouseMove.time&&e.Yc(t.localX)}tv(t){this.nv(t)}sv(){const t=this.Sp.$t();!t.St().Ei()&&this.dm&&(this.dm=!1,this.Sp.W().handleScale.axisPressedMouseMove.time&&t.td())}qf(t){const e=this.Sp.$t();!e.St().Ei()&&this.Sp.W().handleScale.axisPressedMouseMove.time&&e.Qc(t.localX)}$f(t){this.qf(t)}Zf(){this.dm=!1;const t=this.Sp.$t();t.St().Ei()&&!this.Sp.W().handleScale.axisPressedMouseMove.time||t.td()}Xf(){this.Zf()}Df(){this.Sp.W().handleScale.axisDoubleClickReset.time&&this.Sp.$t().Xn()}Cf(){this.Df()}Lf(){this.Sp.$t().W().handleScale.axisPressedMouseMove.time&&this.ap(1)}cv(){this.ap(0)}Yp(){return this.xv}Sm(){return this.fm}km(t,e,i){r(this.xv,t)||(this.xv=t,this.Cv=!0,this.Iv.resizeCanvasElement(t),this.zv.resizeCanvasElement(t),this.Cv=!1,this.Vv.style.width=`${t.width}px`,this.Vv.style.height=`${t.height}px`,this.fm.m(t)),null!==this._m&&this._m.Zv(s({width:e,height:t.height})),null!==this.um&&this.um.Zv(s({width:i,height:t.height}))}ym(){const t=this.Cm();return Math.ceil(t.C+t.T+t.P+t.L+t.B+t.Tm)}bt(){this.Sp.$t().St().Na()}hp(){return this.Iv.bitmapSize}lp(t,e,i){const s=this.hp();s.width>0&&s.height>0&&t.drawImage(this.Iv.canvasElement,e,i)}Qv(t){if(0===t)return;if(1!==t){this.Iv.applySuggestedBitmapSize();const e=l(this.Iv);null!==e&&(e.useBitmapCoordinateSpace((t=>{this.ip(t),this.Ae(t),this.Pm(e,zs)})),this.sp(e),this.Pm(e,Rs)),null!==this._m&&this._m.Qv(t),null!==this.um&&this.um.Qv(t)}this.zv.applySuggestedBitmapSize();const e=l(this.zv);null!==e&&(e.useBitmapCoordinateSpace((({context:t,bitmapSize:e})=>{t.clearRect(0,0,e.width,e.height)})),this.Rm([...this.Sp.$t().wt(),this.Sp.$t().Hc()],e),this.Pm(e,Bs))}Pm(t,e){const i=this.Sp.$t().wt();for(const s of i)fs(e,(e=>ps(e,t,!1,void 0)),s,void 0);for(const s of i)fs(e,(e=>ds(e,t,!1,void 0)),s,void 0)}ip({context:t,bitmapSize:e}){st(t,0,0,e.width,e.height,this.Sp.$t().dd())}Ae({context:t,bitmapSize:e,verticalPixelRatio:i}){if(this.Sp.W().timeScale.borderVisible){t.fillStyle=this.Dm();const s=Math.max(1,Math.floor(this.Cm().C*i));t.fillRect(0,0,e.width,s)}}sp(t){const e=this.Sp.$t().St(),i=e.Na();if(!i||0===i.length)return;const s=this.W_.maxTickMarkWeight(i),r=this.Cm(),n=e.W();n.borderVisible&&n.ticksVisible&&t.useBitmapCoordinateSpace((({context:t,horizontalPixelRatio:e,verticalPixelRatio:s})=>{t.strokeStyle=this.Dm(),t.fillStyle=this.Dm();const n=Math.max(1,Math.floor(e)),o=Math.floor(.5*e);t.beginPath();const a=Math.round(r.T*s);for(let s=i.length;s--;){const r=Math.round(i[s].coord*e);t.rect(r-o,0,n,a)}t.fill()})),t.useMediaCoordinateSpace((({context:t})=>{const e=r.C+r.T+r.L+r.P/2;t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.$(),t.font=this.Xv();for(const r of i)if(r.weight<s){const i=r.needAlignCoordinate?this.Om(t,r.coord,r.label):r.coord;t.fillText(r.label,i,e)}this.Sp.W().timeScale.allowBoldLabels&&(t.font=this.Am());for(const r of i)if(r.weight>=s){const i=r.needAlignCoordinate?this.Om(t,r.coord,r.label):r.coord;t.fillText(r.label,i,e)}}))}Om(t,e,i){const s=this.kv.Mi(t,i),r=s/2,n=Math.floor(e-r)+.5;return n<0?e+=Math.abs(0-n):n+s>this.xv.width&&(e-=Math.abs(this.xv.width-(n+s))),e}Rm(t,e){const i=this.Cm();for(const s of t)for(const t of s.Ji())t.gt().K(e,i)}Dm(){return this.Sp.W().timeScale.borderColor}$(){return this._n.textColor}j(){return this._n.fontSize}Xv(){return q(this.j(),this._n.fontFamily)}Am(){return q(this.j(),this._n.fontFamily,"bold")}Cm(){null===this.k&&(this.k={C:1,N:NaN,L:NaN,B:NaN,Wi:NaN,T:5,P:NaN,R:"",Fi:new ae,Tm:0});const t=this.k,e=this.Xv();if(t.R!==e){const i=this.j();t.P=i,t.R=e,t.L=3*i/12,t.B=3*i/12,t.Wi=9*i/12,t.N=0,t.Tm=4*i/12,t.Fi.Qe()}return this.k}ap(t){this.Vv.style.cursor=1===t?"ew-resize":"default"}gm(){const t=this.Sp.$t(),e=t.W();e.leftPriceScale.visible||null===this._m||(this.pm.removeChild(this._m.Uv()),this._m.S(),this._m=null),e.rightPriceScale.visible||null===this.um||(this.bm.removeChild(this.um.Uv()),this.um.S(),this.um=null);const i={hd:this.Sp.$t().hd()},s=()=>e.leftPriceScale.borderVisible&&t.St().W().borderVisible,r=()=>t.dd();e.leftPriceScale.visible&&null===this._m&&(this._m=new As("left",e,i,s,r),this.pm.appendChild(this._m.Uv())),e.rightPriceScale.visible&&null===this.um&&(this.um=new As("right",e,i,s,r),this.bm.appendChild(this.um.Uv()))}}const Fs=!!ss&&!!navigator.userAgentData&&navigator.userAgentData.brands.some((t=>t.brand.includes("Chromium")))&&!!ss&&((null===(Ls=null===navigator||void 0===navigator?void 0:navigator.userAgentData)||void 0===Ls?void 0:Ls.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);var Ls;class Vs{constructor(t,e,i){var s;this.Bm=[],this.Vm=0,this.no=0,this.h_=0,this.Im=0,this.zm=0,this.Lm=null,this.Em=!1,this.fp=new F,this.vp=new F,this.kc=new F,this.Nm=null,this.Fm=null,this.Wm=t,this._n=e,this.W_=i,this.vm=document.createElement("div"),this.vm.classList.add("tv-lightweight-charts"),this.vm.style.overflow="hidden",this.vm.style.direction="ltr",this.vm.style.width="100%",this.vm.style.height="100%",(s=this.vm).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.jm=document.createElement("table"),this.jm.setAttribute("cellspacing","0"),this.vm.appendChild(this.jm),this.Hm=this.$m.bind(this),Os(this._n)&&this.Um(!0),this.Hi=new Ni(this.Cc.bind(this),this._n,i),this.$t().$c().l(this.qm.bind(this),this),this.Ym=new Ds(this,this.W_),this.jm.appendChild(this.Ym.Uv());const r=e.autoSize&&this.Xm();let n=this._n.width,o=this._n.height;if(r||0===n||0===o){const e=t.getBoundingClientRect();n=n||e.width,o=o||e.height}this.Km(n,o),this.Zm(),t.appendChild(this.vm),this.Gm(),this.Hi.St().Qu().l(this.Hi.ql.bind(this.Hi),this),this.Hi.p_().l(this.Hi.ql.bind(this.Hi),this)}$t(){return this.Hi}W(){return this._n}Jm(){return this.Bm}Qm(){return this.Ym}S(){this.Um(!1),0!==this.Vm&&window.cancelAnimationFrame(this.Vm),this.Hi.$c().p(this),this.Hi.St().Qu().p(this),this.Hi.p_().p(this),this.Hi.S();for(const t of this.Bm)this.jm.removeChild(t.Uv()),t.Hp().p(this),t.$p().p(this),t.S();this.Bm=[],C(this.Ym).S(),null!==this.vm.parentElement&&this.vm.parentElement.removeChild(this.vm),this.kc.S(),this.fp.S(),this.vp.S(),this.tb()}Km(t,e,i=!1){if(this.no===e&&this.h_===t)return;const r=function(t){const e=Math.floor(t.width),i=Math.floor(t.height);return s({width:e-e%2,height:i-i%2})}(s({width:t,height:e}));this.no=r.height,this.h_=r.width;const n=this.no+"px",o=this.h_+"px";C(this.vm).style.height=n,C(this.vm).style.width=o,this.jm.style.height=n,this.jm.style.width=o,i?this.ib(yt.ns(),performance.now()):this.Hi.ql()}Qv(t){void 0===t&&(t=yt.ns());for(let e=0;e<this.Bm.length;e++)this.Bm[e].Qv(t.Wn(e).En);this._n.timeScale.visible&&this.Ym.Qv(t.Fn())}Fh(t){const e=Os(this._n);this.Hi.Fh(t);const i=Os(this._n);i!==e&&this.Um(i),this.Gm(),this.nb(t)}Hp(){return this.fp}$p(){return this.vp}$c(){return this.kc}sb(){null!==this.Lm&&(this.ib(this.Lm,performance.now()),this.Lm=null);const t=this.eb(null),e=document.createElement("canvas");e.width=t.width,e.height=t.height;const i=C(e.getContext("2d"));return this.eb(i),e}rb(t){return"left"===t&&!this.hb()||"right"===t&&!this.lb()||0===this.Bm.length?0:C("left"===t?this.Bm[0].Qp():this.Bm[0].tm()).Gv()}ab(){return this._n.autoSize&&null!==this.Nm}ob(){return this.vm}zp(t){this.Fm=t,this.Fm?this.ob().style.setProperty("cursor",t):this.ob().style.removeProperty("cursor")}_b(){return this.Fm}ub(){return _(this.Bm[0]).Yp()}nb(t){(void 0!==t.autoSize||!this.Nm||void 0===t.width&&void 0===t.height)&&(t.autoSize&&!this.Nm&&this.Xm(),!1===t.autoSize&&null!==this.Nm&&this.tb(),t.autoSize||void 0===t.width&&void 0===t.height||this.Km(t.width||this.h_,t.height||this.no))}eb(t){let e=0,i=0;const r=this.Bm[0],n=(e,i)=>{let s=0;for(let r=0;r<this.Bm.length;r++){const n=this.Bm[r],o=C("left"===e?n.Qp():n.tm()),a=o.hp();null!==t&&o.lp(t,i,s),s+=a.height}};this.hb()&&(n("left",0),e+=C(r.Qp()).hp().width);for(let s=0;s<this.Bm.length;s++){const r=this.Bm[s],n=r.hp();null!==t&&r.lp(t,e,i),i+=n.height}e+=r.hp().width,this.lb()&&(n("right",e),e+=C(r.tm()).hp().width);const o=(e,i,s)=>{C("left"===e?this.Ym.Mm():this.Ym.xm()).lp(C(t),i,s)};if(this._n.timeScale.visible){const e=this.Ym.hp();if(null!==t){let s=0;this.hb()&&(o("left",s,i),s=C(r.Qp()).hp().width),this.Ym.lp(t,s,i),s+=e.width,this.lb()&&o("right",s,i)}i+=e.height}return s({width:e,height:i})}cb(){let t=0,e=0,i=0;for(const s of this.Bm)this.hb()&&(e=Math.max(e,C(s.Qp()).Yv(),this._n.leftPriceScale.minimumWidth)),this.lb()&&(i=Math.max(i,C(s.tm()).Yv(),this._n.rightPriceScale.minimumWidth)),t+=s.m_();e=os(e),i=os(i);const r=this.h_,n=this.no,o=Math.max(r-e-i,0),a=this._n.timeScale.visible;let h=a?Math.max(this.Ym.ym(),this._n.timeScale.minimumHeight):0;var l;h=(l=h)+l%2;const c=0+h,u=n<c?0:n-c,p=u/t;let d=0;for(let t=0;t<this.Bm.length;++t){const r=this.Bm[t];r.Dp(this.Hi.Wc()[t]);let n=0,a=0;a=t===this.Bm.length-1?u-d:Math.round(r.m_()*p),n=Math.max(a,2),d+=n,r.Zv(s({width:o,height:n})),this.hb()&&r.qp(e,"left"),this.lb()&&r.qp(i,"right"),r.Jv()&&this.Hi.Uc(r.Jv(),n)}this.Ym.km(s({width:a?o:0,height:h}),a?e:0,a?i:0),this.Hi.w_(o),this.Im!==e&&(this.Im=e),this.zm!==i&&(this.zm=i)}Um(t){t?this.vm.addEventListener("wheel",this.Hm,{passive:!1}):this.vm.removeEventListener("wheel",this.Hm)}fb(t){switch(t.deltaMode){case t.DOM_DELTA_PAGE:return 120;case t.DOM_DELTA_LINE:return 32}return Fs?1/window.devicePixelRatio:1}$m(t){if(!(0!==t.deltaX&&this._n.handleScroll.mouseWheel||0!==t.deltaY&&this._n.handleScale.mouseWheel))return;const e=this.fb(t),i=e*t.deltaX/100,s=-e*t.deltaY/100;if(t.cancelable&&t.preventDefault(),0!==s&&this._n.handleScale.mouseWheel){const e=Math.sign(s)*Math.min(1,Math.abs(s)),i=t.clientX-this.vm.getBoundingClientRect().left;this.$t().Xc(i,e)}0!==i&&this._n.handleScroll.mouseWheel&&this.$t().Kc(-80*i)}ib(t,e){var i;const s=t.Fn();3===s&&this.vb(),3!==s&&2!==s||(this.pb(t),this.mb(t,e),this.Ym.bt(),this.Bm.forEach((t=>{t.Ap()})),3===(null===(i=this.Lm)||void 0===i?void 0:i.Fn())&&(this.Lm.Jn(t),this.vb(),this.pb(this.Lm),this.mb(this.Lm,e),t=this.Lm,this.Lm=null)),this.Qv(t)}mb(t,e){for(const i of t.Gn())this.Qn(i,e)}pb(t){const e=this.Hi.Wc();for(let i=0;i<e.length;i++)t.Wn(i).Nn&&e[i].I_()}Qn(t,e){const i=this.Hi.St();switch(t.$n){case 0:i.ic();break;case 1:i.nc(t.Ot);break;case 2:i.Kn(t.Ot);break;case 3:i.Zn(t.Ot);break;case 4:i.ju();break;case 5:t.Ot.Ku(e)||i.Zn(t.Ot.Zu(e))}}Cc(t){null!==this.Lm?this.Lm.Jn(t):this.Lm=t,this.Em||(this.Em=!0,this.Vm=window.requestAnimationFrame((t=>{if(this.Em=!1,this.Vm=0,null!==this.Lm){const e=this.Lm;this.Lm=null,this.ib(e,t);for(const i of e.Gn())if(5===i.$n&&!i.Ot.Ku(t)){this.$t().qn(i.Ot);break}}})))}vb(){this.Zm()}Zm(){const t=this.Hi.Wc(),e=t.length,i=this.Bm.length;for(let t=e;t<i;t++){const t=_(this.Bm.pop());this.jm.removeChild(t.Uv()),t.Hp().p(this),t.$p().p(this),t.S()}for(let s=i;s<e;s++){const e=new Ts(this,t[s]);e.Hp().l(this.bb.bind(this),this),e.$p().l(this.wb.bind(this),this),this.Bm.push(e),this.jm.insertBefore(e.Uv(),this.Ym.Uv())}for(let i=0;i<e;i++){const e=t[i],s=this.Bm[i];s.Jv()!==e?s.Dp(e):s.Rp()}this.Gm(),this.cb()}gb(t,e,i){var s;const r=new Map;let n;if(null!==t&&this.Hi.wt().forEach((e=>{const i=e.Bn().sl(t);null!==i&&r.set(e,i)})),null!==t){const e=null===(s=this.Hi.St().$i(t))||void 0===s?void 0:s.originalTime;void 0!==e&&(n=e)}const o=this.$t().zc(),a=null!==o&&o.Ec instanceof ei?o.Ec:void 0,h=null!==o&&void 0!==o.wv?o.wv.mr:void 0;return{Mb:n,ie:null!=t?t:void 0,xb:null!=e?e:void 0,Sb:a,kb:r,yb:h,Cb:null!=i?i:void 0}}bb(t,e,i){this.fp.m((()=>this.gb(t,e,i)))}wb(t,e,i){this.vp.m((()=>this.gb(t,e,i)))}qm(t,e,i){this.kc.m((()=>this.gb(t,e,i)))}Gm(){const t=this._n.timeScale.visible?"":"none";this.Ym.Uv().style.display=t}hb(){return this.Bm[0].Jv().y_().W().visible}lb(){return this.Bm[0].Jv().C_().W().visible}Xm(){return"ResizeObserver"in window&&(this.Nm=new ResizeObserver((t=>{const e=t.find((t=>t.target===this.Wm));e&&this.Km(e.contentRect.width,e.contentRect.height)})),this.Nm.observe(this.Wm,{box:"border-box"}),!0)}tb(){null!==this.Nm&&this.Nm.disconnect(),this.Nm=null}}function Os(t){return Boolean(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function Ns(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(i[s[r]]=t[s[r]])}return i}function Ws(t,e,i,s){const r=i.value,n={ie:e,ot:t,Ot:[r,r,r,r],Mb:s};return void 0!==i.color&&(n.O=i.color),n}function Hs(t,e,i,s){const r=i.value,n={ie:e,ot:t,Ot:[r,r,r,r],Mb:s};return void 0!==i.lineColor&&(n.lt=i.lineColor),void 0!==i.topColor&&(n.ys=i.topColor),void 0!==i.bottomColor&&(n.Cs=i.bottomColor),n}function Gs(t,e,i,s){const r=i.value,n={ie:e,ot:t,Ot:[r,r,r,r],Mb:s};return void 0!==i.topLineColor&&(n.Ce=i.topLineColor),void 0!==i.bottomLineColor&&(n.Te=i.bottomLineColor),void 0!==i.topFillColor1&&(n.Me=i.topFillColor1),void 0!==i.topFillColor2&&(n.xe=i.topFillColor2),void 0!==i.bottomFillColor1&&(n.Se=i.bottomFillColor1),void 0!==i.bottomFillColor2&&(n.ke=i.bottomFillColor2),n}function js(t,e,i,s){const r={ie:e,ot:t,Ot:[i.open,i.high,i.low,i.close],Mb:s};return void 0!==i.color&&(r.O=i.color),r}function $s(t,e,i,s){const r={ie:e,ot:t,Ot:[i.open,i.high,i.low,i.close],Mb:s};return void 0!==i.color&&(r.O=i.color),void 0!==i.borderColor&&(r.At=i.borderColor),void 0!==i.wickColor&&(r.Uh=i.wickColor),r}function qs(t,e,i,s,r){const n=_(r)(i),o=Math.max(...n),a=Math.min(...n),h=n[n.length-1],l=[h,o,a,h],c=i,{time:u,color:p}=c;return{ie:e,ot:t,Ot:l,Mb:s,We:Ns(c,["time","color"]),O:p}}function Us(t){return void 0!==t.Ot}function Ks(t,e){return void 0!==e.customValues&&(t.Tb=e.customValues),t}function Zs(t){return(e,i,s,r,n,o)=>function(t,e){return e?e(t):void 0===(i=t).open&&void 0===i.value;var i}(s,o)?Ks({ot:e,ie:i,Mb:r},s):Ks(t(e,i,s,r,n),s)}function Ys(t){return{Candlestick:Zs($s),Bar:Zs(js),Area:Zs(Hs),Baseline:Zs(Gs),Histogram:Zs(Ws),Line:Zs(Ws),Custom:Zs(qs)}[t]}function Js(t){return{ie:0,Pb:new Map,sa:t}}function Xs(t,e){if(void 0!==t&&0!==t.length)return{Rb:e.key(t[0].ot),Db:e.key(t[t.length-1].ot)}}function Qs(t){let e;return t.forEach((t=>{void 0===e&&(e=t.Mb)})),_(e)}class tr{constructor(t){this.Ob=new Map,this.Ab=new Map,this.Bb=new Map,this.Vb=[],this.W_=t}S(){this.Ob.clear(),this.Ab.clear(),this.Bb.clear(),this.Vb=[]}Ib(t,e){let i=0!==this.Ob.size,s=!1;const r=this.Ab.get(t);if(void 0!==r)if(1===this.Ab.size)i=!1,s=!0,this.Ob.clear();else for(const e of this.Vb)e.pointData.Pb.delete(t)&&(s=!0);let n=[];if(0!==e.length){const i=e.map((t=>t.time)),r=this.W_.createConverterToInternalObj(e),o=Ys(t.Kh()),a=t.xa(),h=t.Sa();n=e.map(((e,n)=>{const l=r(e.time),c=this.W_.key(l);let u=this.Ob.get(c);void 0===u&&(u=Js(l),this.Ob.set(c,u),s=!0);const p=o(l,u.ie,e,i[n],a,h);return u.Pb.set(t,p),p}))}i&&this.zb(),this.Lb(t,n);let o=-1;if(s){const t=[];this.Ob.forEach((e=>{t.push({timeWeight:0,time:e.sa,pointData:e,originalTime:Qs(e.Pb)})})),t.sort(((t,e)=>this.W_.key(t.time)-this.W_.key(e.time))),o=this.Eb(t)}return this.Nb(t,o,function(t,e,i){const s=Xs(t,i),r=Xs(e,i);if(void 0!==s&&void 0!==r)return{Zl:s.Db>=r.Db&&s.Rb>=r.Rb}}(this.Ab.get(t),r,this.W_))}od(t){return this.Ib(t,[])}Fb(t,e){const i=e;!function(t){void 0===t.Mb&&(t.Mb=t.time)}(i),this.W_.preprocessData(e);const s=this.W_.createConverterToInternalObj([e])(e.time),r=this.Bb.get(t);if(void 0!==r&&this.W_.key(s)<this.W_.key(r))throw new Error(`Cannot update oldest data, last time=${r}, new time=${s}`);let n=this.Ob.get(this.W_.key(s));const o=void 0===n;void 0===n&&(n=Js(s),this.Ob.set(this.W_.key(s),n));const a=Ys(t.Kh()),h=t.xa(),l=t.Sa(),c=a(s,n.ie,e,i.Mb,h,l);n.Pb.set(t,c),this.Wb(t,c);const u={Zl:Us(c)};if(!o)return this.Nb(t,-1,u);const p={timeWeight:0,time:n.sa,pointData:n,originalTime:Qs(n.Pb)},d=Vt(this.Vb,this.W_.key(p.time),((t,e)=>this.W_.key(t.time)<e));this.Vb.splice(d,0,p);for(let t=d;t<this.Vb.length;++t)er(this.Vb[t].pointData,t);return this.W_.fillWeightsForPoints(this.Vb,d),this.Nb(t,d,u)}Wb(t,e){let i=this.Ab.get(t);void 0===i&&(i=[],this.Ab.set(t,i));const s=0!==i.length?i[i.length-1]:null;null===s||this.W_.key(e.ot)>this.W_.key(s.ot)?Us(e)&&i.push(e):Us(e)?i[i.length-1]=e:i.splice(-1,1),this.Bb.set(t,e.ot)}Lb(t,e){0!==e.length?(this.Ab.set(t,e.filter(Us)),this.Bb.set(t,e[e.length-1].ot)):(this.Ab.delete(t),this.Bb.delete(t))}zb(){for(const t of this.Vb)0===t.pointData.Pb.size&&this.Ob.delete(this.W_.key(t.time))}Eb(t){let e=-1;for(let i=0;i<this.Vb.length&&i<t.length;++i){const s=this.Vb[i],r=t[i];if(this.W_.key(s.time)!==this.W_.key(r.time)){e=i;break}r.timeWeight=s.timeWeight,er(r.pointData,i)}if(-1===e&&this.Vb.length!==t.length&&(e=Math.min(this.Vb.length,t.length)),-1===e)return-1;for(let i=e;i<t.length;++i)er(t[i].pointData,i);return this.W_.fillWeightsForPoints(t,e),this.Vb=t,e}jb(){if(0===this.Ab.size)return null;let t=0;return this.Ab.forEach((e=>{0!==e.length&&(t=Math.max(t,e[e.length-1].ie))})),t}Nb(t,e,i){const s={Hb:new Map,St:{Vu:this.jb()}};if(-1!==e)this.Ab.forEach(((e,r)=>{s.Hb.set(r,{We:e,$b:r===t?i:void 0})})),this.Ab.has(t)||s.Hb.set(t,{We:[],$b:i}),s.St.Ub=this.Vb,s.St.qb=e;else{const e=this.Ab.get(t);s.Hb.set(t,{We:e||[],$b:i})}return s}}function er(t,e){t.ie=e,t.Pb.forEach((t=>{t.ie=e}))}function ir(t){const e={value:t.Ot[3],time:t.Mb};return void 0!==t.Tb&&(e.customValues=t.Tb),e}function sr(t){const e=ir(t);return void 0!==t.O&&(e.color=t.O),e}function rr(t){const e=ir(t);return void 0!==t.lt&&(e.lineColor=t.lt),void 0!==t.ys&&(e.topColor=t.ys),void 0!==t.Cs&&(e.bottomColor=t.Cs),e}function nr(t){const e=ir(t);return void 0!==t.Ce&&(e.topLineColor=t.Ce),void 0!==t.Te&&(e.bottomLineColor=t.Te),void 0!==t.Me&&(e.topFillColor1=t.Me),void 0!==t.xe&&(e.topFillColor2=t.xe),void 0!==t.Se&&(e.bottomFillColor1=t.Se),void 0!==t.ke&&(e.bottomFillColor2=t.ke),e}function or(t){const e={open:t.Ot[0],high:t.Ot[1],low:t.Ot[2],close:t.Ot[3],time:t.Mb};return void 0!==t.Tb&&(e.customValues=t.Tb),e}function ar(t){const e=or(t);return void 0!==t.O&&(e.color=t.O),e}function hr(t){const e=or(t),{O:i,At:s,Uh:r}=t;return void 0!==i&&(e.color=i),void 0!==s&&(e.borderColor=s),void 0!==r&&(e.wickColor=r),e}function lr(t){return{Area:rr,Line:sr,Baseline:nr,Histogram:sr,Bar:ar,Candlestick:hr,Custom:cr}[t]}function cr(t){const e=t.Mb;return Object.assign(Object.assign({},t.We),{time:e})}const ur={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},pr={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},dr={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:$},fr={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0},mr={rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0},gr={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:$,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"};function yr(){return{width:0,height:0,autoSize:!1,layout:dr,crosshair:ur,grid:pr,overlayPriceScales:Object.assign({},fr),leftPriceScale:Object.assign(Object.assign({},fr),{visible:!1}),rightPriceScale:Object.assign(Object.assign({},fr),{visible:!0}),timeScale:mr,watermark:gr,localization:{locale:ss?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class vr{constructor(t,e){this.Yb=t,this.Xb=e}applyOptions(t){this.Yb.$t().Nc(this.Xb,t)}options(){return this.zi().W()}width(){return gt(this.Xb)?this.Yb.rb(this.Xb):0}zi(){return C(this.Yb.$t().Fc(this.Xb)).Dt}}function br(t,e,i){const s=Ns(t,["time","originalTime"]),r=Object.assign({time:e},s);return void 0!==i&&(r.originalTime=i),r}const Sr={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class xr{constructor(t){this.Ih=t}applyOptions(t){this.Ih.Fh(t)}options(){return this.Ih.W()}Kb(){return this.Ih}}class wr{constructor(t,e,i,s,r){this.Zb=new F,this.Is=t,this.Gb=e,this.Jb=i,this.W_=r,this.Qb=s}S(){this.Zb.S()}priceFormatter(){return this.Is.fa()}priceToCoordinate(t){const e=this.Is.Ct();return null===e?null:this.Is.Dt().Rt(t,e.Ot)}coordinateToPrice(t){const e=this.Is.Ct();return null===e?null:this.Is.Dt().fn(t,e.Ot)}barsInLogicalRange(t){if(null===t)return null;const e=new Ii(new Ci(t.from,t.to)).su(),i=this.Is.Bn();if(i.Ei())return null;const s=i.sl(e.Rs(),1),r=i.sl(e.ui(),-1),n=C(i.tl()),o=C(i.An());if(null!==s&&null!==r&&s.ie>r.ie)return{barsBefore:t.from-n,barsAfter:o-t.to};const a={barsBefore:null===s||s.ie===n?t.from-n:s.ie-n,barsAfter:null===r||r.ie===o?o-t.to:o-r.ie};return null!==s&&null!==r&&(a.from=s.Mb,a.to=r.Mb),a}setData(t){this.W_,this.Is.Kh(),this.Gb.tw(this.Is,t),this.iw("full")}update(t){this.Is.Kh(),this.Gb.nw(this.Is,t),this.iw("update")}dataByIndex(t,e){const i=this.Is.Bn().sl(t,e);return null===i?null:lr(this.seriesType())(i)}data(){const t=lr(this.seriesType());return this.Is.Bn().Qs().map((e=>t(e)))}subscribeDataChanged(t){this.Zb.l(t)}unsubscribeDataChanged(t){this.Zb.v(t)}setMarkers(t){this.W_;const e=t.map((t=>br(t,this.W_.convertHorzItemToInternal(t.time),t.time)));this.Is.Jl(e)}markers(){return this.Is.Ql().map((t=>br(t,t.originalTime,void 0)))}applyOptions(t){this.Is.Fh(t)}options(){return H(this.Is.W())}priceScale(){return this.Jb.priceScale(this.Is.Dt().ka())}createPriceLine(t){const e=L(H(Sr),t),i=this.Is.ta(e);return new xr(i)}removePriceLine(t){this.Is.ia(t.Kb())}seriesType(){return this.Is.Kh()}attachPrimitive(t){this.Is.ga(t),t.attached&&t.attached({chart:this.Qb,series:this,requestUpdate:()=>this.Is.$t().ql()})}detachPrimitive(t){this.Is.Ma(t),t.detached&&t.detached()}iw(t){this.Zb.M()&&this.Zb.m(t)}}class kr{constructor(t,e,i){this.sw=new F,this.du=new F,this.fm=new F,this.Hi=t,this.Ml=t.St(),this.Ym=e,this.Ml.Gu().l(this.ew.bind(this)),this.Ml.Ju().l(this.rw.bind(this)),this.Ym.Sm().l(this.hw.bind(this)),this.W_=i}S(){this.Ml.Gu().p(this),this.Ml.Ju().p(this),this.Ym.Sm().p(this),this.sw.S(),this.du.S(),this.fm.S()}scrollPosition(){return this.Ml.Nu()}scrollToPosition(t,e){e?this.Ml.Xu(t,1e3):this.Hi.Zn(t)}scrollToRealTime(){this.Ml.Yu()}getVisibleRange(){const t=this.Ml.Tu();return null===t?null:{from:t.from.originalTime,to:t.to.originalTime}}setVisibleRange(t){const e={from:this.W_.convertHorzItemToInternal(t.from),to:this.W_.convertHorzItemToInternal(t.to)},i=this.Ml.Ou(e);this.Hi._d(i)}getVisibleLogicalRange(){const t=this.Ml.Cu();return null===t?null:{from:t.Rs(),to:t.ui()}}setVisibleLogicalRange(t){k(t.from<=t.to,"The from index cannot be after the to index."),this.Hi._d(t)}resetTimeScale(){this.Hi.Xn()}fitContent(){this.Hi.ic()}logicalToCoordinate(t){const e=this.Hi.St();return e.Ei()?null:e.It(t)}coordinateToLogical(t){return this.Ml.Ei()?null:this.Ml.Iu(t)}timeToCoordinate(t){const e=this.W_.convertHorzItemToInternal(t),i=this.Ml.Ta(e,!1);return null===i?null:this.Ml.It(i)}coordinateToTime(t){const e=this.Hi.St(),i=e.Iu(t),s=e.$i(i);return null===s?null:s.originalTime}width(){return this.Ym.Yp().width}height(){return this.Ym.Yp().height}subscribeVisibleTimeRangeChange(t){this.sw.l(t)}unsubscribeVisibleTimeRangeChange(t){this.sw.v(t)}subscribeVisibleLogicalRangeChange(t){this.du.l(t)}unsubscribeVisibleLogicalRangeChange(t){this.du.v(t)}subscribeSizeChange(t){this.fm.l(t)}unsubscribeSizeChange(t){this.fm.v(t)}applyOptions(t){this.Ml.Fh(t)}options(){return Object.assign(Object.assign({},H(this.Ml.W())),{barSpacing:this.Ml.ee()})}ew(){this.sw.M()&&this.sw.m(this.getVisibleRange())}rw(){this.du.M()&&this.du.m(this.getVisibleLogicalRange())}hw(t){this.fm.m(t.width,t.height)}}function _r(t){return function(t){if(W(t.handleScale)){const e=t.handleScale;t.handleScale={axisDoubleClickReset:{time:e,price:e},axisPressedMouseMove:{time:e,price:e},mouseWheel:e,pinch:e}}else if(void 0!==t.handleScale){const{axisPressedMouseMove:e,axisDoubleClickReset:i}=t.handleScale;W(e)&&(t.handleScale.axisPressedMouseMove={time:e,price:e}),W(i)&&(t.handleScale.axisDoubleClickReset={time:i,price:i})}const e=t.handleScroll;W(e)&&(t.handleScroll={horzTouchDrag:e,vertTouchDrag:e,mouseWheel:e,pressedMouseMove:e})}(t),t}class Cr{constructor(t,e,i){this.lw=new Map,this.aw=new Map,this.ow=new F,this._w=new F,this.uw=new F,this.cw=new tr(e);const s=void 0===i?H(yr()):L(H(yr()),_r(i));this.W_=e,this.Yb=new Vs(t,s,e),this.Yb.Hp().l((t=>{this.ow.M()&&this.ow.m(this.dw(t()))}),this),this.Yb.$p().l((t=>{this._w.M()&&this._w.m(this.dw(t()))}),this),this.Yb.$c().l((t=>{this.uw.M()&&this.uw.m(this.dw(t()))}),this);const r=this.Yb.$t();this.fw=new kr(r,this.Yb.Qm(),this.W_)}remove(){this.Yb.Hp().p(this),this.Yb.$p().p(this),this.Yb.$c().p(this),this.fw.S(),this.Yb.S(),this.lw.clear(),this.aw.clear(),this.ow.S(),this._w.S(),this.uw.S(),this.cw.S()}resize(t,e,i){this.autoSizeActive()||this.Yb.Km(t,e,i)}addCustomSeries(t,e){const i=E(t),s=Object.assign(Object.assign({},g),i.defaultOptions());return this.pw("Custom",s,e,i)}addAreaSeries(t){return this.pw("Area",d,t)}addBaselineSeries(t){return this.pw("Baseline",f,t)}addBarSeries(t){return this.pw("Bar",u,t)}addCandlestickSeries(t={}){return function(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}(t),this.pw("Candlestick",c,t)}addHistogramSeries(t){return this.pw("Histogram",m,t)}addLineSeries(t){return this.pw("Line",p,t)}removeSeries(t){const e=_(this.lw.get(t)),i=this.cw.od(e);this.Yb.$t().od(e),this.mw(i),this.lw.delete(t),this.aw.delete(e)}tw(t,e){this.mw(this.cw.Ib(t,e))}nw(t,e){this.mw(this.cw.Fb(t,e))}subscribeClick(t){this.ow.l(t)}unsubscribeClick(t){this.ow.v(t)}subscribeCrosshairMove(t){this.uw.l(t)}unsubscribeCrosshairMove(t){this.uw.v(t)}subscribeDblClick(t){this._w.l(t)}unsubscribeDblClick(t){this._w.v(t)}priceScale(t){return new vr(this.Yb,t)}timeScale(){return this.fw}applyOptions(t){this.Yb.Fh(_r(t))}options(){return this.Yb.W()}takeScreenshot(){return this.Yb.sb()}autoSizeActive(){return this.Yb.ab()}chartElement(){return this.Yb.ob()}paneSize(){const t=this.Yb.ub();return{height:t.height,width:t.width}}setCrosshairPosition(t,e,i){const s=this.lw.get(i);if(void 0===s)return;const r=this.Yb.$t()._r(s);null!==r&&this.Yb.$t().sd(t,e,r)}clearCrosshairPosition(){this.Yb.$t().ed(!0)}pw(t,e,i={},s){!function(t){if(void 0===t||"custom"===t.type)return;const e=t;void 0!==e.minMove&&void 0===e.precision&&(e.precision=function(t){if(t>=1)return 0;let e=0;for(;e<8;e++){const i=Math.round(t);if(Math.abs(i-t)<1e-8)return e;t*=10}return e}(e.minMove))}(i.priceFormat);const r=L(H(y),H(e),i),n=this.Yb.$t().ld(t,r,s),o=new wr(n,this,this,this,this.W_);return this.lw.set(o,n),this.aw.set(n,o),o}mw(t){const e=this.Yb.$t();e.rd(t.St.Vu,t.St.Ub,t.St.qb),t.Hb.forEach(((t,e)=>e.J(t.We,t.$b))),e.Lu()}bw(t){return _(this.aw.get(t))}dw(t){const e=new Map;t.kb.forEach(((t,i)=>{const s=i.Kh(),r=lr(s)(t);if("Custom"!==s)k(function(t){return void 0!==t.open||void 0!==t.value}(r));else{const t=i.Sa();k(!t||!1===t(r))}e.set(this.bw(i),r)}));const i=void 0!==t.Sb&&this.aw.has(t.Sb)?this.bw(t.Sb):void 0;return{time:t.Mb,logical:t.ie,point:t.xb,hoveredSeries:i,hoveredObjectId:t.yb,seriesData:e,sourceEvent:t.Cb}}}function Er(t,e){return function(t,e,i){let s;if(N(t)){const e=document.getElementById(t);k(null!==e,`Cannot find element in DOM with id=${t}`),s=e}else s=t;const r=new Cr(s,e,i);return e.setOptions(r.options()),r}(t,new is,is.Dd(e))}Object.assign(Object.assign({},y),g)}}]);