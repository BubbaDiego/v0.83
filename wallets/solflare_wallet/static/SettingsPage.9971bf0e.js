"use strict";(self.webpackChunk_solflare_extension=self.webpackChunk_solflare_extension||[]).push([["SettingsPage"],{"./src/pages/Settings/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ae});var n=s("../../../node_modules/react/jsx-runtime.js"),i=s("../../../node_modules/react/index.js"),o=s("../../../node_modules/react-router/dist/index.js"),a=s("../../../node_modules/react-i18next/dist/es/useTranslation.js"),r=s("../../libs/foundation-ui/dist/index.js"),c=s("../../libs/shared/dist/constants/index.js"),l=s("../../libs/shared/dist/constants/routes.js"),d=s("../../libs/shared/dist/features/addressBook/hooks/index.js"),u=s("../../libs/shared/dist/modals/index.js"),h=s("../../../node_modules/react-lottie-player/dist/LottiePlayer.modern.js"),p=s("../../libs/shared/dist/assets/EmptyStates/magnifying-glass.json");const _=()=>{const{t:e}=(0,a.$)(),t=(0,o.s0)();return(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>t(l.s2.MAIN,{replace:!0})}),center:e("address_book_title")}),(0,n.jsx)(r.PageContent,{children:(0,n.jsx)(r.Section,{children:(0,n.jsx)(r.EmptyState,{illustration:(0,n.jsx)(h.Z,{loop:!0,play:!0,animationData:p}),actions:(0,n.jsx)(r.Button,{onClick:()=>t(l.s2.ADDRESS_BOOK.ADD),width:"hug",size:"s",children:e("action_add_contact")}),title:(0,n.jsx)(r.Title,{textAlign:"center",children:e("address_book_empty_title")}),children:(0,n.jsx)(r.Paragraph,{textAlign:"center",size:"s",children:e("address_book_empty_subtitle")})})})})]})};var x=s("../../libs/shared/dist/features/pfp/components/index.js"),g=s("../../libs/shared/dist/utils/isPublicKeyValid.js"),j=s("../../libs/shared/dist/utils/truncateMiddle.js");const m=(e,t)=>t||C(e),C=e=>(0,g.Z)(e)?(0,j.r)(e):e,b=({address:e,pubkey:t,handleChangeAddress:s,errors:i,isAddressValid:o,isValidatingAddress:c})=>{const{t:l}=(0,a.$)();return o&&!c?(0,n.jsx)(r.Input,{left:(0,n.jsx)(x.y,{size:"s",publicKey:t,"data-id":"contact-avatar"}),readOnly:!0,right:(0,n.jsx)(r.IconWithAction,{variant:"secondary",size:"s",icon:"close",onClick:e=>s("")}),value:C(e),hint:i&&(0,n.jsx)(r.InputHint,{variant:"error",hint:i})},"resolved address"):(0,n.jsx)(r.Input,{onChange:e=>s(e.target.value),placeholder:l("address_book_new_contact_address_solana"),value:e??"",variant:i?"error":void 0,hint:i&&(0,n.jsx)(r.InputHint,{variant:"error",hint:i}),right:c&&(0,n.jsx)(r.Loader,{size:"xs"})},"address")},k=()=>(0,n.jsx)(r.ListSection,{title:(0,n.jsx)(r.Section,{variant:"m",children:(0,n.jsx)(r.SkeletonSectionTitle,{})}),children:(0,n.jsx)(r.Section,{variant:"fullWidth",children:(0,n.jsx)(r.GeneralList,{extractKey:e=>e,data:[1,2,3,4],renderItem:e=>(0,n.jsx)(r.SkeletonListItemWallets,{})})})}),f=()=>{const{t:e}=(0,a.$)(),t=(0,o.s0)(),s=(0,i.useRef)(null),{address:h,pubkey:p}=(0,o.UO)(),_="undefined"===h?void 0:h,{handleChangeName:x,handleChangeAddress:g,address:j,name:m,isSubmitEnabled:C,isValidatingAddress:k,errors:f,isAddressValid:w,resolvedAddress:A}=(0,d.L8)({initialAddress:_??p,initialName:"",isAdd:!0}),{handleSubmitAddContact:v,isAddingContact:y}=(0,d.TA)();(0,i.useEffect)((()=>{s.current&&s.current.focus()}),[]);const S=(0,i.useCallback)((async()=>{C&&await v(m,j)}),[C,v,m,j]);return(0,n.jsx)(u.V$,{onClose:()=>t(l.s2.ADDRESS_BOOK.MAIN,{replace:!0}),title:e("address_book_new_contact"),onSubmit:S,footer:(0,n.jsx)(r.Button,{processing:k||y,disabled:!C,type:"submit",children:e("action_save")}),children:(0,n.jsx)(r.FormSectionContent,{children:(0,n.jsxs)(r.FormSection,{children:[(0,n.jsx)(r.Section,{children:(0,n.jsx)(r.Input,{ref:s,onChange:x,placeholder:e("address_book_new_contact_name"),maxLength:c.go,variant:f.name?"error":"default",hint:f.name&&(0,n.jsx)(r.InputHint,{variant:"error",hint:f.name})})}),(0,n.jsx)(r.Section,{children:(0,n.jsx)(b,{handleChangeAddress:g,address:j,pubkey:A??j,errors:f.address,isAddressValid:w,isValidatingAddress:k})})]})})})},w=()=>{const{t:e}=(0,a.$)(),t=(0,o.s0)(),{address:s,name:h}=(0,o.UO)(),p=(0,i.useRef)(null),{handleChangeName:_,handleChangeAddress:x,address:g,isAddressValid:j,isSubmitEnabled:m,isValidatingAddress:C,errors:k,name:f,resolvedAddress:w}=(0,d.L8)({initialAddress:s,initialName:h}),{handleSubmitEditContact:A,isEditingContact:v}=(0,d.TA)();(0,i.useEffect)((()=>{p.current&&p.current.focus()}),[]);const y=(0,i.useCallback)((async()=>{m&&s&&await A(f,g,s)}),[m,s,A,f,g]);return(0,n.jsx)(u.V$,{onClose:()=>t(l.s2.ADDRESS_BOOK.MAIN,{replace:!0}),title:e("address_book_edit_contact"),onSubmit:y,footer:(0,n.jsx)(r.Button,{disabled:!m,type:"submit",processing:C||v,children:e("action_save")}),children:(0,n.jsx)(r.FormSectionContent,{children:(0,n.jsxs)(r.FormSection,{children:[(0,n.jsx)(r.Section,{children:(0,n.jsx)(r.Input,{ref:p,value:f,maxLength:c.go,onChange:_,placeholder:e("address_book_new_contact_name"),variant:k.name?"error":"default",hint:k.name&&(0,n.jsx)(r.InputHint,{variant:"error",hint:k.name})})}),(0,n.jsx)(r.Section,{children:(0,n.jsx)(b,{handleChangeAddress:x,address:g,pubkey:w??g,errors:k.address,isAddressValid:j,isValidatingAddress:C})})]})})})};var A=s("../../libs/shared/dist/features/addressBook/context/index.js"),v=s("../../libs/shared/dist/features/recentAddresses/constants.js"),y=s("../../libs/shared/dist/features/recentAddresses/context/index.js"),S=s("../../libs/shared/dist/features/walletData/hooks/index.js"),I=s("../../libs/shared/dist/hooks/index.js");const P=({removeItem:e})=>{const{t}=(0,a.$)(),{handleRemoveContact:s,handleRemoveRecent:o}=(0,d.TA)(),[c,l]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{e&&l(!0)}),[e]),(0,n.jsxs)(r.Drawer,{onOpenChange:()=>l(!1),open:c,children:[(0,n.jsxs)(r.DrawerContent,{children:[(0,n.jsx)(r.DrawerTitle,{center:t("action_delete_contact")}),(0,n.jsx)(r.Section,{children:(0,n.jsxs)(r.RemoveItemSection,{children:[(0,n.jsx)(r.Paragraph,{size:"s",children:t("address_book_delete_confirm_message")}),(0,n.jsx)(r.ListItemRemoveWallet,{avatar:(0,n.jsx)(x.y,{publicKey:e.pubkey,"data-id":"contact-avatar"}),name:e.name,address:C(e.address)})]})})]}),(0,n.jsx)(r.DrawerActions,{children:(0,n.jsxs)(r.ButtonGroup,{children:[(0,n.jsx)(r.Button,{variant:"secondary",onClick:()=>{l(!1)},children:t("action_cancel")}),(0,n.jsx)(r.Button,{variant:"destructive",onClick:async()=>{"contact"===e.type?await s(e.address):o(e.address,e.name),l(!1)},children:t("action_confirm")})]})})]})},T=()=>{const{t:e}=(0,a.$)(),t=(0,o.s0)(),{openExplorer:s}=(0,I.Vf)(),{copy:c}=(0,I.c)(),{accounts:d}=(0,S.Rg)(),{addresses:u,isLoading:h}=(0,A.b)(),{addresses:p,isLoading:g}=(0,y.g)(),[j,b]=(0,i.useState)(null),f=(0,i.useMemo)((()=>p.filter((e=>!u.find((t=>t.address===(e.name??e.address)))&&!d.find((t=>t.publicKey===e.pubkey)))).slice(0,v.R)),[d,u,p]),w=(0,i.useMemo)((()=>[{data:u,searchFn:(e,t)=>{const s=t.toLowerCase();return e.name.toLowerCase().includes(s)||e.address.toLowerCase().includes(s)||e.pubkey.toLowerCase().includes(s)}},{data:f,searchFn:(e,t)=>{const s=t.toLowerCase();return e.address.toLowerCase().includes(s)||e.pubkey.toLowerCase().includes(s)||e.name?.toLowerCase().includes(s)}}]),[u,f]),{searchTerm:T,isEmptySearch:D,setSearchTerm:E,searchedData:[L,N]}=(0,I.rE)(w),R=h||g;return R||0!==u.length||0!==f.length?(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>{t(l.s2.MAIN,{replace:!0})}}),center:e("address_book_title"),right:(0,n.jsx)(r.IconWithAction,{icon:"add",size:"m",onClick:()=>t(l.s2.ADDRESS_BOOK.ADD)})}),(0,n.jsxs)(r.PageContent,{children:[(0,n.jsxs)(r.AddressBookContent,{children:[(0,n.jsx)(r.Section,{variant:"m",children:(0,n.jsx)(r.InputSearch,{placeholder:e("action_search"),value:T,onChange:e=>E(e.currentTarget.value),onClear:()=>E(""),disabled:h})}),D?(0,n.jsx)(r.Section,{variant:"m",children:(0,n.jsx)(r.EmptyState,{children:(0,n.jsx)(r.Paragraph,{textAlign:"center",children:e("address_book_empty_search")})})}):(0,n.jsx)(n.Fragment,{children:R?(0,n.jsx)(r.Section,{variant:"s",children:(0,n.jsx)(k,{})}):(0,n.jsxs)(n.Fragment,{children:[L.length>0&&(0,n.jsx)(r.ListSection,{title:(0,n.jsx)(r.Section,{variant:"m",children:(0,n.jsx)(r.SectionTitle,{title:e("contacts_title")})}),children:(0,n.jsx)(r.Section,{variant:"s",children:(0,n.jsx)(r.GeneralList,{extractKey:e=>e.address,data:L,renderItem:({address:i,pubkey:o,name:a},d)=>(0,n.jsx)(r.ListItemWallets,{onClick:()=>t(l.s2.ADDRESS_BOOK.EDIT(i,o,a)),avatar:(0,n.jsx)(x.y,{publicKey:o,address:i}),name:a,address:C(i),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.IconWithAction,{icon:"content_copy",size:"s",fill:!1,onClick:e=>{e.stopPropagation(),c(i)}}),(0,n.jsxs)(r.MoreOptionsDropdown,{trigger:(0,n.jsx)(r.IconWithAction,{icon:"more_vert",size:"s",onClick:e=>{e.stopPropagation()}}),children:[(0,n.jsxs)(r.MoreOptionsList,{children:[(0,n.jsx)(r.MoreOptionsDropdownItem,{icon:"edit",onClick:e=>{e.stopPropagation(),t(l.s2.ADDRESS_BOOK.EDIT(i,o,a))},children:e("address_book_edit_contact")}),(0,n.jsx)(r.MoreOptionsDropdownItem,{icon:"open_in_new",onClick:()=>{s({type:"account",address:o})},children:e("action_view_on_explorer")})]}),(0,n.jsx)(r.DividerV2,{}),(0,n.jsx)(r.MoreOptionsList,{children:(0,n.jsx)(r.MoreOptionsDropdownItem,{variant:"destructive",icon:"delete_outline",onClick:()=>{b({index:d,pubkey:o,address:i,name:a,type:"contact"})},children:e("action_delete")})})]})]})})})})}),N.length>0&&(0,n.jsx)(r.ListSection,{title:(0,n.jsx)(r.Section,{variant:"m",children:(0,n.jsx)(r.SectionTitle,{title:e("recent_title")})}),children:(0,n.jsx)(r.Section,{variant:"s",children:(0,n.jsx)(r.GeneralList,{extractKey:e=>e.name||e.pubkey,data:N,renderItem:({name:i,pubkey:o,address:a})=>(0,n.jsx)(r.ListItemRecentContact,{avatar:(0,n.jsx)(x.y,{publicKey:o,address:a}),address:m(a,i),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Button,{variant:"secondary",size:"s",onClick:()=>{t(l.s2.ADDRESS_BOOK.ADD_RECENT(o,i))},children:e("action_add")}),(0,n.jsxs)(r.MoreOptionsDropdown,{trigger:(0,n.jsx)(r.IconWithAction,{icon:"more_vert",size:"s"}),children:[(0,n.jsxs)(r.MoreOptionsList,{children:[(0,n.jsx)(r.MoreOptionsDropdownItem,{icon:"content_copy",iconFill:!1,onClick:()=>c(i||o),children:e("action_copy_address")}),(0,n.jsx)(r.MoreOptionsDropdownItem,{icon:"open_in_new",onClick:()=>{s({type:"account",address:o})},children:e("action_view_on_explorer")})]}),(0,n.jsx)(r.DividerV2,{}),(0,n.jsx)(r.MoreOptionsList,{children:(0,n.jsx)(r.MoreOptionsDropdownItem,{icon:"delete_outline",variant:"destructive",onClick:()=>{b({pubkey:o,address:a,name:i??void 0,type:"recent"})},children:e("action_delete")})})]})]})})})})})]})})]}),j&&(0,n.jsx)(P,{removeItem:j})]})]}):(0,n.jsx)(_,{})},D=()=>(0,o.V$)([{path:"",element:(0,n.jsx)(o.j3,{}),children:[{index:!0,element:(0,n.jsx)(T,{})},{path:"add/:pubkey/:address",element:(0,n.jsx)(f,{})},{path:"add",element:(0,n.jsx)(f,{})},{path:"edit/:address/:pubkey/:name",element:(0,n.jsx)(w,{})}]}]);var E=s("../../libs/shared/dist/features/currencies/constants.js"),L=s("../../libs/shared/dist/features/settings/index.js");const N=()=>{const{t:e}=(0,a.$)(),{currencies:t,current:s,changeCurrency:i}=(0,L.q)(),c=(0,o.s0)();return(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>c(l.s2.GENERAL.MAIN,{replace:!0})}),center:e("settings_primary_currency_title")}),(0,n.jsx)(r.PageContent,{overflow:!0,children:(0,n.jsx)(r.SettingsList,{data:t.map((e=>({selected:e.ticker===s,title:e.name,icon:(0,n.jsx)(r.ImageIcon,{size:"s",src:E.ih[e.ticker]}),onClick:()=>(async e=>{await i(e.ticker),c(l.s2.GENERAL.MAIN,{replace:!0})})(e),key:e.ticker})))})})]})},R=()=>{const{t:e}=(0,a.$)(),{current:t,languages:s,changeLanguage:i}=(0,L.ix)(),c=(0,o.s0)();return(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>c(l.s2.GENERAL.MAIN,{replace:!0})}),center:e("settings_language")}),(0,n.jsx)(r.PageContent,{overflow:!0,children:(0,n.jsx)(r.SettingsList,{data:s.map((e=>({selected:e.id===t,title:e.label,icon:(0,n.jsx)(r.ImageIcon,{size:"s",src:e.flag}),onClick:()=>(e=>{i(e.id),c(l.s2.GENERAL.MAIN,{replace:!0})})(e),key:e.id})))})})]})};var z=s("../../libs/shared/dist/features/currencies/hooks/index.js"),M=s("../../libs/shared/dist/features/globalConfig/hooks/index.js"),O=s("../../libs/shared/dist/features/localization/index.js");const B=()=>{const{t:e,i18n:t}=(0,a.$)(),s=(0,o.s0)(),i=(0,z.Af)(),c=O.M[t.language]?.label||O.M.en.label,d=(0,M.LN)();return(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>s(l.s2.MAIN,{replace:!0})}),center:e("settings_main_general")}),(0,n.jsx)(r.PageContent,{children:(0,n.jsx)(r.SettingsList,{data:[{title:e("settings_language"),subtitle:c,icon:"public",onClick:()=>s(l.s2.GENERAL.LANGUAGE)},{title:e("settings_primary_currency"),subtitle:i.name,icon:"attach_money",onClick:()=>s(l.s2.GENERAL.CURRENCY)},{title:e("network_title"),subtitle:d.name,icon:"hub",onClick:()=>s(l.s2.GENERAL.NETWORK)}]})})]})};var $=s("../../libs/shared/dist/constants/networks.js");const W=()=>{const{t:e}=(0,a.$)(),t=(0,o.s0)(),{current:s,changeNetwork:i}=(0,L.Q$)();return(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>t(l.s2.GENERAL.MAIN,{replace:!0})}),center:e("network_change_title")}),(0,n.jsx)(r.PageContent,{overflow:!0,children:(0,n.jsx)(r.SettingsList,{data:Object.keys($.g5).map((e=>{const n=$.g5[e];return{selected:e===s,title:n.name,onClick:()=>(async e=>{await i(e)&&t(l.s2.GENERAL.MAIN,{replace:!0})})(e),key:e}}))})})]})},F=()=>(0,o.V$)([{path:"",element:(0,n.jsx)(o.j3,{}),children:[{index:!0,element:(0,n.jsx)(B,{})},{path:"language",element:(0,n.jsx)(R,{})},{path:"currency",element:(0,n.jsx)(N,{})},{path:"network",element:(0,n.jsx)(W,{})}]}]);var U=s("../../libs/shared/dist/utils/tabs.js");const V=()=>{const{t:e}=(0,a.$)(),t=(0,o.s0)(),s=(0,M.LN)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.PageTitle,{center:e("header_settings"),textAlign:"left"}),(0,n.jsx)(r.PageContent,{children:(0,n.jsx)(r.SettingsList,{data:[{title:e("settings_main_general"),subtitle:e("settings_main_general_description2"),icon:"tune",onClick:()=>t(l.s2.GENERAL.MAIN)},{title:e("settings_address_book_header"),subtitle:e("settings_address_book_description"),icon:"contact_page",onClick:()=>t(l.s2.ADDRESS_BOOK.MAIN)},...s.cluster===$.EE.mainnet?[{title:e("settings_notifications"),subtitle:e("settings_main_notifications_description2"),icon:"notifications_none",onClick:()=>t(l.s2.NOTIFICATIONS.MAIN)}]:[],{title:e("settings_main_security_privacy"),subtitle:e("settings_main_security_privacy_description"),icon:"shield",onClick:()=>t(l.s2.SECURITY.MAIN)},{title:e("support_settings_ext_title"),subtitle:e("support_settings_ext_subtitle"),icon:"live_help",action:(0,n.jsx)(r.IconWithAction,{icon:"open_in_new"}),onClick:()=>window.open("https://help.solflare.com/en/","_blank")},{title:e("settings_main_expanded_view"),subtitle:e("settings_main_expanded_view_description"),icon:"expand_content",action:(0,n.jsx)(r.IconWithAction,{icon:"open_in_new"}),onClick:()=>(0,U.A)("/wallet.html#/portfolio")}]})})]})};var G=s("../../libs/shared/dist/features/settings/hooks/index.js"),H=s("../../libs/shared/dist/features/settings/notifications/notificationPreferences.js");const K=({preference:e,onClose:t})=>{const{t:s}=(0,a.$)(),[o,c]=(0,i.useState)("current"),{accountName:l}=(0,S.rT)(),{accounts:d}=(0,S.Rg)(),{setPreferenceEnabled:u}=(0,G.up)(),h=!e.enabled;return(0,n.jsxs)(r.Drawer,{open:!0,onOpenChange:t,children:[(0,n.jsxs)(r.DrawerContent,{children:[(0,n.jsx)(r.DrawerTitle,{center:s(h?"platform_notifications_subscribe":"platform_notifications_unsubscribe")}),(0,n.jsxs)(r.SubscribeNotifications,{children:[(0,n.jsx)(r.Section,{children:(0,n.jsxs)(r.Paragraph,{size:"s",children:[s(h?"platform_notifications_get_notifications_for":"platform_notifications_stop_notifications_for"),":"]})}),(0,n.jsx)(r.Section,{children:(0,n.jsxs)(r.SubscribeNotifications,{children:[(0,n.jsx)(r.SubscribeListItem,{title:(0,H.Zj)(e.id,s)}),d&&d.length>1&&(0,n.jsxs)(r.RadioButtonGroup,{name:"applyFor",value:o,onValueChange:c,children:[(0,n.jsx)(r.RadioButton,{id:"current",value:"current",label:(0,n.jsx)(r.RadioButtonLabel,{htmlFor:"current",children:l})}),(0,n.jsx)(r.RadioButton,{id:"all",value:"all",label:(0,n.jsx)(r.RadioButtonLabel,{htmlFor:"all",children:s("notifications_apply_all_wallets")})})]})]})})]})]}),(0,n.jsx)(r.DrawerActions,{children:(0,n.jsxs)(r.ButtonGroup,{children:[(0,n.jsx)(r.Button,{variant:"secondary",onClick:t,children:s("action_cancel")}),(0,n.jsx)(r.Button,{variant:h?"primary":"destructive",onClick:async s=>{s.preventDefault(),await u(e.id,!e.enabled,"all"===o),t()},children:s("action_confirm")})]})})]})},Y=()=>{const{t:e}=(0,a.$)(),t=(0,o.s0)(),{preferences:s}=(0,L.up)(),[c,d]=(0,i.useState)(null);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>t(l.s2.NOTIFICATIONS.MAIN,{replace:!0})}),center:e("notifications_settings_activity_title")}),(0,n.jsx)(r.PageContent,{overflow:!0,children:(0,n.jsx)(r.SettingsContent,{children:(0,n.jsx)(r.SettingsList,{data:s.map((t=>({title:(0,H.Zj)(t.id,e),subtitle:(0,H.vv)(t.id,e),action:(0,n.jsx)(r.Toggle,{checked:t.enabled,onCheckedChange:()=>d(t)}),key:t.id})))})})})]}),!!c&&(0,n.jsx)(K,{preference:c,onClose:()=>d(null)})]})},Z=()=>{const e=(0,o.s0)(),{t}=(0,a.$)(),{webPushEnabled:s,webPushBlocked:i,setNotificationsEnabled:c}=(0,L.up)();return(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>e(l.s2.MAIN,{replace:!0})}),center:t("notifications_settings_title")}),(0,n.jsx)(r.PageContent,{children:(0,n.jsx)(r.SettingsList,{data:[{title:t("settings_notification_push_notifications_title"),subtitle:t(i?"settings_notification_push_notifications_permission_required":"settings_notification_push_notifications_description"),icon:"notifications_none",action:(0,n.jsx)(r.Toggle,{disabled:i,checked:s,onCheckedChange:()=>c(!s)}),disabled:i},...s?[{title:t("notifications_settings_activity_title_lowercase"),subtitle:t("notifications_settings_activity_description"),icon:"history",onClick:()=>e(l.s2.NOTIFICATIONS.ACTIVITY)}]:[]]})})]})},q=()=>(0,o.V$)([{path:"",element:(0,n.jsx)(o.j3,{}),children:[{index:!0,element:(0,n.jsx)(Z,{})},{path:"activity",element:(0,n.jsx)(Y,{})}]}]);var Q=s("../../libs/shared/dist/constants/autolock.js");const X=()=>{const{t:e}=(0,a.$)(),{autoLock:t,changeAutoLock:s}=(0,M.ec)(),i=(0,o.s0)(),{locked:c}=(0,S.Rg)();return c?(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>i(l.s2.SECURITY.MAIN,{replace:!0})}),center:e("settings_security_autolock_header")}),(0,n.jsx)(r.PageContent,{overflow:!0,children:(0,n.jsx)(r.SettingsContent,{children:(0,n.jsx)(r.SettingsList,{data:Q.GC.map(((e,n)=>({selected:e.value===t.time,title:e.label,onClick:()=>(e=>{s(e),i(l.s2.SECURITY.MAIN,{replace:!0})})(e.value),key:n})))})})})]}):(0,n.jsx)(o.Fg,{to:l.s2.SECURITY.MAIN,replace:!0})},J=(0,s("../../../node_modules/@emotion/styled/dist/emotion-styled.browser.esm.js").Z)("form")({display:"flex",flexDirection:"column",flex:1}),ee=()=>{const{t:e}=(0,a.$)(),t=(0,o.s0)(),{values:s,setValue:c,errors:d,changePassword:u,disableSubmit:h,requireCurrentPassword:p}=(0,L.LN)(),[_,x]=(0,i.useState)({}),g=e=>{c(e.target.name,e.target.value)},j=e=>()=>{x((t=>({...t,[e]:!t[e]})))},m=e=>_[e]?"visibility_off":"visibility";return(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>t(l.s2.SECURITY.MAIN,{replace:!0})}),center:e(p?"password_change":"settings_security_set_password")}),(0,n.jsxs)(J,{onSubmit:async e=>{e.preventDefault(),await u()&&t(l.s2.SECURITY.MAIN,{replace:!0})},children:[(0,n.jsx)(r.PageContent,{children:(0,n.jsx)(r.Section,{variant:"m",children:(0,n.jsx)(r.SettingsContent,{children:(0,n.jsx)(r.FormSectionContent,{children:(0,n.jsxs)(r.FormSection,{children:[p&&(0,n.jsx)(r.Input,{autoFocus:!0,placeholder:e("form_current_password_lowercase"),type:_.currentPassword?"text":"password",name:"currentPassword",value:s.currentPassword,onChange:g,variant:d.currentPassword?"error":"default",hint:d.currentPassword&&(0,n.jsx)(r.InputHint,{variant:"error",hint:d.currentPassword}),right:(0,n.jsx)(r.IconWithAction,{tabIndex:-1,icon:m("currentPassword"),onClick:j("currentPassword"),variant:"secondary"})}),(0,n.jsx)(r.Input,{autoFocus:!p,placeholder:e("form_new_password_lowercase"),type:_.newPassword?"text":"password",name:"newPassword",value:s.newPassword,onChange:g,variant:d.newPassword?"error":"default",hint:d.newPassword&&(0,n.jsx)(r.InputHint,{variant:"error",hint:d.newPassword}),right:(0,n.jsx)(r.IconWithAction,{tabIndex:-1,icon:m("newPassword"),onClick:j("newPassword"),variant:"secondary"})}),(0,n.jsx)(r.Input,{placeholder:e("form_repeat_password_lowercase"),type:_.repeatPassword?"text":"password",name:"repeatPassword",value:s.repeatPassword,onChange:g,variant:d.repeatPassword?"error":"default",hint:d.repeatPassword&&(0,n.jsx)(r.InputHint,{variant:"error",hint:d.repeatPassword}),right:(0,n.jsx)(r.IconWithAction,{tabIndex:-1,icon:m("repeatPassword"),onClick:j("repeatPassword"),variant:"secondary"})})]})})})})}),(0,n.jsx)(r.FooterActions,{children:(0,n.jsx)(r.Button,{disabled:h,type:"submit",children:e("action_confirm")})})]})]})};var te=s("../../../node_modules/@fortawesome/free-brands-svg-icons/index.mjs"),se=s("../../libs/shared/dist/features/confirmDialog/context/index.js"),ne=s("../../libs/shared/dist/utils/featureFlags.js"),ie=s("../../libs/shared/dist/storage/solflareService.js"),oe=s("../../libs/shared/dist/utils/extension.js"),ae=s("../../libs/shared/dist/hooks/useLogout.js");const re=({onCancel:e})=>{const{t}=(0,a.$)(),s=(0,ae.a)(),[o,c]=(0,i.useState)(!1);return(0,n.jsxs)(r.Drawer,{onOpenChange:e,open:!0,children:[(0,n.jsxs)(r.DrawerContent,{children:[(0,n.jsx)(r.DrawerTitle,{center:t("header_settings_logout")}),(0,n.jsxs)(r.InformationSection,{children:[(0,n.jsx)(r.Section,{children:(0,n.jsx)(r.InfoBox,{variant:"error",title:t("unlock_and_forgot_clear_warning_card_header"),message:t("settings_security_log_out_error")})}),(0,n.jsx)(r.Section,{children:(0,n.jsx)(r.Paragraph,{size:"s",children:t("settings_security_log_out_notice")})}),(0,n.jsx)(r.Section,{children:(0,n.jsx)(r.Control,{id:"logout-check",label:t("settings_security_log_out_checkbox_label"),action:(0,n.jsx)(r.Checkbox,{checked:o,onChange:e=>c(!!e.target.checked)})})})]})]}),(0,n.jsx)(r.DrawerActions,{children:(0,n.jsxs)(r.ButtonGroup,{children:[(0,n.jsx)(r.Button,{variant:"secondary",onClick:e,children:t("action_cancel")}),(0,n.jsx)(r.Button,{variant:"destructive",onClick:async e=>{e.preventDefault(),o&&(await s(),window.location.reload())},disabled:!o,children:t("action_logout")})]})})]})},ce=()=>{const{t:e}=(0,a.$)(),t=(0,o.s0)(),{lock:s}=(0,S.bg)(),{locked:c}=(0,S.Rg)(),{autoLock:d}=(0,M.ec)(),{isBalanceHidden:u,setHideBalancesEnabled:h}=(0,L.sC)(),{confirm:p}=(0,se.O)(),[_,x]=(0,i.useState)(!1),[g,j]=(0,i.useState)(!1),{closableNotification:m}=(0,I.hn)();return(0,i.useEffect)((()=>{!async function(){const e=await ie.Z.solanaActions.get();j(e)}()}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>t(l.s2.MAIN,{replace:!0})}),center:e("settings_main_security_privacy")}),(0,n.jsx)(r.PageContent,{children:(0,n.jsx)(r.SettingsList,{data:[{title:e("settings_security_trusted_apps"),subtitle:e("settings_security_trusted_apps_description"),icon:"list_alt",onClick:()=>t(l.s2.SECURITY.TRUSTED_APPS.MAIN)},{title:e("settings_security_spending_approvals"),subtitle:e("settings_security_spending_approvals_description"),icon:"link",onClick:()=>t(l.s2.SECURITY.SPENDING_APPROVALS.MAIN)},...c?[{title:e("settings_security_autolock_header"),subtitle:d.enabled?Q.qA[d.time]||`${d.time} minutes`:e("settings_security_autolock_disabled"),icon:"timer",onClick:()=>t(l.s2.SECURITY.AUTO_LOCK)}]:[],{title:e("settings_security_hide_balances"),subtitle:e("settings_security_hide_balances_subtitle"),icon:"visibility_off",action:(0,n.jsx)(r.Toggle,{checked:u,onCheckedChange:e=>{h(e)}})},...oe.Qd?[]:[{title:e("solana_actions"),subtitle:e("solana_actions_enable"),icon:(0,n.jsx)(r.FontAwesomeIcon,{size:"m",icon:te.NCc,style:{color:"rgba(245, 248, 255, 0.4)"}}),action:(0,n.jsx)(r.Toggle,{checked:g,onCheckedChange:async()=>{await ie.Z.solanaActions.set(!g),j(!g),(async e=>{ne.Z.c("SettingsSecurity","SolanaActions",{areSolanaActionsEnabled:e},{},{areSolanaActionsEnabled:e})})(!g),m({message:e("solana_actions_refresh_page"),variant:"info",autoHideDuration:5e3})}})}],{title:e(c?"settings_security_change_password":"settings_security_set_password"),subtitle:e(c?"settings_security_change_password_description":"settings_security_set_password_description"),icon:"key",onClick:()=>t(l.s2.SECURITY.CHANGE_PASSWORD)},...c?[{title:e("action_lock"),subtitle:e("settings_security_lock_description"),icon:"lock",onClick:async()=>{await s(),window.close()}}]:[],{title:e("action_logout"),subtitle:e("settings_security_anonymous_log_out"),icon:"login",destructive:!0,onClick:async()=>{const t=await p({title:e("header_settings_logout"),message:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Section,{children:(0,n.jsx)(r.InfoBox,{title:e("unlock_and_forgot_caution_warning_card_header"),variant:"warning",message:e("settings_main_security_privacy_log_out_caution")})}),(0,n.jsx)(r.Section,{children:(0,n.jsx)(r.Paragraph,{size:"s",children:e("settings_main_security_privacy_log_out_caution_description")})})]}),confirmButtonText:e("action_continue"),cancelButtonText:e("action_cancel")});x(t)}}]})})]}),_&&(0,n.jsx)(re,{onCancel:()=>x(!1)})]})};var le=s("../../libs/shared/dist/components/index.js"),de=s("../../libs/shared/dist/utils/displayPrice.js");const ue=()=>{const{t:e}=(0,a.$)(),t=(0,o.s0)(),{items:s,itemsById:c,isLoading:d}=(0,G.o4)(),{mode:u,selected:_,setSelected:x}=(0,G.L7)(),g="select"===u||_.size>0,m=(0,i.useCallback)((e=>()=>{x((t=>(t.has(e)?t.delete(e):t.set(e,!0),new Map(t))))}),[x]),C=(0,i.useCallback)((e=>{if(!g)return()=>{t(l.s2.SECURITY.SPENDING_APPROVALS.DETAILS(e))}}),[t,g]);return d?(0,n.jsx)(r.GeneralList,{data:Array.from({length:5}).map(((e,t)=>t)),renderItem:()=>(0,n.jsx)(r.SkeletonListItemDelegationCenter,{}),extractKey:e=>e}):0===s.length?(0,n.jsx)(r.ContentWrapper,{children:(0,n.jsx)(r.EmptyState,{illustration:(0,n.jsx)(h.Z,{loop:!0,play:!0,animationData:p}),title:(0,n.jsx)(r.Title,{textAlign:"center",children:e("settings_security_spending_approvals_empty")}),children:(0,n.jsx)(r.Paragraph,{textAlign:"center",size:"s",children:e("settings_security_spending_approvals_empty_message")})})}):(0,n.jsx)(r.GeneralList,{data:s,renderItem:e=>{const{type:t,tokenId:s,info:i,delegation:o}=c[e];return(0,n.jsx)(r.SelectableListItem,{selectable:g,selected:!!_.get(e),onSelect:m(e),onClick:C(e),children:(0,n.jsx)(r.ListItemDelegationCenter,{avatar:"nft"===t?(0,n.jsx)(r.NFTAvatar,{src:i.image}):(0,n.jsx)(le.yY,{src:i.image,verified:i.verified}),title:i.name||(0,j.r)(s),subtitle:(0,j.r)(o.address),amount:"token"===t?(0,de.ED)({amount:o.uiAmount,displayType:"amount",pricePerCoin:i.price||0}):void 0})})},extractKey:e=>e})},he=()=>{const{t:e}=(0,a.$)(),{items:t}=(0,G.o4)(),{selected:s,mode:i,setMode:o,setSelected:c}=(0,G.L7)(),l="select"===i||0!==s.size;return(0,n.jsx)(r.MoreOptionsDropdown,{trigger:(0,n.jsx)(r.IconWithAction,{icon:"more_vert",size:"m"}),children:(0,n.jsxs)(r.MoreOptionsList,{children:[!l&&(0,n.jsx)(r.MoreOptionsDropdownItem,{size:"s",onClick:()=>o("select"),children:e("action_select")}),s.size!==t.length&&(0,n.jsx)(r.MoreOptionsDropdownItem,{size:"s",onClick:()=>{c(new Map(t.map((e=>[e,!0]))))},children:e("action_select_all")}),l&&s.size>0&&(0,n.jsx)(r.MoreOptionsDropdownItem,{size:"s",onClick:()=>{c(new Map),o("none")},children:e("action_deselect_all")})]})})},pe=()=>{const e=(0,o.s0)(),{t}=(0,a.$)(),{isLoading:s,items:c,revokeMultiple:d}=(0,L.o4)(),{mode:u,selected:h,setMode:p,setSelected:_}=(0,L.L7)(),x=(0,i.useCallback)((async()=>{0!==h.size&&(await d(Array.from(h.keys())),_(new Map),p("none"))}),[h,d,_,p]),g=(0,i.useCallback)((()=>{p("none"),_(new Map)}),[p,_]),j="select"===u||h.size>0;return(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>e(l.s2.SECURITY.MAIN,{replace:!0})}),center:t("settings_security_spending_approvals_title"),right:(s||0!==c.length)&&(0,n.jsx)(he,{})}),(0,n.jsx)(r.PageContent,{children:(0,n.jsx)(r.Section,{variant:"s",children:(0,n.jsx)(ue,{})})}),j&&(0,n.jsx)(r.NavigationActions,{position:"fixed",left:(0,n.jsx)(r.Paragraph,{children:t("nfts_actions_total_selected",{count:h.size})}),children:(0,n.jsxs)(r.ButtonGroup,{children:[(0,n.jsx)(r.Button,{size:"s",variant:"secondary",width:"hug",onClick:g,children:t("action_cancel")}),(0,n.jsx)(r.Button,{variant:"destructive",width:"hug",size:"s",onClick:x,disabled:0===h.size,children:t("action_revoke")})]})})]})};var _e=s("../../libs/shared/dist/hooks/useResizedImage.js");const xe=()=>{const e=(0,o.s0)(),{address:t}=(0,I.nc)(["address"]),{openExplorer:s}=(0,I.Vf)(),{copy:i}=(0,I.c)(),{isLoading:c,itemsById:d,revoke:u}=(0,L.o4)(),{t:h}=(0,a.$)(),p=d[t],{url:_}=(0,_e.j)(p?.info?.image);return c?null:p?(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>e(l.s2.SECURITY.SPENDING_APPROVALS.MAIN,{replace:!0})}),center:p.info.name||(0,j.r)(p.tokenId),right:(0,n.jsx)(r.MoreOptionsDropdown,{modal:!1,trigger:(0,n.jsx)(r.IconWithAction,{icon:"more_vert",size:"m"}),children:(0,n.jsx)(r.MoreOptionsDropdownItem,{size:"s",onClick:()=>s({type:"token",address:p.address}),children:h("action_view_in_explorer")})})}),(0,n.jsx)(r.PageContent,{children:(0,n.jsxs)(r.DetailsSection,{children:[(0,n.jsx)(r.DetailsSectionRow,{title:(0,n.jsx)(r.SectionTitle,{title:"nft"===p.type?h("table_collectible"):h("table_token")}),children:(0,n.jsxs)(r.DetailSectionRowContent,{children:["nft"===p.type?(0,n.jsx)(r.NFTAvatar,{src:_,size:"s"}):(0,n.jsx)(le.yY,{src:_,verified:p.info.verified,size:"s"}),(0,n.jsx)(r.DetailsSectionRowContentText,{children:p.info.name||(0,j.r)(p.tokenId)})]})}),(0,n.jsx)(r.DetailsSectionRow,{title:(0,n.jsx)(r.SectionTitle,{title:h("table_amount")}),children:(0,n.jsx)(r.DetailsSectionRowContentText,{children:(0,de.ED)({amount:p.delegation.uiAmount,displayType:"amount",pricePerCoin:p.info.price||0,suffix:"token"===p.type&&p.info.symbol?` ${p.info.symbol}`:""})})}),(0,n.jsx)(r.DetailsSectionRow,{title:(0,n.jsx)(r.SectionTitle,{title:h("table_address")}),children:(0,n.jsxs)(r.DetailSectionRowContent,{children:[(0,n.jsx)(x.y,{publicKey:p.delegation.address,size:"s"}),(0,n.jsx)(r.DetailsSectionRowContentText,{children:(0,j.r)(p.delegation.address)}),(0,n.jsx)(r.IconWithAction,{size:"s",icon:"content_copy",fill:!1,variant:"secondary",onClick:()=>i(p.delegation.address)})]})})]})}),(0,n.jsx)(r.FooterActions,{children:(0,n.jsx)(r.Button,{variant:"destructive",onClick:async s=>{s.preventDefault(),await u(t),e(l.s2.SECURITY.SPENDING_APPROVALS.MAIN,{replace:!0})},children:h("action_revoke")})})]}):(0,n.jsx)(o.Fg,{to:l.s2.SECURITY.SPENDING_APPROVALS.MAIN,replace:!0})},ge=()=>(0,o.V$)([{path:"",element:(0,n.jsx)(L.K7,{children:(0,n.jsx)(o.j3,{})}),children:[{index:!0,element:(0,n.jsx)(L.XB,{children:(0,n.jsx)(pe,{})})},{path:":address",element:(0,n.jsx)(xe,{})}]}]);var je=s("../../libs/shared/dist/features/shared/autoApproveApps/index.js");const me=()=>{const{t:e}=(0,a.$)(),{origin:t}=(0,I.nc)(["origin"]),s=(0,o.s0)(),i=decodeURIComponent(t),{appsByOrigin:c,setAppAutoConnect:d,setAppAutoApprove:u,canChangeAutoApprove:h,removeApp:p}=(0,L.Ql)(),_=h(i),x=c[i];return x?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>s(l.s2.SECURITY.TRUSTED_APPS.MAIN,{replace:!0})}),center:x.title||x.origin,right:(0,n.jsx)(r.MoreOptionsDropdown,{trigger:(0,n.jsx)(r.IconWithAction,{icon:"more_vert",size:"m"}),children:(0,n.jsxs)(r.MoreOptionsList,{children:[(0,n.jsx)(r.MoreOptionsDropdownItem,{size:"s",icon:"open_in_new",onClick:()=>window.open(x.origin,"_blank","noopener noreferrer"),children:e("action_open_app")}),(0,n.jsx)(r.MoreOptionsDropdownItem,{size:"s",icon:"delete_outline",onClick:async()=>{await p(x)&&s(l.s2.SECURITY.TRUSTED_APPS.MAIN,{replace:!0})},variant:"destructive",children:e("action_remove_app")})]})})}),(0,n.jsx)(r.PageContent,{overflow:!0,children:(0,n.jsx)(r.ManageAppsContent,{children:(0,n.jsx)(r.SettingsList,{data:[{title:e("settings_trusted_apps_options_autoconnect"),subtitle:e("settings_trusted_apps_options_autoconnect_description"),icon:"link",action:(0,n.jsx)(r.Toggle,{checked:x.autoConnect,onCheckedChange:()=>d(i,!x.autoConnect)})},{disabled:!_,title:e("settings_trusted_apps_options_autoapprove"),subtitle:e(_?"settings_trusted_apps_options_autoapprove_description_burner":"settings_trusted_apps_options_autoapprove_description"),icon:"bolt",iconFill:!1,action:(0,n.jsx)(r.Toggle,{disabled:!_,checked:x.autoApprove,onCheckedChange:()=>u(i,!x.autoApprove)})}]})})})]})}):(0,n.jsx)(o.Fg,{to:l.s2.SECURITY.TRUSTED_APPS.MAIN,replace:!0})};var Ce=s("../../../node_modules/lodash/lodash.js");const be=({isLoading:e})=>{const{t}=(0,a.$)(),s=(0,o.s0)(),[c,d]=(0,i.useState)(""),{apps:u,removeApp:_}=(0,L.Ql)(),x=(0,i.useMemo)((()=>{const e=c.trim().toLowerCase();let t=u;return e&&(t=u.filter((t=>t.origin?.toLowerCase()?.includes(e)||t.title?.toLowerCase()?.includes(e)))),(0,Ce.orderBy)(t.map((e=>{return{...e,originalOrigin:e.origin,origin:(t=e.origin,t.replace(/^https?:\/\//,"")),logoUrl:e.logoUrl||`https://www.google.com/s2/favicons?domain=${e.origin}&sz=128`,lastConnected:e.lastConnected||0};var t})),["lastConnected"],["desc"])}),[u,c]);return e?(0,n.jsx)(r.ManageAppsContent,{children:(0,n.jsx)(r.Section,{variant:"s",children:Array.from({length:5}).map(((e,t)=>(0,n.jsx)(r.SkeletonListItemApp,{},t)))})}):0===u.length?(0,n.jsx)(r.Section,{variant:"m",children:(0,n.jsx)(r.EmptyState,{illustration:(0,n.jsx)(h.Z,{loop:!0,play:!0,animationData:p}),title:(0,n.jsx)(r.Title,{textAlign:"center",children:t("settings_trusted_apps_empty")}),children:(0,n.jsx)(r.Paragraph,{size:"s",textAlign:"center",children:t("settings_trusted_apps_empty_message")})})}):(0,n.jsxs)(r.ManageAppsContent,{children:[(0,n.jsx)(r.Section,{variant:"m",children:(0,n.jsx)(r.InputSearch,{value:c,onChange:e=>d(e.currentTarget.value),onClear:()=>d(""),placeholder:t("form_search_placeholder")})}),0===x.length?(0,n.jsx)(r.EmptyState,{children:(0,n.jsx)(r.Paragraph,{textAlign:"center",children:t("settings_trusted_apps_search_empty_message")})}):(0,n.jsx)(r.Section,{variant:"s",children:(0,n.jsx)(r.GeneralList,{extractKey:e=>e.origin,data:x,renderItem:e=>(0,n.jsx)(r.ListItemApp,{image:(0,n.jsx)(r.DappAvatar,{src:e.logoUrl}),name:e.title||e.origin,address:e.title?e.origin:void 0,onClick:()=>s(l.s2.SECURITY.TRUSTED_APPS.DETAILS(encodeURIComponent(e.originalOrigin)),{replace:!0}),action:(0,n.jsx)(r.MoreOptionsDropdown,{trigger:(0,n.jsx)(r.IconWithAction,{onClick:e=>{e.stopPropagation()},icon:"more_vert",size:"m"}),children:(0,n.jsxs)(r.MoreOptionsList,{children:[(0,n.jsx)(r.MoreOptionsDropdownItem,{size:"s",icon:"open_in_new",onClick:()=>window.open(e.originalOrigin,"_blank","noopener noreferrer"),children:t("action_open_app")}),(0,n.jsx)(r.MoreOptionsDropdownItem,{size:"s",icon:"delete_outline",onClick:()=>_({...e,origin:e.originalOrigin}),variant:"destructive",children:t("action_remove_app")})]})})})})})]})},ke=({isLoading:e})=>{const{t}=(0,a.$)(),s=(0,o.s0)();return(0,n.jsxs)(r.PagePortal,{size:"fullPageNoHeader",children:[(0,n.jsx)(r.PageTitle,{left:(0,n.jsx)(r.IconWithAction,{icon:"arrow_back",size:"m",onClick:()=>s(l.s2.SECURITY.MAIN,{replace:!0})}),center:t("settings_security_trusted_apps_title")}),(0,n.jsx)(r.PageContent,{children:(0,n.jsx)(be,{isLoading:e})})]})},fe=()=>{const[e,t]=(0,i.useState)(!1);(0,je.L)();const{loadTrustedApps:s}=(0,L.ks)();return(0,i.useEffect)((()=>{s().then((()=>t(!0)))}),[s]),(0,o.V$)([{path:"",children:[{index:!0,element:(0,n.jsx)(ke,{isLoading:!e})},{path:":origin",element:(0,n.jsx)(me,{})}]}])},we=()=>(0,o.V$)([{path:"",element:(0,n.jsx)(o.j3,{}),children:[{index:!0,element:(0,n.jsx)(ce,{})},{path:"trusted/*",element:(0,n.jsx)(fe,{})},{path:"spending-approvals/*",element:(0,n.jsx)(ge,{})},{path:"autoLock",element:(0,n.jsx)(X,{})},{path:"changePassword",element:(0,n.jsx)(ee,{})}]}]),Ae=()=>(0,o.V$)([{index:!0,element:(0,n.jsx)(V,{})},{path:"general/*",element:(0,n.jsx)(F,{})},{path:"notifications/*",element:(0,n.jsx)(q,{})},{path:"security/*",element:(0,n.jsx)(we,{})},{path:"address-book/*",element:(0,n.jsx)(D,{})}])}}]);